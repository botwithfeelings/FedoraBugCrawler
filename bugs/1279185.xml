<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1279185</bug_id>

    <creation_ts>2015-11-08 08:29:00 -0500</creation_ts>
    <short_desc>dnf searches in /etc/yum.repos.d/*.repo when using --installroot</short_desc>
    <delta_ts>2016-10-04 15:14:33 -0400</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>dnf</component>
    <version>24</version>
    <rep_platform>Unspecified</rep_platform>
    <op_sys>Unspecified</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>RAWHIDE</resolution>

    <see_also>https://bugzilla.redhat.com/show_bug.cgi?id=1163028</see_also>
    <bug_file_loc></bug_file_loc>
    <status_whiteboard></status_whiteboard>
    <keywords>Reopened</keywords>
    <priority>unspecified</priority>
    <bug_severity>unspecified</bug_severity>
    <target_milestone>---</target_milestone>

    <everconfirmed>1</everconfirmed>
    <reporter name="Ali Akcaagac">aliakc</reporter>
    <assigned_to name="Jaroslav Mracek">jmracek</assigned_to>
    <cc>jef.oliver</cc>

    <cc>jmracek</cc>

    <cc>jsilhan</cc>

    <cc>mluscon</cc>

    <cc>msuchy</cc>

    <cc>packaging-team-maint</cc>

    <cc>pnemade</cc>

    <cc>vmukhame</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in></cf_fixed_in>
  <cf_doc_type>Bug Fix</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2016-07-21 10:15:05</cf_last_closed>
<cf_type>Bug</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>8801030</commentid>
<comment_count>0</comment_count>
<who name="Ali Akcaagac">aliakc</who>
<bug_when>2015-11-08 08:29:28 -0500</bug_when>
<thetext>I hit a strange behaviour, when using dnf with the --installroot option. To explain it better, let&apos;s use yum for this example: yum update --installroot=/&lt;somepath&gt; When issuing this command, the following happens: 1) yum uses the
repo files located in /&lt;somepath&gt;/etc/yum.repos.d/.*repo 2) yum uses the cache of /&lt;somepath&gt;/cache/yum.... to store the metadata 3) yum uses the cache of /&lt;somepath&gt;/cache/yum.... to store updated nevra 4) yum uses the cache of
/&lt;somepath&gt;/lib/yumdb... to store the db entries With other words, using --installroot does a full context switch (as I explain it) to a different &quot;root&quot;. Not touching the underlaying systems yum.repos.d etc. This has the advantage,
that I can use the real host system (the true one in /) to update a different system (one for systems integration, different updates or other related tasks) in --installroot (which of course can have other .*repo files, other activated ones or
disabled ones or other added ones. When using dnf otoh, it does only steps 2 - 4... sadly dnf searches in the true / (root) directory for repo files. Thus ignoring the repo files found in /&lt;somepath&gt;/yum.repos.d/*.repo. Temporarely (and
contradicting to yum) I have to temporarely copy over the files found in /&lt;somepath&gt;/yum.repos.d/.*repo to /etc/yum.repos.d/ whenever issuing the --installroot command. With other words... dnf is not correctly switching the context ... when I
intend dealing with a different --installroot, then I not only want to store the metadata, cache, downloaded nevra in the installroot but also use the repo files found in the installroots /etc/yum.repos.d directory.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>8831016</commentid>
<comment_count>1</comment_count>
<who name="Honza Silhan">jsilhan</who>
<bug_when>2015-11-18 07:18:27 -0500</bug_when>
<thetext>Thanks for the report. We&apos;ll take look.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>8975974</commentid>
<comment_count>2</comment_count>
<who name="Jaroslav Mracek">jmracek</who>
<bug_when>2016-01-13 03:57:46 -0500</bug_when>
<thetext>This behavior is fixed by pull-request https://github.com/rpm-software-management/dnf/pull/428</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>8977162</commentid>
<comment_count>3</comment_count>
<who name="Jaroslav Mracek">jmracek</who>
<bug_when>2016-01-13 09:53:36 -0500</bug_when>
<thetext>*** Bug 1160612 has been marked as a duplicate of this bug. ***</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9064739</commentid>
<comment_count>4</comment_count>
<who name="Jaroslav Mracek">jmracek</who>
<bug_when>2016-02-15 09:30:09 -0500</bug_when>
<thetext>*** Bug 1304887 has been marked as a duplicate of this bug. ***</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9184992</commentid>
<comment_count>5</comment_count>
<who name="Mike McCune">mmccune</who>
<bug_when>2016-03-28 19:16:15 -0400</bug_when>
<thetext>This bug was accidentally moved from POST to MODIFIED via an error in automation, please see mmccune@redhat.com with any questions</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9527453</commentid>
<comment_count>6</comment_count>
<who name="Fedora End Of Life">jkurik</who>
<bug_when>2016-07-19 14:26:23 -0400</bug_when>
<thetext>Fedora 22 changed to end-of-life (EOL) status on 2016-07-19. Fedora 22 is no longer maintained, which means that it will not receive any further security or bug fix updates. As a result we are closing this bug. If you can reproduce this bug
against a currently maintained version of Fedora please feel free to reopen this bug against that version. If you are unable to reopen this bug, please file a new report against the current release. If you experience problems, please add a comment to
this bug. Thank you for reporting this bug and we are sorry it could not be fixed.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9527654</commentid>
<comment_count>7</comment_count>
<who name="Ali Akcaagac">aliakc</who>
<bug_when>2016-07-19 14:37:41 -0400</bug_when>
<thetext>Reopened.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9537153</commentid>
<comment_count>8</comment_count>
<who name="Igor Gnatenko">ignatenko</who>
<bug_when>2016-07-21 10:15:05 -0400</bug_when>
<thetext>Fixed as part of DNF 2.0 which will be available at some point in the near future.</thetext>
</long_desc>

</bug>

</bugzilla>
