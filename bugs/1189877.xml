<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1189877</bug_id>

    <creation_ts>2015-02-05 12:17:00 -0500</creation_ts>
    <short_desc>usleep - start to display deprecation warning</short_desc>
    <delta_ts>2017-05-31 06:18:56 -0400</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>initscripts</component>
    <version>26</version>
    <rep_platform>All</rep_platform>
    <op_sys>Linux</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>NEXTRELEASE</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard></status_whiteboard>
    <keywords>Reopened</keywords>
    <priority>high</priority>
    <bug_severity>low</bug_severity>
    <target_milestone>---</target_milestone>

    <everconfirmed>1</everconfirmed>
    <reporter name="Lukáš Nykrýn">lnykryn</reporter>
    <assigned_to name="David Kaspar [Dee&apos;Kej]">dkaspar</assigned_to>
    <cc>admiller</cc>

    <cc>dkaspar</cc>

    <cc>jonathan</cc>

    <cc>kdudka</cc>

    <cc>kzak</cc>

    <cc>lnykryn</cc>

    <cc>ovasik</cc>

    <cc>p</cc>

    <cc>twaugh</cc>

    <cc>yaneti</cc>

    <cc>zbyszek</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in>initscripts-9.72-1.fc26</cf_fixed_in>
  <cf_doc_type>Bug Fix</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2017-05-30 15:16:51</cf_last_closed>
<cf_type>Bug</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>7912354</commentid>
<comment_count>0</comment_count>
<who name="Lukáš Nykrýn">lnykryn</who>
<bug_when>2015-02-05 12:17:24 -0500</bug_when>
<thetext>Description of problem: usleep binary is currently in initscripts package and if we want to get rid of that package this needs to be moved elsewhere. And since coreutils already have sleep...</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>7912520</commentid>
<comment_count>1</comment_count>
<who name="Pádraig Brady">pbrady</who>
<bug_when>2015-02-05 13:46:03 -0500</bug_when>
<thetext>Well this wouldn&apos;t go upstream as usleep is only available on RH flavored linux. I suppose downstream we could provide a script to wrap sleep(1) ? though it would be nice to get users to convert to using sleep(1). A script like the
following would work: exec sleep $(printf &apos;%s\n&apos; scale=9 &quot;${1-0}/1000000&quot; | bc;)</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>7914195</commentid>
<comment_count>2</comment_count>
<who name="Ondrej Vasik">ovasik</who>
<bug_when>2015-02-06 05:58:04 -0500</bug_when>
<thetext>As Pádraig said, this would be no-go for upstream. And I&apos;m not very keen about having this as coreutils downstream wrapper (as this one would introduce requirements for bc).</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>7914462</commentid>
<comment_count>3</comment_count>
<who name="Yanko Kaneti">yaneti</who>
<bug_when>2015-02-06 08:34:37 -0500</bug_when>
<thetext>Perhaps separate it in a standalone package with all kinds of depecation doc warnings about using a recent enough coreutils &quot;sleep&quot; instead</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>7996665</commentid>
<comment_count>4</comment_count>
<who name="Jaroslav Reznik">jreznik</who>
<bug_when>2015-03-03 11:50:14 -0500</bug_when>
<thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 22 development cycle. Changing version to &apos;22&apos;. More information and reason for this action is here:
https://fedoraproject.org/wiki/Fedora_Program_Management/HouseKeeping/Fedora22</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9409036</commentid>
<comment_count>5</comment_count>
<who name="Fedora Admin XMLRPC Client">fedora-admin-xmlrpc</who>
<bug_when>2016-06-13 05:05:15 -0400</bug_when>
<thetext>This package has changed ownership in the Fedora Package Database. Reassigning to the new owner of this component.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9523086</commentid>
<comment_count>6</comment_count>
<who name="Fedora End Of Life">jkurik</who>
<bug_when>2016-07-19 08:46:52 -0400</bug_when>
<thetext>Fedora 22 changed to end-of-life (EOL) status on 2016-07-19. Fedora 22 is no longer maintained, which means that it will not receive any further security or bug fix updates. As a result we are closing this bug. If you can reproduce this bug
against a currently maintained version of Fedora please feel free to reopen this bug against that version. If you are unable to reopen this bug, please file a new report against the current release. If you experience problems, please add a comment to
this bug. Thank you for reporting this bug and we are sorry it could not be fixed.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9523522</commentid>
<comment_count>7</comment_count>
<who name="Kamil Dudka">kdudka</who>
<bug_when>2016-07-19 09:16:26 -0400</bug_when>
<thetext>While this is not a bug of coreutils, we need to deal with it some how. I am reopening it and moving back to rawhide...</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9524676</commentid>
<comment_count>8</comment_count>
<who name="Kamil Dudka">kdudka</who>
<bug_when>2016-07-19 10:34:36 -0400</bug_when>
<thetext>I like the solution proposed in comment #1. The dependency on bc can be solved by using a separate subpackage coreutils-usleep providing the wrapper script only. I would make the script print a deprecation warning to stderr each time it runs
to educate users how to sleep in a portable way. Is the above plan acceptable?</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9549300</commentid>
<comment_count>9</comment_count>
<who name="Jan Kurik">jkurik</who>
<bug_when>2016-07-26 00:30:07 -0400</bug_when>
<thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 25 development cycle. Changing version to &apos;25&apos;.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10373016</commentid>
<comment_count>10</comment_count>
<who name="Kamil Dudka">kdudka</who>
<bug_when>2017-04-28 13:00:48 -0400</bug_when>
<thetext>Per suggestion in comment #1, I have prepared the coreutils-usleep subpakcage for review: https://src.fedoraproject.org/cgit/rpms/coreutils.git/commit/?id=751b223b I have also prepared a copr repository that includes patched initscripts:
https://copr.fedorainfracloud.org/coprs/kdudka/coreutils-usleep/ David, could you please have a look?</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10429535</commentid>
<comment_count>11</comment_count>
<who name="David Kaspar [Dee&apos;Kej]">dkaspar</who>
<bug_when>2017-05-19 11:33:37 -0400</bug_when>
<thetext>(In reply to Kamil Dudka from comment #10) &gt; Per suggestion in comment #1, I have prepared the coreutils-usleep &gt; subpakcage for review: &gt; &gt; https://src.fedoraproject.org/cgit/rpms/coreutils.git/commit/?id=751b223b I have looked
at it, tested it, and works correctly. Thank you for this. :)</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10436030</commentid>
<comment_count>12</comment_count>
<who name="Kamil Dudka">kdudka</who>
<bug_when>2017-05-22 11:24:05 -0400</bug_when>
<thetext>After discussing it with David and Lukas, we decided to deprecate usleep(1) in the initscript package itself by changing the executable to print deprecation message and/or move it to a subpackage of initscripts that will not be installed by default.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10436235</commentid>
<comment_count>13</comment_count>
<who name="Kamil Dudka">kdudka</who>
<bug_when>2017-05-22 12:19:40 -0400</bug_when>
<thetext>Introducing new deprecation warnings by minor update in a stable Fedora release could be disruptive for users. I propose to implement this in f26+ only.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10462758</commentid>
<comment_count>14</comment_count>
<who name="David Kaspar [Dee&apos;Kej]">dkaspar</who>
<bug_when>2017-05-31 06:18:56 -0400</bug_when>
<thetext>Bodhi update here: https://bodhi.fedoraproject.org/updates/initscripts-9.72-1.fc26</thetext>
</long_desc>

</bug>

</bugzilla>
