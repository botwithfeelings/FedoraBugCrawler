<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1297955</bug_id>
          
          <creation_ts>2016-01-12 15:37:00 -0500</creation_ts>
          <short_desc>yppasswd crypt() failed errors when using passwd.adjunct</short_desc>
          <delta_ts>2016-12-12 18:55:57 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>yp-tools</component>
          <version>25</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1401432</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Gilbert E. Detillieux">gedetil</reporter>
          <assigned_to name="Petr Kubat">pkubat</assigned_to>
          <cc>hhorak</cc>
    
    
    <cc>mmuzila</cc>
    
    
    <cc>pkubat</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>yp-tools-2.14-7.fc25</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-12-12 18:55:57</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8974646</commentid>
    <comment_count>0</comment_count>
      <attachid>1114125</attachid>
    <who name="Gilbert E. Detillieux">gedetil</who>
    <bug_when>2016-01-12 15:37:31 -0500</bug_when>
    <thetext>Created attachment 1114125
replaces broken yp-tools-2.12-adjunct.patch

Description of problem: 
When using passwd.adjunct map, yppasswd command fails with &quot;crypt() failed&quot; error, since it tries to use the &quot;##user&quot; string as salt. There&apos;s a patch, yp-tools-2.12-adjunct.patch, that attempts to fix this, but it gets it wrong.

Version-Release number of selected component (if applicable):
yp-tools-2.14-5 in Fedora 23, but also yp-tools-2.14-3.el7 in RHEL 7, and possibly other Fedora versions.

How reproducible:
Consistently fails when using passwd.adjunct.

Steps to Reproduce:
1. Set up passwd.adjunct map on NIS server
2. Run yppasswd command on NIS client (F23 or RHEL7)
3. Enter passwords when prompted

Actual results:
&quot;crypt() failed&quot; error in response to new passwords

Expected results:
Should accept password without checking against &quot;##user&quot; string, and generate correct salt before calling crypt()

Additional info:
yp-tools-2.12-adjunct-fix.patch (attached) fixes problem.  Use it instead of broken yp-tools-2.12-adjunct.patch file in src.rpm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9924284</commentid>
    <comment_count>1</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2016-11-24 09:52:51 -0500</bug_when>
    <thetext>This message is a reminder that Fedora 23 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 23. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;23&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 23 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9925453</commentid>
    <comment_count>2</comment_count>
    <who name="Gilbert E. Detillieux">gedetil</who>
    <bug_when>2016-11-24 11:01:11 -0500</bug_when>
    <thetext>This bug still exists in RHEL7, and most likely in newer Fedora releases.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9934844</commentid>
    <comment_count>3</comment_count>
    <who name="Petr Kubat">pkubat</who>
    <bug_when>2016-11-28 09:04:39 -0500</bug_when>
    <thetext>Thanks for the report. I pushed the patch into rawhide and F25.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9934847</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-28 09:05:59 -0500</bug_when>
    <thetext>yp-tools-2.14-7.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-95199a6ea4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9952216</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-02 13:54:00 -0500</bug_when>
    <thetext>yp-tools-2.14-7.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-95199a6ea4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9952314</commentid>
    <comment_count>6</comment_count>
    <who name="Gilbert E. Detillieux">gedetil</who>
    <bug_when>2016-12-02 14:21:03 -0500</bug_when>
    <thetext>Any plans to make this update available for RHEL7?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9955334</commentid>
    <comment_count>7</comment_count>
    <who name="Petr Kubat">pkubat</who>
    <bug_when>2016-12-05 04:14:41 -0500</bug_when>
    <thetext>I have cloned the bug for RHEL7.

I would like to point out, however, that we are not able to guarantee the timeliness or suitability of a resolution.

If this issue is critical or in any way time sensitive, please raise a ticket through the regular Red Hat support channels to ensure it receives the proper attention and prioritization to assure a timely resolution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9978786</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-12 18:55:57 -0500</bug_when>
    <thetext>yp-tools-2.14-7.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1114125</attachid>
            <date>2016-01-12 15:37:00 -0500</date>
            <delta_ts>2016-01-12 15:37:31 -0500</delta_ts>
            <desc>replaces broken yp-tools-2.12-adjunct.patch</desc>
            <filename>yp-tools-2.12-adjunct-fix.patch</filename>
            <type>text/plain</type>
            <size>903</size>
            <attacher name="Gilbert E. Detillieux">gedetil</attacher>
            
              <data encoding="base64">LS0tIHlwLXRvb2xzLTIuMTQvc3JjL3lwcGFzc3dkLmMuYWRqdW5jdAkyMDE2LTAxLTEyIDExOjMy
OjEwLjI4NjA2MTkyNSAtMDYwMAorKysgeXAtdG9vbHMtMi4xNC9zcmMveXBwYXNzd2QuYwkyMDE2
LTAxLTEyIDExOjU3OjE4LjQyMDc3NDgyMyAtMDYwMApAQCAtNDUwLDYgKzQ1MCw3IEBACiAgIHBh
c3N3ZGxlbiA9IGdldF9wYXNzd2RfbGVuIChwd2QtPnB3X3Bhc3N3ZCk7CiAgIGlmIChwd2QtPnB3
X3Bhc3N3ZFswXSAKICAgICAgICYmIDAgIT0gc3RyY21wIChwd2QtPnB3X3Bhc3N3ZCwgIngiKSAv
KiBkb24ndCBjaGVjayBzaGFkb3cgcGFzc3dvcmRzICovCisgICAgICAmJiAwICE9IHN0cm5jbXAg
KHB3ZC0+cHdfcGFzc3dkLCAiIyMiLCAyKSAvKiBkb24ndCBjaGVjayBwYXNzd29yZHMgdXNpbmcg
cGFzc3dkLmFkanVuY3QgZmVhdHVyZSAqLwogICAgICAgJiYgdWlkKQogICAgIHsKICAgICAgIGNo
YXIgKmNyeXB0ZWQgPSBjcnlwdChwd2RzdHIsIHB3ZC0+cHdfcGFzc3dkKTsKQEAgLTc3NCw2ICs3
NzUsNyBAQAogICAgICAgLyogV2UgY2FuJ3QgY2hlY2sgdGhlIHBhc3N3b3JkIHdpdGggc2hhZG93
IHBhc3N3b3JkcyBlbmFibGVkLiBXZQogICAgICAgICogbGVhdmUgdGhlIGNoZWNraW5nIHRvIHlw
cGFzc3dkZCAqLwogICAgICAgaWYgKHVpZCAhPSAwICYmIHN0cmNtcCAocHdkLT5wd19wYXNzd2Qs
ICJ4IikgIT0gMCAmJgorCSAgMCAhPSBzdHJuY21wIChwd2QtPnB3X3Bhc3N3ZCwgIiMjIiwgMikg
JiYgLyogZG9uJ3QgY2hlY2sgcGFzc3dvcmRzIHVzaW5nIHBhc3N3ZC5hZGp1bmN0IGZlYXR1cmUg
Ki8KIAkgIHN0cmNtcCAocHdkLT5wd19wYXNzd2QsIGhhc2hwYXNzICkgIT0gMCkKIAl7CiAJICBp
bnQgcGFzc3dkbGVuID0gZ2V0X3Bhc3N3ZF9sZW4gKHB3ZC0+cHdfcGFzc3dkKTsK
</data>

          </attachment>
      

    </bug>

</bugzilla>