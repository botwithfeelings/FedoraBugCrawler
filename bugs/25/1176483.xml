<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1176483</bug_id>
          
          <creation_ts>2014-12-22 00:10:00 -0500</creation_ts>
          <short_desc>livecd: Add kdump anaconda addon to install image</short_desc>
          <delta_ts>2016-12-12 00:55:47 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>spin-kickstarts</component>
          <version>25</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>high</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1065674</dependson>
    
    
    <dependson>1115914</dependson>
          <blocked>1116321</blocked>
    
    
    <blocked>1116323</blocked>
    
    
    <blocked>1116331</blocked>
    
    
    <blocked>1116335</blocked>
    
    
    <blocked>1116338</blocked>
    
    
    <blocked>1116340</blocked>
    
    
    <blocked>1116343</blocked>
    
    
    <blocked>1118527</blocked>
    
    
    <blocked>1118529</blocked>
    
    
    <blocked>1399436</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Dave Young">ruyang</reporter>
          <assigned_to name="Jeroen van Meeuwen">vanmeeuwen+fedora</assigned_to>
          <cc>admiller</cc>
    
    
    <cc>bcl</cc>
    
    
    <cc>bruno</cc>
    
    
    <cc>extras-qa</cc>
    
    
    <cc>kdump-team-bugs</cc>
    
    
    <cc>kevin</cc>
    
    
    <cc>lwang</cc>
    
    
    <cc>mattdm</cc>
    
    
    <cc>mkolman</cc>
    
    
    <cc>ruyang</cc>
    
    
    <cc>tonli</cc>
    
    
    <cc>vanmeeuwen+fedora</cc>
    
    
    <cc>vgoyal</cc>
    
    
    <cc>vpodzime</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          <cf_clone_of>1115914</cf_clone_of>
          <cf_environment></cf_environment>
          <cf_last_closed>2016-11-28 23:37:14</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      <flag name="needinfo"
          id="2091745"
          type_id="16"
          status="?"
          setter="ruyang"
          requestee="vanmeeuwen+fedora"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7784399</commentid>
    <comment_count>1</comment_count>
    <who name="Dave Young">ruyang</who>
    <bug_when>2014-12-22 00:15:04 -0500</bug_when>
    <thetext>Hi Jeroen

We have added kdump anaconda addon into boot iso, but for live media we still need it. Could you help to add it into spin kickstarts?

See the original comments for the detail..

Thanks
Dave</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7996312</commentid>
    <comment_count>2</comment_count>
    <who name="Jaroslav Reznik">jreznik</who>
    <bug_when>2015-03-03 11:38:56 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 22 development cycle.
Changing version to &apos;22&apos;.

More information and reason for this action is here:
https://fedoraproject.org/wiki/Fedora_Program_Management/HouseKeeping/Fedora22</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8444487</commentid>
    <comment_count>3</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2015-07-15 10:35:55 -0400</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 23 development cycle.
Changing version to &apos;23&apos;.

(As we did not run this process for some time, it could affect also pre-Fedora 23 development
cycle bugs. We are very sorry. It will help us with cleanup during Fedora 23 End Of Life. Thank you.)

More information and reason for this action is here:
https://fedoraproject.org/wiki/BugZappers/HouseKeeping/Fedora23</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9389397</commentid>
    <comment_count>4</comment_count>
    <who name="Bruno Wolff III">bruno</who>
    <bug_when>2016-06-06 05:41:55 -0400</bug_when>
    <thetext>I looked at https://bugzilla.redhat.com/show_bug.cgi?id=1115914 and didn&apos;t see any details on what the proposed change is to spin-kickstarts.

Also note, that Fedora spins are now being built with livemedia-creator instead of livecd-creator. I don&apos;t know if that has an affect on what you want, but livemedia-creator uses lorax to do builds and might possible make this moot if all you care about is official Fedora release media.

As someone noted on the mailing list, there is a fedora-kickstarts project on pagure.io that might make proposing a specific change easier. https://pagure.io/fedora-kickstarts

We are currently in a freeze for f24, so a change in that branch is unlikely to be applied before the release.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9391196</commentid>
    <comment_count>5</comment_count>
    <who name="Brian Lane">bcl</who>
    <bug_when>2016-06-06 13:53:01 -0400</bug_when>
    <thetext>The spins need to add the kexec-tools-anaconda-addon package to their kickstarts in order to enable this feature. FYI livemedia-creator doesn&apos;t control the content of the live images, the kickstarts do.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9393101</commentid>
    <comment_count>6</comment_count>
    <who name="Dave Young">ruyang</who>
    <bug_when>2016-06-07 04:09:24 -0400</bug_when>
    <thetext>Bruno, if we can not make it in f24, can we get it in rawhide at least? I originally open the bug to rawhide

Thanks
Dave</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9393680</commentid>
    <comment_count>7</comment_count>
    <who name="Bruno Wolff III">bruno</who>
    <bug_when>2016-06-07 07:08:39 -0400</bug_when>
    <thetext>Why do you want this package added? (I didn&apos;t see a comment about what this change will provide, in the bug it was cloned from.)
If anaconda doesn&apos;t work properly without it, why isn&apos;t a dependency pulling it in?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9396173</commentid>
    <comment_count>8</comment_count>
    <who name="Dave Young">ruyang</who>
    <bug_when>2016-06-07 21:40:31 -0400</bug_when>
    <thetext>Bruno, let me explain about what kdump anaconda adon is and why do we need it here.

Originally we have a kdump firstboot module for setting up kdump after the installation finished. We rewrote the firstboot module as an anaconda addon later which is maintained in kexec-tools subpackage. But it is out of ananconda itself because anaconda team want the extra addons being maintained separately.

The basic usage and functionality is like below:
1. One need add inst.kdump_addon kernel parameter in grub if he or she want to use the addon, that means even if we pack the addon package in iso anaconda will not activate it during installing unless one explictly specify inst.kdump_addon

2. The addon interface will allow one to enable kdump service and specify the memory size to be reserved for kdump kernel. That means add crashkernel=xM to grub kernel cmdline. It will save one more reboot for user.

If we have not packed kdump addon package in livecd then the anaconda installer can never provide the kdump setup interface during installation.

Thanks
Dave</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9396291</commentid>
    <comment_count>9</comment_count>
    <who name="Bruno Wolff III">bruno</who>
    <bug_when>2016-06-07 22:41:02 -0400</bug_when>
    <thetext>It isn&apos;t clear to me from that description, that it is something that needs to be on all livecds. If it is small enough, then it probably doesn&apos;t matter much. Other people may have stronger opinions one way or the other.
I suggest making a pull request for fedora-kickstarts on pagure.io for the change with the description of why you want the change and an estimate of how much larger it will make ISOs. A link back to this bug is probably a good idea as well. Currently the people that approve the requests are releng members. They have a lot of knowledge and can probably make a good decision about whether or not to accept the change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9396328</commentid>
    <comment_count>10</comment_count>
    <who name="Dave Young">ruyang</who>
    <bug_when>2016-06-07 23:02:47 -0400</bug_when>
    <thetext>Ok, but can you give me some suggestion which file I should edit for all livecds?  something like below?

diff --git a/fedora-live-base.ks b/fedora-live-base.ks
index 6011fea..90835e4 100644
--- a/fedora-live-base.ks
+++ b/fedora-live-base.ks
@@ -50,6 +50,9 @@ memtest86+
 anaconda
 @anaconda-tools
 
+# Anaconda addon
+kexec-tools-anaconda-addon
+
 # Need aajohan-comfortaa-fonts for the SVG rnotes images
 aajohan-comfortaa-fonts</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9396335</commentid>
    <comment_count>11</comment_count>
    <who name="Bruno Wolff III">bruno</who>
    <bug_when>2016-06-07 23:10:44 -0400</bug_when>
    <thetext>It looks like livebase covers anything that makes sense.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9396679</commentid>
    <comment_count>12</comment_count>
    <who name="Dave Young">ruyang</who>
    <bug_when>2016-06-08 02:54:37 -0400</bug_when>
    <thetext>Here is a pull request:
https://pagure.io/fedora-kickstarts/pull-request/31</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9550063</commentid>
    <comment_count>13</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-07-26 01:10:38 -0400</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 25 development cycle.
Changing version to &apos;25&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9681057</commentid>
    <comment_count>14</comment_count>
    <who name="Dave Young">ruyang</who>
    <bug_when>2016-09-06 01:48:31 -0400</bug_when>
    <thetext>Added a new pull request to fedora-coms:

https://pagure.io/fedora-comps/pull-request/39</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9937194</commentid>
    <comment_count>15</comment_count>
    <who name="Tong Li">tonli</who>
    <bug_when>2016-11-28 23:37:14 -0500</bug_when>
    <thetext>Appending &quot;inst.kdump_addon=on&quot; at boot menu can enable kdump anaconda addon for both Live and netinst images of latest Fedora 25 official build. This bug has been fixed.

Thanks,
Tong</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>