<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1431603</bug_id>
          
          <creation_ts>2017-03-13 08:15:00 -0400</creation_ts>
          <short_desc>dnf repoquery --whatprovides /usr/bin/sip doesn&apos;t work</short_desc>
          <delta_ts>2017-03-13 08:27:52 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>dnf-plugins-core</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>NEXTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jaroslav Škarvada">jskarvad</reporter>
          <assigned_to>rpm-software-management</assigned_to>
          <cc>packaging-team-maint</cc>
    
    
    <cc>rpm-software-management</cc>
    
    
    <cc>vmukhame</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-13 08:19:11</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10232747</commentid>
    <comment_count>0</comment_count>
    <who name="Jaroslav Škarvada">jskarvad</who>
    <bug_when>2017-03-13 08:15:07 -0400</bug_when>
    <thetext>Description of problem:
The &apos;dnf repoquery --whatprovides&apos; is again unusable.

Version-Release number of selected component (if applicable):
dnf-plugins-core-0.1.21-4.fc25.noarch
dnf-1.1.10-5.fc25.noarch

How reproducible:
Always

Steps to Reproduce:
1. dnf repoquery --whatprovides /usr/bin/sip
2. dnf repoquery --alldeps --whatprovides /usr/bin/sip
3. dnf repoquery -l sip-devel

Actual results:
1.
Failed to synchronize cache for repo &apos;fedora-chromium-stable&apos;, disabling.
Last metadata expiration check: 2:40:46 ago on Mon Mar 13 10:28:14 2017.

2.
Failed to synchronize cache for repo &apos;fedora-chromium-stable&apos;, disabling.
Last metadata expiration check: 2:41:59 ago on Mon Mar 13 10:28:14 2017.
Error: --alldeps requires --whatrequires option.
usage: dnf repoquery [--whatrequires] [key] [--alldeps]

3.
Failed to synchronize cache for repo &apos;fedora-chromium-stable&apos;, disabling.
Last metadata expiration check: 2:42:58 ago on Mon Mar 13 10:28:14 2017.
/usr/bin/sip
/usr/include/python2.7/sip.h
/usr/share/sip

Expected results:
1.
sip-devel

2.
probably also: sip-devel

3.
/usr/bin/sip
...

Additional info:
I.e. it&apos;s apparent the /usr/bin/sip is provided by sip-devel package, but it isn&apos;t found by &apos;dnf repoquery --whatprovides /usr/bin/sip&apos;, nor I cannot use the --alldeps (which IMHO should be by default on).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10232773</commentid>
    <comment_count>1</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2017-03-13 08:19:11 -0400</bug_when>
    <thetext>(In reply to Jaroslav Škarvada from comment #0)
&gt; Description of problem:
&gt; The &apos;dnf repoquery --whatprovides&apos; is again unusable.
&gt; 
&gt; Version-Release number of selected component (if applicable):
&gt; dnf-plugins-core-0.1.21-4.fc25.noarch
&gt; dnf-1.1.10-5.fc25.noarch
&gt; 
&gt; How reproducible:
&gt; Always
&gt; 
&gt; Steps to Reproduce:
&gt; 1. dnf repoquery --whatprovides /usr/bin/sip
&gt; 2. dnf repoquery --alldeps --whatprovides /usr/bin/sip
&gt; 3. dnf repoquery -l sip-devel
&gt; 
&gt; Actual results:
&gt; 1.
&gt; Failed to synchronize cache for repo &apos;fedora-chromium-stable&apos;, disabling.
&gt; Last metadata expiration check: 2:40:46 ago on Mon Mar 13 10:28:14 2017.
&gt; 
&gt; 2.
&gt; Failed to synchronize cache for repo &apos;fedora-chromium-stable&apos;, disabling.
&gt; Last metadata expiration check: 2:41:59 ago on Mon Mar 13 10:28:14 2017.
&gt; Error: --alldeps requires --whatrequires option.
&gt; usage: dnf repoquery [--whatrequires] [key] [--alldeps]
&gt; 
&gt; 3.
&gt; Failed to synchronize cache for repo &apos;fedora-chromium-stable&apos;, disabling.
&gt; Last metadata expiration check: 2:42:58 ago on Mon Mar 13 10:28:14 2017.
&gt; /usr/bin/sip
&gt; /usr/include/python2.7/sip.h
&gt; /usr/share/sip
&gt; 
&gt; Expected results:
&gt; 1.
&gt; sip-devel
&gt; 
&gt; 2.
&gt; probably also: sip-devel
&gt; 
&gt; 3.
&gt; /usr/bin/sip
&gt; ...
&gt; 
&gt; Additional info:
&gt; I.e. it&apos;s apparent the /usr/bin/sip is provided by sip-devel package, but it
&gt; isn&apos;t found by &apos;dnf repoquery --whatprovides /usr/bin/sip&apos;, nor I cannot use
&gt; the --alldeps (which IMHO should be by default on).
* It&apos;s not really provided, but rather done by files (but this is implementation details)
* --alldeps is default in DNF 2.0

$ sudo dnf repoquery --whatprovides /usr/bin/sip 2&gt;/dev/null
sip-devel-0:4.19.1-1.fc26.i686
sip-devel-0:4.19.1-1.fc26.x86_64

So this bug is fixed in DNF 2.0. As a workaround you could use `dnf repoquery -f /usr/bin/sip`.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10232811</commentid>
    <comment_count>2</comment_count>
    <who name="Jaroslav Škarvada">jskarvad</who>
    <bug_when>2017-03-13 08:25:10 -0400</bug_when>
    <thetext>(In reply to Igor Gnatenko from comment #1)
&gt; * It&apos;s not really provided, but rather done by files (but this is
&gt; implementation details)
&gt; * --alldeps is default in DNF 2.0
&gt; 
&gt; $ sudo dnf repoquery --whatprovides /usr/bin/sip 2&gt;/dev/null
&gt; sip-devel-0:4.19.1-1.fc26.i686
&gt; sip-devel-0:4.19.1-1.fc26.x86_64
&gt; 
&gt; So this bug is fixed in DNF 2.0. As a workaround you could use `dnf
&gt; repoquery -f /usr/bin/sip`.

Yup it works.

Why --alldeps switch doesn&apos;t work with --whatprovides? I.e. is rejected by parser.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10232823</commentid>
    <comment_count>3</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2017-03-13 08:27:52 -0400</bug_when>
    <thetext>(In reply to Jaroslav Škarvada from comment #2)
&gt; (In reply to Igor Gnatenko from comment #1)
&gt; &gt; * It&apos;s not really provided, but rather done by files (but this is
&gt; &gt; implementation details)
&gt; &gt; * --alldeps is default in DNF 2.0
&gt; &gt; 
&gt; &gt; $ sudo dnf repoquery --whatprovides /usr/bin/sip 2&gt;/dev/null
&gt; &gt; sip-devel-0:4.19.1-1.fc26.i686
&gt; &gt; sip-devel-0:4.19.1-1.fc26.x86_64
&gt; &gt; 
&gt; &gt; So this bug is fixed in DNF 2.0. As a workaround you could use `dnf
&gt; &gt; repoquery -f /usr/bin/sip`.
&gt; 
&gt; Yup it works.
&gt; 
&gt; Why --alldeps switch doesn&apos;t work with --whatprovides? I.e. is rejected by
&gt; parser.

Because --alldeps make sense only with requires. Provides are very explicit: it&apos;s either specified or not. In one package.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>