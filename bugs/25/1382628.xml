<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1382628</bug_id>
          
          <creation_ts>2016-10-07 05:02:00 -0400</creation_ts>
          <short_desc>[mozjs45] test failures on s390x</short_desc>
          <delta_ts>2016-12-13 03:24:44 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>mozjs45</component>
          <version>25</version>
          <rep_platform>s390x</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>RAWHIDE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>467765</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Dan Horák">dan</reporter>
          <assigned_to name="Marek Skalický">mskalick</assigned_to>
          <cc>mskalick</cc>
    
    
    <cc>paulo.cesar.pereira.de.andrade</cc>
    
    
    <cc>than</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-12-13 03:24:44</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9772887</commentid>
    <comment_count>0</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-10-07 05:02:34 -0400</bug_when>
    <thetext>The build of mozjs45-45.4.0-1 fails on s390x with test failures

...
REGRESSIONS
    js1_8_5/extensions/clone-v1-typed-array.js
    js1_8_5/extensions/typedarray-subarray-of-subarray.js
    js1_8_5/extensions/typedarray-set-neutering.js
    js1_8_5/extensions/clone-complex-object.js
    js1_8_5/extensions/typedarray.js
    js1_8_5/extensions/file-mapped-arraybuffers.js
    js1_8_5/extensions/clone-transferables.js
    js1_8_5/extensions/clone-typed-array.js
    ecma_6/Array/fill.js
    ecma_6/TypedArray/slice.js
    ecma_6/TypedArray/entries.js
    ecma_6/TypedArray/reverse.js
    ecma_6/TypedArray/from_basics.js
    ecma_6/TypedArray/find-and-findIndex.js
    ecma_6/TypedArray/values.js
    ecma_6/TypedArray/reduce-and-reduceRight.js
    ecma_6/TypedArray/from_mapping.js
    ecma_6/TypedArray/map-and-filter.js
    ecma_6/TypedArray/join.js
    ecma_6/TypedArray/from_proxy.js
    ecma_6/TypedArray/forEach.js
    ecma_6/TypedArray/uint8clamped-constructor.js
    ecma_6/TypedArray/from_this.js
    ecma_6/TypedArray/from_iterable.js
    ecma_6/TypedArray/object-defineproperty.js
    ecma_6/TypedArray/from_realms.js
    ecma_6/TypedArray/set-same-buffer-different-source-target-types.js
    ecma_6/TypedArray/every-and-some.js
    ecma_6/TypedArray/indexOf-and-lastIndexOf.js
    ecma_6/TypedArray/of.js
    ecma_6/TypedArray/seal-and-freeze.js
    ecma_6/TypedArray/includes.js
    ecma_6/TypedArray/from_constructor.js
    ecma_6/TypedArray/element-setting-converts-using-ToNumber.js
    ecma_6/TypedArray/fill.js
    ecma_6/Reflect/get.js
    ecma_6/Math/trunc.js
    ecma_6/Math/sign.js
    ecma_6/Math/atanh-approx.js
    ecma_6/Math/expm1-exact.js
    ecma_6/Math/log10-approx.js
    ecma_6/Math/clz32.js
    ecma_6/Math/log2-approx.js
    ecma_6/Math/fround.js
    ecma_6/Math/tanh-approx.js
    ecma_6/Math/acosh-approx.js
    ecma_6/Math/cosh-approx.js
    ecma_6/Math/20.2.2.ToNumber.js
    ecma_6/Math/cbrt-exact.js
    ecma_6/Math/asinh-approx.js
    ecma_6/Math/tanh-exact.js
    ecma_6/Math/log1p-exact.js
    ecma_6/Math/sinh-approx.js
    ecma_6/Math/sinh-exact.js
    ecma_6/Math/log1p-approx.js
    ecma_6/Math/cbrt-approx.js
    ecma_6/Math/cosh-exact.js
    ecma_6/Math/log10-exact.js
    ecma_6/Math/expm1-approx.js
    ecma_6/Math/acosh-exact.js
    ecma_6/Math/log2-exact.js
    ecma_6/Math/asinh-exact.js
    ecma_6/Math/atanh-exact.js
    ecma_6/Symbol/typed-arrays.js
    ecma_5/extensions/reviver-mutates-holder-array-nonnative.js
    ecma_5/extensions/reviver-mutates-holder-object-nonnative.js
FAIL
error: Bad exit status from /var/tmp/rpm-tmp.vLNDdt (%check)
    Bad exit status from /var/tmp/rpm-tmp.vLNDdt (%check)
...


for complete logs please see http://s390.koji.fedoraproject.org/koji/taskinfo?taskID=2367267

Interestingly there is no such issue on ppc64 (big endian as s390x), so it looks as a s390x specific issue.


Version-Release number of selected component (if applicable):
mozjs45-45.4.0-1.fc25</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9955546</commentid>
    <comment_count>1</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-12-05 05:54:46 -0500</bug_when>
    <thetext>still the same issues with mozjs45-45.5.1-1.fc26 (http://s390.koji.fedoraproject.org/koji/taskinfo?taskID=2417826)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9955588</commentid>
    <comment_count>2</comment_count>
    <who name="Marek Skalický">mskalick</who>
    <bug_when>2016-12-05 06:19:33 -0500</bug_when>
    <thetext>Thanks for retesting it...

Could you provide please gcc preprocessor code to check all Fedora non-primary architectures?

I am not sure sure what is the value of XY for all secondary in code:
#if defined(XY)

(I need it to update a patch correctly)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9959652</commentid>
    <comment_count>3</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-12-06 06:40:24 -0500</bug_when>
    <thetext>s390(x) defines
__s390x__ and __s390__ for the 64-bit s390x
__s390__ for 32-bit s390

ppc defines
__powerpc64__ and __powerpc__ for ppc64/ppcle (needs additional endian check via __BYTE_ORDER__</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9960012</commentid>
    <comment_count>4</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-12-06 07:32:17 -0500</bug_when>
    <thetext>Than, have you made any progress with this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9960115</commentid>
    <comment_count>5</comment_count>
    <who name="Ngo Than">than</who>
    <bug_when>2016-12-06 07:47:46 -0500</bug_when>
    <thetext>(In reply to Dan Horák from comment #4)
&gt; Than, have you made any progress with this issue?

Hi Dan, i was busy with other stuff in qt/kde due to openssl-1.1. so no solution atm, i will continue to work on it today or tomorrow after the openssl-1.1 issue in qt/kde is resolved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9967623</commentid>
    <comment_count>6</comment_count>
    <who name="Marek Skalický">mskalick</who>
    <bug_when>2016-12-08 05:36:25 -0500</bug_when>
    <thetext>The test failure should be resolved by 
http://pkgs.fedoraproject.org/cgit/rpms/mozjs45.git/commit/?id=42a40ee4afe094d80e688504389f70f74b9ce645
and http://pkgs.fedoraproject.org/cgit/rpms/mozjs45.git/commit/?id=c68c468efbcefc6d1e13971dcce36d1bc064e501

Please test rebuilding in s390 koji.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9968650</commentid>
    <comment_count>7</comment_count>
    <who name="Ngo Than">than</who>
    <bug_when>2016-12-08 10:41:57 -0500</bug_when>
    <thetext>i can confirm the fix. It&apos;s built fine on s390x.

http://s390.koji.fedoraproject.org/koji/taskinfo?taskID=2419458</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9979850</commentid>
    <comment_count>8</comment_count>
    <who name="Marek Skalický">mskalick</who>
    <bug_when>2016-12-13 03:24:44 -0500</bug_when>
    <thetext>Thanks for feedback.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>