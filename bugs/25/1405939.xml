<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1405939</bug_id>
          
          <creation_ts>2016-12-19 04:04:00 -0500</creation_ts>
          <short_desc>Segmentation fault at /usr/libexec/Xorg (OsLookupColor+0x139) using Xspice</short_desc>
          <delta_ts>2017-01-28 19:21:07 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>spice</component>
          <version>25</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>aannoaanno</reporter>
          <assigned_to name="Christophe Fergeau">cfergeau</assigned_to>
          <cc>alexl</cc>
    
    
    <cc>alon</cc>
    
    
    <cc>cfergeau</cc>
    
    
    <cc>hdegoede</cc>
    
    
    <cc>jforbes</cc>
    
    
    <cc>marcandre.lureau</cc>
    
    
    <cc>sandmann</cc>
    
    
    <cc>uril</cc>
    
    
    <cc>virt-maint</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-01-28 19:21:07</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9997497</commentid>
    <comment_count>0</comment_count>
    <who name="">aannoaanno</who>
    <bug_when>2016-12-19 04:04:05 -0500</bug_when>
    <thetext>Description of problem:
Segmentation fault at /usr/libexec/Xorg (OsLookupColor+0x139) using Xspice

Version-Release number of selected component (if applicable):
Fedora 25
Xspice 0.1.4-10.2016092



How reproducible:
$ sudo Xspice --config /etc/X11/spiceqxl.xorg.conf --disable-ticketing --vdagent --xsession startxfce4 :4

Actual results:
Console output:


X.Org X Server 1.19.0
Release Date: 2016-11-15
X Protocol Version 11, Revision 0
Build Operating System:  4.8.8-300.fc25.x86_64 
Current Operating System: Linux noah.siteos-lokal.de 4.8.14-300.fc25.x86_64 #1 SMP Mon Dec 12 16:31:04 UTC 2016 x86_64
Kernel command line: BOOT_IMAGE=/vmlinuz-4.8.14-300.fc25.x86_64 root=/dev/mapper/vg_sdd-root ro rd.luks.uuid=luks-a9eba963-ff2e-499b-a298-0659c5e29359 rd.lvm.lv=vg_sdd/root rd.lvm.lv=vg_sdd/swap rhgb quiet resume=/dev/disk/by-uuid/73299393-6bdb-4230-a1ca-096e5ee32396 splash=silent quiet video.use_native_backlight=1 LANG=de_DE.UTF-8
Build Date: 15 December 2016  12:16:01PM
Build ID: xorg-x11-server 1.19.0-2.fc25 
Current version of pixman: 0.34.0
        Before reporting problems, check http://wiki.x.org
        to make sure that you have the latest version.
Markers: (--) probed, (**) from config file, (==) default setting,
        (++) from command line, (!!) notice, (II) informational,
        (WW) warning, (EE) error, (NI) not implemented, (??) unknown.
(==) Log file: &quot;/var/log/Xorg.4.log&quot;, Time: Mon Dec 19 09:58:37 2016
(++) Using config file: &quot;/etc/X11/spiceqxl.xorg.conf&quot;
(==) Using config directory: &quot;/etc/X11/xorg.conf.d&quot;
(==) Using system config directory &quot;/usr/share/X11/xorg.conf.d&quot;
resizing surface0 to 16777216
memory space from 0x7f816bec5010 to 0x7f8172ec2010
memory space from 0x7f8162ec4010 to 0x7f816aec4010
resizing surface0 to 16777216
memory space from 0x7f816bec5010 to 0x7f8172ec2010
memory space from 0x7f8162ec4010 to 0x7f816aec4010
xspice: port = 5900, tls_port = 0
watch_add: adding 0x995f50, fd=13 at 0
watch_add: adding 0xab3150, fd=15 at 1
interface_get_init_info:
interface_attach_worker:
interface_set_compression_level: 0
playback: no audio FIFO directory, audio is disabled
watch_add: adding 0xabcf50, fd=19 at 2
ram_header at 134209536
surf0 size: 16777216
interface_get_command: native
interface_get_command: native
interface_get_command: native
interface_get_command: native
slots start: 0, slots end: 1
done reset
interface_get_command: native
interface_get_command: native
interface_get_command: native
qxl_surface_create: Bad bpp: 1 (1)
interface_get_command: native
qxl_surface_create: Bad bpp: 1 (1)
qxl_surface_create: Bad bpp: 1 (1)
interface_get_command: native
interface_get_command: native
interface_get_command: native
(EE) 
(EE) Backtrace:
(EE) 0: /usr/libexec/Xorg (OsLookupColor+0x139) [0x59e7d9]
(EE) 1: /lib64/libpthread.so.0 (__restore_rt+0x0) [0x7f817ae645bf]
(EE) 2: /usr/lib64/xorg/modules/drivers/spiceqxl_drv.so (_init+0x397b) [0x7f81764ab9eb]
(EE) 3: /usr/libexec/Xorg (BlockHandler+0x4e) [0x43b99e]
(EE) 4: /usr/libexec/Xorg (WaitForSomething+0x152) [0x598242]
(EE) 5: /usr/libexec/Xorg (SendErrorToClient+0x13a) [0x436e0a]
(EE) 6: /usr/libexec/Xorg (InitFonts+0x428) [0x43b018]
(EE) 7: /lib64/libc.so.6 (__libc_start_main+0xf1) [0x7f817aaad401]
(EE) 8: /usr/libexec/Xorg (_start+0x2a) [0x424cfa]
(EE) 9: ? (?+0x2a) [0x2a]
(EE) 
(EE) Segmentation fault at address 0x927c0
(EE) 
Fatal server error:
(EE) Caught signal 11 (Segmentation fault). Server aborting
(EE) 
(EE) 
Please consult the Fedora Project support 
         at http://wiki.x.org
 for help. 
(EE) Please also check the log file at &quot;/var/log/Xorg.4.log&quot; for additional information.
(EE) 
interface_get_command: native
interface_get_command: native
interface_get_command: native
interface_get_command: native
interface_get_command: native
interface_get_command: native
(EE) Server terminated with error (1). Closing log file.


Expected results:
Xspice should run (and should be connectable by &apos;remote-viewer spice://localhost:5900&apos;)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997531</commentid>
    <comment_count>1</comment_count>
    <who name="Christophe Fergeau">cfergeau</who>
    <bug_when>2016-12-19 04:15:43 -0500</bug_when>
    <thetext>Yes, Xspice cannot work with Xorg 1.19, these upstream patches are needed
https://lists.freedesktop.org/archives/spice-devel/2016-December/034524.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997715</commentid>
    <comment_count>2</comment_count>
    <who name="Christophe Fergeau">cfergeau</who>
    <bug_when>2016-12-19 05:18:46 -0500</bug_when>
    <thetext>A fixed version is currently building in rawhide https://koji.fedoraproject.org/koji/taskinfo?taskID=16955889
Hopefully it will be installable on f25 too.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10092816</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-24 12:17:35 -0500</bug_when>
    <thetext>xorg-x11-drv-qxl-0.1.5-2.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-4b19cfc4ee</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10103702</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-28 14:20:44 -0500</bug_when>
    <thetext>xorg-x11-drv-qxl-0.1.5-2.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-4b19cfc4ee</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10103865</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-28 19:21:07 -0500</bug_when>
    <thetext>xorg-x11-drv-qxl-0.1.5-2.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>