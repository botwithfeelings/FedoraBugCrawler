<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1320683</bug_id>
          
          <creation_ts>2016-03-23 13:41:00 -0400</creation_ts>
          <short_desc>RPM fails to enforce dependencies declared in python package</short_desc>
          <delta_ts>2017-02-25 19:51:15 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>python-requests-oauthlib</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>RAWHIDE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1320686</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="John Dennis">jdennis</reporter>
          <assigned_to name="Fedora Infrastructure SIG">infra-sig</assigned_to>
          <cc>kevin</cc>
    
    
    <cc>rbean</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-02-25 19:51:15</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9173811</commentid>
    <comment_count>0</comment_count>
    <who name="John Dennis">jdennis</who>
    <bug_when>2016-03-23 13:41:31 -0400</bug_when>
    <thetext>With Python packages the distutils setup.py acts much like an RPM spec file, it contains all sorts of metadata about the package. One critical piece of information is the required dependencies, including required versions of those dependencies.

For example in the requests.oauthlib setup.py file we have:

    install_requires=[&apos;oauthlib&gt;=0.6.2&apos;, &apos;requests&gt;=2.0.0&apos;]

But the RPM spec file does not enforce the same dependencies. The dependencies in the spec files are this:

For Py2:

Requires:           python-oauthlib
Requires:           python-requests

For Py3:

Requires:           python3-oauthlib
Requires:           python3-requests

The dependencies in the RPM *must* match those declared in the upstream metadata otherwise an install may not produce runnable code. This is the problem we&apos;re seeing with some distributions.

oauthlib 0.6.2 exposed new method oauthlib.oauth2.is_secure_transport(), requests-oauthlib references that symbol. But if a version of oauthlib older than 0.6.2 is installed the package installer won&apos;t force an update of oauthlib because of the missing version dependency.

The result is the python program aborts.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9205906</commentid>
    <comment_count>1</comment_count>
    <who name="Fedora Admin XMLRPC Client">fedora-admin-xmlrpc</who>
    <bug_when>2016-04-04 16:33:41 -0400</bug_when>
    <thetext>This package has changed ownership in the Fedora Package Database.  Reassigning to the new owner of this component.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9460231</commentid>
    <comment_count>2</comment_count>
    <who name="Ralph Bean">rbean</who>
    <bug_when>2016-06-28 13:08:20 -0400</bug_when>
    <thetext>While the underlying issue here (dependencies are not constrained the same way upstream specifies them)... we do have python-oauthlib &gt; 0.6.2 in F24 and rawhide now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9925634</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2016-11-24 11:12:24 -0500</bug_when>
    <thetext>This message is a reminder that Fedora 23 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 23. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;23&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 23 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10184043</commentid>
    <comment_count>4</comment_count>
    <who name="Kevin Fenzi">kevin</who>
    <bug_when>2017-02-25 19:51:15 -0500</bug_when>
    <thetext>I&apos;ve fixed this in rawhide and also updated it to 0.8.0. 

Let me know if you need a f25 build.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>