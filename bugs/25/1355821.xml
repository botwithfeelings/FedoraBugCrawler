<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1355821</bug_id>
          
          <creation_ts>2016-07-12 11:35:00 -0400</creation_ts>
          <short_desc>FTBFS due missing fence_zvm.h</short_desc>
          <delta_ts>2016-08-30 14:17:57 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>fence-agents</component>
          <version>25</version>
          <rep_platform>s390x</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>467765</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Dan Horák">dan</reporter>
          <assigned_to name="Marek Grac">mgrac</assigned_to>
          <cc>mgrac</cc>
    
    
    <cc>oalbrigt</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>fence-agents-4.0.24-1.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-08-30 14:17:57</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9502094</commentid>
    <comment_count>0</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-07-12 11:35:24 -0400</bug_when>
    <thetext>Build of new fence-agents fails on s390x due missing fence_zvm.h with

build.log
...
make[6]: Leaving directory &apos;/builddir/build/BUILD/fence-agents-4.0.23/fence/agents&apos;
set -e &amp;&amp; \
PYTHONPATH=/builddir/build/BUILD/fence-agents-4.0.23/fence/agents/lib:/builddir/build/BUILD/fence-agents-4.0.23/fence/agents/../lib:/builddir/build/BUILD/fence-agents-4.0.23/fence/agents/lib \
	/usr/bin/python ilo_ssh/fence_ilo3_ssh -o metadata &gt; ilo_ssh/.fence_ilo3_ssh.8.tmp &amp;&amp; \
xmllint --noout --relaxng /builddir/build/BUILD/fence-agents-4.0.23/fence/agents/lib/metadata.rng ilo_ssh/.fence_ilo3_ssh.8.tmp &amp;&amp; \
xsltproc ../../fence/agents/lib/fence2man.xsl ilo_ssh/.fence_ilo3_ssh.8.tmp &gt; ilo_ssh/fence_ilo3_ssh.8
ilo/.fence_ilo2.8.tmp validates
xsltproc ../../fence/agents/lib/fence2wiki.xsl ilo/.fence_ilo2.8.tmp | grep -v &apos;&lt;?xml&apos; &gt; ilo/fence_ilo2.wiki
make[5]: Leaving directory &apos;/builddir/build/BUILD/fence-agents-4.0.23/fence/agents&apos;
gcc -DHAVE_CONFIG_H -I. -I../../make   -I../../make -I../../make -I.  -D_GNU_SOURCE -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -march=z9-109 -mtune=z10 -O2 -ggdb3 	 -Wall -Wshadow -Wmissing-prototypes -Wmissing-declarations -Wstrict-prototypes -Wdeclaration-after-statement -Wpointer-arith -Wwrite-strings -Wcast-align -Wbad-function-cast -Wmissing-format-attribute -Wformat=2 -Wformat-security -Wformat-nonliteral -Wno-long-long -Wno-strict-aliasing  -c -o zvm/zvm_fence_zvm-fence_zvm.o `test -f &apos;zvm/fence_zvm.c&apos; || echo &apos;./&apos;`zvm/fence_zvm.c
ilo_ssh/.fence_ilo3_ssh.8.tmp validates
xsltproc ../../fence/agents/lib/fence2wiki.xsl ilo_ssh/.fence_ilo3_ssh.8.tmp | grep -v &apos;&lt;?xml&apos; &gt; ilo_ssh/fence_ilo3_ssh.wiki
make[5]: Leaving directory &apos;/builddir/build/BUILD/fence-agents-4.0.23/fence/agents&apos;
/bin/sh ../../libtool  --tag=CC   --mode=link gcc -D_GNU_SOURCE -Ikdump -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -march=z9-109 -mtune=z10 -O2 -ggdb3 	 -Wall -Wshadow -Wmissing-prototypes -Wmissing-declarations -Wstrict-prototypes -Wdeclaration-after-statement -Wpointer-arith -Wwrite-strings -Wcast-align -Wbad-function-cast -Wmissing-format-attribute -Wformat=2 -Wformat-security -Wformat-nonliteral -Wno-long-long -Wno-strict-aliasing   -Wl,-z,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -o kdump/fence_kdump_send kdump/kdump_fence_kdump_send-fence_kdump_send.o  
zvm/fence_zvm.c:48:23: fatal error: fence_zvm.h: No such file or directory
 #include &quot;fence_zvm.h&quot;
                       ^
make[5]: Entering directory &apos;/builddir/build/BUILD/fence-agents-4.0.23/fence/agents&apos;
set -e &amp;&amp; \
PYTHONPATH=/builddir/build/BUILD/fence-agents-4.0.23/fence/agents/lib:/builddir/build/BUILD/fence-agents-4.0.23/fence/agents/../lib:/builddir/build/BUILD/fence-agents-4.0.23/fence/agents/lib \
	/usr/bin/python ilo_ssh/fence_ilo4_ssh -o metadata &gt; ilo_ssh/.fence_ilo4_ssh.8.tmp &amp;&amp; \
xmllint --noout --relaxng /builddir/build/BUILD/fence-agents-4.0.23/fence/agents/lib/metadata.rng ilo_ssh/.fence_ilo4_ssh.8.tmp &amp;&amp; \
xsltproc ../../fence/agents/lib/fence2man.xsl ilo_ssh/.fence_ilo4_ssh.8.tmp &gt; ilo_ssh/fence_ilo4_ssh.8
compilation terminated.
Makefile:726: recipe for target &apos;zvm/zvm_fence_zvm-fence_zvm.o&apos; failed
make[3]: *** [zvm/zvm_fence_zvm-fence_zvm.o] Error 1
make[3]: *** Waiting for unfinished jobs....
ilo_ssh/.fence_ilo4_ssh.8.tmp validates
xsltproc ../../fence/agents/lib/fence2wiki.xsl ilo_ssh/.fence_ilo4_ssh.8.tmp | grep -v &apos;&lt;?xml&apos; &gt; ilo_ssh/fence_ilo4_ssh.wiki
make[5]: Leaving directory &apos;/builddir/build/BUILD/fence-agents-4.0.23/fence/agents&apos;
set -e &amp;&amp; \
PYTHONPATH=/builddir/build/BUILD/fence-agents-4.0.23/fence/agents/lib:/builddir/build/BUILD/fence-agents-4.0.23/fence/agents/../lib:/builddir/build/BUILD/fence-agents-4.0.23/fence/agents/lib \
	/usr/bin/python apc_snmp/fence_tripplite_snmp -o metadata &gt; apc_snmp/.fence_tripplite_snmp.8.tmp &amp;&amp; \
xmllint --noout --relaxng /builddir/build/BUILD/fence-agents-4.0.23/fence/agents/lib/metadata.rng apc_snmp/.fence_tripplite_snmp.8.tmp &amp;&amp; \
xsltproc ../../fence/agents/lib/fence2man.xsl apc_snmp/.fence_tripplite_snmp.8.tmp &gt; apc_snmp/fence_tripplite_snmp.8
apc_snmp/.fence_tripplite_snmp.8.tmp validates
xsltproc ../../fence/agents/lib/fence2wiki.xsl apc_snmp/.fence_tripplite_snmp.8.tmp | grep -v &apos;&lt;?xml&apos; &gt; apc_snmp/fence_tripplite_snmp.wiki
make[4]: Leaving directory &apos;/builddir/build/BUILD/fence-agents-4.0.23/fence/agents&apos;
libtool: link: gcc -D_GNU_SOURCE -Ikdump -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -march=z9-109 -mtune=z10 -O2 -ggdb3 -Wall -Wshadow -Wmissing-prototypes -Wmissing-declarations -Wstrict-prototypes -Wdeclaration-after-statement -Wpointer-arith -Wwrite-strings -Wcast-align -Wbad-function-cast -Wmissing-format-attribute -Wformat=2 -Wformat-security -Wformat-nonliteral -Wno-long-long -Wno-strict-aliasing -Wl,-z -Wl,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -o kdump/fence_kdump_send kdump/kdump_fence_kdump_send-fence_kdump_send.o 
make[3]: Leaving directory &apos;/builddir/build/BUILD/fence-agents-4.0.23/fence/agents&apos;
Makefile:387: recipe for target &apos;all-recursive&apos; failed
make[2]: Leaving directory &apos;/builddir/build/BUILD/fence-agents-4.0.23/fence&apos;
make[2]: *** [all-recursive] Error 1
Makefile:449: recipe for target &apos;all-recursive&apos; failed
make[1]: Leaving directory &apos;/builddir/build/BUILD/fence-agents-4.0.23&apos;
make[1]: *** [all-recursive] Error 1
Makefile:381: recipe for target &apos;all&apos; failed
make: *** [all] Error 2
error: Bad exit status from /var/tmp/rpm-tmp.Szjeiq (%build)
RPM build errors:
    Bad exit status from /var/tmp/rpm-tmp.Szjeiq (%build)
Child return code was: 1
EXCEPTION: Command failed. See logs for output.
 # bash --login -c /usr/bin/rpmbuild -bb --target s390x --nodeps  /builddir/build/SPECS/fence-agents.spec 
Traceback (most recent call last):
  File &quot;/usr/lib/python3.4/site-packages/mockbuild/trace_decorator.py&quot;, line 88, in trace
    result = func(*args, **kw)
  File &quot;/usr/lib/python3.4/site-packages/mockbuild/util.py&quot;, line 547, in do
    raise exception.Error(&quot;Command failed. See logs for output.\n # %s&quot; % (command,), child.returncode)
mockbuild.exception.Error: Command failed. See logs for output.
 # bash --login -c /usr/bin/rpmbuild -bb --target s390x --nodeps  /builddir/build/SPECS/fence-agents.spec 
LEAVE do --&gt; EXCEPTION RAISED
...

for full logs please see http://s390.koji.fedoraproject.org/koji/taskinfo?taskID=2285371


Version-Release number of selected component (if applicable):
fence-agents-4.0.23-1.fc25</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9504602</commentid>
    <comment_count>1</comment_count>
    <who name="Oyvind Albrigtsen">oalbrigt</who>
    <bug_when>2016-07-13 07:06:10 -0400</bug_when>
    <thetext>I&apos;ve now done a build where this should be fixed.

Can you try building fence-agents-4.0.23-2.fc25 for s390x?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9504629</commentid>
    <comment_count>2</comment_count>
    <who name="Oyvind Albrigtsen">oalbrigt</who>
    <bug_when>2016-07-13 07:14:31 -0400</bug_when>
    <thetext>Sorry about that. There appears to be some issue with the source archive, so I&apos;ll inform you when I&apos;ve updated it so that it contains fence_zvm.h.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9504648</commentid>
    <comment_count>3</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-07-13 07:21:18 -0400</bug_when>
    <thetext>still the same problem - http://s390.koji.fedoraproject.org/koji/taskinfo?taskID=2286606
Looks to me the fence_zvm.h file is not included in the source archive at all.

And you can try the build on secondary arches yourself with eg. 
s390-koji build --scratch f25 fence-agents-4.0.23-2.fc25.src.rpm
(and subst s390 for ppc or arm for ppc64/ppc64 or aarch64 scratch builds)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9549537</commentid>
    <comment_count>4</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-07-26 00:43:47 -0400</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 25 development cycle.
Changing version to &apos;25&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9652545</commentid>
    <comment_count>5</comment_count>
    <who name="Oyvind Albrigtsen">oalbrigt</who>
    <bug_when>2016-08-26 07:03:28 -0400</bug_when>
    <thetext>New build has been tested with &quot;s390-koji build --scratch f25 ...&quot; and worked as expected.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9652548</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-08-26 07:05:34 -0400</bug_when>
    <thetext>fence-agents-4.0.24-1.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-21cae0bccb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9655894</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-08-27 08:53:46 -0400</bug_when>
    <thetext>fence-agents-4.0.24-1.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-21cae0bccb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9664681</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-08-30 14:17:54 -0400</bug_when>
    <thetext>fence-agents-4.0.24-1.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>