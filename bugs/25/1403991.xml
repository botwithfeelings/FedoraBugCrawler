<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1403991</bug_id>
          
          <creation_ts>2016-12-12 14:51:00 -0500</creation_ts>
          <short_desc>FTBFS: lua-posix-33.3.1-2.fc24</short_desc>
          <delta_ts>2016-12-15 19:26:36 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>lua-posix</component>
          <version>25</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>high</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1400162</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephen Gallagher">sgallagh</reporter>
          <assigned_to name="Tim Niemueller">tim</assigned_to>
          <cc>michel</cc>
    
    
    <cc>orion</cc>
    
    
    <cc>psabata</cc>
    
    
    <cc>tim</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>lua-posix-33.3.1-3.fc26 lua-posix-33.3.1-3.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-12-15 18:31:40</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9978115</commentid>
    <comment_count>0</comment_count>
      <attachid>1230894</attachid>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-12-12 14:51:33 -0500</bug_when>
    <thetext>Created attachment 1230894
Patch to fix FTBFS

Description of problem:
When attempting to rebuild portions of the frozen package set of Fedora 25, we discovered that lua-posix fails to build due to lua and perl no longer being present in the default buildroot.

Version-Release number of selected component (if applicable):
lua-posix-33.3.1-2.fc24

How reproducible:
Every time

Steps to Reproduce:
1. fedpkg clone lua-posix
2. fedpkg switch-branch f25
3. fedpkg mock-build

Actual results:
Executing command: [&apos;bash&apos;, &apos;--login&apos;, &apos;-c&apos;, &apos;/usr/bin/rpmbuild -bs --target x86_64 --nodeps /builddir/build/SPECS/lua-posix.spec&apos;] with env {&apos;HOSTNAME&apos;: &apos;mock&apos;, &apos;TERM&apos;: &apos;vt100&apos;, &apos;PROMPT_COMMAND&apos;: &apos;printf &quot;\\033]0;&lt;mock-chroot&gt;\\007&quot;&apos;, &apos;LANG&apos;: &apos;en_US.UTF-8&apos;, &apos;PATH&apos;: &apos;/usr/bin:/bin:/usr/sbin:/sbin&apos;, &apos;HOME&apos;: &apos;/builddir&apos;, &apos;SHELL&apos;: &apos;/bin/bash&apos;, &apos;PS1&apos;: &apos;&lt;mock-chroot&gt; \\s-\\v\\$ &apos;} and shell False
sh: lua: command not found
error: line 20: Version required: Requires:       lua(abi) =

Expected results:
Successful build of the package.

Additional info:
This is needed as part of the Base Runtime effort. We are trying to minimize the possibility of churn from packaging changes post-F25 GA, so we would prefer to make a targeted build fix rather than unconditionally backporting from Rawhide unless both 1) no backwards-incompatible changes have occurred and 2) no new build- or runtime dependencies have appeared.

Please find attached a patch that pulls in a specfile hack to work around the lack of &apos;lua&apos; in the srpm buildroot and adds BuildRequires: perl.

If you feel it is acceptable, please pull it in and commit it to dist-git. If you feel like you also want to update the Rawhide version to a newer upstream release, please commit this patch *first* and then a new set of patches to pull the new version (so that we can reference the specific git hash that fixes this issue). 

If you feel the patch is unacceptable, please respond before Dec. 22 with an explanation of why. If we hear no response before then, a provenpackager will make the change so that we can unblock the Base Runtime effort.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9978124</commentid>
    <comment_count>1</comment_count>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-12-12 14:54:00 -0500</bug_when>
    <thetext>*** Bug 1401157 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9978697</commentid>
    <comment_count>2</comment_count>
    <who name="Orion Poplawski">orion</who>
    <bug_when>2016-12-12 17:34:59 -0500</bug_when>
    <thetext>Checked in and built.  Thanks.  F25 build coming.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9978705</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-12 17:42:54 -0500</bug_when>
    <thetext>lua-posix-33.3.1-3.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-37db176300</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9983015</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-13 21:23:55 -0500</bug_when>
    <thetext>lua-posix-33.3.1-3.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-37db176300</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9991677</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-15 18:31:40 -0500</bug_when>
    <thetext>lua-posix-33.3.1-3.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9991829</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-15 19:26:36 -0500</bug_when>
    <thetext>lua-posix-33.3.1-3.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1230894</attachid>
            <date>2016-12-12 14:51:00 -0500</date>
            <delta_ts>2016-12-12 14:51:33 -0500</delta_ts>
            <desc>Patch to fix FTBFS</desc>
            <filename>0001-Handle-lua-and-perl-no-longer-being-present-in-the-b.patch</filename>
            <type>application/mbox</type>
            <size>2227</size>
            <attacher name="Stephen Gallagher">sgallagh</attacher>
            
              <data encoding="base64">RnJvbSA2OWY0YjZjYzM2NzVkMTA2NDA4YzEzMTQwMWZmZTQ5ZmFmMmMxOWU1IE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBTdGVwaGVuIEdhbGxhZ2hlciA8c2dhbGxhZ2hAcmVkaGF0LmNv
bT4KRGF0ZTogTW9uLCAxMiBEZWMgMjAxNiAxNDo0NTo0MyAtMDUwMApTdWJqZWN0OiBbUEFUQ0hd
IEhhbmRsZSBsdWEgYW5kIHBlcmwgbm8gbG9uZ2VyIGJlaW5nIHByZXNlbnQgaW4gdGhlIGJ1aWxk
cm9vdAoKLS0tCiBsdWEtcG9zaXguc3BlYyB8IDEyICsrKysrKysrKystLQogMSBmaWxlIGNoYW5n
ZWQsIDEwIGluc2VydGlvbnMoKyksIDIgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvbHVhLXBv
c2l4LnNwZWMgYi9sdWEtcG9zaXguc3BlYwppbmRleCA5Y2VjODQ0NDMzOWFjYWVjMDZhN2Y1ZDIz
Y2NiMTA5ZmJlMjI4MzgzLi5hNjlkNGZmYzE2ZWNmNTFhZjM0ZTExZmMzNWQyOWRlNWVlNmZmMTU5
IDEwMDY0NAotLS0gYS9sdWEtcG9zaXguc3BlYworKysgYi9sdWEtcG9zaXguc3BlYwpAQCAtMSwy
MyArMSwyOCBAQAotJXshP2x1YXZlcjogJWdsb2JhbCBsdWF2ZXIgJShsdWEgLWUgInByaW50KHN0
cmluZy5zdWIoX1ZFUlNJT04sIDUpKSIpfQorIyBUaGUgImVjaG8gMCIgaGVyZSBpcyBhIGhhY2sg
dG8gZW5hYmxlIHRoZSBwYWNrYWdlIHRvIGdlbmVyYXRlIGFuIFNSUE0KKyMgKG90aGVyd2lzZSwg
dGhlIFJlcXVpcmVzOiBiZWxvdyB3aWxsIG5vdCBwYXJzZS4gVGhlICV7bHVhdmVyfSB3aWxsIGJl
IGNvcnJlY3QKKyMgd2hlbiB0aGUgcmVhbCBSUE0gaXMgZ2VuZXJhdGVkLgorJXshP2x1YXZlcjog
JWdsb2JhbCBsdWF2ZXIgJShsdWEgLWUgInByaW50KHN0cmluZy5zdWIoX1ZFUlNJT04sIDUpKSIg
fHwgZWNobyAwKX0KKwogJWdsb2JhbCBsdWFsaWJkaXIgJXtfbGliZGlyfS9sdWEvJXtsdWF2ZXJ9
CiAlZ2xvYmFsIGx1YXBrZ2RpciAle19kYXRhZGlyfS9sdWEvJXtsdWF2ZXJ9CiAlZ2xvYmFsIGNv
bW1pdCA1ODAxNmJiYmE0MGIwNjNlOGE5OGE3ZTlmMTRhY2ZjZDQ2ZjEwM2Q0CiAlZ2xvYmFsIHNo
b3J0Y29tbWl0ICUoYz0le2NvbW1pdH07IGVjaG8gJHtjOjA6N30pCiAKIE5hbWU6ICAgICAgICAg
ICBsdWEtcG9zaXgKIFZlcnNpb246ICAgICAgICAzMy4zLjEKLVJlbGVhc2U6ICAgICAgICAyJXs/
ZGlzdH0KK1JlbGVhc2U6ICAgICAgICAzJXs/ZGlzdH0KIFN1bW1hcnk6ICAgICAgICBBIFBPU0lY
IGxpYnJhcnkgZm9yIEx1YQogR3JvdXA6ICAgICAgICAgIERldmVsb3BtZW50L0xpYnJhcmllcwog
TGljZW5zZTogICAgICAgIFB1YmxpYyBEb21haW4KIFVSTDogICAgICAgICAgICBodHRwOi8vbHVh
Zm9yZ2UubmV0L3Byb2plY3RzL2x1YXBvc2l4LwogU291cmNlMDogICAgICAgIGh0dHBzOi8vZ2l0
aHViLmNvbS9sdWFwb3NpeC9sdWFwb3NpeC9hcmNoaXZlL3JlbGVhc2UtdiV7dmVyc2lvbn0udGFy
Lmd6CiBCdWlsZFJvb3Q6ICAgICAgJXtfdG1wcGF0aH0vJXtuYW1lfS0le3ZlcnNpb259LSV7cmVs
ZWFzZX0tcm9vdC0lKCV7X19pZF91fSAtbikKIEJ1aWxkUmVxdWlyZXM6ICBsdWEtZGV2ZWwKIEJ1
aWxkUmVxdWlyZXM6ICBuY3Vyc2VzLWRldmVsCiBCdWlsZFJlcXVpcmVzOglsdWEtbHVuaXQKK0J1
aWxkUmVxdWlyZXM6ICBwZXJsCiAlaWYgMCV7P2ZlZG9yYX0gfHwgMCV7P3JoZWx9ID49IDcKIFJl
cXVpcmVzOiAgICAgICBsdWEoYWJpKSA9ICV7bHVhdmVyfQogJWVsc2UKIFJlcXVpcmVzOiAgICAg
ICBsdWEgPj0gJXtsdWF2ZXJ9CiAlZW5kaWYKQEAgLTU1LDEwICs2MCwxMyBAQCBybSAtcmYgJFJQ
TV9CVUlMRF9ST09UCiAle2x1YXBrZ2Rpcn0vKi5sdWEKICV7bHVhcGtnZGlyfS9wb3NpeC8KIAog
CiAlY2hhbmdlbG9nCisqIE1vbiBEZWMgMTIgMjAxNiBTdGVwaGVuIEdhbGxhZ2hlciA8c2dhbGxh
Z2hAcmVkaGF0LmNvbT4gLSAzMy4zLjEtMworLSBIYW5kbGUgbHVhIGFuZCBwZXJsIG5vIGxvbmdl
ciBiZWluZyBwcmVzZW50IGluIHRoZSBidWlsZHJvb3QKKwogKiBUaHUgRmViIDA0IDIwMTYgRmVk
b3JhIFJlbGVhc2UgRW5naW5lZXJpbmcgPHJlbGVuZ0BmZWRvcmFwcm9qZWN0Lm9yZz4gLSAzMy4z
LjEtMgogLSBSZWJ1aWx0IGZvciBodHRwczovL2ZlZG9yYXByb2plY3Qub3JnL3dpa2kvRmVkb3Jh
XzI0X01hc3NfUmVidWlsZAogCiAqIEZyaSBKdWwgMTcgMjAxNSBPcmlvbiBQb3BsYXdza2kgPG9y
aW9uQGNvcmEubndyYS5jb20+IC0gMzMuMy4xLTEKIC0gVXBkYXRlIHRvIDMzLjMuMQotLSAKMi45
LjMKCg==
</data>

          </attachment>
      

    </bug>

</bugzilla>