<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1340736</bug_id>
          
          <creation_ts>2016-05-30 04:17:00 -0400</creation_ts>
          <short_desc>chck - tests fail on secondary arches</short_desc>
          <delta_ts>2016-09-07 04:45:13 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>chck</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>467765</blocked>
    
    
    <blocked>922257</blocked>
    
    
    <blocked>1071880</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Dan Horák">dan</reporter>
          <assigned_to name="Fabio Alessandro Locati">fale</assigned_to>
          <cc>fale</cc>
    
    
    <cc>yselkowi</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-09-06 18:18:36</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9368243</commentid>
    <comment_count>0</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-05-30 04:17:38 -0400</bug_when>
    <thetext>chck is currently FTBFS on all secondary arches because few tests are failing

5 - math_test (OTHER_FAULT) on all (aarch64, ppc64/ppc64le, s390(x)), so I expect it a precision problem
1 - buffer_test (OTHER_FAULT) only on big endians (ppc64, s390(x))

from build.log on s390x
...
Executing(%check): /bin/sh -e /var/tmp/rpm-tmp.bvLwK2
+ umask 022
+ cd /builddir/build/BUILD
+ cd chck-527540384ddd5b391c42ba294f74b8dd9766a6b7
+ ctest -V -R dl_test
UpdateCTestConfiguration  from :/builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/DartConfiguration.tcl
Parse Config file:/builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/DartConfiguration.tcl
UpdateCTestConfiguration  from :/builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/DartConfiguration.tcl
Parse Config file:/builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/DartConfiguration.tcl
Test project /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7
Constructing a list of tests
Done constructing a list of tests
Checking test dependency graph...
Checking test dependency graph end
test 7
    Start 7: dl_test
7: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/dl_test
7: Test timeout computed to be: 1500
1/1 Test #7: dl_test ..........................   Passed    0.00 sec
The following tests passed:
	dl_test
100% tests passed, 0 tests failed out of 1
Total Test time (real) =   0.00 sec
+ ctest -V -j4
UpdateCTestConfiguration  from :/builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/DartConfiguration.tcl
Parse Config file:/builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/DartConfiguration.tcl
UpdateCTestConfiguration  from :/builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/DartConfiguration.tcl
Parse Config file:/builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/DartConfiguration.tcl
Test project /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7
Constructing a list of tests
Done constructing a list of tests
Checking test dependency graph...
Checking test dependency graph end
test 7
      Start  7: dl_test
7: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/dl_test
7: Test timeout computed to be: 1500
test 1
      Start  1: buffer_test
1: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/buffer_test
1: Test timeout computed to be: 1500
test 2
      Start  2: pool_test
2: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/pool_test
2: Test timeout computed to be: 1500
test 3
      Start  3: lut_test
3: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/lut_test
3: Test timeout computed to be: 1500
2: item::1
2: item::2
2: item::3
2: item::1
2: item::2
2: item::3
2: item::3
2: item::1
2: item::2
1: buffer_test: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/chck/buffer/test.c:76: main: Assertion `chck_buffer_read_string(&amp;str, &amp;len, &amp;buf)&apos; failed.
 1/14 Test  #2: pool_test ........................   Passed    0.24 sec
 2/14 Test  #1: buffer_test ......................***Exception: Other  0.25 sec
 3/14 Test  #7: dl_test ..........................   Passed    0.25 sec
test 4
      Start  4: atlas_test
4: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/atlas_test
4: Test timeout computed to be: 1500
test 5
      Start  5: math_test
5: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/math_test
5: Test timeout computed to be: 1500
test 6
      Start  6: bams_test
6: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/bams_test
6: Test timeout computed to be: 1500
3: (0) foobar
3: (1) penguin
3: (2) ismo
3: (0) foobar
3: (1) penguin
3: (2) ismo
3: (0) foobar
3: (1) penguin
3: (0) foobar
3: (1) penguin
3: (2) ismo
3: (2) ismo
3: [1] collisions: 0
3: (0) foobar
3: (1) penguin
3: (2) ismo
3: [2] collisions: 0
3: [3] collisions: 1
3: [4] collisions: 0
5: math_test: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/chck/math/test.c:11: main: Assertion `chck_equalld(10.0, 10.000000000001l, 1000000.0l)&apos; failed.
4: 352x320 (0)
4: 512x512 (149504)
 4/14 Test  #3: lut_test .........................   Passed    0.25 sec
 5/14 Test  #5: math_test ........................***Exception: Other  0.03 sec
 6/14 Test  #6: bams_test ........................   Passed    0.03 sec
 7/14 Test  #4: atlas_test .......................   Passed    0.04 sec
test 8
      Start  8: fs_test
8: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/fs_test
8: Test timeout computed to be: 1500
test 9
      Start  9: sjis_test
9: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/sjis_test
9: Test timeout computed to be: 1500
test 10
      Start 10: xdg_test
10: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/xdg_test
10: Test timeout computed to be: 1500
test 11
      Start 11: string_test
11: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/string_test
11: Test timeout computed to be: 1500
10: /builddir/.config
10: /builddir/.local/share
10: /builddir/.cache
10: /builddir/but_mah_path_is_still_here
10: =&gt; /usr/share
10: =&gt; /foo/bar
10: =&gt; /the/relative/got/skipped
8: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/fs_test
 8/14 Test #10: xdg_test .........................   Passed    0.01 sec
 9/14 Test  #8: fs_test ..........................   Passed    0.02 sec
10/14 Test #11: string_test ......................   Passed    0.01 sec
11/14 Test  #9: sjis_test ........................   Passed    0.02 sec
test 12
      Start 12: thread_queue_test
12: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/thread_queue_test
12: Test timeout computed to be: 1500
test 13
      Start 13: overflow_test
13: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/overflow_test
13: Test timeout computed to be: 1500
test 14
      Start 14: unicode_test
14: Test command: /builddir/build/BUILD/chck-527540384ddd5b391c42ba294f74b8dd9766a6b7/test/unicode_test
14: Test timeout computed to be: 1500
12/14 Test #13: overflow_test ....................   Passed    0.01 sec
13/14 Test #14: unicode_test .....................   Passed    0.00 sec
14/14 Test #12: thread_queue_test ................   Passed    0.21 sec
86% tests passed, 2 tests failed out of 14
Total Test time (real) =   0.53 sec
The following tests FAILED:
	  1 - buffer_test (OTHER_FAULT)
	  5 - math_test (OTHER_FAULT)
Errors while running CTest
RPM build errors:
error: Bad exit status from /var/tmp/rpm-tmp.bvLwK2 (%check)
    Bad exit status from /var/tmp/rpm-tmp.bvLwK2 (%check)
...


for full logs please see
http://s390.koji.fedoraproject.org/koji/taskinfo?taskID=2247241
http://arm.koji.fedoraproject.org/koji/taskinfo?taskID=3572734
http://ppc.koji.fedoraproject.org/koji/taskinfo?taskID=3420050


Version-Release number of selected component (if applicable):
chck-0-1.20160408git2efd6cd.fc25
chck-0-1.20160408git5275403.fc24</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9368534</commentid>
    <comment_count>1</comment_count>
    <who name="Fabio Alessandro Locati">fale</who>
    <bug_when>2016-05-30 05:42:03 -0400</bug_when>
    <thetext>Thanks for the report. I&apos;ve created a bug upstream https://github.com/Cloudef/chck/issues/24</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9548993</commentid>
    <comment_count>2</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-07-26 00:16:48 -0400</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 25 development cycle.
Changing version to &apos;25&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9684326</commentid>
    <comment_count>3</comment_count>
    <who name="Fabio Alessandro Locati">fale</who>
    <bug_when>2016-09-06 18:18:36 -0400</bug_when>
    <thetext>Fixed in http://koji.fedoraproject.org/koji/buildinfo?buildID=798022 :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9685187</commentid>
    <comment_count>4</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-09-07 02:42:03 -0400</bug_when>
    <thetext>Thanks, confirmed on on s390x - http://s390.koji.fedoraproject.org/koji/buildinfo?buildID=428374

Please submit the new builds as updates in Bodhi.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9685644</commentid>
    <comment_count>5</comment_count>
    <who name="Fabio Alessandro Locati">fale</who>
    <bug_when>2016-09-07 04:45:13 -0400</bug_when>
    <thetext>sorry, I thought I did it, but probably I did not pressed &apos;save&apos;. They are now there :)</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>