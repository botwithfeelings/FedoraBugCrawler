<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1377718</bug_id>
          
          <creation_ts>2016-09-20 08:43:00 -0400</creation_ts>
          <short_desc>delete corrupted downloads</short_desc>
          <delta_ts>2016-09-26 20:31:45 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>mediawriter</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kamil Páral">kparal</reporter>
          <assigned_to name="Martin Bříza">mbriza</assigned_to>
          <cc>mbriza</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>mediawriter-3.97.1-0.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-09-26 20:31:45</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9725915</commentid>
    <comment_count>0</comment_count>
    <who name="Kamil Páral">kparal</who>
    <bug_when>2016-09-20 08:43:16 -0400</bug_when>
    <thetext>Description of problem:
Currently if checksum verification fails, and you hit Retry, it _writes_ that image onto the stick. It should instead retry the download. Also, if you quit and restart mediawriter in the meantime, no further verification is performed, and again the (corrupted) image is written. I think that is confusing to the user and very error-prone.

It would be much easier if you simply deleted the image immediately if the checksum verification fails. That would also probably make the Retry button work properly.

Version-Release number of selected component (if applicable):
mediawriter-3.96.0-0.fc25.x86_64

How reproducible:
always

Steps to Reproduce:
1. echo &quot;broken&quot; &gt; ~/Download/Fedora-Workstation-Live-x86_64-24-1.2.iso.part
2. download the rest of the image using mediawriter
3. see &quot;verification failed&quot; error
4. click Retry button
5. see &quot;Ready to write&quot; message immediately</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9725928</commentid>
    <comment_count>1</comment_count>
    <who name="Martin Bříza">mbriza</who>
    <bug_when>2016-09-20 08:47:35 -0400</bug_when>
    <thetext>Based on your report, I fixed this upstream. Thank you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9736328</commentid>
    <comment_count>2</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-23 01:24:20 -0400</bug_when>
    <thetext>mediawriter-3.97.0-0.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-d84f684d42</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9737748</commentid>
    <comment_count>3</comment_count>
    <who name="Kamil Páral">kparal</who>
    <bug_when>2016-09-23 09:02:04 -0400</bug_when>
    <thetext>This seems to work for the reproducer in comment 0, however it didn&apos;t work for me when I did this:

$ truncate -s 1540000000 Fedora-Workstation-Live-x86_64-24-1.2.iso.part

The image was &quot;ready to write&quot; after downloading the few missing MBs. Martin said it works well for him with 3.97.1, I&apos;ll wait for the new version and try it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9737884</commentid>
    <comment_count>4</comment_count>
    <who name="Kamil Páral">kparal</who>
    <bug_when>2016-09-23 09:47:55 -0400</bug_when>
    <thetext>(In reply to Kamil Páral from comment #3)
&gt; This seems to work for the reproducer in comment 0, however it didn&apos;t work
&gt; for me when I did this:
&gt; 
&gt; $ truncate -s 1540000000 Fedora-Workstation-Live-x86_64-24-1.2.iso.part

This works well for me (&quot;image is corrupted&quot;) with mediawriter-3.97.1-0.fc25.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9740373</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-24 13:52:07 -0400</bug_when>
    <thetext>mediawriter-3.97.1-0.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-e34fd77aaf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9744338</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-26 20:31:45 -0400</bug_when>
    <thetext>mediawriter-3.97.1-0.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>