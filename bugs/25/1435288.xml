<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1435288</bug_id>
          
          <creation_ts>2017-03-23 09:55:00 -0400</creation_ts>
          <short_desc>Cached remote content not always found in cache</short_desc>
          <delta_ts>2017-06-28 04:16:59 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>evolution</component>
          <version>25</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>RAWHIDE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1435598</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Don Swaner">dswaner</reporter>
          <assigned_to name="Milan Crha">mcrha</assigned_to>
          <cc>lucilanga</cc>
    
    
    <cc>mbarnes</cc>
    
    
    <cc>mcepl</cc>
    
    
    <cc>mcrha</cc>
    
    
    <cc>tpopela</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>evolution-3.24.1</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-24 06:24:08</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10269916</commentid>
    <comment_count>0</comment_count>
    <who name="Don Swaner">dswaner</who>
    <bug_when>2017-03-23 09:55:56 -0400</bug_when>
    <thetext>Description of problem:
When remote content is downloaded, evolution displays email remote content barcodes but will not print barcodes.

Version-Release number of selected component (if applicable):
evolution-3.22.6-1.fc25.x86_64

How reproducible:
Always, apparently, but I have only tried with 2 different emails

Steps to Reproduce:
1.  View an email which has a barcode in its remote content
2.  Print the email

Actual results:
The barcode is not printed.

Expected results:
The barcode is printed.

Additional info:
Same results for printing hardcopy and printing to file - an &quot;unknown image box&quot; is displayed instead of the barcode.  A snippet of the message source follows:

&lt;td align=&quot;center&quot; valign=&quot;top&quot; height=&quot;20px&quot;&gt;
                                                    &lt;img src=&quot;http://b.walmart.com/cgi-bin/ebarz.cgi?data=00005174820082663837&amp;encoding=CODE128&amp;den=70&amp;h=50&quot; border=&quot;0&quot; alt=&quot;&quot;/&gt;
                                                &lt;/td&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10273960</commentid>
    <comment_count>1</comment_count>
    <who name="Milan Crha">mcrha</who>
    <bug_when>2017-03-24 04:49:44 -0400</bug_when>
    <thetext>Thanks for a bug report. I can reproduce it too, even without printing. It&apos;s enough to load remote content in the preview panel (then the image with the bar code is shown), then move to another message and back and the image is gone. Other remote images (those referenced directly, without additional parameters) do not suffer of this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10274281</commentid>
    <comment_count>2</comment_count>
    <who name="Milan Crha">mcrha</who>
    <bug_when>2017-03-24 06:24:08 -0400</bug_when>
    <thetext>The problem was that the URL being used to check whether the image is already locally cached and the URL which was used to actually download the remote content did not match, thus the file were not found in the local cache. While I&apos;ve been in it I also noticed that the remote content is not shown in the composer, even when it&apos;s downloaded locally, thus I fixed that as well.

Created commit ff4f037 in evo master (3.25.1+)
Created commit 0b7ba94 in evo gnome-3-24 (3.24.1+)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10274292</commentid>
    <comment_count>3</comment_count>
    <who name="Milan Crha">mcrha</who>
    <bug_when>2017-03-24 06:25:25 -0400</bug_when>
    <thetext>A link to the stable-branch commit:
https://git.gnome.org/browse/evolution/commit/?id=0b7ba94</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10547167</commentid>
    <comment_count>4</comment_count>
      <attachid>1292580</attachid>
    <who name="Matěj Cepl">mcepl</who>
    <bug_when>2017-06-28 04:16:59 -0400</bug_when>
    <thetext>Created attachment 1292580
test case</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1292580</attachid>
            <date>2017-06-28 04:16:00 -0400</date>
            <delta_ts>2017-06-28 04:16:59 -0400</delta_ts>
            <desc>test case</desc>
            <filename>test.mbox</filename>
            <type>message/rfc822</type>
            <size>1624</size>
            <attacher name="Matěj Cepl">mcepl</attacher>
            
              <data encoding="base64">RnJvbSBtY2VwbEByZWRoYXQuY29tIFdlZCBKdW4gMjggMDQ6MTQ6NDggMjAxNwpSZXR1cm4tUGF0
aDogbWNlcGxAcmVkaGF0LmNvbQpSZWNlaXZlZDogZnJvbSB6bXRhMDQuY29sbGFiLnByb2QuaW50
LnBoeDIucmVkaGF0LmNvbSAoTEhMTwogem10YTA0LmNvbGxhYi5wcm9kLmludC5waHgyLnJlZGhh
dC5jb20pICgxMC41LjgxLjExKSBieQogem1haWwxOC5jb2xsYWIucHJvZC5pbnQucGh4Mi5yZWRo
YXQuY29tIHdpdGggTE1UUDsgV2VkLCAyOCBKdW4gMjAxNwogMDQ6MTQ6NDggLTA0MDAgKEVEVCkK
UmVjZWl2ZWQ6IGZyb20gc210cC5jb3JwLnJlZGhhdC5jb20KIChpbnQtbXgwMi5pbnRtYWlsLnBy
b2QuaW50LnBoeDIucmVkaGF0LmNvbSBbMTAuNS4xMS4xMl0pIGJ5CiB6bXRhMDQuY29sbGFiLnBy
b2QuaW50LnBoeDIucmVkaGF0LmNvbSAoUG9zdGZpeCkgd2l0aCBFU01UUCBpZCA1QjZCM0RBMTE0
CiBmb3IgPG1jZXBsQG1haWwuY29ycC5yZWRoYXQuY29tPjsgV2VkLCAyOCBKdW4gMjAxNyAwNDox
NDo0OCAtMDQwMCAoRURUKQpSZWNlaXZlZDogYnkgc210cC5jb3JwLnJlZGhhdC5jb20gKFBvc3Rm
aXgpCglpZCA1NTg2OTkzQkIzOyBXZWQsIDI4IEp1biAyMDE3IDA4OjE0OjQ4ICswMDAwIChVVEMp
CkRlbGl2ZXJlZC1UbzogbWNlcGxAcmVkaGF0LmNvbQpSZWNlaXZlZDogZnJvbSBtaXRtYW5lay5j
ZXBsb3ZpLmN6IChvdnBuLTIwNC01Ni5icnEucmVkaGF0LmNvbQogWzEwLjQwLjIwNC41Nl0pIGJ5
IHNtdHAuY29ycC5yZWRoYXQuY29tIChQb3N0Zml4KSB3aXRoIEVTTVRQUyBpZCAyMTMxMDk0QzRC
CiBmb3IgPG1jZXBsQHJlZGhhdC5jb20+OyBXZWQsIDI4IEp1biAyMDE3IDA4OjE0OjQ4ICswMDAw
IChVVEMpClJlY2VpdmVkOiBieSBtaXRtYW5lay5jZXBsb3ZpLmN6IChQb3N0Zml4LCBmcm9tIHVz
ZXJpZCAxMDAwKQoJaWQgNUI3RTU4MTE5NUMzOyBXZWQsIDI4IEp1biAyMDE3IDEwOjE1OjEwICsw
MjAwIChDRVNUKQpEYXRlOiBXZWQsIDI4IEp1biAyMDE3IDEwOjE1OjEwICswMjAwCkZyb206ID0/
aXNvLTg4NTktMj9RP01hdD1FQ2o/PSBDZXBsIDxtY2VwbEByZWRoYXQuY29tPgpUbzogTWF0ZWog
Q2VwbCA8bWNlcGxAcmVkaGF0LmNvbT4KU3ViamVjdDogdGVzdApNZXNzYWdlLUlEOiA8MjAxNzA2
MjgwODE1MTAuR0EzOTM2QG1pdG1hbmVrLmNlcGxvdmkuY3o+Ck1JTUUtVmVyc2lvbjogMS4wCkNv
bnRlbnQtVHlwZTogdGV4dC9odG1sOyBjaGFyc2V0PXVzLWFzY2lpCkNvbnRlbnQtRGlzcG9zaXRp
b246IGlubGluZQpPcmdhbml6YXRpb246IFJlZCBIYXQgQ3plY2gsIHMuci5vLgpVc2VyLUFnZW50
OiBNdXR0LzEuNS4yMSAoMjAxMC0wOS0xNSkKWC1TY2FubmVkLUJ5OiBNSU1FRGVmYW5nIDIuNzkg
b24gMTAuNS4xMS4xMgpYLUV2b2x1dGlvbi1Tb3VyY2U6IDE0MjY5MzMzMTMuNzk5NS42QG1pdG1h
bmVrCkNvbnRlbnQtVHJhbnNmZXItRW5jb2Rpbmc6IDhiaXQKCjxodG1sPg0KPGhlYWQ+PC9oZWFk
Pg0KPGJvZHk+PGltZyBzcmM9Imh0dHA6Ly93d3cud2FsbWFydC5jb20vc2VydmxldC9nZW5lcmF0
ZUJhcmNvZGU/ZGF0YT0wMDAwNTE3NDgyMDA4MjY2MzgzNyZlbmNvZGluZz1DT0RFMTI4JmRlbj03
MCZoPTUwIi8+DQo8L2JvZHk+PC9odG1sPg0KCg==
</data>

          </attachment>
      

    </bug>

</bugzilla>