<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1367280</bug_id>
          
          <creation_ts>2016-08-16 02:23:00 -0400</creation_ts>
          <short_desc>SELinux is preventing systemd from &apos;getattr&apos; accesses on the blk_file /run/systemd/inaccessible/blk.</short_desc>
          <delta_ts>2016-09-30 15:03:20 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>selinux-policy</component>
          <version>25</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard>abrt_hash:bd359d4c7dd5dbb65b3aa1d52ebf31cf8b2897b444bb5503b048ad55d3671d64;VARIANT_ID=workstation; AcceptedBlocker</status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>high</priority>
          <bug_severity>high</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1277289</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Kamil Páral">kparal</reporter>
          <assigned_to name="Lukas Vrabec">lvrabec</assigned_to>
          <cc>13639307543</cc>
    
    
    <cc>akurtako</cc>
    
    
    <cc>alexsanderb.maciel</cc>
    
    
    <cc>alex.vizor</cc>
    
    
    <cc>bugzilla</cc>
    
    
    <cc>bugzilla</cc>
    
    
    <cc>bugzilla.redhat</cc>
    
    
    <cc>candan</cc>
    
    
    <cc>chmelarz</cc>
    
    
    <cc>csamyn</cc>
    
    
    <cc>dominick.grift</cc>
    
    
    <cc>dwalsh</cc>
    
    
    <cc>em3rson</cc>
    
    
    <cc>gavinflower</cc>
    
    
    <cc>gmarr</cc>
    
    
    <cc>jamatos</cc>
    
    
    <cc>jeremy</cc>
    
    
    <cc>jfrieben</cc>
    
    
    <cc>juliux.pigface</cc>
    
    
    <cc>lnie</cc>
    
    
    <cc>lslebodn</cc>
    
    
    <cc>lvrabec</cc>
    
    
    <cc>mgrepl</cc>
    
    
    <cc>mikhail.v.gavrilov</cc>
    
    
    <cc>msekleta</cc>
    
    
    <cc>paulcarroty</cc>
    
    
    <cc>pavel.raur.pr</cc>
    
    
    <cc>peter</cc>
    
    
    <cc>plautrba</cc>
    
    
    <cc>rhbz2</cc>
    
    
    <cc>robatino</cc>
    
    
    <cc>rosset.filipe</cc>
    
    
    <cc>sangu.fedora</cc>
    
    
    <cc>seppo.yli-olli</cc>
    
    
    <cc>sgallagh</cc>
    
    
    <cc>stefw</cc>
    
    
    <cc>viorel.tabara</cc>
    
    
    <cc>vondruch</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>selinux-policy-3.13.1-214.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-09-20 20:36:42</cf_last_closed>
          <cf_type>---</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9617374</commentid>
    <comment_count>0</comment_count>
    <who name="Kamil Páral">kparal</who>
    <bug_when>2016-08-16 02:23:51 -0400</bug_when>
    <thetext>Description of problem:
This popped up on me on first boot after a default Workstation Live install (Fedora-Workstation-Live-x86_64-25-20160815.n.2.iso). I just started terminal and ran dnf, nothing else. Not sure whether this occurred before or after.
SELinux is preventing systemd from &apos;getattr&apos; accesses on the blk_file /run/systemd/inaccessible/blk.

*****  Plugin restorecon (99.5 confidence) suggests   ************************

If you want to fix the label. 
/run/systemd/inaccessible/blk default label should be init_var_run_t.
Then you can run restorecon.
Do
# /sbin/restorecon -v /run/systemd/inaccessible/blk

*****  Plugin catchall (1.49 confidence) suggests   **************************

If you believe that systemd should be allowed getattr access on the blk blk_file by default.
Then you should report this as a bug.
You can generate a local policy module to allow this access.
Do
allow this access for now by executing:
# ausearch -c &apos;systemd&apos; --raw | audit2allow -M my-systemd
# semodule -X 300 -i my-systemd.pp

Additional Information:
Source Context                system_u:system_r:init_t:s0
Target Context                system_u:object_r:tmpfs_t:s0
Target Objects                /run/systemd/inaccessible/blk [ blk_file ]
Source                        systemd
Source Path                   systemd
Port                          &lt;Unknown&gt;
Host                          (removed)
Source RPM Packages           
Target RPM Packages           
Policy RPM                    selinux-policy-3.13.1-207.fc25.noarch
Selinux Enabled               True
Policy Type                   targeted
Enforcing Mode                Enforcing
Host Name                     (removed)
Platform                      Linux (removed) 4.8.0-0.rc1.git0.1.fc25.x86_64 #1
                              SMP Mon Aug 8 16:20:07 UTC 2016 x86_64 x86_64
Alert Count                   2
First Seen                    2016-08-16 08:09:01 CEST
Last Seen                     2016-08-16 08:09:03 CEST
Local ID                      efe86201-1e0d-47fc-9e89-60ea7470a02d

Raw Audit Messages
type=AVC msg=audit(1471327743.298:166): avc:  denied  { getattr } for  pid=1 comm=&quot;systemd&quot; path=&quot;/run/systemd/inaccessible/blk&quot; dev=&quot;tmpfs&quot; ino=10054 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:tmpfs_t:s0 tclass=blk_file permissive=0


Hash: systemd,init_t,tmpfs_t,blk_file,getattr

Version-Release number of selected component:
selinux-policy-3.13.1-207.fc25.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc1.git0.1.fc25.x86_64
type:           libreport

Potential duplicate: bug 1364816</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9617376</commentid>
    <comment_count>1</comment_count>
    <who name="Kamil Páral">kparal</who>
    <bug_when>2016-08-16 02:24:29 -0400</bug_when>
    <thetext>Proposing as a Final blocker:
&quot;There must be no SELinux denial notifications or crash notifications on boot of or during installation from a release-blocking live image, or at first login after a default install of a release-blocking desktop. &quot;
https://fedoraproject.org/wiki/Fedora_25_Final_Release_Criteria#SELinux_and_crash_notifications</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9618792</commentid>
    <comment_count>2</comment_count>
    <who name="Lukas Vrabec">lvrabec</who>
    <bug_when>2016-08-16 08:55:41 -0400</bug_when>
    <thetext>Michal, 

How is files: blk,fifo,chr files are created in /run/systemd/inaccessible/ ? 

Thank you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9619436</commentid>
    <comment_count>3</comment_count>
    <who name="Lukas Vrabec">lvrabec</who>
    <bug_when>2016-08-16 11:20:08 -0400</bug_when>
    <thetext>*** Bug 1364816 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9619881</commentid>
    <comment_count>4</comment_count>
    <who name="Zdenek Chmelar">chmelarz</who>
    <bug_when>2016-08-16 13:23:17 -0400</bug_when>
    <thetext>Description of problem:
Right after system start

Version-Release number of selected component:
selinux-policy-3.13.1-206.fc26.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc0.git5.1.fc26.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9623819</commentid>
    <comment_count>5</comment_count>
    <who name="Giulio &apos;juliuxpigface&apos;">juliux.pigface</who>
    <bug_when>2016-08-17 14:13:58 -0400</bug_when>
    <thetext>Description of problem:
I&apos;ve encountered this after logging into a Gnome session.

Version-Release number of selected component:
selinux-policy-3.13.1-207.fc25.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc0.git3.1.fc25.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9625487</commentid>
    <comment_count>6</comment_count>
    <who name="lnie">lnie</who>
    <bug_when>2016-08-18 03:58:42 -0400</bug_when>
    <thetext>Description of problem:
Do a default installation with workstation-live-20160817;
boot the newly installed system;
this pops up immediately after the login

Version-Release number of selected component:
selinux-policy-3.13.1-208.fc25.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc1.git0.1.fc25.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9637764</commentid>
    <comment_count>7</comment_count>
    <who name="Geoffrey Marr">gmarr</who>
    <bug_when>2016-08-22 18:20:36 -0400</bug_when>
    <thetext>Discussed during the 2016-08-22 blocker review meeting: [1]

The decision to classify this bug as an AcceptedBlocker was made as it is a clear violation of &quot;There must be no SELinux denial notifications or crash notifications on boot of or during installation from a release-blocking live image, or at first login after a default install of a release-blocking desktop.&quot;

[1] https://meetbot.fedoraproject.org/fedora-blocker-review/2016-08-22/f25-blocker-review.2016-08-22-16.00.txt</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9645204</commentid>
    <comment_count>8</comment_count>
    <who name="Joachim Frieben">jfrieben</who>
    <bug_when>2016-08-24 06:35:56 -0400</bug_when>
    <thetext>Description of problem:
Alert appears after booting from Fedora-Workstation-Live-x86_64-25_Alpha-1.1.

Version-Release number of selected component:
selinux-policy-3.13.1-208.fc25.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc2.git3.1.fc25.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9649905</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-08-25 14:21:00 -0400</bug_when>
    <thetext>selinux-policy-3.13.1-211.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-cbdde50ec4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9650270</commentid>
    <comment_count>10</comment_count>
    <who name="Alex">alex.vizor</who>
    <bug_when>2016-08-25 17:37:18 -0400</bug_when>
    <thetext>This is still happening with new package:
&gt; rpm -qa|grep selinux
rpm-plugin-selinux-4.13.0-0.rc1.46.fc25.x86_64
libselinux-utils-2.5-11.fc25.x86_64
libselinux-2.5-11.fc25.i686
docker-selinux-1.12.1-6.git49151a1.fc25.x86_64
libselinux-python3-2.5-11.fc25.x86_64
libselinux-devel-2.5-11.fc25.x86_64
selinux-policy-targeted-3.13.1-211.fc25.noarch
selinux-policy-3.13.1-211.fc25.noarch
libselinux-2.5-11.fc25.x86_64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9653806</commentid>
    <comment_count>11</comment_count>
    <who name="Emerson Santos">em3rson</who>
    <bug_when>2016-08-26 13:23:50 -0400</bug_when>
    <thetext>Description of problem:
On firt boot

Version-Release number of selected component:
selinux-policy-3.13.1-208.fc25.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc2.git3.1.fc25.i686+PAE
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9657006</commentid>
    <comment_count>12</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-08-28 12:32:26 -0400</bug_when>
    <thetext>Description of problem:
This alert happened when booting a 2016-08-27 workstation live iso image.

Version-Release number of selected component:
selinux-policy-3.13.1-208.fc25.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc2.git3.1.fc25.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9664418</commentid>
    <comment_count>13</comment_count>
    <who name="Mikhail">mikhail.v.gavrilov</who>
    <bug_when>2016-08-30 12:58:36 -0400</bug_when>
    <thetext>Description of problem:
Just launch Fedora from live USB

Version-Release number of selected component:
selinux-policy-3.13.1-208.fc25.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc2.git3.1.fc25.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9664797</commentid>
    <comment_count>14</comment_count>
    <who name="José Matos">jamatos</who>
    <bug_when>2016-08-30 14:51:58 -0400</bug_when>
    <thetext>Description of problem:
Boot into f25 after upgrade

Version-Release number of selected component:
selinux-policy-3.13.1-211.fc25.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc2.git3.1.fc25.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9665002</commentid>
    <comment_count>15</comment_count>
    <who name="Mikhail">mikhail.v.gavrilov</who>
    <bug_when>2016-08-30 16:20:16 -0400</bug_when>
    <thetext>Description of problem:
install Fedora 25 Alpha

Version-Release number of selected component:
selinux-policy-3.13.1-208.fc25.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc2.git3.1.fc25.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9666347</commentid>
    <comment_count>16</comment_count>
    <who name="Michal Sekletar">msekleta</who>
    <bug_when>2016-08-31 04:16:36 -0400</bug_when>
    <thetext>(In reply to Lukas Vrabec from comment #2)
&gt; Michal, 
&gt; 
&gt; How is files: blk,fifo,chr files are created in /run/systemd/inaccessible/ ? 
&gt; 
&gt; Thank you.

Sorry, for the long delay. I&apos;ve missed this one. 

These files are created in mount_setup function [1]. If you put rd.break on kernel command line you could see that systemd will create them already while in initrd. But after switch root to the real root fs, systemd is re-executed and mount_setup function is run again, this time with loaded SELinux policy. Files already exists and they should get relabeled. systemd will attempt to create them once more but all those mknod and mkdir calls [2] should just fail with EEXIST, but we don&apos;t check for error in this case.

[1]https://github.com/systemd/systemd/blob/2056ec192742d45aa72a851dbd22ad1fe0bc91a2/src/core/mount-setup.c#L359
[2]https://github.com/systemd/systemd/blob/2056ec192742d45aa72a851dbd22ad1fe0bc91a2/src/core/mount-setup.c#L409

I see no problems here wrt. systemd as it does explicit relabel on files that were created in initrd.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9675702</commentid>
    <comment_count>17</comment_count>
    <who name="krdondon">candan</who>
    <bug_when>2016-09-02 11:40:43 -0400</bug_when>
    <thetext>*** Bug 1372776 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9676989</commentid>
    <comment_count>18</comment_count>
    <who name="Alexsander Maciel">alexsanderb.maciel</who>
    <bug_when>2016-09-03 09:35:43 -0400</bug_when>
    <thetext>Description of problem:
foi feito as atualizações e o upgrade do fedora 24 para o 25 , começou aparecer o erro

Version-Release number of selected component:
selinux-policy-3.13.1-208.fc25.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc4.git0.1.fc25.i686+PAE
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9678311</commentid>
    <comment_count>19</comment_count>
    <who name="Viorel Tabara">viorel.tabara</who>
    <bug_when>2016-09-04 23:05:42 -0400</bug_when>
    <thetext>The update didn&apos;t fix this.


   [root@omiday ~]# rpm -q selinux-policy
   selinux-policy-3.13.1-211.fc25.noarch
   

   [root@omiday ~]# last -n1 reboot
   reboot   system boot  4.8.0-0.rc4.git0 Sat Sep  3 23:48   still running

   wtmp begins Mon Jul 25 17:00:39 2016


   [root@omiday ~]# ausearch -m avc -ts 23:48 | grep &quot;{ getattr }&quot;
   type=AVC msg=audit(1472968121.957:143): avc:  denied  { getattr } for  pid=1 comm=&quot;systemd&quot; path=&quot;/run/systemd/inaccessible/blk&quot; dev=&quot;tmpfs&quot; ino=1172 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:tmpfs_t:s0 tclass=blk_file permissive=0


Related boot logs:

   Sep 03 23:48:39 omiday.can.local kernel: SELinux: 32768 avtab hash slots, 105642 rules.
   Sep 03 23:48:39 omiday.can.local kernel: SELinux: 32768 avtab hash slots, 105642 rules.
   Sep 03 23:48:39 omiday.can.local kernel: SELinux:  8 users, 14 roles, 5046 types, 305 bools, 1 sens, 1024 cats
   Sep 03 23:48:39 omiday.can.local kernel: SELinux:  94 classes, 105642 rules
   Sep 03 23:48:39 omiday.can.local kernel: SELinux:  Permission validate_trans in class security not defined in policy.
   Sep 03 23:48:39 omiday.can.local kernel: SELinux:  Permission module_load in class system not defined in policy.
   Sep 03 23:48:39 omiday.can.local kernel: SELinux: the above unknown classes and permissions will be allowed
   Sep 03 23:48:39 omiday.can.local kernel: SELinux:  Completing initialization.
   Sep 03 23:48:39 omiday.can.local kernel: SELinux:  Setting up existing superblocks.
   Sep 03 23:48:39 omiday.can.local systemd[1]: Successfully loaded SELinux policy in 76.855ms.
   Sep 03 23:48:39 omiday.can.local systemd[1]: Unable to fix SELinux security context of /run/systemd/inaccessible/fifo: Permission denied
   Sep 03 23:48:39 omiday.can.local systemd[1]: Unable to fix SELinux security context of /run/systemd/inaccessible/blk: Permission denied
   Sep 03 23:48:39 omiday.can.local systemd[1]: Unable to fix SELinux security context of /run/systemd/inaccessible/chr: Permission denied
   Sep 03 23:48:39 omiday.can.local systemd[1]: Relabelled /dev and /run in 20.613ms.
   Sep 03 23:48:39 omiday.can.local systemd-journald[1093]: Journal started
   Sep 03 23:48:39 omiday.can.local audit: MAC_STATUS enforcing=1 old_enforcing=0 auid=4294967295 ses=4294967295
   Sep 03 23:48:39 omiday.can.local audit: MAC_POLICY_LOAD policy loaded auid=4294967295 ses=4294967295
   Sep 03 23:48:39 omiday.can.local audit[1]: AVC avc:  denied  { relabelto } for  pid=1 comm=&quot;systemd&quot; name=&quot;fifo&quot; dev=&quot;tmpfs&quot; ino=1173 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:init_var_run_t:s0 tclass=fifo_file permissive=0
   Sep 03 23:48:39 omiday.can.local audit[1]: AVC avc:  denied  { getattr } for  pid=1 comm=&quot;systemd&quot; path=&quot;/run/systemd/inaccessible/blk&quot; dev=&quot;tmpfs&quot; ino=1172 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:tmpfs_t:s0 tclass=blk_file permissive=0
   Sep 03 23:48:39 omiday.can.local audit[1]: AVC avc:  denied  { getattr } for  pid=1 comm=&quot;systemd&quot; path=&quot;/run/systemd/inaccessible/blk&quot; dev=&quot;tmpfs&quot; ino=1172 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:tmpfs_t:s0 tclass=blk_file permissive=0
   Sep 03 23:48:39 omiday.can.local audit[1]: AVC avc:  denied  { relabelfrom } for  pid=1 comm=&quot;systemd&quot; name=&quot;chr&quot; dev=&quot;tmpfs&quot; ino=1171 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:tmpfs_t:s0 tclass=chr_file permissive=0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9679826</commentid>
    <comment_count>20</comment_count>
    <who name="Jeremy Cline">jeremy</who>
    <bug_when>2016-09-05 10:31:57 -0400</bug_when>
    <thetext>Description of problem:
After upgrading to the latest updates in F25 updates-testing I started seeing this SELinux denial.

Version-Release number of selected component:
selinux-policy-3.13.1-211.fc25.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc4.git0.1.fc25.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9686650</commentid>
    <comment_count>21</comment_count>
    <who name="pavel raur">pavel.raur.pr</who>
    <bug_when>2016-09-07 09:04:02 -0400</bug_when>
    <thetext>Description of problem:
Happened when I was in gnome-control-center seting up privacy.

Version-Release number of selected component:
selinux-policy-3.13.1-211.fc25.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc4.git0.1.fc25.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9693078</commentid>
    <comment_count>22</comment_count>
    <who name="Giulio &apos;juliuxpigface&apos;">juliux.pigface</who>
    <bug_when>2016-09-09 03:35:34 -0400</bug_when>
    <thetext>Description of problem:
I&apos;ve found this right after loggin&apos; in to a Xfce session (Fedora Workstation x86_64, as qemu-guest).

Version-Release number of selected component:
selinux-policy-3.13.1-211.fc25.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc4.git0.1.fc25.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9695889</commentid>
    <comment_count>23</comment_count>
    <who name="Dagan McGregor">bugzilla.redhat</who>
    <bug_when>2016-09-10 02:38:31 -0400</bug_when>
    <thetext>Along with Comment 19, also other messages in the boot log

[   12.894023] systemd[1]: Successfully loaded SELinux policy in 97.592ms.
[   12.920799] systemd[1]: Unable to fix SELinux security context of /run/systemd/inaccessible/fifo: Permission denied
[   12.921457] systemd[1]: Unable to fix SELinux security context of /run/systemd/inaccessible/blk: Permission denied
[   12.922162] systemd[1]: Unable to fix SELinux security context of /run/systemd/inaccessible/chr: Permission denied
[   12.922977] systemd[1]: Relabelled /dev and /run in 18.814ms.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9695891</commentid>
    <comment_count>24</comment_count>
    <who name="Dagan McGregor">bugzilla.redhat</who>
    <bug_when>2016-09-10 02:40:13 -0400</bug_when>
    <thetext>[ardrigh@ardrigh ~]$ uname -a
Linux ardrigh 4.8.0-0.rc5.git1.1.fc25.x86_64 #1 SMP Tue Sep 6 15:52:10 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux

[ardrigh@ardrigh ~]$ rpm -qa | grep selinux
rpm-plugin-selinux-4.13.0-0.rc1.46.fc25.x86_64
selinux-policy-targeted-3.13.1-211.fc25.noarch
libselinux-utils-2.5-11.fc25.x86_64
libselinux-python3-2.5-11.fc25.x86_64
libselinux-2.5-11.fc25.x86_64
selinux-policy-3.13.1-211.fc25.noarch

[ardrigh@ardrigh ~]$ rpm -qa | grep systemd
systemd-231-4.fc25.x86_64
python-systemd-doc-231-6.fc25.x86_64
systemd-libs-231-4.fc25.x86_64
rpm-plugin-systemd-inhibit-4.13.0-0.rc1.46.fc25.x86_64
systemd-pam-231-4.fc25.x86_64
systemd-container-231-4.fc25.x86_64
systemd-udev-231-4.fc25.x86_64
python3-systemd-231-6.fc25.x86_64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696234</commentid>
    <comment_count>25</comment_count>
    <who name="Chris Murphy">bugzilla</who>
    <bug_when>2016-09-10 13:43:45 -0400</bug_when>
    <thetext>*** Bug 1374820 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696260</commentid>
    <comment_count>26</comment_count>
    <who name="Lukas Slebodnik">lslebodn</who>
    <bug_when>2016-09-10 14:20:03 -0400</bug_when>
    <thetext>[root@host ~]# ausearch -m avc -i -ts today | tail
----
type=AVC msg=audit(09/10/2016 14:58:20.785:1774) : avc:  denied  { getattr } for  pid=1 comm=systemd path=/run/systemd/inaccessible/blk dev=&quot;tmpfs&quot; ino=11209 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:tmpfs_t:s0 tclass=blk_file permissive=0 
----
type=AVC msg=audit(09/10/2016 14:58:42.825:1776) : avc:  denied  { getattr } for  pid=1 comm=systemd path=/run/systemd/inaccessible/blk dev=&quot;tmpfs&quot; ino=11209 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:tmpfs_t:s0 tclass=blk_file permissive=0 
----
type=AVC msg=audit(09/10/2016 15:37:10.051:1842) : avc:  denied  { getattr } for  pid=1 comm=systemd path=/run/systemd/inaccessible/blk dev=&quot;tmpfs&quot; ino=11209 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:tmpfs_t:s0 tclass=blk_file permissive=0 
----
type=AVC msg=audit(09/10/2016 15:38:28.221:1845) : avc:  denied  { getattr } for  pid=1 comm=systemd path=/run/systemd/inaccessible/blk dev=&quot;tmpfs&quot; ino=11209 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:tmpfs_t:s0 tclass=blk_file permissive=0 
----
type=AVC msg=audit(09/10/2016 20:07:30.499:1964) : avc:  denied  { getattr } for  pid=1 comm=systemd path=/run/systemd/inaccessible/blk dev=&quot;tmpfs&quot; ino=11209 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:tmpfs_t:s0 tclass=blk_file permissive=0


I can reproduce it with restarting NetworkManager or wifi change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696386</commentid>
    <comment_count>27</comment_count>
    <who name="Lukas Slebodnik">lslebodn</who>
    <bug_when>2016-09-10 17:37:54 -0400</bug_when>
    <thetext>Actually, I am not sure whether bug is in selinux-policy.

sh-4.3# ls -lZ /run/systemd/inaccessible/blk
b---------. 1 root root system_u:object_r:tmpfs_t:s0 0, 0 Sep 10 23:30 /run/systemd/inaccessible/blk
sh-4.3# 
sh-4.3# matchpathcon /run/systemd/inaccessible/blk
/run/systemd/inaccessible/blk   system_u:object_r:init_var_run_t:s0

AVC is gone after restoring context. However, it is on tmpfs and file has wrong SELinux context after reboot.
So workaround for annoying AVCs is: 
  restorecon -v /run/systemd/inaccessible/bl</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696387</commentid>
    <comment_count>28</comment_count>
    <who name="Lukas Slebodnik">lslebodn</who>
    <bug_when>2016-09-10 17:38:18 -0400</bug_when>
    <thetext>Actually, I am not sure whether bug is in selinux-policy.

sh-4.3# ls -lZ /run/systemd/inaccessible/blk
b---------. 1 root root system_u:object_r:tmpfs_t:s0 0, 0 Sep 10 23:30 /run/systemd/inaccessible/blk
sh-4.3# 
sh-4.3# matchpathcon /run/systemd/inaccessible/blk
/run/systemd/inaccessible/blk   system_u:object_r:init_var_run_t:s0

AVC is gone after restoring context. However, it is on tmpfs and file has wrong SELinux context after reboot.
So workaround for annoying AVCs is: 
  restorecon -v /run/systemd/inaccessible/blk</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9697623</commentid>
    <comment_count>29</comment_count>
    <who name="Pavlo Rudyi">paulcarroty</who>
    <bug_when>2016-09-12 01:58:30 -0400</bug_when>
    <thetext>Description of problem:
1. Just boot F26.

Version-Release number of selected component:
selinux-policy-3.13.1-210.fc26.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc4.git3.2.fc26.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9704381</commentid>
    <comment_count>30</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-13 14:11:48 -0400</bug_when>
    <thetext>selinux-policy-3.13.1-211.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9705148</commentid>
    <comment_count>31</comment_count>
    <who name="Chris Murphy">bugzilla</who>
    <bug_when>2016-09-13 21:09:00 -0400</bug_when>
    <thetext>*** Bug 1372242 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9705225</commentid>
    <comment_count>32</comment_count>
    <who name="Dagan McGregor">bugzilla.redhat</who>
    <bug_when>2016-09-13 21:44:56 -0400</bug_when>
    <thetext>I don&apos;t believe this is fixed. I am still getting these errors after updating.

$ dmesg | grep -i selinux
[    0.040503] SELinux:  Initializing.
[    0.040516] SELinux:  Starting in permissive mode
[    1.053015] SELinux:  Registering netfilter hooks
[    1.662351] systemd[1]: systemd 231 running in system mode. (+PAM +AUDIT +SELINUX +IMA -APPARMOR +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL +XZ +LZ4 +SECCOMP +BLKID +ELFUTILS +KMOD +IDN)
[   12.655254] SELinux: 32768 avtab hash slots, 105705 rules.
[   12.686218] SELinux: 32768 avtab hash slots, 105705 rules.
[   12.707473] SELinux:  8 users, 14 roles, 5047 types, 305 bools, 1 sens, 1024 cats
[   12.707475] SELinux:  94 classes, 105705 rules
[   12.709766] SELinux:  Permission validate_trans in class security not defined in policy.
[   12.709772] SELinux:  Permission module_load in class system not defined in policy.
[   12.709822] SELinux: the above unknown classes and permissions will be allowed
[   12.709825] SELinux:  Completing initialization.
[   12.709825] SELinux:  Setting up existing superblocks.
[   12.718944] systemd[1]: Successfully loaded SELinux policy in 93.656ms.
[   12.742385] systemd[1]: Unable to fix SELinux security context of /run/systemd/inaccessible/fifo: Permission denied
[   12.742440] systemd[1]: Unable to fix SELinux security context of /run/systemd/inaccessible/blk: Permission denied
[   12.742548] systemd[1]: Unable to fix SELinux security context of /run/systemd/inaccessible/chr: Permission denied


$ rpm -qa | grep selinux
rpm-plugin-selinux-4.13.0-0.rc1.46.fc25.x86_64
libselinux-utils-2.5-11.fc25.x86_64
selinux-policy-targeted-3.13.1-212.fc25.noarch
libselinux-python3-2.5-11.fc25.x86_64
libselinux-2.5-11.fc25.x86_64
selinux-policy-3.13.1-212.fc25.noarch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9706327</commentid>
    <comment_count>33</comment_count>
    <who name="Kamil Páral">kparal</who>
    <bug_when>2016-09-14 04:39:22 -0400</bug_when>
    <thetext>Reopening per comment 32, we need additional works/doesn&apos;t work verification.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9706374</commentid>
    <comment_count>34</comment_count>
    <who name="Kamil Páral">kparal</who>
    <bug_when>2016-09-14 04:53:29 -0400</bug_when>
    <thetext>Yeah, I&apos;m also still seeing this during boot with -211.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9707234</commentid>
    <comment_count>35</comment_count>
    <who name="Zdenek Chmelar">chmelarz</who>
    <bug_when>2016-09-14 09:09:26 -0400</bug_when>
    <thetext>Description of problem:
appreared during kernel testing

Version-Release number of selected component:
selinux-policy-3.13.1-210.fc26.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc4.git4.1.fc26.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9711293</commentid>
    <comment_count>36</comment_count>
    <who name="Lukas Vrabec">lvrabec</who>
    <bug_when>2016-09-15 10:38:37 -0400</bug_when>
    <thetext>Fix:
https://github.com/fedora-selinux/selinux-policy/commit/759e5505129f742e7131f1bd3cbed9d4baab05be</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9712019</commentid>
    <comment_count>37</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-15 13:23:09 -0400</bug_when>
    <thetext>selinux-policy-3.13.1-214.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-5f88bebc7c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9712942</commentid>
    <comment_count>38</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-15 21:23:37 -0400</bug_when>
    <thetext>selinux-policy-3.13.1-214.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-5f88bebc7c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9716103</commentid>
    <comment_count>39</comment_count>
    <who name="Seppo Yli-Olli">seppo.yli-olli</who>
    <bug_when>2016-09-17 06:43:30 -0400</bug_when>
    <thetext>Description of problem:
Reproduces always after bootup and login. Restorecon was attempted and was ineffective; problem reproduced immediately after running restorecon

Version-Release number of selected component:
selinux-policy-3.13.1-211.fc25.noarch

Additional info:
reporter:       libreport-2.8.0
hashmarkername: setroubleshoot
kernel:         4.8.0-0.rc5.git1.1.fc25.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9721796</commentid>
    <comment_count>40</comment_count>
    <who name="Kamil Páral">kparal</who>
    <bug_when>2016-09-19 10:51:45 -0400</bug_when>
    <thetext>selinux-policy-3.13.1-214.fc25 seems to fix this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9728164</commentid>
    <comment_count>41</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-20 20:36:42 -0400</bug_when>
    <thetext>selinux-policy-3.13.1-214.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>