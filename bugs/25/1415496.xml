<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1415496</bug_id>
          
          <creation_ts>2017-01-22 11:37:00 -0500</creation_ts>
          <short_desc>rpcbind fails at boot</short_desc>
          <delta_ts>2017-05-16 07:16:15 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>rpcbind</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>urgent</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ralf Corsepius">rc040203</reporter>
          <assigned_to name="Steve Dickson">steved</assigned_to>
          <cc>bugzilla</cc>
    
    
    <cc>dwrobel</cc>
    
    
    <cc>igeorgex</cc>
    
    
    <cc>jreynolds</cc>
    
    
    <cc>mael.lavault</cc>
    
    
    <cc>massi.ergosum</cc>
    
    
    <cc>orcolat</cc>
    
    
    <cc>rkudyba</cc>
    
    
    <cc>rmj</cc>
    
    
    <cc>rstonehouse</cc>
    
    
    <cc>steved</cc>
    
    
    <cc>volker</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>rpcbind-0.2.4-4.fc25 rpcbind-0.2.3-17.rc2.fc24 rpcbind-0.2.4-5.fc25 rpcbind-0.2.4-6.fc26</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-24 14:56:13</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10086952</commentid>
    <comment_count>0</comment_count>
    <who name="Ralf Corsepius">rc040203</who>
    <bug_when>2017-01-22 11:37:57 -0500</bug_when>
    <thetext>Description of problem:
On all of my systems, with today&apos;s update, rpcbind has started to fail at bootup:



# systemctl status rpcbind.service 
● rpcbind.service - RPC Bind
   Loaded: loaded (/usr/lib/systemd/system/rpcbind.service; disabled; vendor preset: disabled)
   Active: failed (Result: exit-code) since Sun 2017-01-22 17:20:55 CET; 12min ago
     Docs: man:rpcbind(8)
  Process: 573 ExecStart=/usr/bin/rpcbind $RPCBIND_OPTIONS -w -f (code=exited, status=1/FAILURE)
 Main PID: 573 (code=exited, status=1/FAILURE)

Jan 22 17:20:55 troy rpcbind[573]: rpcbind: /run/rpcbind/rpcbind.lock: No such file or directory
Jan 22 17:20:55 troy systemd[1]: rpcbind.service: Main process exited, code=exited, status=1/FAILURE
Jan 22 17:20:55 troy systemd[1]: Failed to start RPC Bind.
Jan 22 17:20:55 troy systemd[1]: rpcbind.service: Unit entered failed state.
Jan 22 17:20:55 troy systemd[1]: rpcbind.service: Failed with result &apos;exit-code&apos;.


Version-Release number of selected component (if applicable):
rpcbind-0.2.4-2.fc25.x86_64

How reproducible:
Always, on all of my machines

Actual results:
c.f. above

Expected results:
function.

Additional info:
This also seems to cause yp/nis to fail.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10086961</commentid>
    <comment_count>1</comment_count>
    <who name="Ralf Corsepius">rc040203</who>
    <bug_when>2017-01-22 12:04:56 -0500</bug_when>
    <thetext>The culprit definitely is the patch you added to 0.2.4-2.fc25.

With 0.2.4-1.fc25.x86_64, though rpcbind raises a warning on &apos;/run/rpcbind&apos;, it at least starts up, and yp/nis keeps working:

# systemctl status rpcbind
● rpcbind.service - RPC Bind
   Loaded: loaded (/usr/lib/systemd/system/rpcbind.service; disabled; vendor preset: disabled)
   Active: active (running) since Sun 2017-01-22 17:56:50 CET; 41s ago
     Docs: man:rpcbind(8)
 Main PID: 591 (rpcbind)
    Tasks: 1 (limit: 4915)
   CGroup: /system.slice/rpcbind.service
           └─591 /usr/bin/rpcbind -w -f

Jan 22 17:56:50 troy rpcbind[591]: mkdir_warmstart: mkdir failed &apos;/run/rpcbind&apos;, errno 13 (Permission denied)
Jan 22 17:56:50 troy systemd[1]: Started RPC Bind.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10088033</commentid>
    <comment_count>2</comment_count>
    <who name="Ralf Corsepius">rc040203</who>
    <bug_when>2017-01-23 04:40:29 -0500</bug_when>
    <thetext>I think there are several bugs interacting. However one bug seems obvious: 

The mover from /run/ to /run/rpcbind/ wasn&apos;t reflected to systemd/rpcbind.socket

A quick fix would be to add this to %prep in rpcbind.spec:

sed -i -e &apos;s,/run/rpcbind.sock,/run/rpcbind/rpcbind.sock,&apos; systemd/rpcbind.socket</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10089140</commentid>
    <comment_count>3</comment_count>
    <who name="Ralf Corsepius">rc040203</who>
    <bug_when>2017-01-23 10:48:41 -0500</bug_when>
    <thetext>(In reply to Ralf Corsepius from comment #2)
&gt; A quick fix would be to add this to %prep in rpcbind.spec:

I have to correct myself. This doesn&apos;t work. It breaks rpcinfo.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10089244</commentid>
    <comment_count>4</comment_count>
    <who name="Chris Schanzle">bugzilla</who>
    <bug_when>2017-01-23 11:08:35 -0500</bug_when>
    <thetext>Thanks for filing this bug and a clue as to the fix.  Until a new package is built, creating the below file is a workaround:

cat /etc/systemd/system/rpcbind.socket.d/fix-socket.conf 
[Socket]
ListenStream=/run/rpcbind/rpcbind.sock

hope it helps someone else</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10089986</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-23 15:23:40 -0500</bug_when>
    <thetext>rpcbind-0.2.3-16.rc2.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2017-a07577f460</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10089989</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-23 15:24:06 -0500</bug_when>
    <thetext>rpcbind-0.2.4-3.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-c43a81dc30</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10092398</commentid>
    <comment_count>7</comment_count>
    <who name="Chris Schanzle">bugzilla</who>
    <bug_when>2017-01-24 10:28:48 -0500</bug_when>
    <thetext>rpcbind-0.2.4-3.fc25 does not start on boot properly; ypbind does not bind.
commenting DefaultDependencies=no from service file works.
Why are you using that option?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10093945</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-24 20:22:25 -0500</bug_when>
    <thetext>rpcbind-0.2.3-16.rc2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-a07577f460</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10103595</commentid>
    <comment_count>9</comment_count>
    <who name="Steve Dickson">steved</who>
    <bug_when>2017-01-28 12:40:34 -0500</bug_when>
    <thetext>

(In reply to Ralf Corsepius from comment #2)
&gt; I think there are several bugs interacting. However one bug seems obvious: 
&gt; 
&gt; The mover from /run/ to /run/rpcbind/ wasn&apos;t reflected to
&gt; systemd/rpcbind.socket
&gt; 
&gt; A quick fix would be to add this to %prep in rpcbind.spec:
&gt; 
&gt; sed -i -e &apos;s,/run/rpcbind.sock,/run/rpcbind/rpcbind.sock,&apos;
&gt; systemd/rpcbind.socket

I have no idea why this would matter... ListenStream= is
a systemd thing and that option defines path where the 
socket should be created. That path is not defined
anywhere in the rpcbind code only in the rpcbind.sock
file. 

So this just does not make any sense to me...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10103738</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-28 16:41:38 -0500</bug_when>
    <thetext>rpcbind-0.2.3-17.rc2.fc24 rpcbind-0.2.3-17.rc2.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2017-44ec8c7a0e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10104627</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-29 18:17:39 -0500</bug_when>
    <thetext>rpcbind-0.2.3-17.rc2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-44ec8c7a0e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10114138</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-02-01 16:18:53 -0500</bug_when>
    <thetext>rpcbind-0.2.4-4.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-ad932714f2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10117477</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-02-02 17:49:58 -0500</bug_when>
    <thetext>rpcbind-0.2.4-4.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-ad932714f2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10120464</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-02-03 15:49:48 -0500</bug_when>
    <thetext>rpcbind-0.2.4-4.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10120560</commentid>
    <comment_count>15</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-02-03 16:48:41 -0500</bug_when>
    <thetext>rpcbind-0.2.3-17.rc2.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10139557</commentid>
    <comment_count>16</comment_count>
    <who name="Jed Reynolds">jreynolds</who>
    <bug_when>2017-02-10 18:33:21 -0500</bug_when>
    <thetext>Broken for me. Install of F25 attempts to find /run/rpcbind/rpcbind.lock but file is in /run/rpcbind.lock.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10150634</commentid>
    <comment_count>17</comment_count>
    <who name="Damian Wrobel">dwrobel</who>
    <bug_when>2017-02-15 10:56:13 -0500</bug_when>
    <thetext>Also doesn&apos;t work for me on arm:

[root@rpi3 run]# rpm -qv rpcbind
rpcbind-0.2.4-4.fc25.armv7hl

[root@rpi3 run]# systemctl start rpcbind
Job for rpcbind.service failed because the control process exited with error code.
See &quot;systemctl status rpcbind.service&quot; and &quot;journalctl -xe&quot; for details.
[root@rpi3 run]# systemctl status rpcbind
● rpcbind.service - RPC Bind
   Loaded: loaded (/usr/lib/systemd/system/rpcbind.service; disabled; vendor preset: disabled)
   Active: failed (Result: exit-code) since Wed 2017-02-15 16:46:55 CET; 8s ago
     Docs: man:rpcbind(8)
  Process: 2166 ExecStart=/usr/bin/rpcbind $RPCBIND_OPTIONS -w -f (code=exited, status=1/FAILURE)
 Main PID: 2166 (code=exited, status=1/FAILURE)

Feb 15 16:46:55 rpi3 systemd[1]: Starting RPC Bind...
Feb 15 16:46:55 rpi3 rpcbind[2166]: rpcbind: /run/rpcbind/rpcbind.lock: No such file or directory
Feb 15 16:46:55 rpi3 systemd[1]: rpcbind.service: Main process exited, code=exited, status=1/FAILURE
Feb 15 16:46:55 rpi3 systemd[1]: Failed to start RPC Bind.
Feb 15 16:46:55 rpi3 systemd[1]: rpcbind.service: Unit entered failed state.
Feb 15 16:46:55 rpi3 systemd[1]: rpcbind.service: Failed with result &apos;exit-code&apos;.

Workaround:
# mkdir -p /run/rpcbind</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10180946</commentid>
    <comment_count>18</comment_count>
    <who name="">orcolat</who>
    <bug_when>2017-02-24 02:34:11 -0500</bug_when>
    <thetext>Not sure this is useful info, but

rpcbind.x86_64    0.2.4-4.fc25    @updates

worked to fix the service error still present at version 0.2.4-2.fc25 on an LXDE spin with kernel 4.9.5-200.fc25.x86_64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10262287</commentid>
    <comment_count>19</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-21 13:25:49 -0400</bug_when>
    <thetext>rpcbind-0.2.4-5.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-66c84b1ba8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10262300</commentid>
    <comment_count>20</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-21 13:26:24 -0400</bug_when>
    <thetext>rpcbind-0.2.4-6.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-5c5fcde1a0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10265502</commentid>
    <comment_count>21</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-22 11:27:51 -0400</bug_when>
    <thetext>rpcbind-0.2.4-6.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-5c5fcde1a0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10266318</commentid>
    <comment_count>22</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-22 16:21:48 -0400</bug_when>
    <thetext>rpcbind-0.2.4-5.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-66c84b1ba8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10276010</commentid>
    <comment_count>23</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-24 14:56:13 -0400</bug_when>
    <thetext>rpcbind-0.2.4-5.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10296854</commentid>
    <comment_count>24</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-01 13:24:24 -0400</bug_when>
    <thetext>rpcbind-0.2.4-6.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10323025</commentid>
    <comment_count>25</comment_count>
    <who name="Maël Lavault">mael.lavault</who>
    <bug_when>2017-04-11 03:25:02 -0400</bug_when>
    <thetext>Issue is still here with rpcbind-0.2.4-5.fc25</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10333373</commentid>
    <comment_count>26</comment_count>
    <who name="Steve Dickson">steved</who>
    <bug_when>2017-04-13 10:35:46 -0400</bug_when>
    <thetext>(In reply to Maël Lavault from comment #25)
&gt; Issue is still here with rpcbind-0.2.4-5.fc25

This must be a different problem</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10413589</commentid>
    <comment_count>27</comment_count>
    <who name="RobbieTheK">rkudyba</who>
    <bug_when>2017-05-15 11:18:07 -0400</bug_when>
    <thetext>With rpcbind-0.2.4-5.rc1.fc25.x86_64 after reboot ypbind was failing and showing these errors:
May 15 10:56:35 ourserver systemd: Starting RPC Bind...
May 15 10:56:35 ourserver rpcbind: rpcbind: pmap_prot.c:50: xdr_pmap: Assertion `regs != NULL&apos; failed.
May 15 10:56:35 ourserver systemd: Started RPC Bind.
May 15 10:56:35 ourserver systemd: rpcbind.service: Main process exited, code=killed, status=6/ABRT
May 15 10:56:35 ourserver systemd: rpcbind.service: Unit entered failed state.
May 15 10:56:35 ourserver systemd: rpcbind.service: Failed with result &apos;signal&apos;.

Oddly rpcbind status was showing ok just a failure on ypbind:
-- Unit rpcbind.service has finished starting up.
-- 
-- The start-up result is done.
May 15 10:58:15 ourserver systemd[1]: rpcbind.service: Main process exited, code=killed, status=6/ABRT
May 15 10:58:15 ourserver systemd[1]: rpcbind.service: Unit entered failed state.
May 15 10:58:15 ourserver systemd[1]: rpcbind.service: Failed with result &apos;signal&apos;.
May 15 10:58:17 ourserver ypbind[2631]: Binding took 46 seconds
May 15 10:58:17 ourserver ypbind[2633]: NIS server for domain divscimath is not responding.
May 15 10:58:17 ourserver ypbind[2634]: Killing ypbind with PID 2290.
May 15 10:58:17 ourserver ypbind[2290]: 2292: Signal (15) for quitting program arrived.
May 15 10:58:17 ourserver systemd[1]: Starting RPC Bind...
-- Subject: Unit rpcbind.service has begun start-up
-- Defined-By: systemd
-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel
-- 
-- Unit rpcbind.service has begun starting up.
May 15 10:58:17 ourserver ypbind[2635]: Try increase NISTIMEOUT in /etc/sysconfig/ypbind
May 15 10:58:17 ourserver systemd[1]: ypbind.service: Control process exited, code=exited status=1
May 15 10:58:17 ourserver systemd[1]: Started RPC Bind.
-- Subject: Unit rpcbind.service has finished start-up
-- Defined-By: systemd
-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel
-- 
-- Unit rpcbind.service has finished starting up.
-- 
-- The start-up result is done.
May 15 10:58:18 ourserver systemd[1]: Failed to start NIS/YP (Network Information Service) Clients to NIS Domain Binder.
-- Subject: Unit ypbind.service has failed
-- Defined-By: systemd
-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel
-- 
-- Unit ypbind.service has failed.
-- 
-- The result is failed.
May 15 10:58:18 ourserver systemd[1]: ypbind.service: Unit entered failed state.
May 15 10:58:18 ourserver systemd[1]: ypbind.service: Failed with result &apos;exit-code&apos;.


Downgraded to rpcbind-0.2.3-11.rc1.fc25.x86_64 and both ypbind and rpcbind start fine.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>