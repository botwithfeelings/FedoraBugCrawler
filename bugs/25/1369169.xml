<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1369169</bug_id>
          
          <creation_ts>2016-08-22 11:05:00 -0400</creation_ts>
          <short_desc>[pioneer] Disable build on Power and s390</short_desc>
          <delta_ts>2016-10-26 09:55:10 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>pioneer</component>
          <version>25</version>
          <rep_platform>ppc64</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>RAWHIDE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>467765</blocked>
    
    
    <blocked>1071880</blocked>
    
    
    <blocked>1051573</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Rafael Fonseca">rdossant</reporter>
          <assigned_to name="Antonio Trande">anto.trande</assigned_to>
          <cc>anto.trande</cc>
    
    
    <cc>rosser.bjr</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-10-26 09:55:10</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9636388</commentid>
    <comment_count>0</comment_count>
      <attachid>1192955</attachid>
    <who name="Rafael Fonseca">rdossant</who>
    <bug_when>2016-08-22 11:05:42 -0400</bug_when>
    <thetext>Created attachment 1192955
Make pioneer ExcludeArch for Power and s390

Description of problem: pioneer uses some x86-only asm instruction which do not work on Power or s390.

../../contrib/profiler/Profiler.h: In constructor &apos;BVHTree::BVHTree(int, const objPtr_t*, const Aabb*)&apos;:
../../contrib/profiler/Profiler.h:158:51: error: impossible register constraint in &apos;asm&apos;
     asm volatile(&quot;rdtsc&quot; : &quot;=a&quot; (__a), &quot;=d&quot; (__d));


Version-Release number of selected component (if applicable): all versions are affected


How reproducible: always on ppc-koji and s390-koji


Actual results: http://ppc.koji.fedoraproject.org/koji/taskinfo?taskID=3630383


Additional info: patch attached</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9636849</commentid>
    <comment_count>1</comment_count>
    <who name="Ben Rosser">rosser.bjr</who>
    <bug_when>2016-08-22 12:54:46 -0400</bug_when>
    <thetext>It looks like this might be fixable without disabling building on those architectures; on ARM, the code sets a flag in the profiler [1] that disables the use of those instructions [2], and the spec has already been modified to set it on aarch64 too (in addition to other stuff) [3]. Possibly the same modifications will enable building on these architectures?

[1] https://github.com/pioneerspacesim/pioneer/blob/master/contrib/profiler/Profiler.h#L13

[2] https://github.com/pioneerspacesim/pioneer/blob/master/contrib/profiler/Profiler.h#L154

[3] http://pkgs.fedoraproject.org/cgit/rpms/pioneer.git/tree/pioneer.spec#n131</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9636952</commentid>
    <comment_count>2</comment_count>
    <who name="Rafael Fonseca">rdossant</who>
    <bug_when>2016-08-22 13:25:26 -0400</bug_when>
    <thetext>I&apos;ll try it out and report back.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9823095</commentid>
    <comment_count>3</comment_count>
    <who name="Rafael Fonseca">rdossant</who>
    <bug_when>2016-10-26 09:55:10 -0400</bug_when>
    <thetext>pioneer is now ExclusiveArch in Fedora because of [1]. So I&apos;m closing this bug.

[1] https://github.com/pioneerspacesim/pioneer/issues/3846</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1192955</attachid>
            <date>2016-08-22 11:05:00 -0400</date>
            <delta_ts>2016-08-22 11:05:42 -0400</delta_ts>
            <desc>Make pioneer ExcludeArch for Power and s390</desc>
            <filename>0001-Disable-build-on-ppc-and-s390.patch</filename>
            <type>text/plain</type>
            <size>961</size>
            <attacher name="Rafael Fonseca">rdossant</attacher>
            
              <data encoding="base64">RnJvbSBlNjE4Mzk2MzliYzExOGVhOWNmNjgzZDkzOTUyZGExNzJiZTliNjM5IE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBSYWZhZWwgRm9uc2VjYSA8cmRvc3NhbnRAcmVkaGF0LmNvbT4K
RGF0ZTogTW9uLCAyMiBBdWcgMjAxNiAxNzowMDo1NSArMDIwMApTdWJqZWN0OiBbUEFUQ0hdIERp
c2FibGUgYnVpbGQgb24gcHBjIGFuZCBzMzkwCgotLS0KIHBpb25lZXIuc3BlYyB8IDcgKysrKysr
LQogMSBmaWxlIGNoYW5nZWQsIDYgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQoKZGlmZiAt
LWdpdCBhL3Bpb25lZXIuc3BlYyBiL3Bpb25lZXIuc3BlYwppbmRleCAxMDE3ZmNmLi5iZjY4Y2Ni
IDEwMDY0NAotLS0gYS9waW9uZWVyLnNwZWMKKysrIGIvcGlvbmVlci5zcGVjCkBAIC04LDcgKzgs
OSBAQAogTmFtZTogICAgICAgICAgcGlvbmVlcgogU3VtbWFyeTogICAgICAgQSBnYW1lIG9mIGxv
bmVseSBzcGFjZSBhZHZlbnR1cmUKIFZlcnNpb246ICAgICAgIDIwMTYwODE0Ci1SZWxlYXNlOiAg
ICAgICAxJXs/ZGlzdH0KK1JlbGVhc2U6ICAgICAgIDIlez9kaXN0fQorCitFeGNsdWRlQXJjaDog
ICAle3Bvd2VyNjR9IHMzOTAgczM5MHgKIAogIyMgTWFpbiBsaWNlbnNlOiBHUEx2MwogIyMgRGVq
YXZ1IGZvbnQgbGljZW5zZTogQml0c3RyZWFtIFZlcmEgYW5kIFB1YmxpYyBEb21haW4KQEAgLTI2
NCw2ICsyNjYsOSBAQCBmaQogJWRpciAle19mb250ZGlyfQogCiAlY2hhbmdlbG9nCisqIE1vbiBB
dWcgMjIgMjAxNiBSYWZhZWwgRm9uc2VjYSA8cmRvc3NhbnRAcmVkaGF0LmNvbT4gLSAyMDE2MDgx
NC0yCistIERpc2FibGUgYnVpbGQgb24gUFBDIGFuZCBzMzkwLgorCiAqIFN1biBBdWcgMTQgMjAx
NiBBbnRvbmlvIFRyYW5kZSA8c2FnaXR0ZXJBVGZlZG9yYXByb2plY3Qub3JnPiAgMjAxNjA4MTQt
MQogLSBVcGRhdGUgdG8gdGhlIHZlcnNpb24gMjAxNjA4MTQKIAotLSAKMi43LjQKCg==
</data>

          </attachment>
      

    </bug>

</bugzilla>