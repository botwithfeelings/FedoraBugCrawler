<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>962950</bug_id>
          
          <creation_ts>2013-05-14 16:17:00 -0400</creation_ts>
          <short_desc>dhcpd/dhclient create an random listening port in addition to UDP 67/68</short_desc>
          <delta_ts>2017-06-09 15:12:07 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>dhcp</component>
          <version>25</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>medium</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Timothy M. Butterworth">timothy.m.butterworth</reporter>
          <assigned_to name="Pavel Zhukov">pzhukov</assigned_to>
          <cc>dberinde</cc>
    
    
    <cc>h.reindl</cc>
    
    
    <cc>jpopelka</cc>
    
    
    <cc>pemensik</cc>
    
    
    <cc>rpiddapa</cc>
    
    
    <cc>thozza</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>dhcp-4.3.5-2.fc25</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-05-26 23:01:58</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          <external_bugs name="Launchpad">1176046</external_bugs>
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>5914863</commentid>
    <comment_count>0</comment_count>
    <who name="Timothy M. Butterworth">timothy.m.butterworth</who>
    <bug_when>2013-05-14 16:17:58 -0400</bug_when>
    <thetext>Description of problem:
DHClient creates an additional listening port in addition to UDP 68 which seems to be a random registered port value. This appears to be being caused by the NSUPDATE DNS functionality. Their is currently a bug filed with ISC [ISC-BUGS] #33377.

Version-Release number of selected component (if applicable):
isc-dhclient-4.2.5

How reproducible:
Install dhclient, start the service and perform a netstat -l -u -p and check each of the ports opened by dhclient.
  
Actual results:


Expected results:
That no random port numbers be opened. Please create a way to disable this functionality or repackage an additional version with it disabled.

Additional Info:
http://forums.debian.net/viewtopic.php?f=10&amp;t=95273
http://forums.debian.net/viewtopic.php?f=10&amp;t=95273&amp;p=495605#p495605</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5917514</commentid>
    <comment_count>1</comment_count>
    <who name="Jiri Popelka">jpopelka</who>
    <bug_when>2013-05-15 10:29:10 -0400</bug_when>
    <thetext>Disabling tracing (--disable-tracing) as suggested on the forum makes no change.
With --disable-failover it fails to build so I can&apos;t prove that it really makes the ports disappear, but anyway failover is crucial server functionality and there&apos;s no way we can disable it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5917565</commentid>
    <comment_count>2</comment_count>
    <who name="Jiri Popelka">jpopelka</who>
    <bug_when>2013-05-15 10:36:55 -0400</bug_when>
    <thetext>(In reply to comment #1)
&gt; With --disable-failover it fails to build ...

fixed, built with --disable-tracing and --disable-failover but it&apos;s still the same.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6108974</commentid>
    <comment_count>3</comment_count>
    <who name="Jiri Popelka">jpopelka</who>
    <bug_when>2013-07-15 09:43:37 -0400</bug_when>
    <thetext>*** Bug 984244 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6592275</commentid>
    <comment_count>4</comment_count>
    <who name="Harald Reindl">h.reindl</who>
    <bug_when>2013-12-06 08:35:56 -0500</bug_when>
    <thetext>well, this affects any Fedora version from 18 to 20 and most likely Rawhide too

           What    |Removed                     |Added
----------------------------------------------------------------------------
           Priority|unspecified                 |medium
           Hardware|Unspecified                 |x86_64
            Version|18                          |20
                 OS|Unspecified                 |Linux
           Severity|unspecified                 |medium</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6605779</commentid>
    <comment_count>5</comment_count>
    <who name="Jiri Popelka">jpopelka</who>
    <bug_when>2013-12-11 06:35:48 -0500</bug_when>
    <thetext>These ports are opened during libdns&apos; (library from ISC bind) initialization of some managers and contexts.
Pity the code opens both ipv4 and ipv6 ports - I see this comment in bind/lib/dns/client.c:dns_client_createx()
/* TODO: whether to use dispatch v4 or v6 should be configurable */

This initialization can be avoided by undefining NSUPDATE in dhcp/includes/site.h (as suggested on the debian forum) but we can&apos;t do this because we need DDNS functionality for server. I doubt we need it on client so It&apos;d perhaps be nice to turn it off for client, but the code is common (dhcp/omapip/isclib.c) for both client and server so it&apos;s not possible to turn it off/on only for one of them.

I don&apos;t see a way how to fix this atm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6884982</commentid>
    <comment_count>6</comment_count>
    <who name="Harald Reindl">h.reindl</who>
    <bug_when>2014-03-05 13:05:32 -0500</bug_when>
    <thetext>sad to hear that there is no solution

in general i see no valid reason for a *random* port, no sane configured system will allow a incoming package on the one....</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7496856</commentid>
    <comment_count>7</comment_count>
    <who name="">cooloutac</who>
    <bug_when>2014-09-18 17:02:10 -0400</bug_when>
    <thetext>Yes this is not sane.  To have dhclient, and rpcbind , etc. open half a dozen other random ports listening on my machine on default install for my home desktop doesn&apos;t feel to safe.

I&apos;ve moved to a debian based distro.

Even if the firewall is blocking incoming, if we don&apos;t know why these ports are opened,  how do we know there are not other processes on our machines connecting out on them.   Which could be missed in logs, especially since it seems not enough people care to even question these things.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7498604</commentid>
    <comment_count>8</comment_count>
    <who name="Pavel Šimerda (pavlix)">psimerda</who>
    <bug_when>2014-09-19 05:37:16 -0400</bug_when>
    <thetext>How does Debian solve this issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7501429</commentid>
    <comment_count>9</comment_count>
    <who name="">cooloutac</who>
    <bug_when>2014-09-20 02:50:27 -0400</bug_when>
    <thetext>It doesn&apos;t solve the issue and I wished there was an edit button to delete that when I said it. I don&apos;t think dhclient is a specific distro problem.   going static is only thing that solves the issue for me.

I just noticed alot more services and default ports open on a default fedora compared to when using mint.     But when you disable ipv6,   which I finally figured out only worked from grub menu in fedora for me.   It doesn&apos;t feel as bad.

The truth is I only went to mint because for some reaosn the cinnamon mixer worked best with my surround sound system.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8277858</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2015-05-29 05:03:44 -0400</bug_when>
    <thetext>This message is a reminder that Fedora 20 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 20. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;20&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 20 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8389311</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2015-06-29 20:38:53 -0400</bug_when>
    <thetext>Fedora 20 changed to end-of-life (EOL) status on 2015-06-23. Fedora 20 is
no longer maintained, which means that it will not receive any further
security or bug fix updates. As a result we are closing this bug.

If you can reproduce this bug against a currently maintained version of
Fedora please feel free to reopen this bug against that version. If you
are unable to reopen this bug, please file a new report against the
current release. If you experience problems, please add a comment to this
bug.

Thank you for reporting this bug and we are sorry it could not be fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8389395</commentid>
    <comment_count>12</comment_count>
    <who name="Harald Reindl">h.reindl</who>
    <bug_when>2015-06-29 20:45:19 -0400</bug_when>
    <thetext>still an issue on F21</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9079236</commentid>
    <comment_count>13</comment_count>
    <who name="Dan Berindei">dberinde</who>
    <bug_when>2016-02-19 11:03:27 -0500</bug_when>
    <thetext>still an issue on F23</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10306735</commentid>
    <comment_count>14</comment_count>
    <who name="Petr Menšík">pemensik</who>
    <bug_when>2017-04-05 08:54:48 -0400</bug_when>
    <thetext>Hi. I have tried to reproduce this on Fedora 25. Ports are still created, but they are created directly by call from libisc.c:235
I think it should be really simple to change use of dhcp_context_create to not create dns client, unless it is used.

Ports are open after end of:

#0  dns_client_createx2 (mctx=0x55926f32b100, actx=0x7f1ddab2b010, 
    taskmgr=0x7f1ddab2c010, socketmgr=0x7f1ddab2d010, timermgr=0x7f1ddab2e010, 
    options=options@entry=0, clientp=0x55926e00e978 &lt;dhcp_gbl_ctx+56&gt;, 
    localaddr4=0x0, localaddr6=0x0) at ../../../lib/dns/client.c:440
#1  0x00007f1dda831c11 in dhcp_context_create (flags=&lt;optimized out&gt;, 
    local4=0x0, local6=0x0) at isclib.c:235
#2  0x000055926ddacb5b in main (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;)
    at dhclient.c:273</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10447265</commentid>
    <comment_count>15</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-25 08:15:39 -0400</bug_when>
    <thetext>dhcp-4.3.5-6.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-c5082937a8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10447353</commentid>
    <comment_count>16</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-25 08:27:01 -0400</bug_when>
    <thetext>dhcp-4.3.5-2.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-ceb7218382</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10448864</commentid>
    <comment_count>17</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-25 15:22:21 -0400</bug_when>
    <thetext>dhcp-4.3.5-6.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-c5082937a8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10450030</commentid>
    <comment_count>18</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-26 02:03:38 -0400</bug_when>
    <thetext>dhcp-4.3.5-2.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-ceb7218382</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10452960</commentid>
    <comment_count>19</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-26 23:01:58 -0400</bug_when>
    <thetext>dhcp-4.3.5-2.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10494214</commentid>
    <comment_count>20</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-06-09 15:12:07 -0400</bug_when>
    <thetext>dhcp-4.3.5-6.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>