<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1391418</bug_id>
          
          <creation_ts>2016-11-03 05:42:00 -0400</creation_ts>
          <short_desc>toolbars can&apos;t be easily docked after undocking on wayland</short_desc>
          <delta_ts>2016-11-22 07:23:23 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>libreoffice</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          <see_also>https://bugzilla.redhat.com/show_bug.cgi?id=1390610</see_also>
    
    
    
    <see_also>https://bugzilla.redhat.com/show_bug.cgi?id=1397181</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1277927</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Kamil Páral">kparal</reporter>
          <assigned_to name="Caolan McNamara">caolanm</assigned_to>
          <cc>caolanm</cc>
    
    
    <cc>dtardon</cc>
    
    
    <cc>erack</cc>
    
    
    <cc>mstahl</cc>
    
    
    <cc>rhbz2</cc>
    
    
    <cc>sbergman</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>libreoffice-5.2.3.3-6.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-11-19 16:16:24</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          <external_bugs name="GNOME Desktop">768128</external_bugs>
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9850759</commentid>
    <comment_count>0</comment_count>
    <who name="Kamil Páral">kparal</who>
    <bug_when>2016-11-03 05:42:44 -0400</bug_when>
    <thetext>Description of problem:
This is a downstream bug to track https://bugzilla.gnome.org/show_bug.cgi?id=768128 .

If you undock a toolbar in Libreoffice (e.g. Writer), you can no longer dock it just by dragging it with a mouse, when using Wayland. The workaround is to use Ctrl+Shift+F10 shortcut (or switch to using X11).

Version-Release number of selected component (if applicable):
gnome-session-wayland-session-3.22.1-2.fc25.x86_64
gnome-shell-3.22.1-2.fc25.x86_64
gtk3-3.22.2-1.fc25.x86_64
libreoffice-core-5.2.3.3-3.fc25.x86_64
libwayland-client-1.12.0-1.fc25.x86_64
libwayland-cursor-1.12.0-1.fc25.x86_64
libwayland-server-1.12.0-1.fc25.x86_64
mesa-libwayland-egl-12.0.3-3.fc25.x86_64
mutter-3.22.1-6.fc25.x86_64
xorg-x11-server-Xwayland-1.19.0-0.3.20161026.fc25.x86_64


How reproducible:
always

Steps to Reproduce:
1. run LO Writer
2. undock a toolbar
3. try to dock it back using the mouse</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9851422</commentid>
    <comment_count>1</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2016-11-03 08:30:00 -0400</bug_when>
    <thetext>another option is to drop allowing toolbars to float under wayland rather than try to fight against the</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9851744</commentid>
    <comment_count>2</comment_count>
    <who name="Kamil Páral">kparal</who>
    <bug_when>2016-11-03 09:22:13 -0400</bug_when>
    <thetext>If you can keep the toolbars moveable (because you can currently move them under Wayland, just undocking is problematic), but prohibit them from floating, then that could be a good temporary solution, yes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9882620</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-11 03:59:32 -0500</bug_when>
    <thetext>libreoffice-5.2.3.3-6.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-0438bf95e5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9882931</commentid>
    <comment_count>4</comment_count>
    <who name="Kamil Páral">kparal</who>
    <bug_when>2016-11-11 06:19:14 -0500</bug_when>
    <thetext>Undocking is now disallowed, which solves this problem in a way.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9883969</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-11 11:58:27 -0500</bug_when>
    <thetext>libreoffice-5.2.3.3-6.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-0438bf95e5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9905909</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-19 16:16:24 -0500</bug_when>
    <thetext>libreoffice-5.2.3.3-6.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9906671</commentid>
    <comment_count>7</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-11-20 18:11:56 -0500</bug_when>
    <thetext>(In reply to Kamil Páral from comment #4)
&gt; Undocking is now disallowed, which solves this problem in a way.

That&apos;s wrong. You can still undock toolbars – at least from what you can see from toolbar shadows. If you do so, it leaves them in a very broken state either being drawn on behind of another toolbar or cut off. Please undo this change, it was way better before this patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9908261</commentid>
    <comment_count>8</comment_count>
    <who name="Kamil Páral">kparal</who>
    <bug_when>2016-11-21 08:05:22 -0500</bug_when>
    <thetext>(In reply to Christian Stadelmann from comment #7)
&gt; That&apos;s wrong. You can still undock toolbars – at least from what you can see
&gt; from toolbar shadows. If you do so, it leaves them in a very broken state
&gt; either being drawn on behind of another toolbar or cut off.

Can you please share a screencast or at least a reproducer description?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9908864</commentid>
    <comment_count>9</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-11-21 10:27:38 -0500</bug_when>
    <thetext>(In reply to Kamil Páral from comment #8)
&gt; (In reply to Christian Stadelmann from comment #7)
&gt; &gt; That&apos;s wrong. You can still undock toolbars – at least from what you can see
&gt; &gt; from toolbar shadows. If you do so, it leaves them in a very broken state
&gt; &gt; either being drawn on behind of another toolbar or cut off.
&gt; 
&gt; Can you please share a screencast or at least a reproducer description?

Screencast: Is there any software known to work on wayland? I don&apos;t think I have any installed. 

Reproducer:
1. open any Libreoffice component (e.g. writer)
2. drag any toolbar
3. drop it into the text pane (where it would detach before the latest update)

What happens:
While dragging the toolbar shadow indicates that the toolbar will be detached.
After releasing the mouse button, the toolbar is either gone completely or is drawn behind other toolbars or the main content (text or cells or drawing area on Writer / Calc / Draw).

What should happen:
Don&apos;t draw a shadow if the toolbar won&apos;t be there after drop.
If the toolbar cannot be shown where it was dropped, snap back to its original position but don&apos;t put it to some random position.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9908934</commentid>
    <comment_count>10</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-11-21 10:43:34 -0500</bug_when>
    <thetext>(In reply to Christian Stadelmann from comment #9)
&gt; Screencast: Is there any software known to work on wayland? I don&apos;t think I
&gt; have any installed. 

I&apos;ve found recordmydesktop which doesn&apos;t work on wayland. The gtk UI crashes instead of starting and the CLI version just records a black screen.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9909293</commentid>
    <comment_count>11</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2016-11-21 12:18:35 -0500</bug_when>
    <thetext>Open a new bug for the new problem please. You can still drag toolbars to new dockable positions. But if you don&apos;t get as far as a new dockable position, then under X we still get a floating toolbar and under wayland its the same response as if you pressed ESC to cancel the drag.

So it sounds like a pre-existing problem with cancelling toolbar docking which in-itself isn&apos;t wayland related, though of course that all efforts to float a toolbar are autocanceled under wayland is very related to wayland.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9909800</commentid>
    <comment_count>12</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-11-21 14:39:23 -0500</bug_when>
    <thetext>Ok, I&apos;ll be creating a new bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9911660</commentid>
    <comment_count>13</comment_count>
    <who name="Kamil Páral">kparal</who>
    <bug_when>2016-11-22 06:52:22 -0500</bug_when>
    <thetext>(In reply to Christian Stadelmann from comment #9)
&gt; Screencast: Is there any software known to work on wayland? I don&apos;t think I
&gt; have any installed. 

https://help.gnome.org/users/gnome-help/stable/screen-shot-record.html.en
limited to 30 seconds

https://extensions.gnome.org/extension/690/easyscreencast/
what I personally use</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9911699</commentid>
    <comment_count>14</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-11-22 07:03:49 -0500</bug_when>
    <thetext>(In reply to Kamil Páral from comment #13)
&gt; (In reply to Christian Stadelmann from comment #9)
&gt; &gt; Screencast: Is there any software known to work on wayland? I don&apos;t think I
&gt; &gt; have any installed. 
&gt; 
&gt; https://help.gnome.org/users/gnome-help/stable/screen-shot-record.html.en
&gt; limited to 30 seconds
&gt; 
&gt; https://extensions.gnome.org/extension/690/easyscreencast/
&gt; what I personally use

Thanks!
I&apos;ve reported a new bug report #1397181 for the issue(s) I&apos;ve described above.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>