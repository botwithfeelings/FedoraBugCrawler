<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1420725</bug_id>
          
          <creation_ts>2017-02-09 07:07:00 -0500</creation_ts>
          <short_desc>[LiveCD] loss of network connectivity in virtual machine running current Fedora 25</short_desc>
          <delta_ts>2017-02-11 09:56:51 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>LiveCD</component>
          <version>25</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Joachim Frieben">jfrieben</reporter>
          <assigned_to name="Matthias Clasen">mclasen</assigned_to>
          <cc>cfergeau</cc>
    
    
    <cc>feborges</cc>
    
    
    <cc>fidencio</cc>
    
    
    <cc>gnome-sig</cc>
    
    
    <cc>marcandre.lureau</cc>
    
    
    <cc>virt-maint</cc>
    
    
    <cc>zeeshanak</cc>
          
          
          <cf_fixed_in>F25-WORK-x86_64-20170210</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-02-11 09:56:51</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10134077</commentid>
    <comment_count>0</comment_count>
    <who name="Joachim Frieben">jfrieben</who>
    <bug_when>2017-02-09 07:07:39 -0500</bug_when>
    <thetext>Description of problem:
After installing a Fedora 25 virtual guest on a Fedora 25 host system using the latest live image F25-WORK-x86_64-20170202, network appears to be up and running. After installing all available latest updates, however, and rebooting the virtual machine, name resolution is lost. What is puzzling is that running &apos;ifconfig&apos; returns a different setup after updating the virtual machine. Right after installing the virtual machine, &apos;ifconfig&apos; returns:

ens3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.122.179  netmask 255.255.255.0  broadcast 192.168.122.255
        inet6 fe80::65d:53cf:7acd:f2bb  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether 52:54:00:96:89:1e  txqueuelen 1000  (Ethernet)
        RX packets 50124  bytes 73813402 (70.3 MiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 23684  bytes 1436586 (1.3 MiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 118227

lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;
        loop  txqueuelen 1  (Local Loopback)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

However, after updating the virtual machine, &apos;ifconfig&apos; returns:

ens3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.122.179  netmask 255.255.255.0  broadcast 192.168.122.255
        inet6 fe80::65d:53cf:7acd:f2bb  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether 52:54:00:96:89:1e  txqueuelen 1000  (Ethernet)
        RX packets 12  bytes 2036 (1.9 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 47  bytes 5729 (5.5 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 138

lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;
        loop  txqueuelen 1  (Local Loopback)
        RX packets 160  bytes 11552 (11.2 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 160  bytes 11552 (11.2 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

virbr0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500
        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255
        ether 52:54:00:01:5c:5f  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

Thus, a virtual bridge is present now which did not exist before. Furthermore, &apos;dmesg&apos; exhibits some new trailing lines, namely:

[ .. ] tun: Universal TUN/TAP device driver, 1.6
[ .. ] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk qualcomm com&gt;
[ .. ] virbr0: port 1(virbr0-nic) entered blocking state
[ .. ] virbr0: port 1(virbr0-nic) entered disabled state
[ .. ] device virbr0-nic entered promiscuous mode
[ .. ] virbr0: port 1(virbr0-nic) entered blocking state
[ .. ] virbr0: port 1(virbr0-nic) entered listening state
[ .. ] virbr0: port 1(virbr0-nic) entered disabled state

Version-Release number of selected component (if applicable):
gnome-boxes-3.22.4-1.fc25

How reproducible:
Always.

Steps to Reproduce:
1. Install Fedora 25 in a virtual machine using live image F25-WORK-x86_64-20170202.
2. Update installed virtual machine.

Actual results:
While it is possible to retrieve pending updates over the network after booting up the new virtual machine, name resolution is broken after rebooting the updated virtual machine.

Expected results:
Name resolution is working just like in the live session.

Additional info:
None</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10134172</commentid>
    <comment_count>1</comment_count>
    <who name="Joachim Frieben">jfrieben</who>
    <bug_when>2017-02-09 07:25:35 -0500</bug_when>
    <thetext>Looking at the output of &apos;ifconfig&apos; in a current Fedora 24 virtual machine,

ens3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.122.161  netmask 255.255.255.0  broadcast 192.168.122.255
        inet6 fe80::28d9:ec3:68f3:8791  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether 52:54:00:48:0b:2a  txqueuelen 1000  (Ethernet)
        RX packets 26834  bytes 22875114 (21.8 MiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 20369  bytes 2690889 (2.5 MiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 100426

lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;
        loop  txqueuelen 1  (Local Loopback)
        RX packets 24  bytes 1824 (1.7 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 24  bytes 1824 (1.7 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

virbr0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500
        inet 192.168.124.1  netmask 255.255.255.0  broadcast 192.168.124.255
        ether 00:00:00:00:00:00  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

Note that the three leading bytes of the IPs of devices &apos;ens3&apos; (192.168.122.x) and &apos;virbr0&apos; (192.168.124.x) are different here, whereas under Fedora 25, they are identical (192.168.122.x). In a virtual machine running current Fedora 24, network connectivity is working correctly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10138510</commentid>
    <comment_count>2</comment_count>
    <who name="Joachim Frieben">jfrieben</who>
    <bug_when>2017-02-10 10:24:30 -0500</bug_when>
    <thetext>After installing Fedora 25 on a virtual guest using the official live image Fedora-Workstation-Live-x86_64-25-1.3, the installed and updated systems still exibits working name resolution. Two differences compared to the earlier installation using F25-WORK-x86_64-20170202 appear related:

(1) The output of &apos;ifconfig&apos; in the current Fedora 25 virtual machine becomes

ens3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.122.154  netmask 255.255.255.0  broadcast 192.168.122.255
        inet6 fe80::a8be:85f0:ff64:e903  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether 52:54:00:42:86:27  txqueuelen 1000  (Ethernet)
        RX packets 82  bytes 10957 (10.7 KiB)
        RX errors 0  dropped 13  overruns 0  frame 0
        TX packets 105  bytes 10485 (10.2 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;
        loop  txqueuelen 1  (Local Loopback)
        RX packets 24  bytes 1824 (1.7 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 24  bytes 1824 (1.7 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

virbr0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500
        inet 192.168.124.1  netmask 255.255.255.0  broadcast 192.168.124.255
        ether 52:54:00:45:90:38  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

which is equivalent to the situation under Fedora 24.

(2) The network device using live image Fedora-Workstation-Live-x86_64-25-1.3 becomes

  Ethernet controller: Red Hat, Inc Virtio network device

whereas using live image F25-WORK-x86_64-20170202, it was 

  Ethernet controller: Realtek Semiconductor Co., Ltd. RTL-8100/8101L/8139 PCI Fast Ethernet Adapter (rev 20)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10140132</commentid>
    <comment_count>3</comment_count>
    <who name="Joachim Frieben">jfrieben</who>
    <bug_when>2017-02-11 09:53:29 -0500</bug_when>
    <thetext>For the latest live image F25-WORK-x86_64-20170210, things have gotten normal again. After installing Fedora 25 on a virtual machine using the latter and rebooting the system, &apos;ifconfig&apos; returns:

ens3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.122.8  netmask 255.255.255.0  broadcast 192.168.122.255
        inet6 fe80::6c96:cdd6:38b6:b8ce  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether 52:54:00:b3:dc:e3  txqueuelen 1000  (Ethernet)
        RX packets 47  bytes 5764 (5.6 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 78  bytes 8635 (8.4 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 271

lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;
        loop  txqueuelen 1  (Local Loopback)
        RX packets 32  bytes 2352 (2.2 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 32  bytes 2352 (2.2 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

virbr0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500
        inet 192.168.124.1  netmask 255.255.255.0  broadcast 192.168.124.255
        ether 52:54:00:90:49:ce  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>