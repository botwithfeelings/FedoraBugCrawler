<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1361244</bug_id>

    <creation_ts>2016-07-28 11:19:00 -0400</creation_ts>
    <short_desc>SELinux is preventing systemd from &apos;getattr&apos; accesses on the chr_file /run/systemd/inaccessible/chr.</short_desc>
    <delta_ts>2016-08-16 23:05:20 -0400</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>selinux-policy</component>
    <version>25</version>
    <rep_platform>x86_64</rep_platform>
    <op_sys>Unspecified</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>ERRATA</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard>abrt_hash:dcc792c63946c8f7812ce95714d543b32d7e2fae8182e37ab473dd7fd8084fc9;VARIANT_ID=workstation;</status_whiteboard>
    <keywords></keywords>
    <priority>unspecified</priority>
    <bug_severity>unspecified</bug_severity>
    <target_milestone>---</target_milestone>

    <everconfirmed>1</everconfirmed>
    <reporter name="Joachim Frieben">jfrieben</reporter>
    <assigned_to name="Lukas Vrabec">lvrabec</assigned_to>
    <cc>dominick.grift</cc>

    <cc>dwalsh</cc>

    <cc>lvrabec</cc>

    <cc>mgrepl</cc>

    <cc>nicolas.mailhot</cc>

    <cc>plautrba</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in>selinux-policy-3.13.1-208.fc25</cf_fixed_in>
  <cf_doc_type>If docs needed, set a value</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2016-08-16 23:05:20</cf_last_closed>
<cf_type>---</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>9563977</commentid>
<comment_count>0</comment_count>
<who name="Joachim Frieben">jfrieben</who>
<bug_when>2016-07-28 11:19:53 -0400</bug_when>
<thetext>Description of problem: SELinux is preventing systemd from &apos;getattr&apos; accesses on the chr_file /run/systemd/inaccessible/chr. ***** Plugin catchall (100. confidence) suggests ************************** If you believe that systemd
should be allowed getattr access on the chr chr_file by default. Then you should report this as a bug. You can generate a local policy module to allow this access. Do allow this access for now by executing: # ausearch -c &apos;systemd&apos; --raw |
audit2allow -M my-systemd # semodule -X 300 -i my-systemd.pp Additional Information: Source Context system_u:system_r:init_t:s0 Target Context system_u:object_r:init_var_run_t:s0 Target Objects /run/systemd/inaccessible/chr [ chr_file ] Source
systemd Source Path systemd Port &lt;Unknown&gt; Host (removed) Source RPM Packages Target RPM Packages Policy RPM selinux-policy-3.13.1-204.fc25.noarch Selinux Enabled True Policy Type targeted Enforcing Mode Permissive Host Name (removed) Platform
Linux (removed) 4.7.0-2.fc25.x86_64 #1 SMP Tue Jul 26 14:26:55 UTC 2016 x86_64 x86_64 Alert Count 3 First Seen 2016-07-28 17:13:53 CEST Last Seen 2016-07-28 17:17:32 CEST Local ID bcc55a58-8644-4b43-9ae0-82fabfc4d4b0 Raw Audit Messages type=AVC
msg=audit(1469719052.197:237): avc: denied { getattr } for pid=1 comm=&quot;systemd&quot; path=&quot;/run/systemd/inaccessible/chr&quot; dev=&quot;tmpfs&quot; ino=8901 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:init_var_run_t:s0
tclass=chr_file permissive=1 Hash: systemd,init_t,init_var_run_t,chr_file,getattr Version-Release number of selected component: selinux-policy-3.13.1-204.fc25.noarch Additional info: reporter: libreport-2.7.2 hashmarkername: setroubleshoot kernel:
4.7.0-2.fc25.x86_64 type: libreport</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9611673</commentid>
<comment_count>1</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-08-12 11:58:19 -0400</bug_when>
<thetext>selinux-policy-3.13.1-208.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to
install test updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-662487f8f1</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9612826</commentid>
<comment_count>2</comment_count>
<who name="Joachim Frieben">jfrieben</who>
<bug_when>2016-08-13 08:21:08 -0400</bug_when>
<thetext>This issue is still present. The system journal reports &quot;.. systemd[1]: Unable to fix SELinux security context of /run/systemd/inaccessible/chr: Permission denied&quot; when booted in enforcing mode but the alert is -not- reported by
the SELinux Troubleshooter utility any longer. The file attributes of file /run/systemd/inaccessible/chr differ between enforcing mode and permissive mode, respectively. File attributes &apos;ls -lZ /run/systemd/inaccessible/chr&apos; in enforcing
mode: b---------. 1 root root system_u:object_r:tmpfs_t:s0 0, 0 Aug 13 13:01 chr File attributes &apos;ls -lZ /run/systemd/inaccessible/chr&apos; in permissive mode: b---------. 1 root root system_u:object_r:init_var_run_t:s0 0, 0 Aug 13 13:09 chr</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9621012</commentid>
<comment_count>3</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-08-16 23:03:28 -0400</bug_when>
<thetext>selinux-policy-3.13.1-208.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>

</bug>

</bugzilla>
