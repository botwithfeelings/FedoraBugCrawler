<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1398738</bug_id>
          
          <creation_ts>2016-11-25 12:58:00 -0500</creation_ts>
          <short_desc>VAPI bindings generated with vala 0.34.x can contain errors</short_desc>
          <delta_ts>2016-12-06 15:49:31 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>vala</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Fabio Valentini">decathorpe</reporter>
          <assigned_to name="Michel Alexandre Salim">michel</assigned_to>
          <cc>fabian.deutsch</cc>
    
    
    <cc>klember</cc>
    
    
    <cc>michel</cc>
    
    
    <cc>projects.rg</cc>
    
    
    <cc>thaller</cc>
    
    
    <cc>zeeshanak</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>vala-0.34.3-2.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-12-05 16:44:25</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9930568</commentid>
    <comment_count>0</comment_count>
    <who name="Fabio Valentini">decathorpe</who>
    <bug_when>2016-11-25 12:58:11 -0500</bug_when>
    <thetext>The vapi bindings generated during the build of other packages might contain errors if they were built / rebuilt since vala has been updated to 0.34.x:

Fixed-size arrays are not properly recognized as return types (anymore?), and sousing the &quot;offending&quot; functions obviously results in type mismatches.

For example, the
    public uint8 get_address ()
function in
    NM.IP6Address (part of libnm-util)
should have a return type of &quot;uint8[]&quot; instead of &quot;uint8&quot; from what I have been able to determine during &quot;troubleshooting&quot; with ricotz.

See commit https://git.gnome.org/browse/vala/commit/?h=0.34&amp;id=7e76f75e42e7ac45c896e81e97955c8b2089d7e9 in the vala git for more info (the FIXME he added after our discussion).

Every vala release from the 0.34 branch has this error, and the newly released vala 0.34.3 doesn&apos;t fix the problem yet.

Every package that generates .vapi files (and exposes functions with a fixed-length array return type) will have to be rebuilt after a fix for this is available.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9950624</commentid>
    <comment_count>1</comment_count>
    <who name="Kalev Lember">klember</who>
    <bug_when>2016-12-02 04:46:57 -0500</bug_when>
    <thetext>Thanks, I&apos;ve backported that patch to vala-0.34.3-2.fc25</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9950630</commentid>
    <comment_count>2</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-02 04:49:19 -0500</bug_when>
    <thetext>vala-0.34.3-2.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-54ecb08413</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9950853</commentid>
    <comment_count>3</comment_count>
    <who name="Fabio Valentini">decathorpe</who>
    <bug_when>2016-12-02 06:09:05 -0500</bug_when>
    <thetext>I can confirm that rebuilding NetworkManager with the patched vala version results in the correct info being in the .vapi file. Thanks for the quick fix, now I guess that a package rebuild for NetworkManager has to be triggered as well for the change to get into the f25 (and f26?) repos?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9950871</commentid>
    <comment_count>4</comment_count>
    <who name="Kalev Lember">klember</who>
    <bug_when>2016-12-02 06:18:56 -0500</bug_when>
    <thetext>Great, thanks for checking! The fixed vala versions should be in the build roots for both f25 and f26 so it should just be a straightforward rebuild for NetworkManager.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9952951</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-02 23:37:17 -0500</bug_when>
    <thetext>vala-0.34.3-2.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-54ecb08413</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9957690</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-05 16:44:25 -0500</bug_when>
    <thetext>vala-0.34.3-2.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9961942</commentid>
    <comment_count>7</comment_count>
    <who name="Thomas Haller">thaller</who>
    <bug_when>2016-12-06 15:49:31 -0500</bug_when>
    <thetext>NetworkManager also rebuild:

NetworkManager-1.4.2-2.fc25
  http://koji.fedoraproject.org/koji/buildinfo?buildID=823289
NetworkManager-1.5.2-4.fc26
  http://koji.fedoraproject.org/koji/buildinfo?buildID=823290

and a f25 update: 
  https://bodhi.fedoraproject.org/updates/NetworkManager-1.4.2-2.fc25</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>