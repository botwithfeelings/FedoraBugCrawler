<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1447402</bug_id>
          
          <creation_ts>2017-05-02 11:56:00 -0400</creation_ts>
          <short_desc>GDM does not detect laptop lid (when docked) closed on boot now</short_desc>
          <delta_ts>2017-06-26 11:04:12 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>gdm</component>
          <version>25</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Robert Abram">rob_abram</reporter>
          <assigned_to name="Ray Strode [halfline]">rstrode</assigned_to>
          <cc>alexander</cc>
    
    
    <cc>a.lloyd.flanagan</cc>
    
    
    <cc>franz.brauneder</cc>
    
    
    <cc>humanamerican</cc>
    
    
    <cc>jfrieben</cc>
    
    
    <cc>johnny</cc>
    
    
    <cc>rstrode</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>kernel-4.11.4-200.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-06-25 11:32:07</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10379560</commentid>
    <comment_count>0</comment_count>
    <who name="Robert Abram">rob_abram</who>
    <bug_when>2017-05-02 11:56:35 -0400</bug_when>
    <thetext>Description of problem:

After most recent update of desktop packages, GDM no longer detects that the laptop lid is closed during a cold boot.  The docking station monitors turn on and show the GDM background, but the login is now displayed on the closed laptop screen.  

Lifting the lid and logging in to Gnome then closing the lid deactivates the laptop screen and the docking station monitors are active. 

Version-Release number of selected component (if applicable):
Current GDM package is: gdm-3.22.3-1.fc25.x86_64 

How reproducible:

Everytime


Steps to Reproduce:

1. Place turned off laptop on docking station and click power button
2. After boot, lift laptop lid and log in.
3. After login, close laptop lid


Expected results:

On boot laptop screen is deactivated and GDM login is displayed on docking station monitors


Additional info:

Laptop: Lenovo t450s w/docking station
Monitors: 2 Asus monitors connected to docking station via Display Port cables</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10379604</commentid>
    <comment_count>1</comment_count>
    <who name="Robert Abram">rob_abram</who>
    <bug_when>2017-05-02 12:01:47 -0400</bug_when>
    <thetext>Downgraded GDM to 3.22.1 and rebooted, no change to behavior.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10409729</commentid>
    <comment_count>2</comment_count>
    <who name="Johnny Hughes">johnny</who>
    <bug_when>2017-05-13 09:53:45 -0400</bug_when>
    <thetext>I am also seeing this issue in RHEL-7 (and CentOS-7) on a W541 ThinkPad connected to the standard Lenovo Docking Station with 2 monitors connected.  (gdm 3.14.2-20.el7_3)

The docking station mouse and keyboard work.  Lifting the monitor screen and logging in works.

It seems GDM does not know the screen settings that GNOME 3 has saved.

This issue may or may not be a bug .. maybe there is a spot to set up GDM screens that needs to be configured separately?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10409742</commentid>
    <comment_count>3</comment_count>
    <who name="Johnny Hughes">johnny</who>
    <bug_when>2017-05-13 10:07:06 -0400</bug_when>
    <thetext>For me (and gdm 3.14.2-20), copying ~/.config/monitors.xml (and changing ownership to gdm.gdm and relabeling selinux settings) to ~gdm/.config/monitors.xml allowed gdm to work properly on a cold boot. 

I am not sure this works on the newer gdm versions.  Info came from this page:

https://bbs.archlinux.org/viewtopic.php?id=161903</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10419457</commentid>
    <comment_count>4</comment_count>
    <who name="Alexander Lindqvist">alexander</who>
    <bug_when>2017-05-17 02:56:47 -0400</bug_when>
    <thetext>We got this problem as well when we upgraded from RHEL 7.2 to RHEL 7.3 (gdm 3.14.2-20.el7_3). Same problem under Fedora 25 and I think it was introduced in Fedora 24. HP Elitebook 745 G2.

Login is active on closed laptop screen instead of external DP connected screen. Hit enter and type the password and it correctly shows the desktop on external screen after that.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10425390</commentid>
    <comment_count>5</comment_count>
    <who name="Youssef">humanamerican</who>
    <bug_when>2017-05-18 09:48:23 -0400</bug_when>
    <thetext>I have the same issue without a docking station (just an external monitor plugged into an HDMI port). I have set my external display as the primary and so the login screen appears on the external display now, but even after login, the laptop screen is still active (I can move my mouse to it). Lifting the lid and then closing it again at any time after boot-up deactivates the built-in display.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10466209</commentid>
    <comment_count>6</comment_count>
    <who name="A. Lloyd Flanagan">a.lloyd.flanagan</who>
    <bug_when>2017-05-31 17:33:37 -0400</bug_when>
    <thetext>Same issue with Dell Latitude E6430, except that any attempt to connect a second external monitor causes the system to freeze and become unresponsive to any input. With one monitor attached, the login prompt appears on the built-in display even with laptop closed and docked.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10538118</commentid>
    <comment_count>7</comment_count>
    <who name="Joachim Frieben">jfrieben</who>
    <bug_when>2017-06-25 11:32:07 -0400</bug_when>
    <thetext>This is a kernel issue and was solved in kernel-4.11.4-200.fc25; more information can be found in bug 1430259.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10540760</commentid>
    <comment_count>8</comment_count>
    <who name="Robert Abram">rob_abram</who>
    <bug_when>2017-06-26 11:04:12 -0400</bug_when>
    <thetext>Fix confirmed. I have updated the kernel and now the GDM login displays on an external monitor when the laptop lid is closed on the docking station during bootup.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>