<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1403353</bug_id>
          
          <creation_ts>2016-12-09 14:18:00 -0500</creation_ts>
          <short_desc>FTBFS: libspectre-0.2.7-8.fc25</short_desc>
          <delta_ts>2016-12-14 16:30:17 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>libspectre</component>
          <version>25</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>high</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1400162</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Stephen Gallagher">sgallagh</reporter>
          <assigned_to name="Marek Kašík">mkasik</assigned_to>
          <cc>mkasik</cc>
    
    
    <cc>mmathesi</cc>
    
    
    <cc>psabata</cc>
    
    
    <cc>rdieter</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>libspectre-0.2.7-9.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-12-14 16:30:17</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9972694</commentid>
    <comment_count>0</comment_count>
      <attachid>1230118</attachid>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-12-09 14:18:40 -0500</bug_when>
    <thetext>Created attachment 1230118
Patch to fix FTBFS

Description of problem:
When attempting to rebuild portions of the frozen package set of Fedora 25, we discovered that libspectre fails to build against newer versions of ghostscript.

Version-Release number of selected component (if applicable):
libspectre-0.2.7-8.fc25

How reproducible:
Every time

Steps to Reproduce:
1. fedpkg clone libspectre
2. fedpkg switch-branch f25
3. fedpkg local

Actual results:
spectre-gs.c: In function &apos;critic_error_code&apos;:
spectre-gs.c:46:9: error: &apos;e_Fatal&apos; undeclared (first use in this function)
    case e_Fatal:
         ^~~~~~~
spectre-gs.c:46:9: note: each undeclared identifier is reported only once for each function it appears in
spectre-gs.c:51:9: error: &apos;e_ExecStackUnderflow&apos; undeclared (first use in this function)
    case e_ExecStackUnderflow:
         ^~~~~~~~~~~~~~~~~~~~
spectre-gs.c: In function &apos;spectre_gs_process&apos;:
spectre-gs.c:112:20: error: &apos;e_NeedInput&apos; undeclared (first use in this function)
   error = error == e_NeedInput ? 0 : error;
                    ^~~~~~~~~~~
Makefile:437: recipe for target &apos;libspectre_la-spectre-gs.lo&apos; failed

Expected results:
Successful build of the package.

Additional info:
This is needed as part of the Base Runtime effort. We are trying to minimize the possibility of churn from packaging changes post-F25 GA, so we would prefer to make a targeted build fix rather than unconditionally backporting from Rawhide unless both 1) no backwards-incompatible changes have occurred and 2) no new build- or runtime dependencies have appeared.

Please find attached a patch that pulls in an upstream fix for building against newer versions of ghostscript.

If you feel it is acceptable, please pull it in and commit it to dist-git. If you feel like you also want to backport the Rawhide version to F25, please commit this patch *first* and then a new set of patches to pull the new version (so that we can reference the specific git hash that fixes this issue). 

If you feel the patch is unacceptable, please respond before Dec. 22 with an explanation of why. If we hear no response before then, a provenpackager will make the change so that we can unblock the Base Runtime effort.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9977007</commentid>
    <comment_count>1</comment_count>
    <who name="Marek Kašík">mkasik</who>
    <bug_when>2016-12-12 09:06:59 -0500</bug_when>
    <thetext>Thank you for the patch. I&apos;ve pushed it to F25 branch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9977021</commentid>
    <comment_count>2</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-12 09:09:37 -0500</bug_when>
    <thetext>libspectre-0.2.7-9.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-adb366bc38</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9979493</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-13 00:31:11 -0500</bug_when>
    <thetext>libspectre-0.2.7-9.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-adb366bc38</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9987631</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-14 16:30:17 -0500</bug_when>
    <thetext>libspectre-0.2.7-9.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1230118</attachid>
            <date>2016-12-09 14:18:00 -0500</date>
            <delta_ts>2016-12-12 06:23:43 -0500</delta_ts>
            <desc>Patch to fix FTBFS</desc>
            <filename>0001-Include-upstream-patch-to-fix-building-against-ghost.patch</filename>
            <type>text/plain</type>
            <size>3413</size>
            <attacher name="Stephen Gallagher">sgallagh</attacher>
            
              <data encoding="base64">RnJvbSA1OWVkZTNkODRjODY3YTA1YTczZWQ4MzJhY2YzZDE2ZWU2MTU0OGQ0IE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBTdGVwaGVuIEdhbGxhZ2hlciA8c2dhbGxhZ2hAcmVkaGF0LmNv
bT4KRGF0ZTogRnJpLCA5IERlYyAyMDE2IDE0OjA5OjE4IC0wNTAwClN1YmplY3Q6IFtQQVRDSF0g
SW5jbHVkZSB1cHN0cmVhbSBwYXRjaCB0byBmaXggYnVpbGRpbmcgYWdhaW5zdCBnaG9zdHNjcmlw
dCA+PQogOS4xOAoKLS0tCiAwMDAxLUZpeC10aGUtYnVpbGQtd2l0aC1HaG9zdHNjcmlwdC05LjE4
LnBhdGNoIHwgMzggKysrKysrKysrKysrKysrKysrKysrKysrKysKIGxpYnNwZWN0cmUuc3BlYyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgNyArKysrLQogMiBmaWxlcyBjaGFuZ2Vk
LCA0NCBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCiBjcmVhdGUgbW9kZSAxMDA2NDQgMDAw
MS1GaXgtdGhlLWJ1aWxkLXdpdGgtR2hvc3RzY3JpcHQtOS4xOC5wYXRjaAoKZGlmZiAtLWdpdCBh
LzAwMDEtRml4LXRoZS1idWlsZC13aXRoLUdob3N0c2NyaXB0LTkuMTgucGF0Y2ggYi8wMDAxLUZp
eC10aGUtYnVpbGQtd2l0aC1HaG9zdHNjcmlwdC05LjE4LnBhdGNoCm5ldyBmaWxlIG1vZGUgMTAw
NjQ0CmluZGV4IDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAuLjZkMzJi
NWY1MDEzYmJmYWJjM2Q5ZWMwZGVmN2FiNGZlMDdlYmYyY2UKLS0tIC9kZXYvbnVsbAorKysgYi8w
MDAxLUZpeC10aGUtYnVpbGQtd2l0aC1HaG9zdHNjcmlwdC05LjE4LnBhdGNoCkBAIC0wLDAgKzEs
MzggQEAKK0Zyb20gMzRhNTJmMzA0MDBhYWIxYzIxYzY5YzMxMTIyZDQ5Njc1MWQ3ZDk5ZSBNb24g
U2VwIDE3IDAwOjAwOjAwIDIwMDEKK0Zyb206IENhcmxvcyBHYXJjaWEgQ2FtcG9zIDxjYXJsb3Nn
Y0Bnbm9tZS5vcmc+CitEYXRlOiBTYXQsIDIgQXByIDIwMTYgMTE6MTU6MzggKzAyMDAKK1N1Ympl
Y3Q6IFtQQVRDSF0gRml4IHRoZSBidWlsZCB3aXRoIEdob3N0c2NyaXB0ID49IDkuMTgKKworLS0t
CisgbGlic3BlY3RyZS9zcGVjdHJlLWdzLmMgfCAxMSArKysrKysrKysrKworIDEgZmlsZSBjaGFu
Z2VkLCAxMSBpbnNlcnRpb25zKCspCisKK2RpZmYgLS1naXQgYS9saWJzcGVjdHJlL3NwZWN0cmUt
Z3MuYyBiL2xpYnNwZWN0cmUvc3BlY3RyZS1ncy5jCitpbmRleCA5MzQ0NGE0ZmYyNGEyODEwZWNi
ZGM3NGQ0YmYwZjI3ZjIzYzZlYzc1Li5iMDgyMWNlNzgzM2I5MjAxYjVjZDY5ZTYxYzYzZmFlOTNh
MTBlNTFmIDEwMDY0NAorLS0tIGEvbGlic3BlY3RyZS9zcGVjdHJlLWdzLmMKKysrKyBiL2xpYnNw
ZWN0cmUvc3BlY3RyZS1ncy5jCitAQCAtMjcsMTAgKzI3LDIxIEBACisgCisgLyogZ2hvc3RzY3Jp
cHQgc3R1ZmYgKi8KKyAjaW5jbHVkZSA8Z2hvc3RzY3JpcHQvaWFwaS5oPgorICNpbmNsdWRlIDxn
aG9zdHNjcmlwdC9pZXJyb3JzLmg+CisgCisrLyogZV8gbWFjcm9zIGhhdmUgYmVlbiByZW1vdmVk
IGZyb20gR2hvc3RzY3JpcHQgaW4gOS4xOC4gKi8KKysjaWZuZGVmIGVfRmF0YWwKKysjZGVmaW5l
IGVfRmF0YWwgZ3NfZXJyb3JfRmF0YWwKKysjZW5kaWYKKysjaWZuZGVmIGVfTmVlZElucHV0Cisr
I2RlZmluZSBlX05lZWRJbnB1dCBnc19lcnJvcl9OZWVkSW5wdXQKKysjZW5kaWYKKysjaWZuZGVm
IGVfRXhlY1N0YWNrVW5kZXJmbG93CisrI2RlZmluZSBlX0V4ZWNTdGFja1VuZGVyZmxvdyBnc19l
cnJvcl9FeGVjU3RhY2tVbmRlcmZsb3cKKysjZW5kaWYKKysKKyAjZGVmaW5lIEJVRkZFUl9TSVpF
IDMyNzY4CisgCisgc3RydWN0IFNwZWN0cmVHUyB7CisgCXZvaWQgKmdob3N0c2NyaXB0X2luc3Rh
bmNlOworIH07CistLSAKKzIuOS4zCisKZGlmZiAtLWdpdCBhL2xpYnNwZWN0cmUuc3BlYyBiL2xp
YnNwZWN0cmUuc3BlYwppbmRleCAxNWJhNGFiNWY1ZWE4ZjA5OWQ4MTAzNzMyMGEwYTNjZTIzZmJi
NjY0Li41NzBiZTU1MWYyMTYyZTk1ODI5YWE2MTQwZmE2ZDBkNTBlNmVjOWY4IDEwMDY0NAotLS0g
YS9saWJzcGVjdHJlLnNwZWMKKysrIGIvbGlic3BlY3RyZS5zcGVjCkBAIC0xLDE2ICsxLDE3IEBA
CiBOYW1lOiAgICAgICAgICAgbGlic3BlY3RyZQogVmVyc2lvbjogICAgICAgIDAuMi43Ci1SZWxl
YXNlOiAgICAgICAgOCV7P2Rpc3R9CitSZWxlYXNlOiAgICAgICAgOSV7P2Rpc3R9CiBTdW1tYXJ5
OiAgICAgICAgQSBsaWJyYXJ5IGZvciByZW5kZXJpbmcgUG9zdFNjcmlwdChUTSkgZG9jdW1lbnRz
CiAKIEdyb3VwOiAgICAgICAgICBTeXN0ZW0gRW52aXJvbm1lbnQvTGlicmFyaWVzCiBMaWNlbnNl
OiAgICAgICAgR1BMdjIrCiBVUkw6ICAgICAgICAgICAgaHR0cDovL2xpYnNwZWN0cmUuZnJlZWRl
c2t0b3Aub3JnCiBTb3VyY2UwOiAgICAgICAgaHR0cDovL2xpYnNwZWN0cmUuZnJlZWRlc2t0b3Au
b3JnL3JlbGVhc2VzLyV7bmFtZX0tJXt2ZXJzaW9ufS50YXIuZ3oKIAogUGF0Y2gwOiAgICAgICAg
IDAwMDEtUm90YXRlLWRvY3VtZW50cy1jb3JyZWN0bHkucGF0Y2gKK1BhdGNoMTogICAgICAgICAw
MDAxLUZpeC10aGUtYnVpbGQtd2l0aC1HaG9zdHNjcmlwdC05LjE4LnBhdGNoCiAKIEJ1aWxkUmVx
dWlyZXM6IGdob3N0c2NyaXB0LWRldmVsID49IDguNjEKIAogJWRlc2NyaXB0aW9uCiAle25hbWV9
IGlzIGEgc21hbGwgbGlicmFyeSBmb3IgcmVuZGVyaW5nIFBvc3RTY3JpcHQoVE0pIGRvY3VtZW50
cy4KQEAgLTMxLDEwICszMiwxMSBAQCBkZXZlbG9waW5nIGFwcGxpY2F0aW9ucyB0aGF0IHVzZSAl
e25hbWV9LgogCiAKICVwcmVwCiAlc2V0dXAgLXEKICVwYXRjaDAgLXAxIC1iIC5yb3RhdGlvbgor
JXBhdGNoMSAtcDEgLWIgLmJ1aWxkZml4CiAKIAogJWJ1aWxkCiAlY29uZmlndXJlIC0tZGlzYWJs
ZS1zdGF0aWMKIG1ha2UgJXs/X3NtcF9tZmxhZ3N9CkBAIC02NiwxMCArNjgsMTMgQEAgcm0gLXJm
ICRSUE1fQlVJTERfUk9PVAogJXtfbGliZGlyfS9saWJzcGVjdHJlLnNvCiAle19saWJkaXJ9L3Br
Z2NvbmZpZy9saWJzcGVjdHJlLnBjCiAKIAogJWNoYW5nZWxvZworKiBGcmkgRGVjIDA5IDIwMTYg
U3RlcGhlbiBHYWxsYWdoZXIgPHNnYWxsYWdoQHJlZGhhdC5jb20+IC0gMC4yLjctOQorLSBJbmNs
dWRlIHVwc3RyZWFtIHBhdGNoIHRvIGZpeCBidWlsZGluZyBhZ2FpbnN0IGdob3N0c2NyaXB0ID49
IDkuMTgKKwogKiBUaHUgRmViIDA0IDIwMTYgRmVkb3JhIFJlbGVhc2UgRW5naW5lZXJpbmcgPHJl
bGVuZ0BmZWRvcmFwcm9qZWN0Lm9yZz4gLSAwLjIuNy04CiAtIFJlYnVpbHQgZm9yIGh0dHBzOi8v
ZmVkb3JhcHJvamVjdC5vcmcvd2lraS9GZWRvcmFfMjRfTWFzc19SZWJ1aWxkCiAKICogRnJpIEp1
bCAzMSAyMDE1IE1hcmVrIEthc2lrIDxta2FzaWtAcmVkaGF0LmNvbT4gLSAwLjIuNy03CiAtIFJv
dGF0ZSByZXN1bHQgb2YgcmVuZGVyaW5nIGluIGxpYnNwZWN0cmUKLS0gCjIuOS4zCgo=
</data>
<flag name="review"
          id="2892236"
          type_id="155"
          status="+"
          setter="mkasik"
    />
          </attachment>
      

    </bug>

</bugzilla>