<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1342828</bug_id>
          
          <creation_ts>2016-06-05 12:37:00 -0400</creation_ts>
          <short_desc>[X11 on Wayland] LibreOffice Toolbars are jumping around while being moved</short_desc>
          <delta_ts>2016-11-19 16:16:33 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>libreoffice</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1277927</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Christian Stadelmann">rhbz2</reporter>
          <assigned_to name="Caolan McNamara">caolanm</assigned_to>
          <cc>caolanm</cc>
    
    
    <cc>dtardon</cc>
    
    
    <cc>erack</cc>
    
    
    <cc>mstahl</cc>
    
    
    <cc>sbergman</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>libreoffice-5.2.3.3-6.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-11-19 16:16:33</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          <external_bugs name="GNOME Desktop">768098</external_bugs>
    
    
    
    <external_bugs name="GNOME Desktop">768128</external_bugs>
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9387879</commentid>
    <comment_count>0</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-06-05 12:37:35 -0400</bug_when>
    <thetext>Description of problem:
Once a toolbar is detached in LibreOffice running on X11 backend in a Gnome+Wayland session, the toolbar jumping around when being dragged

Version-Release number of selected component (if applicable):
libreoffice-5.1.3.2-7.fc24.x86_64 with gtk3-3.20.6-1.fc24.x86_64

How reproducible:
Always

Steps to Reproduce:
1. Open any LibreOffice component (Writer, Calc, Base, …)
2. Detach any toolbar by dragging it
3. Drag the toolbar around

Actual results:
While being dragged, the toolbar is jumping around.

Expected results:
No jumping, toolbar should just follow mouse movements.

Additional info:
This issue is only present when running LibreOffice with Gtk+ 3.x with x11 Gdk backend inside a Gnome+wayland.
On weston, the detached toolbar can&apos;t be dragged at all.
I&apos;m not sure this is a LibreOffice issue, it could also be somewhere else (e.g. mutter). You probably know better so please feel free to reassign.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9390987</commentid>
    <comment_count>1</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2016-06-06 12:46:47 -0400</bug_when>
    <thetext>*** Bug 1342827 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9454431</commentid>
    <comment_count>2</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-06-27 04:43:49 -0400</bug_when>
    <thetext>As a result of this bug, there is no intuitive (simple) way to reattach a toolbar.

To at least get those toolbars reattached, you may want to double-right-click on a toolbar header. I don&apos;t know why that works, but it does.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9454479</commentid>
    <comment_count>3</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2016-06-27 04:58:50 -0400</bug_when>
    <thetext>I can drag around under X and under wayland without any particular problem that I can see. Can&apos;t dock under wayland though</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9455563</commentid>
    <comment_count>4</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2016-06-27 10:14:59 -0400</bug_when>
    <thetext>The jumpiness seems to be because we&apos;re using both gtk_window_begin_move_drag and explicitly trying to set the position so they fight it out. Under wayland explicit positioning doesn&apos;t work at all, under x11 gtk_window_begin_move_drag isn&apos;t working with GDK_WINDOW_TYPE_HINT_TOOLBAR set for some reason

https://bugzilla.gnome.org/show_bug.cgi?id=768098 for the GDK_WINDOW_TYPE_HINT_TOOLBAR problem to see if anyone knows why that is</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9455851</commentid>
    <comment_count>5</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-06-27 11:16:45 -0400</bug_when>
    <thetext>(In reply to Caolan McNamara from comment #3)
&gt; I can drag around under X and under wayland without any particular problem
&gt; that I can see. Can&apos;t dock under wayland though

You have to exactly follow the steps (I was a bit imprecise above):

Steps to Reproduce:
1. Open any LibreOffice component (Writer, Calc, Base, …)
2. Detach any toolbar by dragging it. Release the mouse button.
3. Drag the toolbar around

Before releasing the mouse button, dragging looks good. Only after releasing it and grabbing it again it jumps around.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9458085</commentid>
    <comment_count>6</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2016-06-28 04:24:53 -0400</bug_when>
    <thetext>When it comes to docking I don&apos;t seem to get anything under wayland which can be used to detect that the window has been dragged over a docking point https://bugzilla.gnome.org/show_bug.cgi?id=768128</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9548766</commentid>
    <comment_count>7</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-07-26 00:08:05 -0400</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 25 development cycle.
Changing version to &apos;25&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9721006</commentid>
    <comment_count>8</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-09-19 07:57:50 -0400</bug_when>
    <thetext>This issue is not specific to the Gtk+ 3 backend but also happens with SAL_USE_VCLPLUGIN=gen in environment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9879272</commentid>
    <comment_count>9</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2016-11-10 05:42:18 -0500</bug_when>
    <thetext>seems to me that moveable toplevel dockable toolbars are just going to be a pain in the new world order and its futile to fight the tide</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9882621</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-11 03:59:38 -0500</bug_when>
    <thetext>libreoffice-5.2.3.3-6.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-0438bf95e5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9883970</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-11 11:58:30 -0500</bug_when>
    <thetext>libreoffice-5.2.3.3-6.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-0438bf95e5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9905910</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-19 16:16:33 -0500</bug_when>
    <thetext>libreoffice-5.2.3.3-6.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>