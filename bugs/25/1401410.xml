<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1401410</bug_id>
          
          <creation_ts>2016-12-05 02:55:00 -0500</creation_ts>
          <short_desc>f24-&gt;f25 vim: copy paste no longer works</short_desc>
          <delta_ts>2017-02-28 09:27:28 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>vim</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ryan Rowe">ryanrowe</reporter>
          <assigned_to name="Matthias Clasen">mclasen</assigned_to>
          <cc>ahmadsamir3891</cc>
    
    
    <cc>aoeuser</cc>
    
    
    <cc>debarshir</cc>
    
    
    <cc>dennis</cc>
    
    
    <cc>djuran</cc>
    
    
    <cc>d.lesca</cc>
    
    
    <cc>egmont</cc>
    
    
    <cc>gilboad</cc>
    
    
    <cc>greta_watson</cc>
    
    
    <cc>karsten</cc>
    
    
    <cc>mclasen</cc>
    
    
    <cc>moshima.web</cc>
    
    
    <cc>pwouters</cc>
    
    
    <cc>roger.bivand</cc>
    
    
    <cc>work.eric</cc>
    
    
    <cc>zdohnal</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>vim-8.0.133-2.fc25 vim-8.0.142-1.fc25 vim-8.0.142-1.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-01-05 15:22:12</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9955099</commentid>
    <comment_count>0</comment_count>
    <who name="Ryan Rowe">ryanrowe</who>
    <bug_when>2016-12-05 02:55:03 -0500</bug_when>
    <thetext>Description of problem:
I am using vim in gnome-terminal. Since upgrading to F25, copy/paste no longer works.


Version-Release number of selected component (if applicable):
vim-enhanced-8.0.118-1.fc25.x86_64

How reproducible:
Every time

Steps to Reproduce:
1. vi testfile
2. insert some text
3. select it with the mouse
4. middle-click in gedit to paste OR go to edit&gt; copy in gnome-terminal

Actual results:
nothing happens / no copy option in gnome-terminal


Expected results:
paste


Additional info:</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9955137</commentid>
    <comment_count>1</comment_count>
    <who name="Ryan Rowe">ryanrowe</who>
    <bug_when>2016-12-05 03:07:47 -0500</bug_when>
    <thetext>Possibly related to bug 1400088 and bug 1400477</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9955575</commentid>
    <comment_count>2</comment_count>
    <who name="Zdenek Dohnal">zdohnal</who>
    <bug_when>2016-12-05 06:10:00 -0500</bug_when>
    <thetext>Hi Ryan,

it really seems it is not vim bug, because I have the same vim version on F24 and Copy/Paste works there. What I found out so far:

1) When you select some text with mouse, VIM goes into Visual mode automatically.

2) Copy/Paste works in certain way, when you select text and click on place, where you want to paste text, with mouse middle button. But it works only for same opened file, you cannot copy/paste out of vim.

I will reassign it to gnome-terminal.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9957330</commentid>
    <comment_count>3</comment_count>
    <who name="Zdenek Dohnal">zdohnal</who>
    <bug_when>2016-12-05 14:18:45 -0500</bug_when>
    <thetext>When I completely upgrade OS to Fedora 25, behavior described in comment #2 mostly disappeared. I can select block of text without going into visual mode and I can use Edit-&gt;Copy from menu. Only thing, which appeared, is when I selected block of text and clicked on mouse middle button, it automatically goes into insert mode and pastes selected text after cursor. I do not know if this is correct behavior.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9957571</commentid>
    <comment_count>4</comment_count>
    <who name="Egmont Koblinger">egmont</who>
    <bug_when>2016-12-05 16:01:03 -0500</bug_when>
    <thetext>Could you please clarify the description? In bullet point 4 you say &quot;edit &gt;copy&quot; in gnome-terminal doesn&apos;t paste... not sure why &quot;copy&quot; would &quot;paste&quot;.

Three things to look at / be aware of:

- The usual confusion between PRIMARY and CLIPBOARD in X11, or if Wayland is used then I have no clue how it goes there.

- Whether VIM handles mouse events on its own rather than letting gnome-terminal select text. You could test it by a single right-click: Does it bring up gnome-terminal&apos;s context menu? Also what happens if you highlight the text with Shift+click instead of simple click?

- VIM might enable &quot;bracketed paste mode&quot; in which case the characters that are pasted are enclosed between special marks. This makes it possible for VIM to handle them differently than if they were typed at the keyboard, e.g. automatically switch to insert mode rather than executing various (presumably unintended) commands.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9959426</commentid>
    <comment_count>5</comment_count>
    <who name="Ryan Rowe">ryanrowe</who>
    <bug_when>2016-12-06 05:30:07 -0500</bug_when>
    <thetext>&gt; Could you please clarify the description? In bullet point 4 you say &quot;edit &gt;copy&quot; in gnome-terminal doesn&apos;t paste... not sure why &quot;copy&quot; would &quot;paste&quot;.

I never say that copy would paste, I describe two differences I encounter since upgrading from F24 to F25.

Difference 1:
(select some text then...)
middle-click in gedit to paste -&gt; nothing happens

Difference 2:
(select some text then...)
go to edit&gt; copy in gnome-terminal -&gt; you can&apos;t. copy is grayed out.

&gt; The usual confusion between PRIMARY and CLIPBOARD in X11, or if Wayland is used then I have no clue how it goes there.

This is covered by the two test cases shown above in this comment.

&gt; - Whether VIM handles mouse events on its own rather than letting gnome-terminal select text. You could test it by a single right-click: Does it bring up gnome-terminal&apos;s context menu?

It does not bring up gnome-terminal&apos;s context menu.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9959437</commentid>
    <comment_count>6</comment_count>
    <who name="Egmont Koblinger">egmont</who>
    <bug_when>2016-12-06 05:35:34 -0500</bug_when>
    <thetext>(In reply to Ryan Rowe from comment #5)

&gt; It does not bring up gnome-terminal&apos;s context menu.

This means that VIM handles the mouse events (click, drag etc.). If the &quot;selected&quot; characters are visually highlighted (e.g. inverted), it&apos;s done by VIM manually.

From gnome-terminal&apos;s point of view, there&apos;s no copy operation whatsoever going on. It only reports mouse events to VIM, just as e.g. it would report them to MC or any other mouse-aware app.

Use Shift+Click to override and make a selection in gnome-terminal. Or disable mouse support in your VIM.

This is the intended behavior.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9964263</commentid>
    <comment_count>7</comment_count>
    <who name="Ryan Rowe">ryanrowe</who>
    <bug_when>2016-12-07 07:14:28 -0500</bug_when>
    <thetext>It is not intended behavior if it is an undocumented change, I will re-assign to vim.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9965048</commentid>
    <comment_count>8</comment_count>
    <who name="Karsten Hopp">karsten</who>
    <bug_when>2016-12-07 10:25:00 -0500</bug_when>
    <thetext>What&apos;s the output of  :set mouse?
Please have a look at :help mouse   and try the different settings. Which one gives you the expected behaviour ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9965762</commentid>
    <comment_count>9</comment_count>
    <who name="Ryan Rowe">ryanrowe</who>
    <bug_when>2016-12-07 14:02:49 -0500</bug_when>
    <thetext>Wait a second... shift click brings up the gt-t menu, but I still can&apos;t choose Copy, it&apos;s grayed out. Same as Edit&gt; Copy is grayed out.

&gt; What&apos;s the output of :set mouse?
mouse = a

&gt; Please have a look at :help mouse   and try the different settings. Which one gives you the expected behaviour ?
set mouse=v
seems good.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9965874</commentid>
    <comment_count>10</comment_count>
    <who name="Egmont Koblinger">egmont</who>
    <bug_when>2016-12-07 14:48:15 -0500</bug_when>
    <thetext>(In reply to Ryan Rowe from comment #9)
&gt; Wait a second... shift click brings up the gt-t menu, but I still can&apos;t
&gt; choose Copy, it&apos;s grayed out. Same as Edit&gt; Copy is grayed out.

You need to make your selection with with Shift+click. Otherwise it&apos;s VIM that handles the click+drag events and not gnome-terminal itself creating a selection.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9975382</commentid>
    <comment_count>11</comment_count>
    <who name="Greta Watson">greta_watson</who>
    <bug_when>2016-12-12 00:38:38 -0500</bug_when>
    <thetext>I am running Fedora 24, kernel 4.8.12-200.fc24.x86_64, KDE spin.

When vim-enhanced, vim-common, vim-filesystem, and vim-minimal were updated from 2:7.4.1718-1.fc24.x86_64 to 2:8.0.124-2.fc24.x86_64, the behavior of paste using the middle mouse button changed when vim was invoked from the command line.

In the earlier version, clicking the middle button would copy the contents of the clipboard into the file that vim was dealing with, at the specified insert location.

In the later version, the clipboard would not be copied.  Instead, one blank character would be copied.

However, by running the later version in the compatible mode (vim -C), the contents of the clipboard are copied.

The behavior of /bin/vi did not change--it continues to copy the clipboard.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9979804</commentid>
    <comment_count>12</comment_count>
    <who name="Zdenek Dohnal">zdohnal</who>
    <bug_when>2016-12-13 02:51:35 -0500</bug_when>
    <thetext>Hi Greta,

would you mind trying to set mouse=v, if it helps? Like Ryan said in comment #9?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9982347</commentid>
    <comment_count>13</comment_count>
    <who name="Greta Watson">greta_watson</who>
    <bug_when>2016-12-13 16:04:47 -0500</bug_when>
    <thetext>set mouse=v works.
shift click (with or without set mouse=v) also works.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9990815</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-15 12:07:43 -0500</bug_when>
    <thetext>vim-8.0.133-2.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-ac0548af76</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9990824</commentid>
    <comment_count>15</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-15 12:09:11 -0500</bug_when>
    <thetext>vim-8.0.133-2.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-ed409d5de3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9992265</commentid>
    <comment_count>16</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-16 00:32:01 -0500</bug_when>
    <thetext>vim-8.0.133-2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-ac0548af76</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9992304</commentid>
    <comment_count>17</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-16 00:34:05 -0500</bug_when>
    <thetext>vim-8.0.133-2.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-ed409d5de3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9994830</commentid>
    <comment_count>18</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-16 16:01:58 -0500</bug_when>
    <thetext>vim-8.0.133-2.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9995199</commentid>
    <comment_count>19</comment_count>
    <who name="Greta Watson">greta_watson</who>
    <bug_when>2016-12-16 19:23:13 -0500</bug_when>
    <thetext>In Fedora 24, I updated vim-common, vim-minimal, vim-enhanced, and vim-filesystem to 8.0.133-2.fc24.x86_64.  /etc/vimrc has the line:  set mouse=v.

However, when I invoke vim, and set mouse, the value is &quot;a&quot; rather than &quot;v&quot;.  What else do I need to do?

I can still get it to work by invoking &quot;vim -C&quot;, using shift click, or manually setting mouse=v.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9995445</commentid>
    <comment_count>20</comment_count>
    <who name="Eric Work">work.eric</who>
    <bug_when>2016-12-17 04:03:11 -0500</bug_when>
    <thetext>This change effectively breaks gvim for the normal usage pattern.  You can no longer use the mouse to move the cursor.  It only selects text now.  Reading the docs I guess that would make sense since mouse=v makes it behave like visual mode only which before only happened when you dragged.  It doesn&apos;t work in insert mode like mouse=a did before which positions the cursor with a single click.  In fact upon further testing console vim behaves almost the same as a GNOME vim does now when mouse=a.  If you set mouse=a and then use &quot;+y, followed by &quot;+p then you can copy and paste to the system clipboard just like GNOME vim would.  In fact if I unset mouse=a in /etc/vimrc it does exactly what the default behavior is as documented in vim and does the right thing in both console vim and gvim.

&apos;mouse&apos;                 string  (default &quot;&quot;, &quot;a&quot; for GUI, MS-DOS and Win32,
                                                 set to &quot;a&quot; in defaults.vim)

I&apos;m actually wondering why others were having a problem with this before.  As far as I can remember after doing a dnf system upgrade from F24 to F25 I wasn&apos;t having a problem until now.  If someone here is having the problem still and hasn&apos;t upgraded the vim package yet can they try &quot;:set mouse&quot; in vim and see what it reports?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9995812</commentid>
    <comment_count>21</comment_count>
    <who name="Paul Wouters">pwouters</who>
    <bug_when>2016-12-17 13:22:45 -0500</bug_when>
    <thetext>any combination of vim -C or vim with /etc/vimrc containing no mouse line, set mouse=v or set mouse=a causes the same broken failure of copy&amp;paste.

This is on fedora 25 with 8.0.133-2 of all vim packages involved.

Using :set mouse=v inside vim does seem to work around it</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9995813</commentid>
    <comment_count>22</comment_count>
    <who name="Paul Wouters">pwouters</who>
    <bug_when>2016-12-17 13:25:35 -0500</bug_when>
    <thetext>note creating a ~/.vimrc just containing set mouse=v is a workaround that does work. So it seems perhaps the setting in /etc/vimrc is lost or not read properly

(i did not have a .vimrc before creating it with this workaround)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9995818</commentid>
    <comment_count>23</comment_count>
    <who name="Eric Work">work.eric</who>
    <bug_when>2016-12-17 13:40:53 -0500</bug_when>
    <thetext>For people who are having issues with console vim you can create a ~/.vimrc with &quot;set mouse=&quot; which will make it behave like the expected vim default setting and copy/paste works.  Although if you do this it will break cursor position in gvim unless you create ~/.gvimrc with &quot;set mouse=a&quot; as well.  I have both a ~/.vimrc and ~/.gvimrc and neither has any mouse settings and I was getting the default vim behavior until this recent change in /etc/vimrc.  If people don&apos;t have ~/.vimrc files and were before getting mouse=a in console vim that&apos;s quite strange.

Although in /usr/share/vim/vim80/defaults.vim I see:

if has(&apos;mouse&apos;)
  set mouse=a
endif

So this makes me think some terminal emulators are reporting a mouse is present while others are not maybe?  Do you guys happen to be running wayland?  I play games occasionally so I have the official nvidia driver installed and I&apos;m still running Xorg using gnome-terminal.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9996211</commentid>
    <comment_count>24</comment_count>
    <who name="Dario Lesca">d.lesca</who>
    <bug_when>2016-12-18 05:55:02 -0500</bug_when>
    <thetext>On my Fedora 25 I have update now to vim-*-8.0.133-2.fc25.x86_64

[lesca@dodo ~]$ LANG=C vim --version|head -2
VIM - Vi IMproved 8.0 (2016 Sep 12, compiled Dec 15 2016 16:47:44)
Included patches: 1-133

with this changelog:

[lesca@dodo ~]$ rpm -q vim-minimal --changelog|head -3
* gio dic 15 2016 Zdenek Dohnal &lt;zdohnal@redhat.com&gt; - 2:8.0.133-2
- f24-&gt;f25 vim: copy paste no longer works (bug #1401410) - change mouse default setting to &apos;v&apos;

The mouse problem still exist and the mouse setting still to be =a

[lesca@dodo ~]$ grep set\ mouse !$
grep set\ mouse /usr/share/vim/vim80/defaults.vim
  set mouse=a

Without &quot;echo &apos;set mouse=&apos; &gt;&gt; ~/.vimrc&quot;, the copy/paste mouse action, when use vim into mate-terminal, not work property

IMHO, modify the &quot;set mouse=a&quot; line into /usr/share/vim/vim80/defaults.vim, and set it to &quot;set mouse=&quot; or &quot;set mouse=v&quot;

Create a .vimrc files for my and root users (sudo vim /etc/...) on all my Fedora Workstation and server is an annoying job</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9996343</commentid>
    <comment_count>25</comment_count>
    <who name="Ahmad Samir">ahmadsamir3891</who>
    <bug_when>2016-12-18 08:08:12 -0500</bug_when>
    <thetext>This is a change in vim 8* (since patch 7.4.2111); now when no ~/.vimrc file is found the defaults.vim (/usr/share/vim/vim80/defaults.vim) script is used; which has &apos;mouse=a&apos;.

defaults.vim is loaded after /etc/vimrc from [1]:
Patch 7.4.2319
Problem:    No way for a system wide vimrc to stop loading defaults.vim.
            (Christian Hesse)
Solution: Bail out of defaults.vim if skip_defaults_vim was set.


so it overrides values set in /etc/vimrc.

[1] https://github.com/vim/vim/blob/5162822914372fc916a93f85848c0c82209e7cec/runtime/doc/version8.txt#L14219

https://github.com/vim/vim/blob/5162822914372fc916a93f85848c0c82209e7cec/runtime/doc/starting.txt#L1038</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9996717</commentid>
    <comment_count>26</comment_count>
    <who name="Dario Lesca">d.lesca</who>
    <bug_when>2016-12-18 19:03:59 -0500</bug_when>
    <thetext>Where I must set &apos;skip_defaults_vim&apos;?
Into /etc/vimrc ? ... or into my ~/.vimrc? .. or into some other place?

The goal is restore the previous mouse behaviour. Without forcing all users to change all their systems, and this can be done only by releasing a specific patch to vim or its default configuration files...

Why it&apos;s not possible release a defaults.vim with &quot;set mouse=v&quot; or &quot;set mouse=&quot; ?

... or did I miss something?

Thanks.
Dario</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997274</commentid>
    <comment_count>27</comment_count>
    <who name="Zdenek Dohnal">zdohnal</who>
    <bug_when>2016-12-19 01:51:17 -0500</bug_when>
    <thetext>Hi,

I deeply apologize for problems, I am new co-maintainer of VIM and I thought putting set mouse=v into /etc/vimrc will solve issue. I will quickly create new build with Dario&apos;s suggestion (putting it into defaults.vim) and update it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997303</commentid>
    <comment_count>28</comment_count>
    <who name="Eric Work">work.eric</who>
    <bug_when>2016-12-19 02:25:36 -0500</bug_when>
    <thetext>I would suggest something like the following not to break gvim:

if !has(&quot;gui_running&quot;)
  set mouse=
endif</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997318</commentid>
    <comment_count>29</comment_count>
    <who name="Zdenek Dohnal">zdohnal</who>
    <bug_when>2016-12-19 02:36:22 -0500</bug_when>
    <thetext>Erik,

are you suggesting that we should leave:

if has(&apos;mouse&apos;)
  set mouse=a
endif

as it is now and only add after that your suggestion:

if !has(&quot;gui_running&quot;)
  set mouse=
endif</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997333</commentid>
    <comment_count>30</comment_count>
    <who name="Eric Work">work.eric</who>
    <bug_when>2016-12-19 02:46:17 -0500</bug_when>
    <thetext>OK... according to strace /etc/vimrc is always read and it&apos;s read first.  If ~/.vimrc is present then defaults.vim is not read.  Basically one or the other.  I think I see the problem now and I can reproduce it.  You just need to remove the following block from defaults and it should work like it&apos;s suppose to:

&quot; In many terminal emulators the mouse works just fine.  By enabling it you
&quot; can position the cursor, Visually select and scroll with the mouse.
if has(&apos;mouse&apos;)
  set mouse=a
endif

If you have a ~/.vimrc file it won&apos;t mess with the mouse and that&apos;s why it worked for me until /etc/vimrc was changed.  GNOME terminal must support mouse reporting which is why this triggers without a ~/.vimrc.  If you did not have ~/.vimrc and this mouse setting was removed it will be like default again, mouse=a for gui and mouse= for console.

1. Remove the mouse line added to /etc/vimrc
2. Remove the above block from defaults.vim

Now the mouse is not messed with and the defaults makes everyone happy again.  Normal select and middle click work in the terminal and gvim you can still click to move the cursor and drag to copy/paste.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997345</commentid>
    <comment_count>31</comment_count>
    <who name="Zdenek Dohnal">zdohnal</who>
    <bug_when>2016-12-19 02:51:06 -0500</bug_when>
    <thetext>Ok, thank you very much, Eric. Builds will be in 15 minutes with your suggested changes and I will put here links to koji, where everybody can download it and install it now, without waiting for update.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997414</commentid>
    <comment_count>32</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-19 03:25:50 -0500</bug_when>
    <thetext>vim-8.0.134-2.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-0281ab71ff</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997425</commentid>
    <comment_count>33</comment_count>
    <who name="Zdenek Dohnal">zdohnal</who>
    <bug_when>2016-12-19 03:30:26 -0500</bug_when>
    <thetext>Builds are done:

https://koji.fedoraproject.org/koji/taskinfo?taskID=16954386 for f24

https://koji.fedoraproject.org/koji/taskinfo?taskID=16954503 for f25</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997431</commentid>
    <comment_count>34</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-19 03:31:34 -0500</bug_when>
    <thetext>vim-8.0.134-2.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-be5fa630c5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997536</commentid>
    <comment_count>35</comment_count>
    <who name="Dario Lesca">d.lesca</who>
    <bug_when>2016-12-19 04:16:48 -0500</bug_when>
    <thetext>I have download and install this new package on a f25 test system and the mouse into a gnome-terminal work like expected.

[lesca@linux140 ~]$ vim --version |head -2
VIM - Vi IMproved 8.0 (2016 Sep 12, compiled Dec 19 2016 08:17:13)
Patch incluse: 1-134

[lesca@linux140 ~]$ grep mouse= /usr/share/vim/vim80/defaults.vim
[lesca@linux140 ~]$ grep mouse= /etc/vimrc 

Thank to all.
Dario</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997554</commentid>
    <comment_count>36</comment_count>
    <who name="Zdenek Dohnal">zdohnal</who>
    <bug_when>2016-12-19 04:24:42 -0500</bug_when>
    <thetext>*** Bug 1405934 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997621</commentid>
    <comment_count>37</comment_count>
    <who name="Karsten Hopp">karsten</who>
    <bug_when>2016-12-19 04:46:21 -0500</bug_when>
    <thetext>(In reply to Zdenek Dohnal from comment #27)
&gt; Hi,
&gt; 
&gt; I deeply apologize for problems, I am new co-maintainer of VIM and I thought
&gt; putting set mouse=v into /etc/vimrc will solve issue. I will quickly create
&gt; new build with Dario&apos;s suggestion (putting it into defaults.vim) and update
&gt; it.

That was a change that Zdenek discussed with me (the &apos;main&apos; VIM maintainer) before doing the update and we agreed on this workaround. I didn&apos;t notice that defaults.vim would overwrite settings from the vimrc, what&apos;s the point of that upstream change anyway ? 

Thanks for all that valuable feedback and your suggestions for a better fix. Please test Zdenek&apos;s latest update and give feedback if mouse behaviour is still wrong in either gvim or vim.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9997821</commentid>
    <comment_count>38</comment_count>
    <who name="Ahmad Samir">ahmadsamir3891</who>
    <bug_when>2016-12-19 05:50:11 -0500</bug_when>
    <thetext>(In reply to Dario Lesca from comment #26)
&gt; Where I must set &apos;skip_defaults_vim&apos;?
&gt; Into /etc/vimrc ? ... or into my ~/.vimrc? .. or into some other place?
&gt;

In /etc/vimrc at the top:
let skip_defaults_vim=1

(if you have a ~/.vimrc defaults.vim isn&apos;t loaded at all anyway).


(In reply to Karsten Hopp from comment #37)
&gt; (In reply to Zdenek Dohnal from comment #27)
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; I deeply apologize for problems, I am new co-maintainer of VIM and I thought
&gt; &gt; putting set mouse=v into /etc/vimrc will solve issue. I will quickly create
&gt; &gt; new build with Dario&apos;s suggestion (putting it into defaults.vim) and update
&gt; &gt; it.
&gt; 
&gt; That was a change that Zdenek discussed with me (the &apos;main&apos; VIM maintainer)
&gt; before doing the update and we agreed on this workaround. I didn&apos;t notice
&gt; that defaults.vim would overwrite settings from the vimrc, what&apos;s the point
&gt; of that upstream change anyway ? 
&gt; 

IMHO, I agree what&apos;s the point of having defaults that only affect users who don&apos;t have a ~/.vimrc? /etc/vimrc is loaded even with a ~/.vimrc, and one can override individual settings in ~/.vimrc.

I suggest to discard all the settings from defaults.vim by adding:
let skip_defaults_vim=1

at the top of /etc/vimrc (with a comment explaining the issue).

Then you can look at the upstream default settings in defaults.vim, if there&apos;s something useful as a default that /etc/vimrc doesn&apos;t already have then add it to /etc/vimrc.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10000470</commentid>
    <comment_count>39</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-19 19:59:43 -0500</bug_when>
    <thetext>vim-8.0.134-2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-0281ab71ff</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10001390</commentid>
    <comment_count>40</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-20 04:23:01 -0500</bug_when>
    <thetext>vim-8.0.134-2.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-be5fa630c5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10024135</commentid>
    <comment_count>41</comment_count>
    <who name="Gilboa Davara">gilboad</who>
    <bug_when>2016-12-29 11:24:31 -0500</bug_when>
    <thetext>I can confirm 8.0.134.2 solves the problem on multiple machines.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10024143</commentid>
    <comment_count>42</comment_count>
    <who name="Greta Watson">greta_watson</who>
    <bug_when>2016-12-29 11:37:06 -0500</bug_when>
    <thetext>vim-enhanced-2:8.0.134-2.fc24.x86_64 solved the problem for Fedora 24.

Thank-you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10030077</commentid>
    <comment_count>43</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-03 05:49:42 -0500</bug_when>
    <thetext>vim-8.0.142-1.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2017-562277cfd8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10031873</commentid>
    <comment_count>44</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-03 17:21:26 -0500</bug_when>
    <thetext>vim-8.0.142-1.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-73038b8d65</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10031984</commentid>
    <comment_count>45</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-03 18:50:50 -0500</bug_when>
    <thetext>vim-8.0.142-1.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-562277cfd8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10038831</commentid>
    <comment_count>46</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-05 15:22:12 -0500</bug_when>
    <thetext>vim-8.0.142-1.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10039532</commentid>
    <comment_count>47</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-05 23:04:20 -0500</bug_when>
    <thetext>vim-8.0.142-1.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10193925</commentid>
    <comment_count>48</comment_count>
    <who name="Zdenek Dohnal">zdohnal</who>
    <bug_when>2017-02-28 09:27:28 -0500</bug_when>
    <thetext>*** Bug 1382426 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>