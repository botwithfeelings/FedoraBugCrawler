<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1443942</bug_id>
          
          <creation_ts>2017-04-20 06:06:00 -0400</creation_ts>
          <short_desc>enable the x509-username-field option</short_desc>
          <delta_ts>2017-05-14 16:21:08 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>openvpn</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Hristo Venev">hristo</reporter>
          <assigned_to name="David Sommerseth">dazo</assigned_to>
          <cc>dazo</cc>
    
    
    <cc>huzaifas</cc>
    
    
    <cc>mauricio.teixeira</cc>
    
    
    <cc>steve</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>openvpn-2.4.2-1.fc26</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-05-14 16:21:08</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10348998</commentid>
    <comment_count>0</comment_count>
    <who name="Hristo Venev">hristo</who>
    <bug_when>2017-04-20 06:06:03 -0400</bug_when>
    <thetext>Description of problem:
openvpn fails to start if the x509-username-field is specified.

Version-Release number of selected component (if applicable):
2.4.2

How reproducible:
Always

Steps to Reproduce:
1. Add the x509-username-field option to the OpenVPN config file.
2. Attempt to start OpenVPN.

Actual results:
OpenVPN fails to start.

Expected results:
OpenVPN starts successfully.

Additional info:
./configure --enable-x509-alt-username</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10349017</commentid>
    <comment_count>1</comment_count>
    <who name="Hristo Venev">hristo</who>
    <bug_when>2017-04-20 06:11:47 -0400</bug_when>
    <thetext>Sorry, the version is 2.4.1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10349139</commentid>
    <comment_count>2</comment_count>
    <who name="David Sommerseth">dazo</who>
    <bug_when>2017-04-20 06:49:04 -0400</bug_when>
    <thetext>Sorry about removing that feature in the packaging clean-up.  On the other hand, I now know there are at least one user of this feature.

Could you please test a scratch build and see how that works for you?

* x86_64 build:
https://koji.fedoraproject.org/koji/taskinfo?taskID=19098346

* armv7hl build
https://koji.fedoraproject.org/koji/taskinfo?taskID=19098345

* i686 build
https://koji.fedoraproject.org/koji/taskinfo?taskID=19098347

Just pick the build which matches best your environment.

This fix will be in the pipe for the next OpenVPN build, unless there are more users needing this fix in the mean time.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10349584</commentid>
    <comment_count>3</comment_count>
    <who name="Hristo Venev">hristo</who>
    <bug_when>2017-04-20 08:37:49 -0400</bug_when>
    <thetext>The option seems to be enabled in your build. I also managed to port this to Fedora 26 and fixed an OpenVPN bug with numeric OIDs. I&apos;ll try to upstream the patches.

Here&apos;s a SRPM: https://copr-be.cloud.fedoraproject.org/results/hvenev/experiments/fedora-26-x86_64/00541892-openvpn/openvpn-2.4.1-3.1.fc26.src.rpm</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10349623</commentid>
    <comment_count>4</comment_count>
    <who name="David Sommerseth">dazo</who>
    <bug_when>2017-04-20 08:50:42 -0400</bug_when>
    <thetext>Thanks a lot!  I&apos;ve just given your src.rpm a very quick look, but spotted you seem to have done some OpenSSL 1.1 porting as well.

There is an upstream effort already on-going doing the OpenSSL v1.1 port.  You can see the patches here: http://www.mail-archive.com/openvpn-devel@lists.sourceforge.net/msg14075.html

If you have any chance to test, review and comment on those still not applied to the upstream OpenVPN, we&apos;d be thankful for that help.  Get in touch with me directly on e-mail and I&apos;ll get you the needed pointers to reply properly.

For 0002-Fix-extract_x509_field_ssl-for-external-objects.patch, this looks reasonable to get upstream as well.  But I&apos;d encourage you to elaborate a bit more in the commit message what is wrong and why, plus some brief explanation of why you chose this approach - especially if there are more alternatives.  With that in place + a signed-off-by line, then that patch looks reasonable and shouldn&apos;t have too much struggles for inclusion - as long as it doesn&apos;t break existing configurations (which I don&apos;t think your patch will do).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10405685</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-11 16:24:00 -0400</bug_when>
    <thetext>openvpn-2.4.2-1.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-89d98779ec</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10409426</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-12 21:12:25 -0400</bug_when>
    <thetext>openvpn-2.4.2-1.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-89d98779ec</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10410667</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-14 16:21:08 -0400</bug_when>
    <thetext>openvpn-2.4.2-1.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>