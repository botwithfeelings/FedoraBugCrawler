<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1415339</bug_id>
          
          <creation_ts>2017-01-20 18:59:00 -0500</creation_ts>
          <short_desc>wi-fi rtl8188ce very large packet loss</short_desc>
          <delta_ts>2017-02-28 10:18:08 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>kernel</component>
          <version>25</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>high</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>icegloom</reporter>
          <assigned_to name="Kernel Maintainer List">kernel-maint</assigned_to>
          <cc>cjbrooking</cc>
    
    
    <cc>dluga93</cc>
    
    
    <cc>emailtoflorian</cc>
    
    
    <cc>fat.lobyte9</cc>
    
    
    <cc>gansalmon</cc>
    
    
    <cc>geekwu</cc>
    
    
    <cc>icegloom</cc>
    
    
    <cc>ichavero</cc>
    
    
    <cc>itamar</cc>
    
    
    <cc>jkastner</cc>
    
    
    <cc>j.markmann</cc>
    
    
    <cc>jonathan</cc>
    
    
    <cc>kernel-maint</cc>
    
    
    <cc>labbott</cc>
    
    
    <cc>lupinix</cc>
    
    
    <cc>madhu.chinakonda</cc>
    
    
    <cc>mchehab</cc>
    
    
    <cc>mitroko</cc>
    
    
    <cc>pjhavariotis</cc>
    
    
    <cc>sebastian</cc>
    
    
    <cc>thomas.lemm</cc>
    
    
    <cc>tom.georgoulias</cc>
    
    
    <cc>trever</cc>
    
    
    <cc>vic</cc>
    
    
    <cc>wjyoung65</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-02-28 10:18:08</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10085432</commentid>
    <comment_count>0</comment_count>
    <who name="">icegloom</who>
    <bug_when>2017-01-20 18:59:28 -0500</bug_when>
    <thetext>Description of problem:
Very large packet loss on pci-e rtl8188ce on kernel-4.9.3-200.fc25.x86_64.
Machine: Lenovo Thinkpad T420.
Other two devices don&apos;t have problems with connecting to access point.

Version-Release number of selected component (if applicable):
kernel-4.9.3-200.fc25.x86_64
old kernel-4.8.6-300.fc25.x86_64
iw-4.1-2.fc24.x86_64

How reproducible:
Just browse or try to ping an external server

Steps to Reproduce:
1. Start system to MATE desktop and connect to access point(wpa2-psk)
2. In console:
$mtr google.com
not resolve name
$mtr 192.168.1.1
see paket loss over 90%
drop packet of interface: 0
3. Reboot to kernel-4.8.6-300.fc25.x86_64
In console:
$mtr google.com
resolv name ok
packet loss in range 5-10%
drop packet of interface: 0
4. other device have &lt; 0.5% packet loss

Actual results: 
Unbearable

Expected results:
Good network activity</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10086396</commentid>
    <comment_count>1</comment_count>
    <who name="">icegloom</who>
    <bug_when>2017-01-21 21:11:37 -0500</bug_when>
    <thetext>temporary solve

lenovo t420 pci-e rtl8188ce fedora 25 

$ lspci |grep RTL
03:00.0 Network controller: Realtek Semiconductor Co., Ltd. RTL8188CE 802.11b/g/n WiFi Adapter (rev 01)
$ uname -a
Linux tp.urandom 4.9.4-201.fc25.x86_64 #1 SMP Tue Jan 17 18:58:54 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux

$ cd ~
$ curl https://codeload.github.com/lwfinger/rtlwifi_new/tar.gz/master -o rtlwifi_new.tar.gz
$ tar -xzf rtlwifi_new.tar.gz
$ cd rtlwifi_new-master
$ make
$ xz -z -c rtl_pci.ko &gt;rtl_pci.ko.xz
$ xz -z -c rtlwifi.ko &gt;rtlwifi.ko.xz
$ cd rtl8192c
$ xz -z -c rtl8192c-common.ko &gt;rtl8192c-common.ko.xz
$ cd ../rtl8192ce
$ xz -z -c rtl8192ce.ko &gt;rtl8192ce.ko.xz
$ cd /lib/modules/4.9.4-201.fc25.x86_64/kernel/drivers/net/wireless/
$ sudo mv realtek _realtek_
$ sudo mkdir -p realtek/rtl8192c
$ sudo mkdir -p realtek/rtl8192ce
$ sudo cp ~/rtlwifi_new-master/*.ko.xz ./realtek/
$ sudo cp ~/rtlwifi_new-master/rtl8192c/rtl8192c-common.ko.xz ./realtek/rtl8192c/
$ sudo cp ~/rtlwifi_new-master/rtl8192ce/rtl8192ce.ko.xz ./realtek/rtl8192ce/
$ sudo modprobe -r $(lsmod | grep ^rtl | awk &apos;{print $1}&apos; | xargs)
$ sudo modprobe rtl8192ce 
$ lsmod |grep ^rtl
rtl8192ce              61440  0
rtl_pci                32768  1 rtl8192ce
rtl8192c_common        53248  1 rtl8192ce
rtlwifi                98304  3 rtl_pci,rtl8192ce,rtl8192c_common

have good conecting wifi!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10086775</commentid>
    <comment_count>2</comment_count>
    <who name="Christian Dersch">lupinix</who>
    <bug_when>2017-01-22 06:54:04 -0500</bug_when>
    <thetext>Have the same issue here (ThinkPad X230 with Realtek Semiconductor Co., Ltd. RTL8188CE), I think this came with kernel 4.9.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10087388</commentid>
    <comment_count>3</comment_count>
    <who name="">icegloom</who>
    <bug_when>2017-01-22 20:37:36 -0500</bug_when>
    <thetext>https://codeload.github.com/lwfinger/rtlwifi_new/
this driver not working on boot system
need reload drivers kernel module
run in console
$sudo modprobe -r $(lsmod | grep ^rtl | awk &apos;{print $1}&apos; | xargs)
$sudo modprobe rtl8192ce
and connect to AP</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10088790</commentid>
    <comment_count>4</comment_count>
    <who name="Vic Ricker">vic</who>
    <bug_when>2017-01-23 09:13:24 -0500</bug_when>
    <thetext>I believe I have the same problem on Lenovo W520 with rtl8188ce. If I boot into the 4.8.16-300.fc25.x86_64 kernel, it works fine.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10089882</commentid>
    <comment_count>5</comment_count>
    <who name="">pjhavariotis</who>
    <bug_when>2017-01-23 14:24:57 -0500</bug_when>
    <thetext>I have the same problem on my desktop with RTL8192CE PCIe Wireless Network Adapter and latest kernel (4.9.4-201.fc25.x86_64).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10092968</commentid>
    <comment_count>6</comment_count>
    <who name="">pjhavariotis</who>
    <bug_when>2017-01-24 13:12:55 -0500</bug_when>
    <thetext>The problem still remains with the latest kernel (4.9.5-200.fc25.x86_64)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10093050</commentid>
    <comment_count>7</comment_count>
    <who name="">pjhavariotis</who>
    <bug_when>2017-01-24 13:37:09 -0500</bug_when>
    <thetext>I can confirm also that the problem is resolved with the latest 4.8 kernel (4.8.6-300.fc25.x86_64)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10096538</commentid>
    <comment_count>8</comment_count>
    <who name="Flo H.">emailtoflorian</who>
    <bug_when>2017-01-25 13:16:47 -0500</bug_when>
    <thetext>*** Bug 1416478 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10096564</commentid>
    <comment_count>9</comment_count>
    <who name="Flo H.">emailtoflorian</who>
    <bug_when>2017-01-25 13:24:16 -0500</bug_when>
    <thetext>I have the same problem running kernel-4.9.5-100.fc24.x86_64 for my rtl8188ce based WiFi card.

Had no problems with previous 4.8.x kernels</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10096912</commentid>
    <comment_count>10</comment_count>
    <who name="Colin Wu">geekwu</who>
    <bug_when>2017-01-25 15:34:36 -0500</bug_when>
    <thetext>The same problem exists for FC24. My hardware is a Lenovo Edge, same RTL chipset.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10097097</commentid>
    <comment_count>11</comment_count>
    <who name="Dmitry Stremkouski">mitroko</who>
    <bug_when>2017-01-25 16:56:26 -0500</bug_when>
    <thetext>I&apos;m suffering from this bug too.

Using fresh installed Fedora 25 x86_64 on Lenovo T420

[mitroko@Gerda ~]$ uname -a
Linux Gerda 4.9.5-200.fc25.x86_64 #1 SMP Fri Jan 20 12:24:16 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux

[mitroko@Gerda ~]$ lspci |grep -i wifi
03:00.0 Network controller: Realtek Semiconductor Co., Ltd. RTL8188CE 802.11b/g/n WiFi Adapter (rev 01)

[mitroko@Gerda ~]$ lsmod | egrep &apos;rtl|wifi&apos;
rtl8192ce              57344  0
rtl_pci                28672  1 rtl8192ce
rtl8192c_common        49152  1 rtl8192ce
rtlwifi                73728  3 rtl_pci,rtl8192ce,rtl8192c_common

wpa_supplicant disconnects every time or even cannot connect AP at all.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10097210</commentid>
    <comment_count>12</comment_count>
    <who name="Dmitry Stremkouski">mitroko</who>
    <bug_when>2017-01-25 17:57:34 -0500</bug_when>
    <thetext>Workarounded:
dnf install kernel-4.8.6-300.fc25 kernel-modules-extra-4.8.6-300.fc25.x86_64
No need to compile drivers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10103466</commentid>
    <comment_count>13</comment_count>
    <who name="Alexander Korsunsky">fat.lobyte9</who>
    <bug_when>2017-01-28 08:15:10 -0500</bug_when>
    <thetext>I have the same problem on Fedora 25, using a Lenovo x230 with a Realtek RTL8188CE WiFi chip.

Downgrading the Kernel to 4.8 also fixed my problems.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10104262</commentid>
    <comment_count>14</comment_count>
    <who name="">dluga93</who>
    <bug_when>2017-01-29 07:26:56 -0500</bug_when>
    <thetext>Possibly related:

The system also takes longer to shut down with kernel 4.9.4 or 4.9.5. The following message is displayed:

A stop job is running for firewalld - dynamic firewall daemon

With a second counter of about 3 minutes after it. This doesn&apos;t happen in 4.8.16.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10104264</commentid>
    <comment_count>15</comment_count>
    <who name="czbrooking">cjbrooking</who>
    <bug_when>2017-01-29 07:31:11 -0500</bug_when>
    <thetext>This may be a duplicate of 1391987:

https://bugzilla.redhat.com/show_bug.cgi?id=1391987</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10104683</commentid>
    <comment_count>16</comment_count>
    <who name="Trever Adams">trever</who>
    <bug_when>2017-01-29 19:12:02 -0500</bug_when>
    <thetext>I also have rtl8188ce using rtl8192ce driver. It worked fine with 4.8.x. It does not work with 4.9.x x&gt;=2 or 3 (I can&apos;t remember which I first used).

Ping will show this once the packet loss starts:

ping: sendmsg: No buffer space available

Other symptoms: tcpdump on the interface shows only outgoing packets once the problem starts. Of course, this leads to arp being incomplete, etc. (Manually setting the arp entry does not solve the problem.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10104917</commentid>
    <comment_count>17</comment_count>
    <who name="">sebastian</who>
    <bug_when>2017-01-30 00:04:38 -0500</bug_when>
    <thetext>I can second that this issue is fixed by updating the driver.
I used https://github.com/FreedomBen/rtl8188ce-linux-driver</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10106580</commentid>
    <comment_count>18</comment_count>
    <who name="">dluga93</who>
    <bug_when>2017-01-30 12:12:00 -0500</bug_when>
    <thetext>(In reply to sebastian from comment #17)
&gt; I can second that this issue is fixed by updating the driver.
&gt; I used https://github.com/FreedomBen/rtl8188ce-linux-driver

I just tried this, it works. Make sure to run it first on a kernel with a working internet connection so that it can download dependencies. Then restart and rerun on 4.9.5.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10116047</commentid>
    <comment_count>19</comment_count>
    <who name="Alexander Korsunsky">fat.lobyte9</who>
    <bug_when>2017-02-02 09:31:18 -0500</bug_when>
    <thetext>icegloom(In reply to icegloom from comment #1)
&gt; temporary solve
&gt;  
&gt; have good conecting wifi!

Did you mean to set the Needinfo flag for this bug? Because your comment does not contain a question.

I&apos;ll &quot;provide the requested information&quot; so it gets removed. If you actually needed more information from other people affected by this bug (in order to help you fix it), you can set it back.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10117083</commentid>
    <comment_count>20</comment_count>
    <who name="Dmitry Stremkouski">mitroko</who>
    <bug_when>2017-02-02 15:08:05 -0500</bug_when>
    <thetext>I have followed suggestion from this thread https://bugzilla.redhat.com/show_bug.cgi?id=1415468 and it makes sense.

Right now I&apos;m on the latest fedora 4.9 kernel
[mitroko@Gerda ~]$ uname -r
4.9.6-200.fc25.x86_64

with proper module options
[mitroko@Gerda ~]$ cat /etc/modprobe.d/rtl8192ce.conf 
# Disable powersaving
options rtl8192ce ips=0

# WARNING! Do not enable this shit.
#          It causes bugs.
options rtl8192ce fwlps=0

# Use software control instead
options rtl8192ce swlps=1


and wifi card works fine.

Also, one should set this thread duplicating bug 1415468 or vice versa.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10117983</commentid>
    <comment_count>21</comment_count>
    <who name="Flo H.">emailtoflorian</who>
    <bug_when>2017-02-02 23:43:23 -0500</bug_when>
    <thetext>That workaround works for me but for whatever reason WiFi is damn slow...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10118538</commentid>
    <comment_count>22</comment_count>
    <who name="Dmitry Stremkouski">mitroko</who>
    <bug_when>2017-02-03 04:39:54 -0500</bug_when>
    <thetext>Try to change crda domain and raise the power:
iw reg set BO
iwconfig wlp3s0 txpower 33</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10118684</commentid>
    <comment_count>23</comment_count>
    <who name="">dluga93</who>
    <bug_when>2017-02-03 05:47:36 -0500</bug_when>
    <thetext>(In reply to Flo H. from comment #21)
&gt; That workaround works for me but for whatever reason WiFi is damn slow...

Yes, the wifi is actually very slow for me as well. Though this only happens with my home wifi, with which 4.8.16 works fine.

(In reply to Dmitry Stremkouski from comment #22)
&gt; Try to change crda domain and raise the power:
&gt; iw reg set BO
&gt; iwconfig wlp3s0 txpower 33

It tells me B0 is not valid, and the txpower remains at 20 even though there&apos;s no error message after running the second command. It works if I try to set it lower, like 17, so there must be a limit on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10118989</commentid>
    <comment_count>24</comment_count>
    <who name="">sebastian</who>
    <bug_when>2017-02-03 07:31:19 -0500</bug_when>
    <thetext>(In reply to Dmitry Stremkouski from comment #22)
&gt; Try to change crda domain and raise the power:
&gt; iw reg set BO
&gt; iwconfig wlp3s0 txpower 33

Not only is that technically illegal, I fail to see how it is supposed to help. 
Also, even if your driver has support, it is not recommended to significantly increase transmit power without proper antennas, poor performance/damage may occour. 

(In reply to dluga93 from comment #18)
&gt; (In reply to sebastian from comment #17)
&gt; &gt; I can second that this issue is fixed by updating the driver.
&gt; &gt; I used https://github.com/FreedomBen/rtl8188ce-linux-driver
&gt; 
&gt; I just tried this, it works. Make sure to run it first on a kernel with a
&gt; working internet connection so that it can download dependencies. Then
&gt; restart and rerun on 4.9.5.

I just plugged it in</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10137938</commentid>
    <comment_count>25</comment_count>
    <who name="Alexander Korsunsky">fat.lobyte9</who>
    <bug_when>2017-02-10 07:59:50 -0500</bug_when>
    <thetext>Note that upgrading the Kernel to a pre-release version of 4.10 fixes the problem:

    dnf config-manager --add-repo=http://dl.fedoraproject.org/pub/alt/rawhide-kernel-nodebug/fedora-rawhide-kernel-nodebug.repo
    dnf update kernel</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10193470</commentid>
    <comment_count>26</comment_count>
    <who name="Dmitry Stremkouski">mitroko</who>
    <bug_when>2017-02-28 07:32:37 -0500</bug_when>
    <thetext>Confirmed:
rawhide kernel-4.11.0-0.rc0.git4.2.fc26.x86_64 fixes this issue.
Thank you for nice soultion, Alexander Korsunsky!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10193756</commentid>
    <comment_count>27</comment_count>
    <who name="Flo H.">emailtoflorian</who>
    <bug_when>2017-02-28 08:49:49 -0500</bug_when>
    <thetext>I am running Fedora 24 and I am looking to different solution than installing a rawhide-rc-kernel. Will this fix not be backported to the 4.9 series for Fedora 24 and Fedora 25?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10193790</commentid>
    <comment_count>28</comment_count>
    <who name="Flo H.">emailtoflorian</who>
    <bug_when>2017-02-28 08:58:14 -0500</bug_when>
    <thetext>Potential duplicate of https://bugzilla.redhat.com/show_bug.cgi?id=1391987</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10194204</commentid>
    <comment_count>29</comment_count>
    <who name="Laura Abbott">labbott</who>
    <bug_when>2017-02-28 10:18:08 -0500</bug_when>
    <thetext>I think this should be fixed in regular builds now. Please open a new bug if hte problem persists. Thanks for reporting and testing.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>