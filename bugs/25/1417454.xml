<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1417454</bug_id>
          
          <creation_ts>2017-01-29 09:48:00 -0500</creation_ts>
          <short_desc>Add driver jc42 to support temperature sensors on memory modules</short_desc>
          <delta_ts>2017-02-14 10:49:30 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>kernel</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>low</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Woi">woiling</reporter>
          <assigned_to name="Kernel Maintainer List">kernel-maint</assigned_to>
          <cc>gansalmon</cc>
    
    
    <cc>ichavero</cc>
    
    
    <cc>itamar</cc>
    
    
    <cc>jkastner</cc>
    
    
    <cc>jonathan</cc>
    
    
    <cc>kernel-maint</cc>
    
    
    <cc>labbott</cc>
    
    
    <cc>madhu.chinakonda</cc>
    
    
    <cc>mchehab</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>kernel-4.9.9-200.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-02-13 17:23:34</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10104344</commentid>
    <comment_count>0</comment_count>
    <who name="Woi">woiling</who>
    <bug_when>2017-01-29 09:48:28 -0500</bug_when>
    <thetext>Description of problem:
Temperature of RAM modules with a temperature sensor on it can not be read.

Version-Release number of selected component (if applicable):
kernel 4.9.5-200.fc25

How reproducible:
Get memory modules with a temperature sensor on it. In my case:
$ sudo dmidecode -t memory|grep -e Part -e Manufacturer |grep -v Empty
	Manufacturer: Micron
	Part Number: 18JSF1G72AZ-1G9E1 
	Manufacturer: Micron
	Part Number: 18JSF1G72AZ-1G9E1

Mainboard may matter as well:
$ sudo inxi -M
Machine:   Device: desktop System: ASUS product: All Series
           Mobo: ASUSTeK model: P9D WS v: Rev 1.xx serial: XXXXXXXXX
           BIOS: ASUSTeK (Licensed from AMI) v: 2202 date: 05/14/2015


Steps to Reproduce:
1. Install lm_sensors

2. run sensors-detect

3. Probe for &quot;Next adapter: SMBus I801 adapter at f000 (i2c-9)&quot;:
Do you want to scan it? (YES/no/selectively): YES
Client found at address 0x19
[...]
Probing for `Microchip MCP98243&apos;...                         Success!
    (confidence 5, driver `jc42&apos;)
[...]
Client found at address 0x1b
[...]
Probing for `Microchip MCP98243&apos;...                         Success!
    (confidence 5, driver `jc42&apos;)
[...]

4: See results:
Now follows a summary of the probes I have just done.
Just press ENTER to continue: 
[...]
Driver `jc42&apos;:
  * Bus `SMBus I801 adapter at f000&apos;
    Busdriver `i2c_i801&apos;, I2C address 0x19
    Chip `Microchip MCP98243&apos; (confidence: 5)
  * Bus `SMBus I801 adapter at f000&apos;
    Busdriver `i2c_i801&apos;, I2C address 0x1b
    Chip `Microchip MCP98243&apos; (confidence: 5)

5: Try to load module jc42:
$ sudo modprobe jc42

6: Prove fedora kernel has no jc42 enabled:
grep -i jc42 /boot/config-$(uname -r) 


Actual results:
For step 5: modprobe: FATAL: Module jc42 not found in directory /lib/modules/4.9.5-200.fc25.x86_64
For step 6: # CONFIG_SENSORS_JC42 is not set


Expected results:
For step 5: Module loads
For step 6: CONFIG_SENSORS_JC42=m

Additional info:
* Fedoras sensors-detect started to detect jc42 a few month a go.
* Datasheet for DIMMs: https://www.micron.com/parts/modules/ddr3-sdram/mt18jsf1g72az-1g9
* Driver documentation: https://www.kernel.org/doc/Documentation/hwmon/jc42
* Driver history: https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/log/drivers/hwmon/jc42.c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10114280</commentid>
    <comment_count>1</comment_count>
    <who name="Laura Abbott">labbott</who>
    <bug_when>2017-02-01 17:02:26 -0500</bug_when>
    <thetext>The option has been turned on in rawhide. Please test it there. If it works okay, we can evaluate turning it on for F25.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10114461</commentid>
    <comment_count>2</comment_count>
    <who name="Woi">woiling</who>
    <bug_when>2017-02-01 18:46:30 -0500</bug_when>
    <thetext>Thanks Laura.

I used the kernel from http://dl.fedoraproject.org/pub/alt/rawhide-kernel-nodebug/fedora-rawhide-kernel-nodebug.repo on my Fedora 25, but it looks like I was a bit to quick:

$ grep -i jc42 /boot/config-$(uname -r) 
# CONFIG_SENSORS_JC42 is not set

$uname -a
Linux phoenix.localdomain 4.10.0-0.rc6.git1.2.fc26.x86_64 #1 SMP Tue Jan 31 22:53:03 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux


I&apos;ll try again in a few days. However can you already explain when you consider it to &quot;work okay&quot; and what needs to be done to evaluate it for F25?
Is loading jc42 and reading temperatures sufficient? Do you want me to work with jc42 loaded for X days? Are there some test I should run?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10116296</commentid>
    <comment_count>3</comment_count>
    <who name="Laura Abbott">labbott</who>
    <bug_when>2017-02-02 10:28:43 -0500</bug_when>
    <thetext>yes, it should be in the git2 build which should come out either today or tomorrow depending on the release process. Loading and reading the temperatures should be fine, just enough to know it is actually working as you expect.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10121322</commentid>
    <comment_count>4</comment_count>
    <who name="Woi">woiling</who>
    <bug_when>2017-02-04 11:49:28 -0500</bug_when>
    <thetext>Works as expected. Temperatures have sane values between ~37°C at idle and ~50°C after a few minutes running prime95.

$ sensors|grep jc42 -A4
jc42-i2c-9-19
Adapter: SMBus I801 adapter at f000
temp1:        +37.0°C  (low  =  +0.0°C)                  ALARM (HIGH, CRIT)
                       (high =  +0.0°C, hyst =  +0.0°C)
                       (crit =  +0.0°C, hyst =  +0.0°C)
--
jc42-i2c-9-1b
Adapter: SMBus I801 adapter at f000
temp1:        +37.8°C  (low  =  +0.0°C)                  ALARM (HIGH, CRIT)
                       (high =  +0.0°C, hyst =  +0.0°C)
                       (crit =  +0.0°C, hyst =  +0.0°C)

$ uname -r
4.10.0-0.rc6.git2.2.fc26.x86_64

Could you please enable CONFIG_SENSORS_JC42 for regular f25 kernels, so I can install form bodhi or updates-testing to test it in everyday use?

Since you closed this ticket: Should I create a new ticket for it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10129432</commentid>
    <comment_count>5</comment_count>
    <who name="Laura Abbott">labbott</who>
    <bug_when>2017-02-07 19:22:38 -0500</bug_when>
    <thetext>No need, I enabled the option on F25. Won&apos;t make 4.9.8 but should be in 4.9.9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10136411</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-02-09 18:46:26 -0500</bug_when>
    <thetext>kernel-4.9.9-200.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-fb89ca752a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10138755</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-02-10 11:23:32 -0500</bug_when>
    <thetext>kernel-4.9.9-200.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-fb89ca752a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10138845</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-02-10 11:43:42 -0500</bug_when>
    <thetext>kernel-4.9.9-100.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2017-92d84f68cf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10139187</commentid>
    <comment_count>9</comment_count>
    <who name="Woi">woiling</who>
    <bug_when>2017-02-10 14:10:56 -0500</bug_when>
    <thetext>That was quicker than expected. Work&apos;s as expected, I provided Karma on bodhi accordingly.
Thanks a lot and have a nice weekend</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10140213</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-02-11 11:48:07 -0500</bug_when>
    <thetext>kernel-4.9.9-100.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-92d84f68cf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10144534</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-02-13 17:23:34 -0500</bug_when>
    <thetext>kernel-4.9.9-200.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10144593</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-02-13 17:48:18 -0500</bug_when>
    <thetext>kernel-4.9.9-100.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10147069</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-02-14 10:49:30 -0500</bug_when>
    <thetext>kernel-4.9.9-200.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>