<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1430117</bug_id>
          
          <creation_ts>2017-03-07 17:22:00 -0500</creation_ts>
          <short_desc>repoquery should not show rpms from the local system</short_desc>
          <delta_ts>2017-03-13 10:58:59 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>dnf-plugins-core</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>NEXTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Dusty Mabe">dustymabe</reporter>
          <assigned_to>rpm-software-management</assigned_to>
          <cc>packaging-team-maint</cc>
    
    
    <cc>rpm-software-management</cc>
    
    
    <cc>vmukhame</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>dnf-2.0.0</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-13 10:58:26</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10218406</commentid>
    <comment_count>0</comment_count>
    <who name="Dusty Mabe">dustymabe</who>
    <bug_when>2017-03-07 17:22:39 -0500</bug_when>
    <thetext>Description of problem:

if I run dnf repoquery I get output from the rpms installed on my local system.

one example is I wanted to simply list out the rpms in the repo here: https://fedorapeople.org/groups/modularity/repos/base-runtime/26/

if I add that repo in /etc/yum.repos.d/ and then run `dnf repoquery --disablerepos=* --enablerepo=baseruntime -q` I end up with the rpms from the repo as well as the rpms from my local system in the output. 

We should not have the output from rpms from my local system in the output since  this is `repoquery`.  


to work around this I can tell dnf to use a different root that doesn&apos;t have an rpmdb in it:

dnf repoquery --installroot /tmp/foobar/ --disablerepo=* --enablerepo=baseruntime -q




Version-Release number of selected component (if applicable):

dnf-1.1.10-3.fc25.noarch
dnf-plugins-core-0.1.21-4.fc25.noarch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10218410</commentid>
    <comment_count>1</comment_count>
    <who name="Dusty Mabe">dustymabe</who>
    <bug_when>2017-03-07 17:25:07 -0500</bug_when>
    <thetext>with the move of repoquery into dnf from dnf-plugins-core I think this issue may have been fixed. I just ran it and I think it is fixed. Can someone confirm?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10233468</commentid>
    <comment_count>2</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2017-03-13 10:58:26 -0400</bug_when>
    <thetext>Yeah, fixed in DNF 2.0.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>