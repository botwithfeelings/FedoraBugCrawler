<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1342531</bug_id>
          
          <creation_ts>2016-06-03 08:31:00 -0400</creation_ts>
          <short_desc>fedpkg: Cannot auth to koji even with fresh credentials</short_desc>
          <delta_ts>2017-02-24 09:06:32 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>koji</component>
          <version>25</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>high</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="John D. Ramsdell">ramsdell</reporter>
          <assigned_to name="Mike McLean">mikem</assigned_to>
          <cc>bochecha</cc>
    
    
    <cc>dennis</cc>
    
    
    <cc>ilya.gradina</cc>
    
    
    <cc>lsedlar</cc>
    
    
    <cc>mikem</cc>
    
    
    <cc>pahan</cc>
    
    
    <cc>pbabinca</cc>
    
    
    <cc>pkovar</cc>
    
    
    <cc>puiterwijk</cc>
    
    
    <cc>redhat-bugzilla</cc>
    
    
    <cc>sergio</cc>
    
    
    <cc>s</cc>
    
    
    <cc>tmlcoch</cc>
    
    
    <cc>ttomecek</cc>
    
    
    <cc>zsvetlik</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-02-24 09:06:32</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9384748</commentid>
    <comment_count>0</comment_count>
    <who name="John D. Ramsdell">ramsdell</who>
    <bug_when>2016-06-03 08:31:40 -0400</bug_when>
    <thetext>Description of problem:

I am trying to update my datalog package to version 2.6 on rowhide using a fresh install of Fedora 23.  I have performed all of the required steps except &quot;fedpkg build&quot;.  Some of the previous steps require that I have the correct credentials to authenticate.  When I try to do the build, it stalls for quite a while and then fails saying  &quot;Could not execute build: Could not auth with koji. Login failed&quot;.  I tried regenerating my credentials and this is what happens:

$ fedora-packager-setup
Setting up Fedora packager environment
You need a client certificate from the Fedora Account System, lets get one now
FAS Username: ramsdell	
FAS Password: 
Saved: /home/ramsdell/.fedora-server-ca.cert
Linking: ~/.fedora-server-ca.cert to ~/.fedora-upload-ca.cert
$ fedpkg build
/usr/lib/python2.7/site-packages/pyrpkg/__init__.py:309: DeprecationWarning: BaseException.message has been deprecated as of Python 2.6
  for (_, _, ssl_reason) in error.message:
You might want to run fedora-packager-setup to regenerate SSL certificate. For more info see https://fedoraproject.org/wiki/Using_the_Koji_build_system#Fedora_Account_System_.28FAS2.29_Setup
Could not execute build: Could not auth with koji. Login failed: [(&apos;SSL routines&apos;, &apos;SSL_shutdown&apos;, &apos;shutdown while in init&apos;)]
$ 

Version-Release number of selected component (if applicable):


How reproducible:


Steps to Reproduce:
1.
2.
3.

Actual results:


Expected results:


Additional info:</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9388830</commentid>
    <comment_count>1</comment_count>
    <who name="Lubomír Sedlář">lsedlar</who>
    <bug_when>2016-06-06 02:25:15 -0400</bug_when>
    <thetext>Could you try running &quot;koji hello&quot; to see if you get the same error?

If that works, you could try submitting your build directly without using fedpkg.

koji build rawhide git://pkgs.fedoraproject.org/rpms/datalog?#$(git rev-parse HEAD)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9390241</commentid>
    <comment_count>2</comment_count>
    <who name="John D. Ramsdell">ramsdell</who>
    <bug_when>2016-06-06 09:21:07 -0400</bug_when>
    <thetext>&quot;koji hello&quot; fails too.  After consulting with others in my company, we believe this problem is due to our firewall and is not a problem with fedpkg.  Therefore I am closing this report.

John</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9449727</commentid>
    <comment_count>3</comment_count>
    <who name="Tomas Tomecek">ttomecek</who>
    <bug_when>2016-06-24 05:50:25 -0400</bug_when>
    <thetext>I&apos;m still hitting this:

autojump$ fedora-packager-setup
Setting up Fedora packager environment
Saved: /home/tt/.fedora-server-ca.cert
autojump$ fedpkg build
/usr/lib/python2.7/site-packages/pyrpkg/__init__.py:309: DeprecationWarning: BaseException.message has been deprecated as of Python 2.6
  for (_, _, ssl_reason) in error.message:
You might want to run fedora-packager-setup to regenerate SSL certificate. For more info see https://fedoraproject.org/wiki/Using_the_Koji_build_system#Fedora_Account_System_.28FAS2.29_Setup
Could not execute build: Could not auth with koji. Login failed: [(&apos;SSL routines&apos;, &apos;SSL_shutdown&apos;, &apos;shutdown while in init&apos;)]
autojump$ koji hello
Error: [(&apos;SSL routines&apos;, &apos;SSL_shutdown&apos;, &apos;shutdown while in init&apos;)]

fedpkg-1.23-2.fc25.noarch
koji-1.10.1-10.fc25.noarch
fedora-packager-0.5.10.7-2.fc25.noarch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9449807</commentid>
    <comment_count>4</comment_count>
    <who name="Lubomír Sedlář">lsedlar</who>
    <bug_when>2016-06-24 06:25:26 -0400</bug_when>
    <thetext>Given that koji hello fails as well, I think this issue is actually not in fedpkg.

Mike, do you have any suggestions for debugging this problem?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9450338</commentid>
    <comment_count>5</comment_count>
    <who name="Sergio Monteiro Basto">sergio</who>
    <bug_when>2016-06-24 08:18:32 -0400</bug_when>
    <thetext>with :
fedpkg-1.23-2.fc23.noarch
koji-1.10.1-8.fc23.noarch
fedora-packager-0.5.10.7-1.fc23.noarch


#koji hello
bonjour, sergiomb!                                                                                                                               

You are using the hub at http://koji.fedoraproject.org/kojihub
Authenticated via client certificate /home/sergio/.fedora.cert


#fedora-cert -v
Verifying Certificate
cert expires: 2016-10-10</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9450369</commentid>
    <comment_count>6</comment_count>
    <who name="Tomas Tomecek">ttomecek</who>
    <bug_when>2016-06-24 08:31:38 -0400</bug_when>
    <thetext>I agree, this certainly isn&apos;t a fedpkg issue.

```
$ fedora-cert -v
Verifying Certificate
cert expires: 2016-08-31
WARNING: Your cert appears in the revocation list.
(&apos;        &apos;, &apos;https://admin.fedoraproject.org/ca/crl.pem&apos;)
```

How do I fix this? Shall I ask someone from fedora infra?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9454115</commentid>
    <comment_count>7</comment_count>
    <who name="Dennis Gilmore">dennis</who>
    <bug_when>2016-06-27 02:37:54 -0400</bug_when>
    <thetext>Due to the ssl auth code in koji using a raw socket it does not work with proxy setups, you need to have direct network access, or change the code to allow a proxy to Work. reassigning to koji, but for now can you see if you can get direct network access to koji.fedoraproject.org?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9455120</commentid>
    <comment_count>8</comment_count>
    <who name="John D. Ramsdell">ramsdell</who>
    <bug_when>2016-06-27 08:17:17 -0400</bug_when>
    <thetext>I have already submitted the datalog package update by installing Fedora 23 on a machine that only uses a direct connection to the internet.  So this problem is about lack of support for our internal proxy.  The machine that I used for the direct connection is no long available, so testing the direct connection would require a reinstallation, so it&apos;s not easy for me to run the test you requested.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9455155</commentid>
    <comment_count>9</comment_count>
    <who name="Tomas Tomecek">ttomecek</who>
    <bug_when>2016-06-27 08:27:21 -0400</bug_when>
    <thetext>I wasn&apos;t using proxy, I was on vpn, does it make any difference?

I&apos;m trying now again, I&apos;m on our company&apos;s wifi and it still doesn&apos;t work, same error message (no proxy, no vpn).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9455172</commentid>
    <comment_count>10</comment_count>
    <who name="John D. Ramsdell">ramsdell</who>
    <bug_when>2016-06-27 08:32:40 -0400</bug_when>
    <thetext>Ok.  I&apos;m going to try to revive that laptop and do the actual test you requested.  There is a chance the disk has not been wiped yet.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9455191</commentid>
    <comment_count>11</comment_count>
    <who name="Tomas Tomecek">ttomecek</who>
    <bug_when>2016-06-27 08:39:18 -0400</bug_when>
    <thetext>So, tried with curl:

```
$ curl --cacert ~/.fedora-server-ca.cert -E ~/.fedora.cert -v https://koji.fedoraproject.org/kojihub
*   Trying 209.132.181.7...
* Connected to koji.fedoraproject.org (209.132.181.7) port 443 (#0)
* Initializing NSS with certpath: sql:/etc/pki/nssdb
*   CAfile: ~/.fedora-server-ca.cert
  CApath: none
* ALPN/NPN, server did not agree to a protocol
* SSL connection using TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
* Server certificate:
*       subject: E=buildsys@fedoraproject.org,CN=koji.fedoraproject.org,OU=Fedora Builders,O=Fedora Project,ST=North Carolina,C=US
*       start date: Apr 15 18:26:14 2014 GMT
*       expire date: Apr 12 18:26:14 2024 GMT
*       common name: koji.fedoraproject.org
*       issuer: E=admin@fedoraproject.org,CN=Fedora Project CA,OU=Fedora Project CA,O=Fedora Project,L=Raleigh,ST=North Carolina,C=US
&gt; GET /kojihub HTTP/1.1
&gt; Host: koji.fedoraproject.org
&gt; User-Agent: curl/7.49.1
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 405 Method Not Allowed
&lt; Date: Mon, 27 Jun 2016 12:34:17 GMT
&lt; Server: Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.1e-fips mod_auth_kerb/5.4 mod_wsgi/3.4 Python/2.7.5
&lt; Allow: POST
&lt; AppTime: D=288
&lt; AppServer: koji01.phx2.fedoraproject.org
&lt; Transfer-Encoding: chunked
&lt; Content-Type: text/plain; charset=UTF-8
&lt;
Method Not Allowed
* Connection #0 to host koji.fedoraproject.org left intact
This is an XML-RPC server. Only POST requests are accepted.%
```

To me this looks like it works just fine. So why does koji and `fedora-cert -v` think my client certificate is revoked?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9456093</commentid>
    <comment_count>12</comment_count>
    <who name="Dennis Gilmore">dennis</who>
    <bug_when>2016-06-27 12:07:39 -0400</bug_when>
    <thetext>you can only ever have one fedora cert, we revoke the old  ones when you get a new one.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9459015</commentid>
    <comment_count>13</comment_count>
    <who name="John D. Ramsdell">ramsdell</who>
    <bug_when>2016-06-28 08:34:24 -0400</bug_when>
    <thetext>We found the disk and I am now able to test using a direct connection.  I typed:

$ koji hello

It responded with some foreign language and my login name, said which hub I was using, and finally said I was authenticated with my .fedora.cert.

In summary, for me, I see this problem only when using a proxy.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9459194</commentid>
    <comment_count>14</comment_count>
    <who name="John D. Ramsdell">ramsdell</who>
    <bug_when>2016-06-28 09:03:05 -0400</bug_when>
    <thetext>I moved the certificates to a machine within our firewall and tried the test.  After a long wait, I received the following error message.

$ koji hello
 Error: [(&apos;SSL routines&apos;, &apos;SSL_shutdown&apos;, &apos;shutdown while in init&apos;)]
$</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9470988</commentid>
    <comment_count>15</comment_count>
    <who name="Dennis Gilmore">dennis</who>
    <bug_when>2016-07-01 01:17:07 -0400</bug_when>
    <thetext>Koji does not support using proxies with ssl certificate auth. You have to have direct connection.

As to the revoked certificate, If youget a new cert on a different machine your older cert gets revoked. Tomas your curl call is not authenticated and so will work just fine.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9471639</commentid>
    <comment_count>16</comment_count>
    <who name="Tomas Tomecek">ttomecek</who>
    <bug_when>2016-07-01 05:36:33 -0400</bug_when>
    <thetext>Dennis, it means that I should copy the certificate across all of my machines where I want to authenticate with koji? Or is there a better way?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9549573</commentid>
    <comment_count>17</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-07-26 00:45:39 -0400</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 25 development cycle.
Changing version to &apos;25&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9648022</commentid>
    <comment_count>18</comment_count>
    <who name="Tomas Mlcoch">tmlcoch</who>
    <bug_when>2016-08-25 03:11:14 -0400</bug_when>
    <thetext>Today, after &quot;yum update&quot; of augeas-libs, eog and firefox on F23 I saw this issue.

Once I rebooted the system the issue was gone.

$ fedpkg new-sources ~/git/librepo/librepo-1.7.20.tar.gz 
Uploading: /home/tmlcoch/git/librepo/librepo-1.7.20.tar.gz
Could not execute new_sources: (35, &apos;Encountered end of file&apos;)

$ koji hello
Error: [(&apos;SSL routines&apos;, &apos;SSL_shutdown&apos;, &apos;shutdown while in init&apos;)]

$ rpm -qv fedpkg koji fedora-packager
fedpkg-1.24-3.fc23.noarch
koji-1.10.1-24.2.fc23.noarch
fedora-packager-0.5.10.7-1.fc23.noarch

$ fedora-cert -v
Verifying Certificate
cert expires: 2017-01-15</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9719206</commentid>
    <comment_count>19</comment_count>
    <who name="Robert Scheck">redhat-bugzilla</who>
    <bug_when>2016-09-18 11:04:19 -0400</bug_when>
    <thetext>I had the same issue, updating to koji-1.10.1-12 helped for me - while I guess
this is somehow related to OpenSSL 1.0.2g/h and the following commit there:
https://github.com/openssl/openssl/commit/64193c8218540499984cd63cda41f3cd491f3f59</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9722926</commentid>
    <comment_count>20</comment_count>
    <who name="Mike McLean">mikem</who>
    <bug_when>2016-09-19 18:35:17 -0400</bug_when>
    <thetext>I&apos;ve never been able to replicate the shutdown while in init problem. The problem must originate in openssl, perhaps with the commit Robert linked to (thanks Robert!).

Does anyone have a clear replicator?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9722931</commentid>
    <comment_count>21</comment_count>
    <who name="Robert Scheck">redhat-bugzilla</who>
    <bug_when>2016-09-19 18:44:25 -0400</bug_when>
    <thetext>Not a clear reproducer, but these are my details: koji-1.9.0-5 together with
openssl-1.0.2h-1 was working for me on 2016-07-05, the same constellation was
no longer working at 2016-09-18 - until I updated to koji-1.10.1-12. Given my
whole VM did not get any update since 2016-06-12, this can&apos;t be client-only.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9723754</commentid>
    <comment_count>22</comment_count>
    <who name="Mike McLean">mikem</who>
    <bug_when>2016-09-19 23:10:13 -0400</bug_when>
    <thetext>koji-1.9.0-5 ???

That&apos;s a fairly new openssl and really old koji....

Which Fedora was this? (or was it epel)?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9881731</commentid>
    <comment_count>23</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-11-10 18:53:46 -0500</bug_when>
    <thetext>looks like I can reproduce this:

[brain@x1carbon libsolv]$ rpm -q koji openssl python2-pyOpenSSL
koji-1.10.1-13.fc26.noarch
openssl-1.1.0b-4.fc26.x86_64
python2-pyOpenSSL-16.2.0-1.fc26.noarch
[brain@x1carbon libsolv]$ fedora-cert -v
Verifying Certificate
cert expires: 2017-01-16
[brain@x1carbon libsolv]$ koji -d hello
Traceback (most recent call last):
  File &quot;/usr/bin/koji&quot;, line 7036, in &lt;module&gt;
    rv = locals()[command].__call__(options, session, args)
  File &quot;/usr/bin/koji&quot;, line 6811, in handle_moshimoshi
    activate_session(session)
  File &quot;/usr/bin/koji&quot;, line 6989, in activate_session
    session.ssl_login(options.cert, None, options.serverca, proxyuser=options.runas)
  File &quot;/usr/lib/python2.7/site-packages/koji/__init__.py&quot;, line 1929, in ssl_login
    sinfo = self.callMethod(&apos;sslLogin&apos;, proxyuser)
  File &quot;/usr/lib/python2.7/site-packages/koji/__init__.py&quot;, line 1979, in callMethod
    return self._callMethod(name, args, opts)
  File &quot;/usr/lib/python2.7/site-packages/koji/__init__.py&quot;, line 2124, in _callMethod
    self._close_connection()
  File &quot;/usr/lib/python2.7/site-packages/koji/__init__.py&quot;, line 2055, in _close_connection
    self._connection[1].close()
  File &quot;/usr/lib64/python2.7/httplib.py&quot;, line 848, in close
    sock.close()   # close it manually... there may be other refs
  File &quot;/usr/lib/python2.7/site-packages/koji/ssl/SSLConnection.py&quot;, line 82, in close
    self.shutdown()
  File &quot;/usr/lib/python2.7/site-packages/koji/ssl/SSLConnection.py&quot;, line 53, in shutdown
    self.__dict__[&quot;conn&quot;].shutdown()
  File &quot;/usr/lib/python2.7/site-packages/OpenSSL/SSL.py&quot;, line 1503, in shutdown
    self._raise_ssl_error(self._ssl, result)
  File &quot;/usr/lib/python2.7/site-packages/OpenSSL/SSL.py&quot;, line 1174, in _raise_ssl_error
    _raise_current_error()
  File &quot;/usr/lib/python2.7/site-packages/OpenSSL/_util.py&quot;, line 48, in exception_from_error_queue
    raise exception_type(errors)
OpenSSL.SSL.Error: [(&apos;SSL routines&apos;, &apos;SSL_shutdown&apos;, &apos;shutdown while in init&apos;)]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9881758</commentid>
    <comment_count>24</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-11-10 19:07:54 -0500</bug_when>
    <thetext>original backtrace is:
  File &quot;/usr/lib/python2.7/site-packages/koji/__init__.py&quot;, line 2099, in _callMethod
    return self._sendCall(handler, headers, request)
  File &quot;/usr/lib/python2.7/site-packages/koji/__init__.py&quot;, line 2010, in _sendCall
    return self._sendOneCall(handler, headers, request)
  File &quot;/usr/lib/python2.7/site-packages/koji/__init__.py&quot;, line 2030, in _sendOneCall
    response = cnx.getresponse()
  File &quot;/usr/lib64/python2.7/httplib.py&quot;, line 1136, in getresponse
    response.begin()
  File &quot;/usr/lib64/python2.7/httplib.py&quot;, line 453, in begin
    version, status, reason = self._read_status()
  File &quot;/usr/lib64/python2.7/httplib.py&quot;, line 409, in _read_status
    line = self.fp.readline(_MAXLINE + 1)
  File &quot;/usr/lib64/python2.7/socket.py&quot;, line 480, in readline
    data = self._sock.recv(self._rbufsize)
  File &quot;/usr/lib/python2.7/site-packages/koji/ssl/SSLConnection.py&quot;, line 140, in recv
    return con.recv(bufsize, flags)
  File &quot;/usr/lib/python2.7/site-packages/OpenSSL/SSL.py&quot;, line 1304, in recv
    self._raise_ssl_error(self._ssl, result)
  File &quot;/usr/lib/python2.7/site-packages/OpenSSL/SSL.py&quot;, line 1174, in _raise_ssl_error
    _raise_current_error()
  File &quot;/usr/lib/python2.7/site-packages/OpenSSL/_util.py&quot;, line 48, in exception_from_error_queue
    raise exception_type(errors)
Error: [(&apos;SSL routines&apos;, &apos;ssl3_read_bytes&apos;, &apos;sslv3 alert unexpected message&apos;)]


Actually koji.fp.o:443 doesn&apos;t support SSLv3, but looks like koji client tries to use SSLv3....</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9885233</commentid>
    <comment_count>25</comment_count>
    <who name="Patrick Uiterwijk">puiterwijk</who>
    <bug_when>2016-11-12 09:38:32 -0500</bug_when>
    <thetext>The SSLv3 report is because the same message structure is used in TLS and SSL for the &quot;alert&quot; message.

This latest occurrence is a result of some breakage in OpenSSL 1.1, and is tracked as bug #1393579.


Unfortunately, Koji is hiding the internal SSL error because it tries to close the SSL socket, even if it never managed to connect (reconnect) fully.
So perhaps it would be an idea to let the original error trickle up, as that would make it a lot easier to debug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10022039</commentid>
    <comment_count>26</comment_count>
    <who name="Pavel Alexeev">pahan</who>
    <bug_when>2016-12-27 12:59:15 -0500</bug_when>
    <thetext>I have similar problem. Koji works with kerberros, but fedpkg not (do it by https://lists.fedoraproject.org/archives/list/devel@lists.fedoraproject.org/thread/JK267PSDD53I2KGONDLFA5D4JWYXKZTQ/):

$ kinit -V hubbitus@FEDORAPROJECT.ORG
Using existing cache: persistent:1000:1000
Using principal: hubbitus@FEDORAPROJECT.ORG
Password for hubbitus@FEDORAPROJECT.ORG: 
Authenticated to Kerberos v5
[pasha@hubbitus master]$ koji hello
ciao, hubbitus!

You are using the hub at https://koji.fedoraproject.org/kojihub
Authenticated via GSSAPI
[pasha@hubbitus master]$ fedpkg -v build
Creating repo object from /home/pasha/SOFT/FEDORA/_my/qutim/master
Initiating a koji session to https://koji.fedoraproject.org/kojihub
Logging into https://koji.fedoraproject.org/kojihub with Kerberos authentication.
Kerberos authentication is used, but you do not have a valid credential.
Please use kinit to get credential with a principal that has realm 
Could not execute build: Could not login to https://koji.fedoraproject.org/kojihub
Traceback (most recent call last):
  File &quot;/usr/bin/fedpkg&quot;, line 16, in &lt;module&gt;
    main()
  File &quot;/usr/lib/python2.7/site-packages/fedpkg/__main__.py&quot;, line 77, in main
    sys.exit(client.args.command())
  File &quot;/usr/lib/python2.7/site-packages/pyrpkg/cli.py&quot;, line 994, in build
    sets, nvr_check)
  File &quot;/usr/lib/python2.7/site-packages/pyrpkg/__init__.py&quot;, line 1869, in build
    build_target = self.kojisession.getBuildTarget(self.target)
  File &quot;/usr/lib/python2.7/site-packages/pyrpkg/__init__.py&quot;, line 217, in kojisession
    self.load_kojisession()
  File &quot;/usr/lib/python2.7/site-packages/fedpkg/__init__.py&quot;, line 318, in load_kojisession
    return super(Commands, self).load_kojisession(anon)
  File &quot;/usr/lib/python2.7/site-packages/pyrpkg/__init__.py&quot;, line 394, in load_kojisession
    self.login_koji_session(koji_config, self._kojisession)
  File &quot;/usr/lib/python2.7/site-packages/pyrpkg/__init__.py&quot;, line 364, in login_koji_session
    raise rpkgError(&apos;Could not login to %s&apos; % koji_config[&apos;server&apos;])
pyrpkg.errors.rpkgError: Could not login to https://koji.fedoraproject.org/kojihub</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10088205</commentid>
    <comment_count>27</comment_count>
    <who name="Patrick Uiterwijk">puiterwijk</who>
    <bug_when>2017-01-23 05:53:24 -0500</bug_when>
    <thetext>Pavel, this latest issue should be fixed with fedpkg-1.26 or higher.

Since the original issue (koji with proxy) is now resolved due to our switch to Kerberos, I think this bug report can be closed.
What do you think, Mike?

For any issues authentication getting a Fedora Infrastructure kerberos ticket or for authenticating to koji.fedoraproject.org, the best place to request help with that would be submitting an issue at https://pagure.io/fedora-infrastructure/ .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10122284</commentid>
    <comment_count>28</comment_count>
    <who name="Sergio Monteiro Basto">sergio</who>
    <bug_when>2017-02-05 20:32:02 -0500</bug_when>
    <thetext>+1 for closing , koji authentication  is not the same already</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10181770</commentid>
    <comment_count>29</comment_count>
    <who name="Mike McLean">mikem</who>
    <bug_when>2017-02-24 09:06:32 -0500</bug_when>
    <thetext>ok, closing</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>