<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1420709</bug_id>
          
          <creation_ts>2017-02-09 06:04:00 -0500</creation_ts>
          <short_desc>Mate desktop redraw issues</short_desc>
          <delta_ts>2017-04-02 05:31:56 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>mate-desktop</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Yves L&apos;ECUYER">yves.lecuyer.linfedora</reporter>
          <assigned_to name="Wolfgang Ulbrich">fedora</assigned_to>
          <cc>fedora</cc>
    
    
    <cc>rdieter</cc>
    
    
    <cc>stefano</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>mate-desktop-1.16.2-1.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-28 21:31:55</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10133922</commentid>
    <comment_count>0</comment_count>
    <who name="Yves L&apos;ECUYER">yves.lecuyer.linfedora</who>
    <bug_when>2017-02-09 06:04:27 -0500</bug_when>
    <thetext>Description of problem:
=======================
Once Fedora 25 is installed with the spin Compiz + MATE, 
=&gt; either with migration from Fedora 24 (or 23)
=&gt; or in a fresh install 
Once loggued in Mate desktop, and compiz started,
  1) the desktop background disappear and became black
  2) when you move a windows, you have trailing shadow on desktop
  (illustrated as on github discussion: 
      https://github.com/compiz-reloaded/compiz/issues/40)
  3) When you rotate the desktop, even at the end of rotation, it remains    
     transparent , and we saw the skydome backgroud of compiz if skydome is 
     activated

On Fedora 25 , the extra display manager KDM has been installed, and chosen as the default display manager, so that switching from a desktop to an other is very easy, at the login step.

Besides  
mate-desktop-1.16.1-2.fc25.x86_64

are also installed :
PLASMA 5
# rpm -qa | grep plasma-desktop
plasma-desktop-5.8.5-1.fc25.x86_64
plasma-desktop-doc-5.8.5-1.fc25.noarch

RELEASE GTK3
# rpm -qa | sort | grep ^gtk3
gtk3-3.22.7-1.fc25.x86_64
gtk3-devel-3.22.7-1.fc25.x86_64
gtk3-devel-docs-3.22.7-1.fc25.x86_64
gtk3-immodule-xim-3.22.7-1.fc25.x86_64


Version-Release number of selected component (if applicable):
# rpm -qa | grep mate-desktop              
mate-desktop-libs-1.16.1-2.fc25.x86_64
mate-desktop-1.16.1-2.fc25.x86_64


How reproducible:
==================
case A) ALWAYS WITH MATE DESKTOP  AND COMPIZ ACTIVATED
case B) NEVER  WITH PLAMA DESKTOP AND COMPIZ ACTIVATED

Even if we start from runlevel 3 (no Display manager running)
once logged in ascii mode, and a graphic session started with
$ startx &amp;

if DESKTOP=&quot;MATE&quot; in /etc/sysconfig/desktop, I got the same case as A)
     trouble with MATE used with Compiz windows manager, 
     while is working fine with  Marco windows manager.

if DESKTOP=&quot;KDE&quot; in /etc/sysconfig/desktop, I got the same case as B)
    No redraw issue with PLASMA 5. The rotating cube is working normallly

!!!   So DONT SAY TO ME IT&apos;s A COMPIZ ISSUE  !!
IT IS A PROBLEM WITH MATE !!!

and consequently this is NOT a duplicate bug with 
https://bugzilla.redhat.com/show_bug.cgi?id=1409385
I&apos;m not using XFCE, neither Intel Video Card but a NVIDIA video cards.
And the problem is not related to Seamonkey as suggested in the title of this reported bugs

Steps to Reproduce:
===================
1.At login step with KDM display manager, if PLASMA is choosen and COMPIZ started the session is working perfectly

2.At login step with KDM display manager, if MATE is choosen and COMPIZ started the session is not practically usable
3.

Actual results:
MATE + COMPIZ with standard package at beginning of February 2017 is not usable

Expected results:
MATE + COMPIZ usable with the last update of MATE for Fedora 25

Additional info:
===============
I never had any of these issues with last update MATE + COMPIZ in Fedora 24.
I only see this issue in October 2016 when I migrate for the fisrt time a Fedora 24 installed machine in Fedora 25.
Of course I found the bug turn around: 
Instead of using Mate desktop management to have a backgroud, we go in Comiz management --&gt; Utilities  --&gt; Background
and the we choose background that normally is offered by Mate desktop management
THAT SAID IS SO SIMPLE ???
But when you are a newbie, and you have just installed Mate+Compiz SPIN, and even after a complete update it DOES NOT WORK , what he thinks about this SPIN !!!!!
+++++++++++++++++
NOW ACCORDINGLY TO https://github.com/mate-desktop/caja/pull/731
and the comment of &quot;raveit65&quot; : 
&quot;No need let the users wait 6 months for a fix which comes regular with mate-1.18 for f26.&quot;

WHAT DOES THIS MEAN ? I have by myself, take the mate-1.18 RPMS from fedora 26 (Fedora rawhide) developpement, to have finally, MATE working correctly ???
Does any one tried this ?
Currently in next 15 days I&apos;m overwhelmed by works, So I can tries this.
But after I&apos;ll make a tries with this solution</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10134355</commentid>
    <comment_count>1</comment_count>
    <who name="Wolfgang Ulbrich">fedora</who>
    <bug_when>2017-02-09 08:01:28 -0500</bug_when>
    <thetext>All is caused by a change by gtk3, see https://github.com/compiz-reloaded/compiz/issues/40
and report is already filled out here
https://bugzilla.gnome.org/show_bug.cgi?id=768415

And upstream is working on this , see
https://github.com/mate-desktop/mate-desktop/pull/249
https://github.com/mate-desktop/caja/pull/731
https://github.com/mate-desktop/mate-settings-daemon/pull/169
There are 1.16 branches at github with that rewrite of mate&apos;s bg handling too.
Unfortunately, fixes needs some work, currently we have a flickering with the desktop icons if you move with the mouse over it.
But i can give you a link to updated rpms for 1.16.
Believe me i will update fedora very fast if results are acceptable.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10134367</commentid>
    <comment_count>2</comment_count>
    <who name="Wolfgang Ulbrich">fedora</who>
    <bug_when>2017-02-09 08:04:01 -0500</bug_when>
    <thetext>This is the origin report at rhbz
https://bugzilla.redhat.com/show_bug.cgi?id=1383272</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10134377</commentid>
    <comment_count>3</comment_count>
    <who name="Wolfgang Ulbrich">fedora</who>
    <bug_when>2017-02-09 08:08:07 -0500</bug_when>
    <thetext>btw. my nick name is raveit65 ;)
But please read the complete PR :-)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10139894</commentid>
    <comment_count>4</comment_count>
    <who name="Yves L&apos;ECUYER">yves.lecuyer.linfedora</who>
    <bug_when>2017-02-11 06:05:58 -0500</bug_when>
    <thetext>(In reply to Wolfgang Ulbrich from comment #3)
&gt; btw. my nick name is raveit65 ;)
&gt; But please read the complete PR :-)

Ok I have read the complete progress of Patch Reporting on https://github.com/mate-desktop
So I&apos;ll follow with interest the developer work progress !!!

But YES, I&apos;m interested as you suggest in Comment 1, by a &quot;work in progress current stage&quot; of a mate-1.16*src.rpm
Thanks</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10140153</commentid>
    <comment_count>5</comment_count>
    <who name="Wolfgang Ulbrich">fedora</who>
    <bug_when>2017-02-11 10:28:27 -0500</bug_when>
    <thetext>Ok, here are the promised rpms/srpms.
https://dl.dropboxusercontent.com/u/49862637/Mate-desktop/Test/test.tar.xz</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10277886</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-26 23:21:01 -0400</bug_when>
    <thetext>caja-1.16.3-1.fc25, mate-desktop-1.16.2-1.fc25, mate-settings-daemon-1.16.2-1.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-75ddaab36c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10285426</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-28 21:31:55 -0400</bug_when>
    <thetext>caja-1.16.3-1.fc25, mate-desktop-1.16.2-1.fc25, mate-settings-daemon-1.16.2-1.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10297286</commentid>
    <comment_count>8</comment_count>
    <who name="Yves L&apos;ECUYER">yves.lecuyer.linfedora</who>
    <bug_when>2017-04-02 05:31:56 -0400</bug_when>
    <thetext> Just updated today, 2017 April 17, with current update:
# dnf update caja mate-desktop mate-settings-daemon

 caja                      x86_64      1.16.4-1.fc25         updates      1.4 M
 caja-extensions           x86_64      1.16.4-1.fc25         updates       35 k
 caja-schemas              x86_64      1.16.4-1.fc25         updates      2.0 M
 mate-desktop              x86_64      1.16.2-1.fc25         updates      109 k
 mate-desktop-libs         x86_64      1.16.2-1.fc25         updates      483 k
 mate-settings-daemon      x86_64      1.16.2-1.fc25         updates      566 k

All is working fine. 
Background can be managed normally by :
Popup menu on desktop backgroud --&gt; Change background

An no trailing shadow when moving windows.

On the other side when using option &quot;backgroung&quot; in fusion-icon setting manager, the option seems disabled ? (do not change background appearance any more ) 
Well, may be that has be done on purpose ?</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>