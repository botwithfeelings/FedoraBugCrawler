<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1398575</bug_id>
          
          <creation_ts>2016-11-25 05:39:00 -0500</creation_ts>
          <short_desc>FTBFS on s390x and ppc64</short_desc>
          <delta_ts>2017-03-08 10:48:23 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>golang-github-vishvananda-netlink</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>467765</blocked>
    
    
    <blocked>1071880</blocked>
    
    
    <blocked>1396472</blocked>
    
    
    <blocked>1404679</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Dan Horák">dan</reporter>
          <assigned_to name="Jan Chaloupka">jchaloup</assigned_to>
          <cc>fpokorny</cc>
    
    
    <cc>golang-updates</cc>
    
    
    <cc>hannsj_uhl</cc>
    
    
    <cc>jcajka</cc>
    
    
    <cc>jchaloup</cc>
    
    
    <cc>lsm5</cc>
    
    
    <cc>vbatts</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>golang-github-vishvananda-netlink-0-0.11.gite73bad4.fc24 golang-github-vishvananda-netlink-0-0.11.gite73bad4.fc25 golang-github-vishvananda-netlink-0-0.11.gite73bad4.el6</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-08 08:22:07</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9929345</commentid>
    <comment_count>0</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-11-25 05:39:20 -0500</bug_when>
    <thetext>golang-github-vishvananda-netlink fails to build on s390x and ppc64

s390x:
Executing(%check): /bin/sh -e /var/tmp/rpm-tmp.5n57PX
+ umask 022
+ cd /builddir/build/BUILD
+ cd netlink-1e2e08e8a2dcdacaae3f14ac44c5cfa31361f270
+ export GOPATH=/builddir/build/BUILDROOT/golang-github-vishvananda-netlink-0-0.8.git1e2e08e.fc25.s390x//usr/share/gocode:/usr/share/gocode
+ GOPATH=/builddir/build/BUILDROOT/golang-github-vishvananda-netlink-0-0.8.git1e2e08e.fc25.s390x//usr/share/gocode:/usr/share/gocode
+ gotest github.com/vishvananda/netlink/nl
+ go test github.com/vishvananda/netlink/nl
# github.com/vishvananda/netlink/nl
../../BUILDROOT/golang-github-vishvananda-netlink-0-0.8.git1e2e08e.fc25.s390x/usr/share/gocode/src/github.com/vishvananda/netlink/nl/nl_linux_test.go:34: msg.X__ifi_pad undefined (type *IfInfomsg has no field or method X__ifi_pad)
FAIL	github.com/vishvananda/netlink/nl [build failed]
error: Bad exit status from /var/tmp/rpm-tmp.5n57PX (%check)
RPM build errors:
    Bad exit status from /var/tmp/rpm-tmp.5n57PX (%check)
Child return code was: 1
EXCEPTION: [Error()]


ppc64:
Executing(%check): /bin/sh -e /var/tmp/rpm-tmp.NZ3Hn3
+ umask 022
+ cd /builddir/build/BUILD
+ cd netlink-1e2e08e8a2dcdacaae3f14ac44c5cfa31361f270
+ export GOPATH=/builddir/build/BUILDROOT/golang-github-vishvananda-netlink-0-0.8.git1e2e08e.fc25.ppc64//usr/share/gocode:/usr/share/gocode
+ GOPATH=/builddir/build/BUILDROOT/golang-github-vishvananda-netlink-0-0.8.git1e2e08e.fc25.ppc64//usr/share/gocode:/usr/share/gocode
+ gotest github.com/vishvananda/netlink/nl
+ go test github.com/vishvananda/netlink/nl
--- FAIL: TestXfrmAlgoDeserializeSerialize (0.00s)
panic: runtime error: slice bounds out of range [recovered]
	panic: runtime error: slice bounds out of range
goroutine 21 [running]:
panic(0x161980, 0xc42000a120)
	/usr/lib/golang/src/runtime/panic.go:500 +0x3a8
testing.tRunner.func1(0xc42008cd80)
	/usr/lib/golang/src/testing/testing.go:579 +0x184
panic(0x161980, 0xc42000a120)
	/usr/lib/golang/src/runtime/panic.go:458 +0x4cc
github.com/vishvananda/netlink/nl.deserializeXfrmAlgoSafe(0xc42001a0e0, 0x64, 0x64, 0x64)
	/builddir/build/BUILDROOT/golang-github-vishvananda-netlink-0-0.8.git1e2e08e.fc25.ppc64/usr/share/gocode/src/github.com/vishvananda/netlink/nl/xfrm_state_linux_test.go:125 +0x35c
github.com/vishvananda/netlink/nl.TestXfrmAlgoDeserializeSerialize(0xc42008cd80)
	/builddir/build/BUILDROOT/golang-github-vishvananda-netlink-0-0.8.git1e2e08e.fc25.ppc64/usr/share/gocode/src/github.com/vishvananda/netlink/nl/xfrm_state_linux_test.go:138 +0x120
testing.tRunner(0xc42008cd80, 0x19ac38)
	/usr/lib/golang/src/testing/testing.go:610 +0xd8
created by testing.(*T).Run
	/usr/lib/golang/src/testing/testing.go:646 +0x370
FAIL	github.com/vishvananda/netlink/nl	0.012s
error: Bad exit status from /var/tmp/rpm-tmp.NZ3Hn3 (%check)
RPM build errors:
    Bad exit status from /var/tmp/rpm-tmp.NZ3Hn3 (%check)
Child return code was: 1
EXCEPTION: [Error()]

Version-Release number of selected component (if applicable):
golang-github-vishvananda-netlink-0-0.8.git1e2e08e.fc25</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9929351</commentid>
    <comment_count>1</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-11-25 05:40:12 -0500</bug_when>
    <thetext>links to recent koji builds:
http://s390.koji.fedoraproject.org/koji/taskinfo?taskID=2411125
http://ppc.koji.fedoraproject.org/koji/taskinfo?taskID=3883506</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9929410</commentid>
    <comment_count>2</comment_count>
    <who name="Jakub Čajka">jcajka</who>
    <bug_when>2016-11-25 06:04:04 -0500</bug_when>
    <thetext>PPC fails seems to me as possible assumed endianity in tests(or elsewhere in code), but I just took really quick glanced on the code.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9984104</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-14 05:14:35 -0500</bug_when>
    <thetext>golang-github-vishvananda-netlink-0-0.10.gite73bad4.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-1091577904</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9984106</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-14 05:14:55 -0500</bug_when>
    <thetext>golang-github-vishvananda-netlink-0-0.10.gite73bad4.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-7721b4bc95</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9984168</commentid>
    <comment_count>5</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-12-14 05:32:40 -0500</bug_when>
    <thetext>Thanks for the update, unfortunately the s390x issue is still present in the latest package. Can&apos;t be a dependency lacking s390 support?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9984251</commentid>
    <comment_count>6</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-12-14 06:04:46 -0500</bug_when>
    <thetext>Executing(%check): /bin/sh -e /var/tmp/rpm-tmp.ukwE3x
+ umask 022
+ cd /home/sharkcz/golang-github-vishvananda-netlink
+ cd netlink-e73bad418fd727ed3a02830b1af1ad0283a1de6c
+ export GOPATH=/home/sharkcz/rpmbuild/BUILDROOT/golang-github-vishvananda-netlink-0-0.10.gite73bad4.fc26.s390x//usr/share/gocode:/usr/share/gocode
+ GOPATH=/home/sharkcz/rpmbuild/BUILDROOT/golang-github-vishvananda-netlink-0-0.10.gite73bad4.fc26.s390x//usr/share/gocode:/usr/share/gocode
+ gotest github.com/vishvananda/netlink/nl
+ go test github.com/vishvananda/netlink/nl
# github.com/vishvananda/netlink/nl
../../rpmbuild/BUILDROOT/golang-github-vishvananda-netlink-0-0.10.gite73bad4.fc26.s390x/usr/share/gocode/src/github.com/vishvananda/netlink/nl/nl_linux_test.go:34: msg.X__ifi_pad undefined (type *IfInfomsg has no field or method X__ifi_pad)
FAIL	github.com/vishvananda/netlink/nl [build failed]
error: Bad exit status from /var/tmp/rpm-tmp.ukwE3x (%check)


RPM build errors:
    Bad exit status from /var/tmp/rpm-tmp.ukwE3x (%check)
Could not execute local: Non zero exit</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9984296</commentid>
    <comment_count>7</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-12-14 06:23:12 -0500</bug_when>
    <thetext>Looks as a bug in https://golang.org/src/syscall/ztypes_linux_s390x.go

	type IfInfomsg struct {
		Family uint8
		_      uint8
		Type   uint16
		Index  int32
		Flags  uint32
		Change uint32
	}

while https://golang.org/src/syscall/ztypes_linux_ppc64.go contains

type IfInfomsg struct {
		Family     uint8
		X__ifi_pad uint8
		Type       uint16
		Index      int32
		Flags      uint32
		Change     uint32
	}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9984428</commentid>
    <comment_count>8</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-12-14 07:09:21 -0500</bug_when>
    <thetext>The corresponding kernel structure is defined in include/uapi/linux/rtnetlink.h as 

struct ifinfomsg {
        unsigned char   ifi_family;
        unsigned char   __ifi_pad;
        unsigned short  ifi_type;               /* ARPHRD_* */
        int             ifi_index;              /* Link index   */
        unsigned        ifi_flags;              /* IFF_* flags  */
        unsigned        ifi_change;             /* IFF_* change mask */
};</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9985981</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-14 10:24:58 -0500</bug_when>
    <thetext>golang-github-vishvananda-netlink-0-0.11.gite73bad4.el6 has been submitted as an update to Fedora EPEL 6. https://bodhi.fedoraproject.org/updates/FEDORA-EPEL-2016-fb0d06d7e7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9985985</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-14 10:25:17 -0500</bug_when>
    <thetext>golang-github-vishvananda-netlink-0-0.11.gite73bad4.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-a3d662dafd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9985990</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-14 10:25:29 -0500</bug_when>
    <thetext>golang-github-vishvananda-netlink-0-0.11.gite73bad4.el7 has been submitted as an update to Fedora EPEL 7. https://bodhi.fedoraproject.org/updates/FEDORA-EPEL-2016-ec8568474f</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9985994</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-14 10:25:47 -0500</bug_when>
    <thetext>golang-github-vishvananda-netlink-0-0.11.gite73bad4.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-22579f80fd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9988163</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-14 21:49:18 -0500</bug_when>
    <thetext>golang-github-vishvananda-netlink-0-0.11.gite73bad4.el6 has been pushed to the Fedora EPEL 6 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-EPEL-2016-fb0d06d7e7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9988176</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-14 21:50:09 -0500</bug_when>
    <thetext>golang-github-vishvananda-netlink-0-0.11.gite73bad4.el7 has been pushed to the Fedora EPEL 7 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-EPEL-2016-ec8568474f</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9988363</commentid>
    <comment_count>15</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-15 00:04:38 -0500</bug_when>
    <thetext>golang-github-vishvananda-netlink-0-0.11.gite73bad4.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-22579f80fd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9988413</commentid>
    <comment_count>16</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-15 00:08:16 -0500</bug_when>
    <thetext>golang-github-vishvananda-netlink-0-0.11.gite73bad4.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-a3d662dafd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10167943</commentid>
    <comment_count>17</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2017-02-20 11:58:18 -0500</bug_when>
    <thetext>https://github.com/vishvananda/netlink/commit/a1d6c19f199e20aba37d4322b5d7bf85dc14fae3 fixes the root cause of the s390x issue and will allow to drop the workaround from golang (or sys)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10221005</commentid>
    <comment_count>18</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-08 08:22:07 -0500</bug_when>
    <thetext>golang-github-vishvananda-netlink-0-0.11.gite73bad4.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10221181</commentid>
    <comment_count>19</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-08 08:51:39 -0500</bug_when>
    <thetext>golang-github-vishvananda-netlink-0-0.11.gite73bad4.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10221941</commentid>
    <comment_count>20</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-08 10:48:23 -0500</bug_when>
    <thetext>golang-github-vishvananda-netlink-0-0.11.gite73bad4.el6 has been pushed to the Fedora EPEL 6 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>