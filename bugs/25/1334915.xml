<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1334915</bug_id>
          
          <creation_ts>2016-05-10 15:13:00 -0400</creation_ts>
          <short_desc>Libreoffice Missing icons on dock and Alt+tab on Wayland</short_desc>
          <delta_ts>2017-03-31 10:47:18 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>libreoffice</component>
          <version>25</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>low</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1277927</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Gabriel">gfavaro</reporter>
          <assigned_to name="Caolan McNamara">caolanm</assigned_to>
          <cc>aflinta</cc>
    
    
    <cc>alexus_m</cc>
    
    
    <cc>bnrj.rudra</cc>
    
    
    <cc>brunovam</cc>
    
    
    <cc>caolanm</cc>
    
    
    <cc>cbm</cc>
    
    
    <cc>deerfieldtech</cc>
    
    
    <cc>dhgutteridge</cc>
    
    
    <cc>dtardon</cc>
    
    
    <cc>emmanuel.kowalski</cc>
    
    
    <cc>erack</cc>
    
    
    <cc>fran</cc>
    
    
    <cc>jan.public</cc>
    
    
    <cc>jcutter</cc>
    
    
    <cc>j.orti.alcaine</cc>
    
    
    <cc>juliux.pigface</cc>
    
    
    <cc>luis</cc>
    
    
    <cc>marcodriusso</cc>
    
    
    <cc>mjc</cc>
    
    
    <cc>mstahl</cc>
    
    
    <cc>nekohayo</cc>
    
    
    <cc>orionphoenix11</cc>
    
    
    <cc>redhat-bugzilla</cc>
    
    
    <cc>redhat.bugzilla</cc>
    
    
    <cc>sbergman</cc>
    
    
    <cc>trainer.mapring</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>libreoffice-5.2.6.2-5.fc25</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-29 21:21:03</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          <external_bugs name="GNOME Desktop">779143</external_bugs>
    
    
    
    <external_bugs name="Document Foundation">100158</external_bugs>
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9312247</commentid>
    <comment_count>0</comment_count>
    <who name="Gabriel">gfavaro</who>
    <bug_when>2016-05-10 15:13:32 -0400</bug_when>
    <thetext>Description of problem:


I&apos;m using gnome on wayland and the icons from Libreoffice (Writer, Calc, etc.)  are missing from dock and Alt+Tab. Its just a &quot;Missing icon&quot; with &quot;soffice&quot; as description.

I did a fresh install from fedora-alpha and dnf update since there.

&gt;rpm -qa | grep libreoffice 
libreoffice-graphicfilter-5.1.3.2-2.fc24.x86_64
libreoffice-emailmerge-5.1.3.2-2.fc24.x86_64
libreoffice-opensymbol-fonts-5.1.3.2-2.fc24.noarch
libreoffice-langpack-pt-BR-5.1.3.2-2.fc24.x86_64
libreoffice-ure-5.1.3.2-2.fc24.x86_64
libreoffice-writer-5.1.3.2-2.fc24.x86_64
libreoffice-filters-5.1.3.2-2.fc24.x86_64
libreoffice-gtk3-5.1.3.2-2.fc24.x86_64
libreoffice-pyuno-5.1.3.2-2.fc24.x86_64
libreoffice-pdfimport-5.1.3.2-2.fc24.x86_64
libreofficekit-5.1.3.2-2.fc24.x86_64
libreoffice-5.1.3.2-2.fc24.x86_64
libreoffice-calc-5.1.3.2-2.fc24.x86_64
libreoffice-draw-5.1.3.2-2.fc24.x86_64
libreoffice-xsltfilter-5.1.3.2-2.fc24.x86_64
libreoffice-x11-5.1.3.2-2.fc24.x86_64
libreoffice-math-5.1.3.2-2.fc24.x86_64
libreoffice-core-5.1.3.2-2.fc24.x86_64
libreoffice-ogltrans-5.1.3.2-2.fc24.x86_64
libreoffice-data-5.1.3.2-2.fc24.noarch
libreoffice-langpack-en-5.1.3.2-2.fc24.x86_64
libreoffice-base-5.1.3.2-2.fc24.x86_64
libreoffice-impress-5.1.3.2-2.fc24.x86_64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9315928</commentid>
    <comment_count>1</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2016-05-11 04:08:23 -0400</bug_when>
    <thetext>I think this is related to the hack we have under X where one window can change from being a writer window to the empty starter window to a calc window etc. There isn&apos;t an existing desktop-independent way to achieve that.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9913988</commentid>
    <comment_count>2</comment_count>
    <who name="Jeffrey Cutter">jcutter</who>
    <bug_when>2016-11-22 17:36:35 -0500</bug_when>
    <thetext>This is still broken on Fedora 25 GA released today.  The Document Foundation bug doesn&apos;t seem to have any activity.  Is there anything that can be done?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9931745</commentid>
    <comment_count>3</comment_count>
    <who name="Jan Vlug">jan.public</who>
    <bug_when>2016-11-27 04:10:38 -0500</bug_when>
    <thetext>After upgrading to Fedora 25 I have this issue as well. In Fedora 24 I still had the icon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9959494</commentid>
    <comment_count>4</comment_count>
    <who name="Sorawit Kongnurat">trainer.mapring</who>
    <bug_when>2016-12-06 05:55:04 -0500</bug_when>
    <thetext>I also have this issue. The icons return when using the xorg session.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9963729</commentid>
    <comment_count>5</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2016-12-07 04:12:12 -0500</bug_when>
    <thetext>*** Bug 1384678 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10008626</commentid>
    <comment_count>6</comment_count>
    <who name="David H. Gutteridge">dhgutteridge</who>
    <bug_when>2016-12-20 17:24:09 -0500</bug_when>
    <thetext>Another issue of this kind is that LibreOffice icons aren&apos;t retained in the frequently used applications list under Gnome. I imagine this is related to the rest. (Hardly a critical issue for me, just another detail.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10037206</commentid>
    <comment_count>7</comment_count>
    <who name="Marco Driusso">marcodriusso</who>
    <bug_when>2017-01-05 08:03:08 -0500</bug_when>
    <thetext>Same issue here.

$ rpm -qa | grep libreoffice
libreoffice-graphicfilter-5.2.3.3-11.fc25.x86_64
libreoffice-core-5.2.3.3-11.fc25.x86_64
libreoffice-calc-5.2.3.3-11.fc25.x86_64
libreoffice-xsltfilter-5.2.3.3-11.fc25.x86_64
libreoffice-ure-common-5.2.3.3-11.fc25.noarch
libreoffice-draw-5.2.3.3-11.fc25.x86_64
libreoffice-gtk3-5.2.3.3-11.fc25.x86_64
libreoffice-pyuno-5.2.3.3-11.fc25.x86_64
libreoffice-x11-5.2.3.3-11.fc25.x86_64
libreoffice-ogltrans-5.2.3.3-11.fc25.x86_64
libreoffice-ure-5.2.3.3-11.fc25.x86_64
libreoffice-gtk2-5.2.3.3-11.fc25.x86_64
libreoffice-pdfimport-5.2.3.3-11.fc25.x86_64
libreoffice-langpack-en-5.2.3.3-11.fc25.x86_64
libreoffice-math-5.2.3.3-11.fc25.x86_64
libreoffice-writer2latex-1.0.2-19.fc24.x86_64
libreoffice-emailmerge-5.2.3.3-11.fc25.x86_64
libreoffice-opensymbol-fonts-5.2.3.3-11.fc25.noarch
libreoffice-writer-5.2.3.3-11.fc25.x86_64
libreoffice-filters-5.2.3.3-11.fc25.x86_64
libreoffice-data-5.2.3.3-11.fc25.noarch
libreoffice-impress-5.2.3.3-11.fc25.x86_64

$ rpm -qa | grep wayland
libwayland-server-1.12.0-1.fc25.i686
xorg-x11-server-Xwayland-1.19.0-2.fc25.x86_64
libwayland-client-1.12.0-1.fc25.x86_64
libwayland-client-1.12.0-1.fc25.i686
ibus-wayland-1.5.14-3.fc25.x86_64
libwayland-server-1.12.0-1.fc25.x86_64
gnome-session-wayland-session-3.22.2-1.fc25.x86_64
libwayland-cursor-1.12.0-1.fc25.x86_64
mesa-libwayland-egl-13.0.2-2.fc25.x86_64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10049807</commentid>
    <comment_count>8</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2017-01-10 10:48:00 -0500</bug_when>
    <thetext>*** Bug 1408483 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10064149</commentid>
    <comment_count>9</comment_count>
    <who name="RudraB">bnrj.rudra</who>
    <bug_when>2017-01-15 07:08:37 -0500</bug_when>
    <thetext>Okular is also having same problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10068938</commentid>
    <comment_count>10</comment_count>
    <who name="David H. Gutteridge">dhgutteridge</who>
    <bug_when>2017-01-16 22:00:25 -0500</bug_when>
    <thetext>(In reply to RudraB from comment #9)
&gt; Okular is also having same problem.

That should be a separate bug report, I think. I see Okular also doesn&apos;t appear under &quot;frequently used applications&quot; in Wayland, but the original issues noted in this bug report don&apos;t apply.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10085735</commentid>
    <comment_count>11</comment_count>
    <who name="Mechanizoid">orionphoenix11</who>
    <bug_when>2017-01-21 03:52:20 -0500</bug_when>
    <thetext>I am experiencing this same bug under Wayland in Fedora 25. Also, Libreoffice icons aren&apos;t retained in Gnome&apos;s frequently used applications as David H. Gutteridge described.

I&apos;ve logged into an Xorg session, and the icons appear in the Dock and alt-tab as normal. Also, Libreoffice icons appear in the frequently used applications again.

$ uname -sr
Linux 4.9.4-201.fc25.x86_64

$ rpm -qa | grep libreoffice
libreoffice-langpack-en-5.2.4.2-3.fc25.x86_64
libreoffice-writer-5.2.4.2-3.fc25.x86_64
libreoffice-opensymbol-fonts-5.2.4.2-3.fc25.noarch
libreoffice-pdfimport-5.2.4.2-3.fc25.x86_64
libreoffice-xsltfilter-5.2.4.2-3.fc25.x86_64
libreoffice-data-5.2.4.2-3.fc25.noarch
libreoffice-ure-common-5.2.4.2-3.fc25.noarch
libreoffice-graphicfilter-5.2.4.2-3.fc25.x86_64
libreoffice-filters-5.2.4.2-3.fc25.x86_64
libreoffice-core-5.2.4.2-3.fc25.x86_64
libreoffice-calc-5.2.4.2-3.fc25.x86_64
libreofficekit-5.2.4.2-3.fc25.x86_64
libreoffice-impress-5.2.4.2-3.fc25.x86_64
libreoffice-x11-5.2.4.2-3.fc25.x86_64
libreoffice-ure-5.2.4.2-3.fc25.x86_64
libreoffice-draw-5.2.4.2-3.fc25.x86_64
libreoffice-emailmerge-5.2.4.2-3.fc25.x86_64
libreoffice-math-5.2.4.2-3.fc25.x86_64
libreoffice-gtk2-5.2.4.2-3.fc25.x86_64
libreoffice-gtk3-5.2.4.2-3.fc25.x86_64
libreoffice-ogltrans-5.2.4.2-3.fc25.x86_64
libreoffice-pyuno-5.2.4.2-3.fc25.x86_64

$ rpm -qa | grep wayland
ibus-wayland-1.5.14-5.fc25.x86_64
gnome-session-wayland-session-3.22.2-3.fc25.x86_64
mesa-libwayland-egl-13.0.3-1.fc25.x86_64
libwayland-server-1.12.0-1.fc25.x86_64
libwayland-client-1.12.0-1.fc25.x86_64
xorg-x11-server-Xwayland-1.19.1-2.fc25.x86_64
libwayland-cursor-1.12.0-1.fc25.x86_64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10102944</commentid>
    <comment_count>12</comment_count>
    <who name="Tim Hodson">redhat.bugzilla</who>
    <bug_when>2017-01-27 18:37:20 -0500</bug_when>
    <thetext>I followed some advice elsewhere to do with getting LibreOffice looking good under Wayland on F25 with a HiDPI display. In the /usr/share/applications/libreoffice-*.desktop files I changed the Exec line to set an environment variable to use gtk rather than gtk3 (env SAL_USE_VCLPLUGIN=gtk). For instance: 

Exec=env SAL_USE_VCLPLUGIN=gtk libreoffice --calc %U. 

This did help with scaling, but also brought the icons back in Gnome when alt-tabbing, thus grouping windows together. It has also allowed LibreOffice to get back into the frequently used application list. This works without having to log into an XOrg session. 

$ uname -sr
Linux 4.9.5-200.fc25.x86_64

LibreOffice and Wayland versions appear to be as above. I&apos;m just adding this as it might help someone to track down the cause, as it is working in Wayland (or at least Xwayland) but not gtk3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10111177</commentid>
    <comment_count>13</comment_count>
    <who name="Gabriel">gfavaro</who>
    <bug_when>2017-01-31 20:15:39 -0500</bug_when>
    <thetext>(In reply to Tim Hodson from comment #12)
&gt; I followed some advice elsewhere to do with getting LibreOffice looking good
&gt; under Wayland on F25 with a HiDPI display. In the
&gt; /usr/share/applications/libreoffice-*.desktop files I changed the Exec line
&gt; to set an environment variable to use gtk rather than gtk3 (env
&gt; SAL_USE_VCLPLUGIN=gtk). For instance: 
&gt; 
&gt; Exec=env SAL_USE_VCLPLUGIN=gtk libreoffice --calc %U. 
&gt; 
&gt; This did help with scaling, but also brought the icons back in Gnome when
&gt; alt-tabbing, thus grouping windows together. It has also allowed LibreOffice
&gt; to get back into the frequently used application list. This works without
&gt; having to log into an XOrg session. 
&gt; 
&gt; $ uname -sr
&gt; Linux 4.9.5-200.fc25.x86_64
&gt; 
&gt; LibreOffice and Wayland versions appear to be as above. I&apos;m just adding this
&gt; as it might help someone to track down the cause, as it is working in
&gt; Wayland (or at least Xwayland) but not gtk3.

This really works!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10116815</commentid>
    <comment_count>14</comment_count>
    <who name="Luis Villa">luis</who>
    <bug_when>2017-02-02 13:18:24 -0500</bug_when>
    <thetext>For anyone who uses Writer a lot (I currently have about a half-dozen Writer windows open) this is super-irritating (and of course an irritating regression from F24). I&apos;d suggest &quot;medium&quot; is a more accurate priority than low.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10117164</commentid>
    <comment_count>15</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2017-02-02 15:41:14 -0500</bug_when>
    <thetext>regression in meaningless in the sense that it has never property worked under wayland because we reuse the same window when switching from start center to random application to start center again.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10125496</commentid>
    <comment_count>16</comment_count>
    <who name="Luis Villa">luis</who>
    <bug_when>2017-02-06 18:11:00 -0500</bug_when>
    <thetext>From a user perspective, it worked in a reasonably stock F24 install and doesn&apos;t work in a reasonably stock F25 install. So I&apos;m pretty comfortable calling it a regression.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10223465</commentid>
    <comment_count>17</comment_count>
    <who name="Bruno Machado">brunovam</who>
    <bug_when>2017-03-08 22:44:23 -0500</bug_when>
    <thetext>Same problem here</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10223467</commentid>
    <comment_count>18</comment_count>
    <who name="Bruno Machado">brunovam</who>
    <bug_when>2017-03-08 22:45:21 -0500</bug_when>
    <thetext>(In reply to Bruno Machado from comment #17)
&gt; Same problem here

I&apos;m running a Fedora 25</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10264728</commentid>
    <comment_count>19</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2017-03-22 08:24:10 -0400</bug_when>
    <thetext>*** Bug 1434530 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10270164</commentid>
    <comment_count>20</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2017-03-23 10:32:50 -0400</bug_when>
    <thetext>Looks like I&apos;m not going to get an api in gtk in any reasonably short term that would allow us to change windows applications ids to make this work the way it does under X, so I&apos;ll just try and bodge things to set a uniform fallback to the startcenter so at least there&apos;s some reasonable icon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10282304</commentid>
    <comment_count>21</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-28 04:23:09 -0400</bug_when>
    <thetext>libreoffice-5.2.6.2-5.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-36bc8a20e4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10284113</commentid>
    <comment_count>22</comment_count>
    <who name="David H. Gutteridge">dhgutteridge</who>
    <bug_when>2017-03-28 11:52:03 -0400</bug_when>
    <thetext>libreoffice-5.2.6.2-5.fc25 is a definite improvement, thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10285769</commentid>
    <comment_count>23</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-29 00:23:28 -0400</bug_when>
    <thetext>libreoffice-5.2.6.2-5.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-36bc8a20e4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10288881</commentid>
    <comment_count>24</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-29 21:21:03 -0400</bug_when>
    <thetext>libreoffice-5.2.6.2-5.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10293457</commentid>
    <comment_count>25</comment_count>
    <who name="Alexander Mayorov">alexus_m</who>
    <bug_when>2017-03-31 04:33:31 -0400</bug_when>
    <thetext>What is a reason to close the ticket?
I think the delivered solution is more like a workaround but could not be a final resolution because the original behavior (observed in X session) is not restored yet.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10294198</commentid>
    <comment_count>26</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2017-03-31 08:41:31 -0400</bug_when>
    <thetext>Its not possible with the apis gtk3 gives me to do it, there&apos;s a patch submitted upstream to gtk to support it without much interest in the problem. Reopening here will just lead to closed upstream,  I have to pick battles I can win.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10294437</commentid>
    <comment_count>27</comment_count>
    <who name="Jean-FranÃ§ois Fortin Tam">nekohayo</who>
    <bug_when>2017-03-31 09:50:46 -0400</bug_when>
    <thetext>Just out of curiosity, it would be good to link to the upstream GTK bug report (maybe in the &quot;URL&quot; field above?)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10294655</commentid>
    <comment_count>28</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2017-03-31 10:47:18 -0400</bug_when>
    <thetext>Its there as https://bugzilla.gnome.org/show_bug.cgi?id=779143 in &quot;External Trackers&quot;</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>