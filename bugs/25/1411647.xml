<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1411647</bug_id>
          
          <creation_ts>2017-01-10 03:28:00 -0500</creation_ts>
          <short_desc>Gui of many apps using Hardware acceleration suddenly freeze</short_desc>
          <delta_ts>2017-02-28 04:50:05 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>xorg-x11-drv-ati</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Davide Repetto">red</reporter>
          <assigned_to name="X/OpenGL Maintenance List">xgl-maint</assigned_to>
          <cc>xgl-maint</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-02-28 04:50:05</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10048201</commentid>
    <comment_count>0</comment_count>
    <who name="Davide Repetto">red</who>
    <bug_when>2017-01-10 03:28:57 -0500</bug_when>
    <thetext>Description of problem:
=======================
The gui of apps which are using Hardware acceleration will suddenly freeze after a few seconds (or minutes) of usage, they will stop updating their content and stop responding to both mouse input and to the close button. Though most will still respond gracefully to a SIGHUP.

If the app is a media player the audio will carry on even though the video is frozen.

Apps that are hit by this are those which use some form of video acceleration or compositing. For examples those which use webkit with HW compositing enabled (even older versions of evolution where affected), most video players, Virtualbox, Steam, web browsers, many games etc. etc. 

All of the aforementioned problems will disappear when things are forced to run without hardware acceleration or when xorg-\* is replaced with the one from fc24.
In fact right now I&apos;m using the following as a workaround:
dnf --releasever 24 downgrade xorg-x11-drv-ati --allowerasing

This problem will present itself on most (if not all) machines with [AMD/ATI] RS780L [Radeon 3000]

Version-Release number of selected component (if applicable):
=============================================================
xorg-x11-drv-ati-7.7.1-1.20160928git3fc839ff.fc25.x86_64

On the other hand one version that works for me is:
xorg-x11-drv-ati-7.6.1-3.20160215gitd41fccc.fc24.x86_64

How reproducible:
=================
Consistently, with the right hardware.

Steps to Reproduce:
===================
Please Note that I&apos;m using MATE as a Desktop

1. Disable marco&apos;s software compositing / Disable Compiz
2. Run one of the named apps (I use MPV to test, because it usually freezes within the first minute or two)
3. Observe the freeze


Additional info:
===============
I also verified that the problem is reproducible on fedora 24 too, if you implant the xorg-x11 from fedora 25 as in:
dnf --releasever 25 upgrade xorg-x11\* --allowerasing


=============
The following is the config of a machine where I&apos;m experiencing the problem: 

System:    Host: dave.idp.it Kernel: 4.8.15-300.fc25.x86_64 x86_64 (64 bit gcc: 6.3.1)
           Desktop: MATE 1.16.1  info: mate-panel dm: lightdm Distro: Fedora release 25 (Twenty Five)
Machine:   Device: desktop Mobo: ASUSTeK model: M5A78L-M/USB3 v: Rev X.0x serial: 130511331400634
           BIOS: American Megatrends v: 2101 date: 12/02/2014
CPU:       Dual core AMD Athlon II X2 250 (-MCP-) cache: 2048 KB
           flags: (lm nx sse sse2 sse3 sse4a svm) bmips: 12054
           clock speeds: min/max: 800/3000 MHz 1: 1800 MHz 2: 1800 MHz
Graphics:  Card: Advanced Micro Devices [AMD/ATI] RS780L [Radeon 3000] bus-ID: 01:05.0 chip-ID: 1002:9616
           Display Server: X.org 1.18.4 drivers: ati,radeon (unloaded: modesetting,fbdev,vesa)
           tty size: 134x12 Advanced Data: N/A for root
Audio:     Card-1 Advanced Micro Devices [AMD/ATI] RS780 HDMI Audio [Radeon 3000/3100 / HD 3200/3300]
           driver: snd_hda_intel bus-ID: 01:05.1 chip-ID: 1002:960f
           Card-2 Advanced Micro Devices [AMD/ATI] SBx00 Azalia (Intel HDA)
           driver: snd_hda_intel bus-ID: 00:14.2 chip-ID: 1002:4383
           Card-3 C-Media Audio Adapter (Planet UP-100 Genius G-Talk)
           driver: USB Audio usb-ID: 001-003 chip-ID: 0d8c:000e
           Sound: Advanced Linux Sound Architecture v: k4.8.15-300.red.fc25.x86_64
Network:   Card: Realtek RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller
           driver: r8169 v: 2.3LK-NAPI port: d800 bus-ID: 04:00.0 chip-ID: 10ec:8168
           IF: p10p1 state: up speed: 100 Mbps duplex: full mac: 74:d0:2b:79:ed:cf
Drives:    HDD Total Size: 1048.0GB (27.8% used)
Sensors:   System Temperatures: cpu: 41.0C mobo: 37.0C
           Fan Speeds (in rpm): cpu: 1849 sys-1: 0
Info:      Processes: 291 Uptime: 2:39 Memory: 4246.5/15793.8MB
           Init: systemd v: 231 runlevel: 5 default: graphical.target Gcc sys: 6.3.1
           Client: Shell (bash 4.3.431 running in s) inxi: 2.3.5


# glxinfo (abridged for brevity)
direct rendering: Yes
server glx vendor string: SGI
server glx version string: 1.4
Extended renderer info (GLX_MESA_query_renderer):
    Vendor: X.Org (0x1002)
    Device: AMD RS780 (DRM 2.46.0 / 4.8.15-300.red.fc25.x86_64, LLVM 3.8.0) (0x9616)
    Version: 13.0.3
    Accelerated: yes
    Video memory: 256MB
    Unified memory: no
    Preferred profile: core (0x1)
    Max core profile version: 3.3
    Max compat profile version: 3.0
    Max GLES1 profile version: 1.1
    Max GLES[23] profile version: 3.0
OpenGL vendor string: X.Org
OpenGL renderer string: Gallium 0.4 on AMD RS780 (DRM 2.46.0 / 4.8.15-300.red.fc25.x86_64, LLVM 3.8.0)
OpenGL core profile version string: 3.3 (Core Profile) Mesa 13.0.3
OpenGL core profile shading language version string: 3.30
OpenGL version string: 3.0 Mesa 13.0.3
OpenGL shading language version string: 1.30
OpenGL context flags: (none)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10190713</commentid>
    <comment_count>1</comment_count>
    <who name="Davide Repetto">red</who>
    <bug_when>2017-02-28 04:50:05 -0500</bug_when>
    <thetext>the problem disappears with the current version of xorg.
Interestingly enough the ATI driver itself did not change, so the problem must have been somewhere else within xorg. 

xorg-x11-drv-ati-7.7.1-1.20160928git3fc839ff.fc25.x86_64
xorg-x11-server-common-1.19.1-3.fc25.x86_64
xorg-x11-server-utils-7.7-20.fc25.x86_64
xorg-x11-server-Xephyr-1.19.1-3.fc25.x86_64
xorg-x11-server-Xorg-1.19.1-3.fc25.x86_64
xorg-x11-server-Xvfb-1.19.1-3.fc25.x86_64
xorg-x11-utils-7.5-21.fc24.x86_64
xorg-x11-xauth-1.0.9-5.fc24.x86_64
xorg-x11-xbitmaps-1.1.1-9.fc24.noarch
xorg-x11-xinit-1.3.4-13.fc25.x86_64
xorg-x11-xkb-utils-7.7-17.fc24.x86_64</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>