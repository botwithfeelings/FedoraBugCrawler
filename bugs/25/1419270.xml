<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1419270</bug_id>
          
          <creation_ts>2017-02-04 09:05:00 -0500</creation_ts>
          <short_desc>Log out option within im-chooser results in error</short_desc>
          <delta_ts>2017-03-02 22:55:12 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>im-chooser</component>
          <version>25</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>low</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="art">oldregdata</reporter>
          <assigned_to name="Akira TAGOH">tagoh</assigned_to>
          <cc>i18n-bugs</cc>
    
    
    <cc>oldregdata</cc>
    
    
    <cc>tagoh</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>im-chooser-1.7.0-1.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-02 22:55:12</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10121261</commentid>
    <comment_count>0</comment_count>
    <who name="art">oldregdata</who>
    <bug_when>2017-02-04 09:05:50 -0500</bug_when>
    <thetext>Description of problem:
After some change within im-chooser, the log out button gets active, but pressing it results in a &quot;Could not connect to the session manager&quot; error

Version-Release number of selected component (if applicable):
1.6.6-1.fc25

How reproducible:
Always

Steps to Reproduce:
1. Open im-chooser
2. Trigger some change (select &apos;Use X compose table&apos; for example)
3. Press log out

Actual results:
&quot;Could not connect to the session manager&quot; error pops up

Expected results:
Session would exit to lightdm

Additional info:
Tried on both my actuall net install setup (im-chooser gets pulled with scim package i installed), and on xfce live dvd (im-chooser is present by default), the result is always the same.
xsession-errors only records &apos;Gtk-Message: GtkDialog mapped without a transient parent. This is discouraged.&apos; error.

journalctl seems to provide the following info on that matter:

Feb 05 00:03:42 localhost.localdomain com.redhat.imsettings[971]: [ 1486217022.649999]: IMSettings-Daemon[991]: INFO: Attempting to switch IM to X compose table [lang=en_US.utf8, desktop=(null), update=true]
Feb 05 00:03:43 localhost.localdomain com.redhat.imsettings[971]: [ 1486217023.082856]: IMSettings-Daemon[991]: INFO:   no need to invoke any auxiliary process for X compose table
Feb 05 00:03:43 localhost.localdomain com.redhat.imsettings[971]: [ 1486217023.084348]: IMSettings-GSettings backend[991]: INFO: Setting up xim:xim as gtk+ immodule
Feb 05 00:03:47 localhost.localdomain sudo[2635]:    user2 : TTY=pts/0 ; PWD=/home/user2 ; USER=root ; COMMAND=/bin/journalctl
Feb 05 00:03:47 localhost.localdomain audit[2635]: USER_CMD pid=2635 uid=1000 auid=1000 ses=2 subj=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023 msg=&apos;cwd=&quot;/home/user2&quot; cmd=&quot;journalctl&quot; terminal=pts/0 res=success&apos;
Feb 05 00:03:47 localhost.localdomain audit[2635]: CRED_REFR pid=2635 uid=0 auid=1000 ses=2 subj=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023 msg=&apos;op=PAM:setcred grantors=pam_env,pam_fprintd acct=&quot;root&quot; exe=&quot;/usr/bin/sudo&quot; hostname=? addr=? terminal=/dev/pts/0 res=success&apos;
Feb 05 00:03:47 localhost.localdomain sudo[2635]: pam_systemd(sudo:session): Cannot create session: Already running in a session
Feb 05 00:03:47 localhost.localdomain sudo[2635]: pam_unix(sudo:session): session opened for user root by (uid=0)
Feb 05 00:03:47 localhost.localdomain audit[2635]: USER_START pid=2635 uid=0 auid=1000 ses=2 subj=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023 msg=&apos;op=PAM:session_open grantors=pam_keyinit,pam_limits,pam_keyinit,pam_limits,pam_systemd,pam_unix acct=&quot;root&quot; exe=&quot;/usr/bin/sudo&quot; hostname=? addr=? terminal=/dev/pts/0 res=success&apos;

Thanks for your time and efforts! Will be glad to provide further info</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10165559</commentid>
    <comment_count>1</comment_count>
    <who name="art">oldregdata</who>
    <bug_when>2017-02-19 23:53:47 -0500</bug_when>
    <thetext>I saw it&apos;s being rebuilt in rawhide for fedora 26, any chance of taking a look at it?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10181297</commentid>
    <comment_count>2</comment_count>
    <who name="Akira TAGOH">tagoh</who>
    <bug_when>2017-02-24 06:13:13 -0500</bug_when>
    <thetext>Is there any clue in $HOME/.cache/imsettings/log ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10181710</commentid>
    <comment_count>3</comment_count>
    <who name="art">oldregdata</who>
    <bug_when>2017-02-24 08:56:05 -0500</bug_when>
    <thetext>Hey! Thanks for the reply! I can&apos;t tell myself. But here&apos;s the log from live xfce spin after changing the default method with im-chooser to ibus and attempting to log out.

[ 1487962072.297546]: IMSettings-Daemon[1372]: INFO: Starting imsettings-daemon...
[ 1487962072.298674]: IMSettings-Daemon[1372]: INFO:   [HOME=/home/liveuser/.config/imsettings]
[ 1487962072.298735]: IMSettings-Daemon[1372]: INFO:   [XINPUTRCDIR=/etc/X11/xinit/]
[ 1487962072.298777]: IMSettings-Daemon[1372]: INFO:   [XINPUTDIR=/etc/X11/xinit/xinput.d/]

[ 1487962072.298817]: IMSettings-Daemon[1372]: INFO:   [MODULEDIR=/usr/lib64/imsettings]

[ 1487962072.298858]: IMSettings-Daemon[1372]: INFO:   [MODULES=gsettings]

imsettings information
==========================
XINPUTRC: /etc/X11/xinit/xinput.d//none.conf
	  File: &apos;/etc/X11/xinit/xinput.d//none.conf&apos;
	  Size: 110       	Blocks: 8          IO Block: 4096   regular file
	Device: fd00h/64768d	Inode: 150952      Links: 1
	Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
	Context: system_u:object_r:bin_t:s0
	Access: 2017-02-24 13:47:51.670671215 -0500
	Modify: 2016-09-13 01:09:36.000000000 -0400
	Change: 2016-11-15 15:35:08.157915406 -0500
	 Birth: -
Is DBus enabled: yes
Is imsettings enabled: yes
Is GTK+ supported: no
Is Qt supported: no
DESKTOP: XFCE
GUESS_DESKTOP: $XDG_CURRENT_DESKTOP
DISABLE_IMSETTINGS: 
IMSETTINGS_DISABLE_DESKTOP_CHECK: 
DBUS_SESSION_BUS_ADDRESS: unix:path=/run/user/1000/bus
GTK_IM_MODULE: gtk-im-context-simple
QT_IM_MODULE: xim
XMODIFIERS: @im=none
IMSETTINGS_MODULE: none
IMSETTINGS_INTEGRATE_DESKTOP: yes

[ 1487962075.624653]: IMSettings-Daemon[1372]: INFO: Attempting to switch IM to none [lang=en_US.UTF-8, desktop=XFCE, update=false]
[ 1487962075.889096]: IMSettings-Daemon[1372]: INFO:   no need to invoke any auxiliary process for none
[ 1487962075.889279]: IMSettings-Daemon[1372]: INFO:   no need to invoke any main process for none
[ 1487962075.890230]: IMSettings-GSettings backend[1372]: INFO: Setting up gtk-im-context-simple:xim as gtk+ immodule
[ 1487944287.345219]: IMSettings-Daemon[1372]: INFO: Attempting to switch IM to IBus [lang=en_US.UTF-8, desktop=(null), update=true]
[ 1487944287.550817]: IMSettings-Daemon[1372]: INFO:   no need to invoke any auxiliary process for IBus
[ 1487944287.550951]: IMSettings-Daemon[1372]: INFO:   Starting the main process for IBus [lang:en_US.UTF-8]
[ 1487944287.575772]: IMSettings-Daemon[1372]: INFO:   Started IBus: [process: /usr/bin/ibus-daemon -r --xim, lang: en_US.UTF-8, pid: 2500, id: 48, time: 2017-02-24T13:51:27.575547Z
[ 1487944287.580946]: IMSettings-GSettings backend[1372]: INFO: Setting up ibus:xim as gtk+ immodule</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10192770</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-02-28 06:48:36 -0500</bug_when>
    <thetext>im-chooser-1.7.0-1.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-247fd269fd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10195888</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-02-28 21:54:34 -0500</bug_when>
    <thetext>im-chooser-1.7.0-1.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-247fd269fd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10199731</commentid>
    <comment_count>6</comment_count>
    <who name="art">oldregdata</who>
    <bug_when>2017-03-01 19:20:19 -0500</bug_when>
    <thetext>Thanks! Works great with xfce! Though still shows &quot;Could not connect to the session manager&quot; on my minimal netinstall with window managers. Here&apos;s the log, just in case

[ 1488413645.060259]: IMSettings-Daemon[1124]: INFO: Starting imsettings-daemon...
[ 1488413645.060404]: IMSettings-Daemon[1124]: INFO:   [HOME=/home/user4/.config/imsettings]
[ 1488413645.060452]: IMSettings-Daemon[1124]: INFO:   [XINPUTRCDIR=/etc/X11/xinit/]
[ 1488413645.060494]: IMSettings-Daemon[1124]: INFO:   [XINPUTDIR=/etc/X11/xinit/xinput.d/]

[ 1488413645.060535]: IMSettings-Daemon[1124]: INFO:   [MODULEDIR=/usr/lib64/imsettings]

[ 1488413645.060576]: IMSettings-Daemon[1124]: INFO:   [MODULES=gsettings]

imsettings information
==========================
XINPUTRC: /home/user4/.config/imsettings/xinputrc
	  File: &apos;/home/user4/.config/imsettings/xinputrc&apos; -&gt; &apos;/etc/X11/xinit/xinput.d/ibus.conf&apos;
	  Size: 33        	Blocks: 0          IO Block: 4096   symbolic link
	Device: 808h/2056d	Inode: 924194      Links: 1
	Access: (0777/lrwxrwxrwx)  Uid: ( 1000/   user4)   Gid: ( 1000/   user4)
	Context: unconfined_u:object_r:config_home_t:s0
	Access: 2017-03-02 10:14:04.788114740 +1000
	Modify: 2017-03-02 09:11:42.255541138 +1000
	Change: 2017-03-02 09:11:42.255541138 +1000
	 Birth: -
Is DBus enabled: yes
Is imsettings enabled: yes
Is GTK+ supported: no
Is Qt supported: no
DESKTOP: i3
GUESS_DESKTOP: $XDG_CURRENT_DESKTOP
DISABLE_IMSETTINGS: 
IMSETTINGS_DISABLE_DESKTOP_CHECK: 
DBUS_SESSION_BUS_ADDRESS: unix:path=/run/user/1000/bus
GTK_IM_MODULE: ibus
QT_IM_MODULE: ibus
XMODIFIERS: @im=ibus
IMSETTINGS_MODULE: IBus
IMSETTINGS_INTEGRATE_DESKTOP: yes

[ 1488413670.178837]: IMSettings-Daemon[1124]: INFO: Attempting to switch IM to IBus [lang=en_US.utf8, desktop=(null), update=true]
[ 1488413670.433339]: IMSettings-Daemon[1124]: INFO:   no need to invoke any auxiliary process for IBus
[ 1488413670.434668]: IMSettings-Daemon[1124]: INFO:   Starting the main process for IBus [lang:en_US.utf8]
[ 1488413670.486092]: IMSettings-Daemon[1124]: INFO:   Started IBus: [process: /usr/bin/ibus-daemon -r --xim, lang: en_US.utf8, pid: 1597, id: 29, time: 2017-03-02T00:14:30.485716Z
[ 1488413670.486529]: IMSettings-GSettings backend[1124]: INFO: Setting up ibus:xim as gtk+ immodule
[ 1488413750.541000]: IMSettings-Daemon[1124]: INFO: Attempting to switch IM to none [lang=en_US.utf8, desktop=(null), update=true]
[ 1488413750.597305]: IMSettings-Daemon[1124]: INFO:   Stopping the main process for IBus [pid: 1597]
[ 1488413750.597509]: IMSettings-Daemon[1124]: INFO: Sent a signal to stop /usr/bin/ibus-daemon [pid: 1597, time: 2017-03-02T00:15:50.597497Z]
[ 1488413750.597807]: IMSettings-Daemon[1124]: INFO:   no need to invoke any auxiliary process for none
[ 1488413750.597871]: IMSettings-Daemon[1124]: INFO:   no need to invoke any main process for none
[ 1488413750.598305]: IMSettings-GSettings backend[1124]: INFO: Setting up gtk-im-context-simple:xim as gtk+ immodule
[ 1488413750.613403]: IMSettings-Daemon[1124]: INFO: Stopped main process for IBus with the signal 15 [pid: 1597]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10200385</commentid>
    <comment_count>7</comment_count>
    <who name="Akira TAGOH">tagoh</who>
    <bug_when>2017-03-01 23:35:29 -0500</bug_when>
    <thetext>Please open another bug with the more details, like the name of a window manager or a desktop. I updated im-chooser to support the session management for XFCE. though if they support XSMP, it should works though.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10200436</commentid>
    <comment_count>8</comment_count>
    <who name="art">oldregdata</who>
    <bug_when>2017-03-02 00:27:13 -0500</bug_when>
    <thetext>I just +1&apos;d it on the bodhi page. Not that much of a bug to keep bothering you with a yet another separate bug-ticket i guess. 
Thanks again for your time and your hardwork! 
Best wishes,</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10204589</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-02 22:55:12 -0500</bug_when>
    <thetext>im-chooser-1.7.0-1.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>