<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1322198</bug_id>
          
          <creation_ts>2016-03-29 21:51:00 -0400</creation_ts>
          <short_desc>hardlink skips certain &quot;dot&quot; files</short_desc>
          <delta_ts>2017-04-27 16:54:31 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>hardlink</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>low</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>todd_lewis</reporter>
          <assigned_to name="Francisco Javier Tsao SantÃ­n">tsao</assigned_to>
          <cc>jzeleny</cc>
    
    
    <cc>tsao</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>hardlink-1.3-1.fc26</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-04-27 16:54:31</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9189811</commentid>
    <comment_count>0</comment_count>
    <who name="">todd_lewis</who>
    <bug_when>2016-03-29 21:51:23 -0400</bug_when>
    <thetext>Description of problem:
File names that start with &quot;.&quot; and end with a different &quot;.&quot; followed by exactly 6 non-periods are skipped

Version-Release number of selected component (if applicable):
hardlink-1.0-22

How reproducible:
Always

Steps to Reproduce:
1. hardlink -v foo
2.
3.

Actual results:
Skipping foo/google-chrome/.com.google.Chrome.y7Yk64
Skipping foo/google-chrome/Default/.com.google.Chrome.PoAF6r
Skipping foo/selinux/targeted/.policy.sha512
...

Expected results:
Files matching pattern should be eligible for hardlinking.

Additional info:
There is explicit code to skip dot files that have more than one dot and a 6-character extension. This should either be removed from the code, or explained in the man page and/or made optional. It&apos;s such a bizarre thing that it must have served a purpose at one point, though I can&apos;t imagine what that was. At least it does print a message that the file(s) were skipped if the -v flag is given.

 q = strrchr (di-&gt;d_name, &apos;.&apos;);
 if (q &amp;&amp; strlen (q) == 7 &amp;&amp; q != di-&gt;d_name) {
   nam1.buf[nam1baselen] = 0;
   if (verbose)
     fprintf(stderr, &quot;Skipping %s%s\n&quot;, nam1.buf, di-&gt;d_name);
   continue;
 }</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9265563</commentid>
    <comment_count>1</comment_count>
      <attachid>1150503</attachid>
    <who name="">todd_lewis</who>
    <bug_when>2016-04-25 09:43:34 -0400</bug_when>
    <thetext>Created attachment 1150503
patch to optionally include dotfiles with six character extension

This proposed patch adds a flag to bypass the bizarre default behavior of skipping dotfiles with six character extensions. Chose to do it this way so the the default behavior does not change (in the off chance somebody is doing this on purpose). Applies against current HEAD.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9369389</commentid>
    <comment_count>2</comment_count>
    <who name="Fedora Admin XMLRPC Client">fedora-admin-xmlrpc</who>
    <bug_when>2016-05-30 10:58:17 -0400</bug_when>
    <thetext>This package has changed ownership in the Fedora Package Database.  Reassigning to the new owner of this component.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9374342</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Admin XMLRPC Client">fedora-admin-xmlrpc</who>
    <bug_when>2016-05-31 18:00:12 -0400</bug_when>
    <thetext>This package has changed ownership in the Fedora Package Database.  Reassigning to the new owner of this component.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9925716</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2016-11-24 11:17:34 -0500</bug_when>
    <thetext>This message is a reminder that Fedora 23 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 23. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;23&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 23 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10354811</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-23 19:47:42 -0400</bug_when>
    <thetext>hardlink-1.3-1.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-db1d0d0f9c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10362095</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-25 17:27:58 -0400</bug_when>
    <thetext>hardlink-1.3-1.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-db1d0d0f9c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10370241</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-27 16:54:31 -0400</bug_when>
    <thetext>hardlink-1.3-1.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1150503</attachid>
            <date>2016-04-25 09:43:00 -0400</date>
            <delta_ts>2016-04-25 09:43:34 -0400</delta_ts>
            <desc>patch to optionally include dotfiles with six character extension</desc>
            <filename>dotfiles.patch1</filename>
            <type>text/plain</type>
            <size>2816</size>
            <attacher>todd_lewis</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL2hhcmRsaW5rLjEgYi9oYXJkbGluay4xCmluZGV4IDA0MjI4ZjQuLmVjYTRh
MWMgMTAwNjQ0Ci0tLSBhL2hhcmRsaW5rLjEKKysrIGIvaGFyZGxpbmsuMQpAQCAtMyw3ICszLDcg
QEAKIGhhcmRsaW5rIFwtIENvbnNvbGlkYXRlIGR1cGxpY2F0ZSBmaWxlcyB2aWEgaGFyZGxpbmtz
CiAuU0ggIlNZTk9QU0lTIgogLlBQCi1cZkJoYXJkbGlua1xmUCBbXGZCLWNcZlBdIFtcZkItblxm
UF0gW1xmQi12XGZQXSBbXGZCLXZ2XGZQXSBbXGZCLWhcZlBdIGRpcmVjdG9yeTEgWyBkaXJlY3Rv
cnkyIC4uLiBdCitcZkJoYXJkbGlua1xmUCBbXGZCLWNcZlBdIFtcZkItblxmUF0gW1xmQi1kXGZQ
XSBbXGZCLXZcZlBdIFtcZkItdnZcZlBdIFtcZkItaFxmUF0gZGlyZWN0b3J5MSBbIGRpcmVjdG9y
eTIgLi4uIF0KIC5TSCAiREVTQ1JJUFRJT04iCiAuUFAKIFRoaXMgbWFudWFsIHBhZ2UgZG9jdW1l
bnRzIFxmQmhhcmRsaW5rXGZQLCBhCkBAIC0yOCw2ICsyOCw5IEBAIERpc3JlZ2FyZHMgcGVybWlz
c2lvbiwgb3duZXJzaGlwIGFuZCBvdGhlciBkaWZmZXJlbmNlcy4KIEZvcmNlIGhhcmRsaW5raW5n
IGFjcm9zcyBmaWxlIHN5c3RlbXMuCiAuSVAgIlxmQi1uXGZQIiAxMAogRG8gbm90IHBlcmZvcm0g
dGhlIGNvbnNvbGlkYXRpb247IG9ubHkgcHJpbnQgd2hhdCB3b3VsZCBiZSBjaGFuZ2VkLgorLklQ
ICJcZkItZFxmUCIgMTAKK0RvIG5vdCBza2lwIGRvdCBmaWxlcyB3aXRoIHNpeCBjaGFyYWN0ZXIg
ZXh0ZW5zaW9ucy4gVGhlIG5vcm1hbCBiZWhhdmlvcgoraXMgdG8gc2tpcCBzdWNoIGZpbGVzLgog
LklQICJcZkItdlxmUCIgMTAKIFByaW50IHN1bW1hcnkgYWZ0ZXIgaGFyZGxpbmtpbmcuCiAuSVAg
IlxmQi12dlxmUCIgMTAKZGlmZiAtLWdpdCBhL2hhcmRsaW5rLmMgYi9oYXJkbGluay5jCmluZGV4
IGE3YzcyNDkuLmM3OWVkNzIgMTAwNjQ0Ci0tLSBhL2hhcmRsaW5rLmMKKysrIGIvaGFyZGxpbmsu
YwpAQCAtNTcsNiArNTcsNyBAQCBpbnQgbm9fbGluayA9IDA7CiBpbnQgdmVyYm9zZSA9IDA7CiBp
bnQgY29udGVudF9vbmx5ID0gMDsKIGludCBmb3JjZSA9IDA7CitpbnQgZG90ZmlsZXMgPSAxOwog
CiB0eXBlZGVmIHN0cnVjdCBfZiB7CiAgIHN0cnVjdCBfZiAqbmV4dDsKQEAgLTk4LDEyICs5OSwx
MyBAQCB2b2lkIGRvZXhpdChpbnQgaSkKIAogdm9pZCB1c2FnZShjaGFyICpwcm9nKQogewotICBm
cHJpbnRmIChzdGRlcnIsICJVc2FnZTogJXMgWy1jbnZoZl0gZGlyZWN0b3JpZXMuLi5cbiIsIHBy
b2cpOworICBmcHJpbnRmIChzdGRlcnIsICJVc2FnZTogJXMgWy1jbnZoZGZdIGRpcmVjdG9yaWVz
Li4uXG4iLCBwcm9nKTsKICAgZnByaW50ZiAoc3RkZXJyLCAiICAtYyAgICBXaGVuIGZpbmRpbmcg
Y2FuZGlkYXRlcyBmb3IgbGlua2luZywgY29tcGFyZSBvbmx5IGZpbGUgY29udGVudHMuXG4iKTsK
ICAgZnByaW50ZiAoc3RkZXJyLCAiICAtbiAgICBEb24ndCBhY3R1YWxseSBsaW5rIGFueXRoaW5n
LCBqdXN0IHJlcG9ydCB3aGF0IHdvdWxkIGJlIGRvbmUuXG4iKTsKICAgZnByaW50ZiAoc3RkZXJy
LCAiICAtdiAgICBQcmludCBzdW1tYXJ5IGFmdGVyIGhhcmRsaW5raW5nLlxuIik7CiAgIGZwcmlu
dGYgKHN0ZGVyciwgIiAgLXZ2ICAgUHJpbnQgZXZlcnkgaGFyZGxpbmtlZCBmaWxlIGFuZCBieXRl
cyBzYXZlZCArIHN1bW1hcnkuXG4iKTsKICAgZnByaW50ZiAoc3RkZXJyLCAiICAtZiAgICBGb3Jj
ZSBoYXJkbGlua2luZyBhY3Jvc3MgZmlsZXN5c3RlbXMuXG4iKTsKKyAgZnByaW50ZiAoc3RkZXJy
LCAiICAtZCAgICBEb24ndCBza2lwIGRvdCBmaWxlcyB3aXRoIDYgY2hhciBleHRlbnNpb25zLlxu
Iik7CiAgIGZwcmludGYgKHN0ZGVyciwgIiAgLWggICAgU2hvdyBoZWxwLlxuIik7CiAgIGV4aXQo
MjU1KTsKIH0KQEAgLTMyNyw3ICszMjksNyBAQCBpbnQgbWFpbihpbnQgYXJnYywgY2hhciAqKmFy
Z3YpCiAgIGludCBjaDsKICAgaW50IGk7CiAgIGR5bnN0ciBuYW0xID0ge05VTEwsIDB9OwotICB3
aGlsZSAoKGNoID0gZ2V0b3B0IChhcmdjLCBhcmd2LCAiY252aGYiKSkgIT0gLTEpIHsKKyAgd2hp
bGUgKChjaCA9IGdldG9wdCAoYXJnYywgYXJndiwgImNudmhmZCIpKSAhPSAtMSkgewogICAgIHN3
aXRjaCAoY2gpIHsKICAgICBjYXNlICduJzoKICAgICAgIG5vX2xpbmsrKzsKQEAgLTM0MSw2ICsz
NDMsOSBAQCBpbnQgbWFpbihpbnQgYXJnYywgY2hhciAqKmFyZ3YpCiAgICAgY2FzZSAnZic6CiAg
ICAgICBmb3JjZT0xOwogICAgICAgYnJlYWs7CisgICAgY2FzZSAnZCc6CisgICAgICBkb3RmaWxl
cz0wOworICAgICAgYnJlYWs7CiAgICAgY2FzZSAnaCc6CiAgICAgZGVmYXVsdDoKICAgICAgIHVz
YWdlKGFyZ3ZbMF0pOwpAQCAtMzczLDcgKzM3OCw3IEBAIGludCBtYWluKGludCBhcmdjLCBjaGFy
ICoqYXJndikKICAgICAgICAgaWYgKCFkaS0+ZF9uYW1lWzFdIHx8ICFzdHJjbXAgKGRpLT5kX25h
bWUsICIuLiIpIHx8ICFzdHJuY21wIChkaS0+ZF9uYW1lLCAiLmluLiIsIDQpKQogICAgICAgICAg
IGNvbnRpbnVlOwogICAgICAgICBxID0gc3RycmNociAoZGktPmRfbmFtZSwgJy4nKTsKLSAgICAg
ICAgaWYgKHEgJiYgc3RybGVuIChxKSA9PSA3ICYmIHEgIT0gZGktPmRfbmFtZSkgeworICAgICAg
ICBpZiAoZG90ZmlsZXMgJiYgcSAmJiBzdHJsZW4gKHEpID09IDcgJiYgcSAhPSBkaS0+ZF9uYW1l
KSB7CiAgICAgICAgICAgbmFtMS5idWZbbmFtMWJhc2VsZW5dID0gMDsKICAgICAgICAgICBpZiAo
dmVyYm9zZSkKICAgICAgICAgICAgIGZwcmludGYoc3RkZXJyLCAiU2tpcHBpbmcgJXMlc1xuIiwg
bmFtMS5idWYsIGRpLT5kX25hbWUpOwo=
</data>

          </attachment>
      

    </bug>

</bugzilla>