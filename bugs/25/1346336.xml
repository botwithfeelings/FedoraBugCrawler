<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1346336</bug_id>
          
          <creation_ts>2016-06-14 10:58:00 -0400</creation_ts>
          <short_desc>New ipsilon-idp.conf doesn&apos;t work with mod_nss installed</short_desc>
          <delta_ts>2016-12-28 16:48:44 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>ipsilon</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Veronika Kabatova">vkabatov</reporter>
          <assigned_to name="Patrick Uiterwijk">puiterwijk</assigned_to>
          <cc>jpazdziora</cc>
    
    
    <cc>puiterwijk</cc>
    
    
    <cc>ssorce</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>ipsilon-2.0.2-2.fc25 ipsilon-2.0.2-2.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-12-28 15:20:07</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9414462</commentid>
    <comment_count>0</comment_count>
    <who name="Veronika Kabatova">vkabatov</who>
    <bug_when>2016-06-14 10:58:48 -0400</bug_when>
    <thetext>Description of problem:
Unable to log in when having both mod_nss (default port 8443) and mod_ssl (default port 443) installed. 

Version-Release number of selected component (if applicable):
ipsilon-base-1.2.0-4.fc23.noarch
ipsilon-1.2.0-4.fc23.noarch
mod_nss-1.0.12-4.fc23.x86_64
mod_ssl-2.4.18-1.fc23.x86_64

How reproducible: always

Steps to Reproduce:
1. dnf install mod_nss ipsilon -y
2. ipsilon-server-install --testauth yes
3. service httpd restart
4. curl -k https://$(hostname)/idp

Actual results:
&lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&gt;
&lt;html&gt;&lt;head&gt;
&lt;title&gt;403 Forbidden&lt;/title&gt;
&lt;/head&gt;&lt;body&gt;
&lt;h1&gt;Forbidden&lt;/h1&gt;
&lt;p&gt;You don&apos;t have permission to access /idp
on this server.&lt;br /&gt;
&lt;/p&gt;
&lt;/body&gt;&lt;/html&gt;


Expected results:
Page saying to log in is showed
With curl it should contain &quot;&lt;p&gt;Please &lt;a href=&quot;/idp/login&quot;&gt;Log In&lt;/a&gt;&quot;


Additional info:
Looking in /etc/httpd/conf.d/ipsilon-idp.conf, buggy part is 

    &lt;IfModule mod_nss.c&gt;
        NSSRequireSSL
    &lt;/IfModule&gt;
    &lt;IfModule !mod_nss.c&gt;
        SSLRequireSSL
    &lt;/IfModule&gt;

Since mod_nss and mod_ssl are listening on different ports, they do not interfere. Commenting out everything except &quot;SSLRequireSSL&quot; works as a workaround (when keeping the default ports for modules).

This configuration would make sense in case both mod_nss and mod_ssl would listen on the same port, therefore we believe choosing between NSSRequireSSL and SSLRequireSSL should depend on:

1. mod_nss is installed
2. mod_nss and mod_ssl listen on the same port

Being dependent purely on point 1. chooses the wrong *RequireSSL and breaks the idp.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696012</commentid>
    <comment_count>1</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-10 05:42:03 -0400</bug_when>
    <thetext>ipsilon-1.2.0-7.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-6bd3f53051</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696014</commentid>
    <comment_count>2</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-10 05:42:15 -0400</bug_when>
    <thetext>ipsilon-1.2.0-7.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-e6b98bb01a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696021</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-10 05:42:23 -0400</bug_when>
    <thetext>ipsilon-1.2.0-7.fc23 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2016-a3d629d017</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696028</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-10 05:42:31 -0400</bug_when>
    <thetext>ipsilon-1.2.0-7.el7 has been submitted as an update to Fedora EPEL 7. https://bodhi.fedoraproject.org/updates/FEDORA-EPEL-2016-67ac430690</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696518</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-11 00:53:05 -0400</bug_when>
    <thetext>ipsilon-1.2.0-7.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-e6b98bb01a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696525</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-11 01:22:32 -0400</bug_when>
    <thetext>ipsilon-1.2.0-7.fc23 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-a3d629d017</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696541</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-11 01:55:55 -0400</bug_when>
    <thetext>ipsilon-1.2.0-7.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-6bd3f53051</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696891</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-11 14:49:54 -0400</bug_when>
    <thetext>ipsilon-1.2.0-7.el7 has been pushed to the Fedora EPEL 7 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-EPEL-2016-67ac430690</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9711832</commentid>
    <comment_count>9</comment_count>
    <who name="Jan Pazdziora">jpazdziora</who>
    <bug_when>2016-09-15 12:18:36 -0400</bug_when>
    <thetext>FAILS_QA -- the /etc/httpd/conf.d/ipsilon-idp.conf -&gt; /etc/ipsilon/idp/idp.conf still contains

&lt;IfModule mod_nss.c&gt;
    NSSRequireSSL
&lt;/IfModule&gt;
&lt;IfModule !mod_nss.c&gt;
    SSLRequireSSL
&lt;/IfModule&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9833024</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-31 05:59:14 -0400</bug_when>
    <thetext>ipsilon-2.0.0-1.fc23 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2016-30077d1b37</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9833027</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-31 05:59:26 -0400</bug_when>
    <thetext>ipsilon-2.0.0-1.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-2d8fb6d7ad</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9833029</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-31 05:59:35 -0400</bug_when>
    <thetext>ipsilon-2.0.0-1.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-b465090499</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9835791</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-31 22:21:15 -0400</bug_when>
    <thetext>ipsilon-2.0.0-1.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-2d8fb6d7ad</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9838404</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-01 14:22:11 -0400</bug_when>
    <thetext>ipsilon-2.0.0-1.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-b465090499</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9840656</commentid>
    <comment_count>15</comment_count>
    <who name="Jan Pazdziora">jpazdziora</who>
    <bug_when>2016-11-02 05:08:49 -0400</bug_when>
    <thetext>With ipsilon-2.0.0-1.fc24.noarch, the *RequireSSL directives are no longer there and steps from comment 0 produce working WebUI.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9864420</commentid>
    <comment_count>16</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-05 21:51:18 -0400</bug_when>
    <thetext>ipsilon-2.0.0-1.fc23 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-30077d1b37</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9928361</commentid>
    <comment_count>17</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2016-11-25 04:18:27 -0500</bug_when>
    <thetext>This message is a reminder that Fedora 23 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 23. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;23&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 23 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9930153</commentid>
    <comment_count>18</comment_count>
    <who name="Jan Pazdziora">jpazdziora</who>
    <bug_when>2016-11-25 09:26:49 -0500</bug_when>
    <thetext>I still see the issue on Fedora 25 with ipsilon-1.2.0-5.fc25.noarch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9953873</commentid>
    <comment_count>19</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-03 21:07:11 -0500</bug_when>
    <thetext>ipsilon-2.0.2-2.fc23 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2016-30077d1b37</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9953883</commentid>
    <comment_count>20</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-03 21:13:04 -0500</bug_when>
    <thetext>ipsilon-2.0.2-2.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-2d8fb6d7ad</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9953889</commentid>
    <comment_count>21</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-03 21:13:29 -0500</bug_when>
    <thetext>ipsilon-2.0.2-2.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-b465090499</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9958389</commentid>
    <comment_count>22</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-05 22:23:59 -0500</bug_when>
    <thetext>ipsilon-2.0.2-2.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-2d8fb6d7ad</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9958445</commentid>
    <comment_count>23</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-05 22:56:28 -0500</bug_when>
    <thetext>ipsilon-2.0.2-2.fc23 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-30077d1b37</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9958467</commentid>
    <comment_count>24</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-05 22:59:04 -0500</bug_when>
    <thetext>ipsilon-2.0.2-2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-b465090499</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10023159</commentid>
    <comment_count>25</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-28 15:20:07 -0500</bug_when>
    <thetext>ipsilon-2.0.2-2.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10023238</commentid>
    <comment_count>26</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-28 16:48:44 -0500</bug_when>
    <thetext>ipsilon-2.0.2-2.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>