<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1403662</bug_id>
          
          <creation_ts>2016-12-12 01:41:00 -0500</creation_ts>
          <short_desc>Ceph update not installable</short_desc>
          <delta_ts>2017-03-13 19:49:46 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>ceph</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>urgent</priority>
          <bug_severity>urgent</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Mattias Ellert">mattias.ellert</reporter>
          <assigned_to name="Boris Ranto">branto</assigned_to>
          <cc>bhubbard</cc>
    
    
    <cc>branto</cc>
    
    
    <cc>cfergeau</cc>
    
    
    <cc>danielsun3164</cc>
    
    
    <cc>david</cc>
    
    
    <cc>fedora</cc>
    
    
    <cc>loic</cc>
    
    
    <cc>ramkrsna</cc>
    
    
    <cc>steve</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>ceph-10.2.4-2.fc25 ceph-10.2.4-2.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-13 19:49:46</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9975493</commentid>
    <comment_count>0</comment_count>
    <who name="Mattias Ellert">mattias.ellert</who>
    <bug_when>2016-12-12 01:41:22 -0500</bug_when>
    <thetext>Description of problem:

# dnf --refresh update --best
Error: package libcephfs1-devel-1:10.2.2-3.fc25.x86_64 requires libcephfs1 = 1:10.2.2-3.fc25, but none of the providers can be installed.
package libcephfs_jni1-devel-1:10.2.2-3.fc25.x86_64 requires libcephfs_jni1 = 1:10.2.2-3.fc25, but none of the providers can be installed.
package librados2-devel-1:10.2.2-3.fc25.x86_64 requires librados2 = 1:10.2.2-3.fc25, but none of the providers can be installed.
package libradosstriper1-devel-1:10.2.2-3.fc25.x86_64 requires libradosstriper1 = 1:10.2.2-3.fc25, but none of the providers can be installed.
package librbd1-devel-1:10.2.2-3.fc25.x86_64 requires librbd1 = 1:10.2.2-3.fc25, but none of the providers can be installed
(try to add &apos;--allowerasing&apos; to command line to replace conflicting packages)

Version-Release number of selected component (if applicable):

ceph-10.2.4-1.fc25

How reproducible:

AÃ¶ways

Steps to Reproduce:
1. dnf update (with the previous version installed)

Actual results:

Failed update (see above)

Expected results:

Successful update

Additional info:

The reason for the problem is that the new version renames some packages without obsoleting the old versions. There are obsoletes in the packages but they are obsoleting an exact version of the old names - a version that never existed, instead of all versions less than the version where the name was changed.

$ grep Obsoletes ceph.spec | grep =
Obsoletes:	librados2-devel = %{epoch}:%{version}-%{release}
Obsoletes:	librgw2-devel = %{epoch}:%{version}-%{release}
Obsoletes:	libradosstriper1-devel = %{epoch}:%{version}-%{release}
Obsoletes:	librbd1-devel = %{epoch}:%{version}-%{release}
Obsoletes:	libcephfs1-devel = %{epoch}:%{version}-%{release}
Obsoletes:	libcephfs_jni1-devel = %{epoch}:%{version}-%{release}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10023784</commentid>
    <comment_count>1</comment_count>
    <who name="Christophe Fergeau">cfergeau</who>
    <bug_when>2016-12-29 05:00:51 -0500</bug_when>
    <thetext>Are there plans for a fixed f25 build?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10052086</commentid>
    <comment_count>2</comment_count>
    <who name="Daniel">danielsun3164</who>
    <bug_when>2017-01-11 04:45:11 -0500</bug_when>
    <thetext>When will this bug be fixed?
I have waited for a month. There are still 19 packages I cannot update.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10054835</commentid>
    <comment_count>3</comment_count>
    <who name="Brad Hubbard">bhubbard</who>
    <bug_when>2017-01-11 16:20:46 -0500</bug_when>
    <thetext>Would erasing the devel packages, upgrading, and then putting the devel packages back (if you need them, they are generally not required) work?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10055839</commentid>
    <comment_count>4</comment_count>
    <who name="Mattias Ellert">mattias.ellert</who>
    <bug_when>2017-01-12 01:43:13 -0500</bug_when>
    <thetext>The upgrade path is broken. It needs to be fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10057853</commentid>
    <comment_count>5</comment_count>
    <who name="Boris Ranto">branto</who>
    <bug_when>2017-01-12 11:03:16 -0500</bug_when>
    <thetext>I have fixed this a long time ago but I&apos;ve been running into technical issues for the last month when trying to push the update. First, I ran into issues with new fedkpg certification method which was eventually fixed in January (maybe a bit earlier, I did not check during the christmas period).

However, now, there are some issues with libxfs in 32-bit builds in rawhide[1]  (the same package builds fine in f24, f25) and unfortunately, I can&apos;t push the update when what we have in rawhide is older than what is being pushed to f24/f25.

[1] https://kojipkgs.fedoraproject.org//work/tasks/7909/17257909/build.log</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10059242</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-12 19:47:24 -0500</bug_when>
    <thetext>ceph-10.2.4-2.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-598e3c5542</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10059243</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-12 19:47:36 -0500</bug_when>
    <thetext>ceph-10.2.4-2.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2017-75eab2ad5a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10059253</commentid>
    <comment_count>8</comment_count>
    <who name="Boris Ranto">branto</who>
    <bug_when>2017-01-12 19:53:07 -0500</bug_when>
    <thetext>I&apos;ve managed to hack around the xfs issue in rawhide so I have pushed the f24/f25 packages to bodhi.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10060098</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-13 03:33:07 -0500</bug_when>
    <thetext>ceph-10.2.4-2.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-598e3c5542</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10063156</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-13 22:52:42 -0500</bug_when>
    <thetext>ceph-10.2.4-2.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10208010</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-03 19:50:03 -0500</bug_when>
    <thetext>ceph-10.2.4-2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-75eab2ad5a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10235115</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-13 19:49:46 -0400</bug_when>
    <thetext>ceph-10.2.4-2.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>