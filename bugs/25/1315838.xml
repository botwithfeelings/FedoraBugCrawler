<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1315838</bug_id>
          
          <creation_ts>2016-03-08 13:11:00 -0500</creation_ts>
          <short_desc>transmission-gtk: error while loading shared libraries: libnatpmp.so.1</short_desc>
          <delta_ts>2017-03-15 17:44:09 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>transmission</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Anton Barsukov">iscsi.hungry</reporter>
          <assigned_to name="Gwyn Ciesla">limburgher</assigned_to>
          <cc>abdulkarimmemon</cc>
    
    
    <cc>bharrington</cc>
    
    
    <cc>charles</cc>
    
    
    <cc>helio</cc>
    
    
    <cc>joshua</cc>
    
    
    <cc>jspaleta</cc>
    
    
    <cc>kumarpraveen.nitdgp</cc>
    
    
    <cc>limburgher</cc>
    
    
    <cc>raghusiddarth</cc>
    
    
    <cc>sanjay.ankur</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-15 17:44:09</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9129933</commentid>
    <comment_count>0</comment_count>
    <who name="Anton Barsukov">iscsi.hungry</who>
    <bug_when>2016-03-08 13:11:43 -0500</bug_when>
    <thetext>Description of problem:
$ transmission-gtk
transmission-gtk: error while loading shared libraries: libnatpmp.so.1:

Version-Release number of selected component (if applicable):
$ rpm -q transmission-gtk
transmission-gtk-2.90-1.fc23.x86_64

How reproducible:
run transmission-gtk

Steps to Reproduce:
1. dnf install transmission-gtk
2. run transmission-gtk
3. 

Actual results:
transmission-gtk did not start

Expected results:


Additional info:
# workaround
dnf install libnatpmp</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9714358</commentid>
    <comment_count>1</comment_count>
    <who name="Gwyn Ciesla">limburgher</who>
    <bug_when>2016-09-16 08:51:51 -0400</bug_when>
    <thetext>*** Bug 1376647 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9925407</commentid>
    <comment_count>2</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2016-11-24 10:58:41 -0500</bug_when>
    <thetext>This message is a reminder that Fedora 23 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 23. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;23&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 23 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9932260</commentid>
    <comment_count>3</comment_count>
    <who name="">joshua</who>
    <bug_when>2016-11-27 11:04:59 -0500</bug_when>
    <thetext>Exactly the same problem on a freshly installed Fedora 25 Workstation:

[user@f25-desktop Downloads]$ cat /etc/fedora-release 
Fedora release 25 (Twenty Five)

[user@f25-desktop Downloads]$ transmission-gtk 
transmission-gtk: error while loading shared libraries: libnatpmp.so.1: cannot open shared object file: No such file or directory

[user@f25-desktop Downloads]$ transmission-show
transmission-show: error while loading shared libraries: libnatpmp.so.1: cannot open shared object file: No such file or directory

[user@f25-desktop Downloads]$ sudo dnf provides libnatpmp.so.1
Last metadata expiration check: 0:51:14 ago on Sun Nov 27 10:10:33 2016.
libnatpmp-20150609-2.fc24.i686 : Library of The NAT Port Mapping Protocol (NAT-PMP)
Repo        : fedora



Why not just &quot;Requires: libnatpmp&quot; in transmission-common?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9932294</commentid>
    <comment_count>4</comment_count>
    <who name="Ankur Sinha (FranciscoD)">sanjay.ankur</who>
    <bug_when>2016-11-27 11:37:42 -0500</bug_when>
    <thetext>Is this on a freshly installed system? I upgrade from F24 and when I try to install transmission via dnf, it does correctly pull in libnatpmp. It shouldn&apos;t need to be added to the spec file.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9932303</commentid>
    <comment_count>5</comment_count>
    <who name="">joshua</who>
    <bug_when>2016-11-27 12:00:36 -0500</bug_when>
    <thetext>On a freshly installed F25 x86_64 Workstation, I used dnf to install transmission-gtk (and therefore transmission-common), and libnatpmp was not installed.

As another test, I removed all transmission packages as well as libnatpmp, and asked dnf to install it again:

$ sudo dnf install transmission-gtk
Last metadata expiration check: 1:35:00 ago on Sun Nov 27 10:10:33 2016.
Dependencies resolved.
============================================================================================================================
 Package                              Arch                    Version                         Repository               Size
============================================================================================================================
Installing:
 transmission-common                  x86_64                  2.92-1.fc25                     fedora                  782 k
 transmission-gtk                     x86_64                  2.92-1.fc25                     fedora                  828 k

Transaction Summary
============================================================================================================================
Install  2 Packages

Total download size: 1.6 M
Installed size: 6.1 M
Is this ok [y/N]: y


Still broken.  Removed all three packages again, then:

$ sudo rpm -q --whatprovides libnatpmp.so.1
no package provides libnatpmp.so.1

$ sudo dnf provides libnatpmp.so.1
Last metadata expiration check: 1:37:11 ago on Sun Nov 27 10:10:33 2016.
libnatpmp-20150609-2.fc24.i686 : Library of The NAT Port Mapping Protocol (NAT-PMP)
Repo        : fedora

$ sudo dnf download transmission-common
$ sudo rpm -ivh transmission-common-2.92-1.fc25.x86_64.rpm 
Preparing...                          ################################# [100%]
Updating / installing...
   1:transmission-common-2.92-1.fc25  ################################# [100%]

$ transmission-show 
transmission-show: error while loading shared libraries: libnatpmp.so.1: cannot open shared object file: No such file or directory


It appears that neither dnf nor rpm know that libnatpmp is a dependency, and don&apos;t bother installing it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9932478</commentid>
    <comment_count>6</comment_count>
    <who name="Ankur Sinha (FranciscoD)">sanjay.ankur</who>
    <bug_when>2016-11-27 15:39:13 -0500</bug_when>
    <thetext>Very weird:

[asinha@ankur  ~]$ sudo dnf install transmission-gtk
[sudo] password for asinha:
Last metadata expiration check: 0:04:39 ago on Sun Nov 27 20:31:26 2016.
Dependencies resolved.
=========================================================================================================================================================================
 Package                                         Arch                               Version                                     Repository                          Size
=========================================================================================================================================================================
Installing:
 libnatpmp                                       x86_64                             20150609-2.fc24                             fedora                              19 k
 transmission-common                             x86_64                             2.92-1.fc25                                 fedora                             782 k
 transmission-gtk                                x86_64                             2.92-1.fc25                                 fedora                             828 k

Transaction Summary
=========================================================================================================================================================================
Install  3 Packages

Total download size: 1.6 M
Installed size: 6.1 M
Is this ok [y/N]:


[asinha@ankur  ~]$ sudo dnf repoquery --requires transmission-gtk | grep libnatpmp
Failed to synchronize cache for repo &apos;Dropbox&apos;, disabling.
libnatpmp.so.1()(64bit)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9932481</commentid>
    <comment_count>7</comment_count>
    <who name="Ankur Sinha (FranciscoD)">sanjay.ankur</who>
    <bug_when>2016-11-27 15:49:27 -0500</bug_when>
    <thetext>Can you please try these commands and see if you get similar results?

[asinha@ankur  ~]$ rpm -q transmission-gtk
transmission-gtk-2.92-1.fc25.x86_64

[asinha@ankur  ~]$ rpm -q transmission-gtk --requires | grep pmp
libnatpmp.so.1()(64bit)

and this - with rpm, you need to give the entire path:
[asinha@ankur  ~]$ rpm -q --whatprovides /usr/lib64/libnatpmp.so.1
libnatpmp-20150609-2.fc24.x86_64

I don&apos;t think it&apos;s an issue with the package, somehow. I&apos;ll set up a new F25 VM tomorrow and try to replicate the issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9932821</commentid>
    <comment_count>8</comment_count>
    <who name="">joshua</who>
    <bug_when>2016-11-27 20:56:45 -0500</bug_when>
    <thetext>Here you go:

$ rpm -q transmission-gtk
transmission-gtk-2.92-1.fc25.x86_64

$ rpm -q transmission-gtk --requires | grep pmp
libnatpmp.so.1()(64bit)

$ rpm -q --whatprovides /usr/lib64/libnatpmp.so.1
libnatpmp-20150609-2.fc24.x86_64


All the same packages as you have.  Strange... why do both rpm and dnf refuse to see the need to have or install libnatpmp?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10242217</commentid>
    <comment_count>9</comment_count>
    <who name="Gwyn Ciesla">limburgher</who>
    <bug_when>2017-03-15 10:56:18 -0400</bug_when>
    <thetext>Is this still reproducible?  If so, please reassign to dnf.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10243190</commentid>
    <comment_count>10</comment_count>
    <who name="Brian Harrington">bharrington</who>
    <bug_when>2017-03-15 15:01:11 -0400</bug_when>
    <thetext>On a fresh Fedora 25, I&apos;d say LGTM:

[bharrington@leviathan Downloads]$ sudo dnf install transmission-gtk
Last metadata expiration check: 1:56:12 ago on Wed Mar 15 10:04:26 2017.
Dependencies resolved.
================================================================================
 Package                  Arch        Version                 Repository   Size
================================================================================
Installing:
 libnatpmp                x86_64      20150609-2.fc24         fedora       19 k
 transmission-common      x86_64      2.92-1.fc25             fedora      782 k
 transmission-gtk         x86_64      2.92-1.fc25             fedora      828 k

Transaction Summary
================================================================================
Install  3 Packages

Total download size: 1.6 M
Installed size: 6.1 M
Is this ok [y/N]: n
Operation aborted.
[bharrington@leviathan Downloads]$ sudo dnf install transmission-daemon
Last metadata expiration check: 1:56:17 ago on Wed Mar 15 10:04:26 2017.
Dependencies resolved.
================================================================================
 Package                  Arch        Version                 Repository   Size
================================================================================
Installing:
 libnatpmp                x86_64      20150609-2.fc24         fedora       19 k
 transmission-common      x86_64      2.92-1.fc25             fedora      782 k
 transmission-daemon      x86_64      2.92-1.fc25             fedora      277 k

Transaction Summary
================================================================================
Install  3 Packages

Total download size: 1.1 M
Installed size: 3.6 M
Is this ok [y/N]: n
Operation aborted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10243675</commentid>
    <comment_count>11</comment_count>
    <who name="Gwyn Ciesla">limburgher</who>
    <bug_when>2017-03-15 17:44:09 -0400</bug_when>
    <thetext>Excellent!</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>