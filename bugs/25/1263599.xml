<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1263599</bug_id>
          
          <creation_ts>2015-09-16 05:21:00 -0400</creation_ts>
          <short_desc>The command &quot;genisoimage&quot; generates empty output if one of the pathspecs does not exist</short_desc>
          <delta_ts>2017-01-04 11:35:39 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>cdrkit</component>
          <version>25</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>RAWHIDE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Joachim Backes">joachim.backes</reporter>
          <assigned_to name="Frantisek Kluknavsky">fkluknav</assigned_to>
          <cc>admiller</cc>
    
    
    <cc>fkluknav</cc>
    
    
    <cc>hhorak</cc>
    
    
    <cc>kdudka</cc>
    
    
    <cc>kzak</cc>
    
    
    <cc>ovasik</cc>
    
    
    <cc>p</cc>
    
    
    <cc>twaugh</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>cdrkit-1.1.11-32.fc26</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-01-04 11:35:39</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8639911</commentid>
    <comment_count>0</comment_count>
    <who name="Joachim Backes">joachim.backes</who>
    <bug_when>2015-09-16 05:21:25 -0400</bug_when>
    <thetext>Description of problem:
Using genisoimage with a list of pathspecs: xxxxx and yyyyy

The problem: xxxxx exists, but yyyyy does not exist.

If running

genisoimage -R -T -J -l -allow-leading-dots -V &quot;EST2014&quot; -graft-points -o - xxxxx  yyyyy &gt;~/iso


then ~/iso will be generated, but it&apos;s empty! Only if all pathspecs are available, then the generated output iso file will not be empty.

But  the manpage says that genisoimage will &quot;merge the files found in all of the specified path components&quot;:

&quot;pathspec  is  the  path  of  the  directory  tree to be copied into the
ISO9660 filesystem.  Multiple paths can be specified,  and  genisoimage
will  merge  the files found in all of the specified path components to
form the filesystem image&quot;

So genisoimage should at least use the file xxxxx for generating the iso image!


Version-Release number of selected component (if applicable):
genisoimage-1.1.11-29.fc23.x86_64

How reproducible:
always

Steps to Reproduce:
1.

ls -l xxxxx yyyyy
ls: cannot access yyyyy: No such file or directory
-rw-rw-r-- 1 backes backes 3076096 Sep 16 10:55 xxxxx

2.

genisoimage -R -T -J -l -allow-leading-dots -V &quot;EST2014&quot; -graft-points -o - xxxxx  yyyyy &gt;~/iso


3.

Actual results:

Warning: creating filesystem that does not conform to ISO-9660.
I: -input-charset not specified, using utf-8 (detected in locale settings)
genisoimage: No such file or directory. Invalid node - &apos;yyyyy&apos;.

ls -l ~/iso
-rw-rw-r-- 1 backes backes 0 Sep 16 11:10 /home/backes/iso

Expected results:
No image with zero length!

Additional info:

If using the command with only xxxxx as pathspec, then one will get a correct output file:

genisoimage -R -T -J -l -allow-leading-dots -V &quot;EST2014&quot; -graft-points -o - xxxxx   &gt;~/iso

Warning: creating filesystem that does not conform to ISO-9660.
I: -input-charset not specified, using utf-8 (detected in locale settings)
Total translation table size: 217
Total rockridge attributes bytes: 327
Total directory bytes: 0
Path table size(bytes): 10
Max brk space used 0
1684 extents written (3 MB)


ls -l ~/iso
-rw-rw-r-- 1 backes backes 3448832 Sep 16 11:11 /home/backes/iso</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8640108</commentid>
    <comment_count>1</comment_count>
    <who name="Kamil Dudka">kdudka</who>
    <bug_when>2015-09-16 06:13:17 -0400</bug_when>
    <thetext>I fail to see how this bug is related to coreutils, switching the component to cdrkit..</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8640334</commentid>
    <comment_count>2</comment_count>
    <who name="Joachim Backes">joachim.backes</who>
    <bug_when>2015-09-16 07:15:59 -0400</bug_when>
    <thetext>(In reply to Kamil Dudka from comment #1)
&gt; I fail to see how this bug is related to coreutils, switching the component
&gt; to cdrkit..

I know, but in F23, there is no pkg called cdrkit (as previously) :-)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8640385</commentid>
    <comment_count>3</comment_count>
    <who name="Kamil Dudka">kdudka</who>
    <bug_when>2015-09-16 07:26:39 -0400</bug_when>
    <thetext>The source package is called cdrkit.  Several sub-packages are built out of it:

http://koji.fedoraproject.org/koji/buildinfo?buildID=647611

There are no components for sub-packages of Fedora packages in Bugzilla, so you have to look up the corresponding SRPM in case the mapping is not clear.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8640781</commentid>
    <comment_count>4</comment_count>
    <who name="Frantisek Kluknavsky">fkluknav</who>
    <bug_when>2015-09-16 08:58:05 -0400</bug_when>
    <thetext>Hi,

yes, genisoimage behaves as you describe, according to good principles of API design: do not hide problems, do not produce dubious results, report error if you can not fulfil user&apos;s explicit commands.

Imagine if genisoimage behaved as you want: Something in Fedora infrastructure goes wrong (can happen anytime), a directory is missing, but genisoimage happily creates an ISO. If it is something important, QA will catch it later. If it is something less obvious, we will distribute damaged media. The same applies for any automated deployment. The sooner an error is detected, the better.

The man page is ambiguous, I will clarify it. Thank you for noticing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8640838</commentid>
    <comment_count>5</comment_count>
    <who name="Joachim Backes">joachim.backes</who>
    <bug_when>2015-09-16 09:10:23 -0400</bug_when>
    <thetext>(In reply to Frantisek Kluknavsky from comment #4)
&gt; Hi,
&gt; 
&gt; yes, genisoimage behaves as you describe, according to good principles of
&gt; API design: do not hide problems, do not produce dubious results, report
&gt; error if you can not fulfil user&apos;s explicit commands.
&gt; 
&gt; Imagine if genisoimage behaved as you want: Something in Fedora
&gt; infrastructure goes wrong (can happen anytime), a directory is missing, but
&gt; genisoimage happily creates an ISO. If it is something important, QA will
&gt; catch it later. If it is something less obvious, we will distribute damaged
&gt; media. The same applies for any automated deployment. The sooner an error is
&gt; detected, the better.

From my point of view, one could issue some warnings about files which cannot be included, but generate the iso nevertheless if at least 1 pathspec is available.

Or: use some ENV variable/some additional option controlling the behaviour if some error occurs as in my described case. The default behaviour could remain as it is, so the behaviour in case of Fedora isos could be unchanged. 
&gt; 
&gt; The man page is ambiguous, I will clarify it. Thank you for noticing.
OK</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9921783</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2016-11-24 07:30:54 -0500</bug_when>
    <thetext>This message is a reminder that Fedora 23 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 23. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;23&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 23 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10034834</commentid>
    <comment_count>7</comment_count>
    <who name="Frantisek Kluknavsky">fkluknav</who>
    <bug_when>2017-01-04 11:35:39 -0500</bug_when>
    <thetext>Man page clarified.
As sad as it might be, I am not going to become new upstream and maintain a fork with different behavior. Doubly so if current behavior is not obviously wrong, more like a matter of preference.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>