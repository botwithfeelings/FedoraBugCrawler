<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1361242</bug_id>

    <creation_ts>2016-07-28 11:19:00 -0400</creation_ts>
    <short_desc>SELinux is preventing systemd from &apos;getattr&apos; accesses on the blk_file /run/systemd/inaccessible/blk.</short_desc>
    <delta_ts>2016-08-16 23:05:15 -0400</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>selinux-policy</component>
    <version>25</version>
    <rep_platform>x86_64</rep_platform>
    <op_sys>Unspecified</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>ERRATA</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard>abrt_hash:fb0c1d2df4e48e8ccb7c5d72222070d28c0abc2fe44c5abb0c7dce886b6e0ca7;VARIANT_ID=workstation;</status_whiteboard>
    <keywords></keywords>
    <priority>unspecified</priority>
    <bug_severity>unspecified</bug_severity>
    <target_milestone>---</target_milestone>

    <everconfirmed>1</everconfirmed>
    <reporter name="Joachim Frieben">jfrieben</reporter>
    <assigned_to name="Lukas Vrabec">lvrabec</assigned_to>
    <cc>dominick.grift</cc>

    <cc>dwalsh</cc>

    <cc>jsmith.fedora</cc>

    <cc>lvrabec</cc>

    <cc>medicmomcilo</cc>

    <cc>mgrepl</cc>

    <cc>nicolas.mailhot</cc>

    <cc>plautrba</cc>

    <cc>wgianopoulos</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in>selinux-policy-3.13.1-208.fc25</cf_fixed_in>
  <cf_doc_type>If docs needed, set a value</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2016-08-16 23:05:15</cf_last_closed>
<cf_type>---</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>9563971</commentid>
<comment_count>0</comment_count>
<who name="Joachim Frieben">jfrieben</who>
<bug_when>2016-07-28 11:19:07 -0400</bug_when>
<thetext>Description of problem: SELinux is preventing systemd from &apos;getattr&apos; accesses on the blk_file /run/systemd/inaccessible/blk. ***** Plugin catchall (100. confidence) suggests ************************** If you believe that systemd
should be allowed getattr access on the blk blk_file by default. Then you should report this as a bug. You can generate a local policy module to allow this access. Do allow this access for now by executing: # ausearch -c &apos;systemd&apos; --raw |
audit2allow -M my-systemd # semodule -X 300 -i my-systemd.pp Additional Information: Source Context system_u:system_r:init_t:s0 Target Context system_u:object_r:init_var_run_t:s0 Target Objects /run/systemd/inaccessible/blk [ blk_file ] Source
systemd Source Path systemd Port &lt;Unknown&gt; Host (removed) Source RPM Packages Target RPM Packages Policy RPM selinux-policy-3.13.1-204.fc25.noarch Selinux Enabled True Policy Type targeted Enforcing Mode Permissive Host Name (removed) Platform
Linux (removed) 4.7.0-2.fc25.x86_64 #1 SMP Tue Jul 26 14:26:55 UTC 2016 x86_64 x86_64 Alert Count 5 First Seen 2016-07-28 17:13:53 CEST Last Seen 2016-07-28 17:17:32 CEST Local ID 0a145d7b-5714-4af1-b9a1-257c69d8fc7e Raw Audit Messages type=AVC
msg=audit(1469719052.197:238): avc: denied { getattr } for pid=1 comm=&quot;systemd&quot; path=&quot;/run/systemd/inaccessible/blk&quot; dev=&quot;tmpfs&quot; ino=8902 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:init_var_run_t:s0
tclass=blk_file permissive=1 Hash: systemd,init_t,init_var_run_t,blk_file,getattr Version-Release number of selected component: selinux-policy-3.13.1-204.fc25.noarch Additional info: reporter: libreport-2.7.2 hashmarkername: setroubleshoot kernel:
4.7.0-2.fc25.x86_64 type: libreport</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9601830</commentid>
<comment_count>1</comment_count>
<who name="Medic Momcilo">medicmomcilo</who>
<bug_when>2016-08-10 05:52:50 -0400</bug_when>
<thetext>Description of problem: Occasionally on different tasks. Opening files. Runing dnf --refresh upgrade. ... Version-Release number of selected component: selinux-policy-3.13.1-207.fc26.noarch Additional info: reporter: libreport-2.7.2
hashmarkername: setroubleshoot kernel: 4.8.0-0.rc0.git5.1.fc26.x86_64 type: libreport</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9606586</commentid>
<comment_count>2</comment_count>
<who name="Lukas Vrabec">lvrabec</who>
<bug_when>2016-08-11 07:22:17 -0400</bug_when>
<thetext>commit f5612370266f80563a6ce7550c5f526bef1188bd Author: Dan Walsh &lt;dwalsh@redhat.com&gt; Date: Tue Aug 9 07:54:00 2016 -0400 systemd is doing a gettattr on blk and chr devices in /run Looks like devices created during boot are in
/run/systemd/inaccessible/blk /run/systemd/inaccessible/chr ls -l /run/systemd/inaccessible/ total 0 b---------. 1 root root 0, 0 Aug 7 06:07 blk c---------. 1 root root 0, 0 Aug 7 06:07 chr d---------. 2 root root 40 Aug 7 06:07 dir p---------. 1
root root 0 Aug 7 06:07 fifo ----------. 1 root root 0 Aug 7 06:07 reg s---------. 1 root root 0 Aug 7 06:07 sock Maybe could dontaudit these, but getattr access is probably ok.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9611672</commentid>
<comment_count>3</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-08-12 11:58:15 -0400</bug_when>
<thetext>selinux-policy-3.13.1-208.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to
install test updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-662487f8f1</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9612824</commentid>
<comment_count>4</comment_count>
<who name="Joachim Frieben">jfrieben</who>
<bug_when>2016-08-13 08:17:03 -0400</bug_when>
<thetext>This issue is still present. The system journal reports &quot;.. systemd[1]: Unable to fix SELinux security context of /run/systemd/inaccessible/blk: Permission denied&quot; when booted in enforcing mode, and the alert continues to be
reported by the SELinux Troubleshooter utility. The file attributes of file /run/systemd/inaccessible/blk differ between enforcing mode and permissive mode, respectively. File attributes &apos;ls -lZ /run/systemd/inaccessible/blk&apos; in enforcing
mode: b---------. 1 root root system_u:object_r:tmpfs_t:s0 0, 0 Aug 13 13:01 blk File attributes &apos;ls -lZ /run/systemd/inaccessible/blk&apos; in permissive mode: b---------. 1 root root system_u:object_r:init_var_run_t:s0 0, 0 Aug 13 13:09 blk</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9621011</commentid>
<comment_count>5</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-08-16 23:03:24 -0400</bug_when>
<thetext>selinux-policy-3.13.1-208.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>

</bug>

</bugzilla>
