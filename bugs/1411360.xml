<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1411360</bug_id>

    <creation_ts>2017-01-09 09:47:00 -0500</creation_ts>
    <short_desc>SELinux is preventing (ostnamed) from &apos;mounton&apos; accesses on the file /proc/mtrr.</short_desc>
    <delta_ts>2017-03-20 22:40:24 -0400</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>selinux-policy</component>
    <version>26</version>
    <rep_platform>x86_64</rep_platform>
    <op_sys>Unspecified</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>ERRATA</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard>abrt_hash:400081240413893e0be4eb8bf426af67f3d545516a5a17aea66e51f20bba5ada;VARIANT_ID=workstation; AcceptedBlocker AcceptedFreezeException</status_whiteboard>
    <keywords></keywords>
    <priority>unspecified</priority>
    <bug_severity>unspecified</bug_severity>
    <target_milestone>---</target_milestone>

    <blocked>1349188</blocked>

    <blocked>1349185</blocked>
    <everconfirmed>1</everconfirmed>
    <reporter name="Bill Gianopoulos">wgianopoulos</reporter>
    <assigned_to name="Lukas Vrabec">lvrabec</assigned_to>
    <cc>arturpolak1</cc>

    <cc>awilliam</cc>

    <cc>bellecodeur</cc>

    <cc>bugzilla</cc>

    <cc>c.crispino8611</cc>

    <cc>dominick.grift</cc>

    <cc>dwalsh</cc>

    <cc>flast</cc>

    <cc>gavinflower</cc>

    <cc>gmarr</cc>

    <cc>jfrieben</cc>

    <cc>luya</cc>

    <cc>lvrabec</cc>

    <cc>mgrepl</cc>

    <cc>motoskov</cc>

    <cc>nicolas.mailhot</cc>

    <cc>plautrba</cc>

    <cc>pmoore</cc>

    <cc>robatino</cc>

    <cc>rxguyrx</cc>

    <cc>samuel-rhbugs</cc>

    <cc>sgallagh</cc>

    <cc>ssekidde</cc>

    <cc>viorel.tabara</cc>

    <cc>vondruch</cc>

    <cc>znmeb</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in>selinux-policy-3.13.1-246.fc26</cf_fixed_in>
  <cf_doc_type>If docs needed, set a value</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2017-03-20 22:40:24</cf_last_closed>
<cf_type>---</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>10045652</commentid>
<comment_count>0</comment_count>
<who name="Bill Gianopoulos">wgianopoulos</who>
<bug_when>2017-01-09 09:47:10 -0500</bug_when>
<thetext>Description of problem: SELinux is preventing (ostnamed) from &apos;mounton&apos; accesses on the file /proc/mtrr. ***** Plugin catchall (100. confidence) suggests ************************** If you believe that (ostnamed) should be allowed
mounton access on the mtrr file by default. Then you should report this as a bug. You can generate a local policy module to allow this access. Do allow this access for now by executing: # ausearch -c &apos;(ostnamed)&apos; --raw | audit2allow -M
my-ostnamed # semodule -X 300 -i my-ostnamed.pp Additional Information: Source Context system_u:system_r:init_t:s0 Target Context system_u:object_r:mtrr_device_t:s0 Target Objects /proc/mtrr [ file ] Source (ostnamed) Source Path (ostnamed) Port
&lt;Unknown&gt; Host (removed) Source RPM Packages Target RPM Packages Policy RPM selinux-policy-3.13.1-231.fc26.noarch Selinux Enabled True Policy Type targeted Enforcing Mode Permissive Host Name (removed) Platform Linux (removed)
4.10.0-0.rc2.git4.1.fc26.x86_64 #1 SMP Fri Jan 6 19:24:42 UTC 2017 x86_64 x86_64 Alert Count 4 First Seen 2017-01-09 09:44:36 EST Last Seen 2017-01-09 09:45:49 EST Local ID 98f33645-99cc-46e9-a604-8aa67858db62 Raw Audit Messages type=AVC
msg=audit(1483973149.942:254): avc: denied { mounton } for pid=2101 comm=&quot;(-localed)&quot; path=&quot;/proc/mtrr&quot; dev=&quot;proc&quot; ino=4026531961 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:mtrr_device_t:s0
tclass=file permissive=1 Hash: (ostnamed),init_t,mtrr_device_t,file,mounton Version-Release number of selected component: selinux-policy-3.13.1-231.fc26.noarch Additional info: component: selinux-policy reporter: libreport-2.9.0 hashmarkername:
setroubleshoot kernel: 4.10.0-0.rc2.git4.1.fc26.x86_64 type: libreport</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10063401</commentid>
<comment_count>1</comment_count>
<who name="Stephen Gallagher">sgallagh</who>
<bug_when>2017-01-14 07:25:45 -0500</bug_when>
<thetext>Description of problem: I updated to Rawhide today and logging in to GNOME Session (Wayland or X11) would just hang. Setting SELinux to permissive mode allowed me to log in successfully. Version-Release number of selected component:
selinux-policy-3.13.1-233.fc26.noarch Additional info: reporter: libreport-2.9.0 hashmarkername: setroubleshoot kernel: 4.10.0-0.rc3.git1.1.fc26.x86_64 type: libreport</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10085584</commentid>
<comment_count>2</comment_count>
<who name="Nivag">gavinflower</who>
<bug_when>2017-01-20 19:55:40 -0500</bug_when>
<thetext>Description of problem: Just brought up this Rawhide instance (VM) after and extensive dnf upgrade, no idea if this access behaviour is valid or not! Additional info: reporter: libreport-2.9.0 hashmarkername: setroubleshoot kernel:
4.10.0-0.rc4.git2.1.fc26.x86_64 type: libreport</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10100355</commentid>
<comment_count>3</comment_count>
<who name="">arturpolak1</who>
<bug_when>2017-01-26 18:27:05 -0500</bug_when>
<thetext>Description of problem: I just open gnome-tweak-tool after upgrading to fedora 26 using fedora-upgrade... Version-Release number of selected component: selinux-policy-3.13.1-235.fc26.noarch Additional info: reporter: libreport-2.9.0
hashmarkername: setroubleshoot kernel: 4.10.0-0.rc5.git1.1.fc26.x86_64 type: libreport</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10103373</commentid>
<comment_count>4</comment_count>
<who name="Christian Crispino">c.crispino8611</who>
<bug_when>2017-01-28 05:52:40 -0500</bug_when>
<thetext>*** Bug 1417368 has been marked as a duplicate of this bug. ***</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10119428</commentid>
<comment_count>5</comment_count>
<who name="Bill Gianopoulos">wgianopoulos</who>
<bug_when>2017-02-03 10:05:26 -0500</bug_when>
<thetext>OK&gt; Exactly how is this not an Alpha blocker? This issue prevents fedora26 being at all usable unless you either disable selinux entirely, change it to permissive or install local override policy.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10119965</commentid>
<comment_count>6</comment_count>
<who name="Lukas Vrabec">lvrabec</who>
<bug_when>2017-02-03 11:49:57 -0500</bug_when>
<thetext>Could you please try this issue with: https://koji.fedoraproject.org/koji/buildinfo?buildID=837901 Thank you.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10191857</commentid>
<comment_count>7</comment_count>
<who name="Fedora End Of Life">jkurik</who>
<bug_when>2017-02-28 05:54:50 -0500</bug_when>
<thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 26 development cycle. Changing version to &apos;26&apos;.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10200363</commentid>
<comment_count>8</comment_count>
<who name="Viorel Tabara">viorel.tabara</who>
<bug_when>2017-03-01 23:15:50 -0500</bug_when>
<thetext>(In reply to Lukas Vrabec from comment #6) &gt; Could you please try this issue with: &gt; https://koji.fedoraproject.org/koji/buildinfo?buildID=837901 &gt; Still happening in a later version: [root@omiday ~]# rpm -qa --last selinux-policy
selinux-policy-3.13.1-241.fc26.noarch Wed 22 Feb 2017 12:14:33 PM MST [root@omiday ~]# ausearch -m avc -ts today -c ostnamed ---- time-&gt;Wed Mar 1 21:03:55 2017 type=AVC msg=audit(1488427435.601:2457): avc: denied { mounton } for pid=23675
comm=&quot;(ostnamed)&quot; path=&quot;/proc/mtrr&quot; dev=&quot;proc&quot; ino=4026531961 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:mtrr_device_t:s0 tclass=file permissive=0</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10203327</commentid>
<comment_count>9</comment_count>
<who name="Luya Tshimbalanga">luya</who>
<bug_when>2017-03-02 13:46:58 -0500</bug_when>
<thetext>Description of problem: Starting the session Version-Release number of selected component: selinux-policy-3.13.1-241.fc26.noarch Additional info: reporter: libreport-2.8.0 hashmarkername: setroubleshoot kernel:
4.11.0-0.rc0.git5.1.fc26.x86_64 type: libreport</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10208070</commentid>
<comment_count>10</comment_count>
<who name="Adam Williamson">awilliam</who>
<bug_when>2017-03-03 23:22:56 -0500</bug_when>
<thetext>Yeah, I&apos;m still seeing this on my own box, and all openQA tests still run into it all the time. Bill: the denial doesn&apos;t have any immediately obvious consequences, for me; how is it &apos;preventing fedora26 being at all
usable&apos; for you? It is at least a clear Final blocker, though, per &quot;There must be no SELinux denial notifications or crash notifications on boot of or during installation from a release-blocking live image, or at first login after a default
install of a release-blocking desktop.&quot; - this shows up as an AVC notification on the desktop.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10208265</commentid>
<comment_count>11</comment_count>
<who name="Bill Gianopoulos">wgianopoulos</who>
<bug_when>2017-03-04 06:18:16 -0500</bug_when>
<thetext>(In reply to Adam Williamson from comment #10) &gt; Yeah, I&apos;m still seeing this on my own box, and all openQA tests still run &gt; into it all the time. &gt; &gt; Bill: the denial doesn&apos;t have any immediately obvious consequences,
for me; &gt; how is it &apos;preventing fedora26 being at all usable&apos; for you? Actually this was based on comment 1, so this should be a question for Stephen Gallagher</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10210120</commentid>
<comment_count>12</comment_count>
<who name="Andrey Motoshkov">motoskov</who>
<bug_when>2017-03-06 02:29:31 -0500</bug_when>
<thetext>***** Plugin catchall (100. confidence) suggests ************************** If you believe that (ostnamed) should be allowed mounton access on the mtrr file by default. Then you should report this as a bug. You can generate a local policy
module to allow this access. Do allow this access for now by executing: # ausearch -c &apos;(ostnamed)&apos; --raw | audit2allow -M my-ostnamed # semodule -X 300 -i my-ostnamed.pp Additional Information: Source Context system_u:system_r:init_t:s0
Target Context system_u:object_r:mtrr_device_t:s0 Target Objects /proc/mtrr [ file ] Source (ostnamed) Source Path (ostnamed) Port &lt;Unknown&gt; Host (removed) Source RPM Packages Target RPM Packages Policy RPM selinux-policy-3.13.1-241.fc26.noarch
Selinux Enabled True Policy Type targeted Enforcing Mode Enforcing Host Name (removed) Platform Linux (removed) 4.11.0-0.rc0.git9.1.fc26.x86_64 #1 SMP Fri Mar 3 16:57:16 UTC 2017 x86_64 x86_64 Alert Count 24 First Seen 2017-03-05 11:36:13 IST Last
Seen 2017-03-06 09:08:51 IST Local ID eb618873-5d6a-40dc-a48b-cbccf7447b07 Raw Audit Messages type=AVC msg=audit(1488784131.869:254): avc: denied { mounton } for pid=2340 comm=&quot;(-localed)&quot; path=&quot;/proc/mtrr&quot; dev=&quot;proc&quot;
ino=4026531973 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:mtrr_device_t:s0 tclass=file permissive=0 Hash: (ostnamed),init_t,mtrr_device_t,file,mounton</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10212153</commentid>
<comment_count>13</comment_count>
<who name="Stephen Gallagher">sgallagh</who>
<bug_when>2017-03-06 10:50:57 -0500</bug_when>
<thetext>(In reply to Bill Gianopoulos from comment #11) &gt; (In reply to Adam Williamson from comment #10) &gt; &gt; Yeah, I&apos;m still seeing this on my own box, and all openQA tests still run &gt; &gt; into it all the time. &gt; &gt; &gt; &gt;
Bill: the denial doesn&apos;t have any immediately obvious consequences, for me; &gt; &gt; how is it &apos;preventing fedora26 being at all usable&apos; for you? &gt; &gt; Actually this was based on comment 1, so this should be a question for &gt;
Stephen Gallagher This was one of several systemd-related SELinux denials I was getting at the time. I&apos;m not sure which *specific* one was causing me to be unable to log into the GNOME session, but it appears not to be the case any more (at
least as of today).</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10213618</commentid>
<comment_count>14</comment_count>
<who name="Geoffrey Marr">gmarr</who>
<bug_when>2017-03-06 13:38:54 -0500</bug_when>
<thetext>Discussed during the 2017-03-06 blocker review meeting: [1] The decision to classify this bug as an Accepted Blocker (Final) and Accepted Freeze Exception (Alpha) was made as it violates the following blocker criteria: &quot;There must be no
SELinux denial notifications or crash notifications on boot of or during installation from a release-blocking live image, or at first login after a default install of a release-blocking desktop&quot; It is also widespread enough to warrant a Freeze
Exception status. [1] https://meetbot.fedoraproject.org/fedora-blocker-review/2017-03-06/f26-blocker-review.2017-03-06-17.02.txt</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10227141</commentid>
<comment_count>15</comment_count>
<who name="M. Edward (Ed) Borasky">znmeb</who>
<bug_when>2017-03-09 23:57:45 -0500</bug_when>
<thetext>Description of problem: Booting up a Fedora 26 virtual machine (hosted on Fedora 25 Virtual Machine Manager) with automatic login for the user account. I&apos;m not sure if this happened during boot up or during login. Version-Release number
of selected component: selinux-policy-3.13.1-241.fc26.noarch Additional info: reporter: libreport-2.9.0 hashmarkername: setroubleshoot kernel: 4.11.0-0.rc0.git9.1.fc26.x86_64 type: libreport</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10230551</commentid>
<comment_count>16</comment_count>
<who name="Christian Crispino">c.crispino8611</who>
<bug_when>2017-03-11 13:27:13 -0500</bug_when>
<thetext>Description of problem: These error messages appear when I download something from Firefox. I don&apos;t know if there is really a security hole or these alarms aren&apos;t concerned with security. Version-Release number of selected
component: selinux-policy-3.13.1-244.fc26.noarch Additional info: reporter: libreport-2.9.0 hashmarkername: setroubleshoot kernel: 4.11.0-0.rc1.git0.1.fc26.x86_64 type: libreport</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10230556</commentid>
<comment_count>17</comment_count>
<who name="Bill Gianopoulos">wgianopoulos</who>
<bug_when>2017-03-11 13:36:28 -0500</bug_when>
<thetext>(In reply to Christian Crispino from comment #16) &gt; Description of problem: &gt; These error messages appear when I download something from Firefox. I don&apos;t &gt; know if there is really a security hole or these alarms aren&apos;t
concerned &gt; with security. &gt; &gt; Version-Release number of selected component: &gt; selinux-policy-3.13.1-244.fc26.noarch &gt; &gt; Additional info: &gt; reporter: libreport-2.9.0 &gt; hashmarkername: setroubleshoot &gt; kernel:
4.11.0-0.rc1.git0.1.fc26.x86_64 &gt; type: libreport OH this is really interesting as Firefox is an 11 application. I wonder if the people who see this upon login all have desktop icon display enabled which seems to result in an X11 overlay on the
desktop.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10230668</commentid>
<comment_count>18</comment_count>
<who name="Adam Williamson">awilliam</who>
<bug_when>2017-03-11 18:54:26 -0500</bug_when>
<thetext>No. The AVC happens to openQA tests just on boot, even non-desktop ones. e.g. https://openqa.fedoraproject.org/tests/62979#step/_console_avc_crash/11 , which is just a minimal install and boot test.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10247351</commentid>
<comment_count>19</comment_count>
<who name="Christian Crispino">c.crispino8611</who>
<bug_when>2017-03-16 16:08:50 -0400</bug_when>
<thetext>(In reply to Bill Gianopoulos from comment #17) &gt; (In reply to Christian Crispino from comment #16) &gt; &gt; Description of problem: &gt; &gt; These error messages appear when I download something from Firefox. I don&apos;t &gt; &gt;
know if there is really a security hole or these alarms aren&apos;t concerned &gt; &gt; with security. &gt; &gt; &gt; &gt; Version-Release number of selected component: &gt; &gt; selinux-policy-3.13.1-244.fc26.noarch &gt; &gt; &gt; &gt; Additional
info: &gt; &gt; reporter: libreport-2.9.0 &gt; &gt; hashmarkername: setroubleshoot &gt; &gt; kernel: 4.11.0-0.rc1.git0.1.fc26.x86_64 &gt; &gt; type: libreport &gt; &gt; OH this is really interesting as Firefox is an 11 application. I wonder if &gt;
the people who see this upon login all have desktop icon display enabled &gt; which seems to result in an X11 overlay on the desktop. These messages appear in SELinux issues application, not in X11. However the system is usable.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10251087</commentid>
<comment_count>20</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2017-03-17 18:48:09 -0400</bug_when>
<thetext>selinux-policy-3.13.1-245.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-58233b1a16</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10252368</commentid>
<comment_count>21</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2017-03-19 10:21:40 -0400</bug_when>
<thetext>selinux-policy-3.13.1-246.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to
install test updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-58233b1a16</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10253085</commentid>
<comment_count>22</comment_count>
<who name="Viorel Tabara">viorel.tabara</who>
<bug_when>2017-03-20 01:45:34 -0400</bug_when>
<thetext>(In reply to Christian Crispino from comment #16) &gt; Description of problem: &gt; These error messages appear when I download something from Firefox. Same here and the update in Comment 21 fixes it.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10257633</commentid>
<comment_count>23</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2017-03-20 22:40:24 -0400</bug_when>
<thetext>selinux-policy-3.13.1-246.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>

</bug>

</bugzilla>
