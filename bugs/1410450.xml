<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1410450</bug_id>

    <creation_ts>2017-01-05 09:12:00 -0500</creation_ts>
    <short_desc>pwscore fails on missing /usr/share/cracklib/pw_dict.pwd.gz</short_desc>
    <delta_ts>2017-01-05 10:06:04 -0500</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>libpwquality</component>
    <version>25</version>
    <rep_platform>All</rep_platform>
    <op_sys>Linux</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>WONTFIX</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard></status_whiteboard>
    <keywords></keywords>
    <priority>unspecified</priority>
    <bug_severity>low</bug_severity>
    <target_milestone>---</target_milestone>

    <everconfirmed>1</everconfirmed>
    <reporter name="Martin Pitt">mpitt</reporter>
    <assigned_to name="Tomas Mraz">tmraz</assigned_to>
    <cc>tmraz</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in></cf_fixed_in>
  <cf_doc_type>If docs needed, set a value</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2017-01-05 09:28:05</cf_last_closed>
<cf_type>Bug</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>10037496</commentid>
<comment_count>0</comment_count>
<who name="Martin Pitt">mpitt</who>
<bug_when>2017-01-05 09:12:00 -0500</bug_when>
<thetext>Description of problem: In Fedora 25, libpwquality does not depend any more on cracklib-dicts. That package is not installed in a minimal environment such as mock or mkosi, and &quot;rpm -e cracklib-dicts&quot; even works in a reasonably fat
install. Version-Release number of selected component (if applicable): 1.3.0-6.fc25.x86_64 How reproducible: On Fedora 25: $ mock --init $ mock --shell &apos;echo foobar123 | pwscore&apos; [...] /usr/share/cracklib/pw_dict.pwd.gz: No such file or
directory Password quality check failed: The password fails the dictionary check - error loading dictionary Actual results: pwscore fails on Fedora 25 without cracklib-dicts. This e. g. breaks cockpit when trying to create a new user, without
/usr/share/cracklib/pw_dict.pwd.gz the user creation never succeeds (see https://github.com/cockpit-project/cockpit/issues/5684). This is not an issue in RHEL/centos 7: there cracklib-dicts is a dependency of libpwquality. Expected results: If the
removal of the cracklib-dicts dependency of libpwquality was deliberate, then pwscore should gracefully fall back, i. e. just skip the dictionary check. Otherwise the dependency should be put back.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10037563</commentid>
<comment_count>1</comment_count>
<who name="Tomas Mraz">tmraz</who>
<bug_when>2017-01-05 09:28:05 -0500</bug_when>
<thetext>No, the dependency is a weak one via Recommends so dnf will normally install it but you should be able to uninstall it if you do not need the dictionary check. And you can configure libpwquality to skip the dictionary check via setting
dictcheck = 0 in /etc/security/pwquality.conf but we do not want that to be default.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10037657</commentid>
<comment_count>2</comment_count>
<who name="Martin Pitt">mpitt</who>
<bug_when>2017-01-05 09:56:54 -0500</bug_when>
<thetext>A weak dependency is fine, but then it shouldn&apos;t fail hard if it isn&apos;t installed, but gracefully fall back. Or something should pull it into mock/mkosi and similarly small environments as well..</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10037685</commentid>
<comment_count>3</comment_count>
<who name="Tomas Mraz">tmraz</who>
<bug_when>2017-01-05 10:06:04 -0500</bug_when>
<thetext>Gracefully falling back would mean that incorrectly or inadvertently missing dictionary would get undetected. I do not want that.</thetext>
</long_desc>

</bug>

</bugzilla>
