<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1395040</bug_id>

    <creation_ts>2016-11-14 21:00:00 -0500</creation_ts>
    <short_desc>vagrant nfs exports race</short_desc>
    <delta_ts>2016-11-30 00:27:32 -0500</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>vagrant</component>
    <version>24</version>
    <rep_platform>All</rep_platform>
    <op_sys>Unspecified</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>ERRATA</resolution>

    <see_also>https://bugzilla.redhat.com/show_bug.cgi?id=1392727</see_also>
    <bug_file_loc></bug_file_loc>
    <status_whiteboard></status_whiteboard>
    <keywords>Security</keywords>
    <priority>unspecified</priority>
    <bug_severity>high</bug_severity>
    <target_milestone>---</target_milestone>

    <everconfirmed>1</everconfirmed>
    <reporter name="Aron Griffis">aron</reporter>
    <assigned_to name="VÃ­t Ondruch">vondruch</assigned_to>
    <cc>security-response-team</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in>vagrant-1.8.1-3.fc23 vagrant-1.8.1-5.fc24 vagrant-1.8.5-2.fc25</cf_fixed_in>
  <cf_doc_type>If docs needed, set a value</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2016-11-29 18:52:42</cf_last_closed>
<cf_type>Bug</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>
<external_bugs name="Github">https://github.com/mitchellh/vagrant/issues/7938</external_bugs>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>9890639</commentid>
<comment_count>0</comment_count>
<who name="Aron Griffis">aron</who>
<bug_when>2016-11-14 21:00:32 -0500</bug_when>
<thetext>Description of problem: vagrant has a tempfile race that can allow an unprivileged local user to insert arbitrary nfs exports. Version-Release number of selected component (if applicable): anything older than 1.8.7 Steps to Reproduce: See
https://github.com/mitchellh/vagrant/issues/7938 Here&apos;s the exploit steps I provided to hashicorp&apos;s security email: 1. Attacker creates file ahead of time, writable so cp will succeed. touch /tmp/exports chmod a+rw /tmp/exports 2. Attacker
uses inotifywait to watch for file modifications (indicating the cp) and immediately substitute or append an export that allows them to access files they shouldn&apos;t. 3. Vagrant user with sudo privs does &quot;vagrant up&quot;. This does the
cp/sed sequence on /tmp/exports. (If sudo asks for a password then the race is exceptionally in the attacker&apos;s favor) Additional info: It&apos;s fixed in 1.8.7.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9903417</commentid>
<comment_count>1</comment_count>
<who name="Andrej Nemec">anemec</who>
<bug_when>2016-11-18 08:39:33 -0500</bug_when>
<thetext>This is already public and has an upstream patch available, we can update the packages in Fedora to the latest upstream version to prevent it. There is no CVE assignment and the issue is lower because it needs local access.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9903456</commentid>
<comment_count>2</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-11-18 08:50:06 -0500</bug_when>
<thetext>vagrant-1.8.5-2.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-5a625412c2</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9903458</commentid>
<comment_count>3</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-11-18 08:50:46 -0500</bug_when>
<thetext>vagrant-1.8.1-5.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-24ffcb9a47</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9903463</commentid>
<comment_count>4</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-11-18 08:51:31 -0500</bug_when>
<thetext>vagrant-1.8.1-3.fc23 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2016-7b335750d8</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9904651</commentid>
<comment_count>5</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-11-18 15:27:22 -0500</bug_when>
<thetext>vagrant-1.8.5-2.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to install test
updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-5a625412c2</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9905209</commentid>
<comment_count>6</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-11-19 03:56:29 -0500</bug_when>
<thetext>vagrant-1.8.1-3.fc23 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to install test
updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-7b335750d8</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9905586</commentid>
<comment_count>7</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-11-19 13:50:30 -0500</bug_when>
<thetext>vagrant-1.8.1-5.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to install test
updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-24ffcb9a47</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9940905</commentid>
<comment_count>8</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-11-29 18:52:42 -0500</bug_when>
<thetext>vagrant-1.8.1-3.fc23 has been pushed to the Fedora 23 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9941246</commentid>
<comment_count>9</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-11-29 22:52:05 -0500</bug_when>
<thetext>vagrant-1.8.1-5.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9941406</commentid>
<comment_count>10</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-11-30 00:27:32 -0500</bug_when>
<thetext>vagrant-1.8.5-2.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>

</bug>

</bugzilla>
