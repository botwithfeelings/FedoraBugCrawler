<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1322599</bug_id>
          
          <creation_ts>2016-03-30 16:58:00 -0400</creation_ts>
          <short_desc>debuginfo-install installs needless packages</short_desc>
          <delta_ts>2017-07-07 19:08:01 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>dnf-plugins-core</component>
          <version>26</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Triaged</keywords>
          <priority>low</priority>
          <bug_severity>low</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jan Kratochvil">jan.kratochvil</reporter>
          <assigned_to name="Jaroslav Rohel">jrohel</assigned_to>
          <cc>dgilbert</cc>
    
    
    <cc>dkupka</cc>
    
    
    <cc>ignatenko</cc>
    
    
    <cc>jan.kratochvil</cc>
    
    
    <cc>jmracek</cc>
    
    
    <cc>jrohel</cc>
    
    
    <cc>mluscon</cc>
    
    
    <cc>packaging-team-maint</cc>
    
    
    <cc>pnemade</cc>
    
    
    <cc>RadekHolyPublic</cc>
    
    
    <cc>rdieter</cc>
    
    
    <cc>sudhir</cc>
    
    
    <cc>vmukhame</cc>
    
    
    <cc>woiling</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>dnf-plugins-core-2.1.2-2.fc26</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-07-07 19:08:01</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9193133</commentid>
    <comment_count>0</comment_count>
    <who name="Jan Kratochvil">jan.kratochvil</who>
    <bug_when>2016-03-30 16:58:15 -0400</bug_when>
    <thetext>Description of problem:
dnf debuginfo-install installs more *-debuginfo packages than asked for.
I have no idea why because rpm -q --requires even does not print anything for the *-debuginfo packages.

Version-Release number of selected component (if applicable):
dnf-plugins-core-0.1.19-1.fc24.noarch

How reproducible:
Tried once, probably always.

Steps to Reproduce:
dnf debuginfo-install plasma-workspace-5.5.5-7.fc24.x86_64

Actual results:
Install  202 Packages
Total download size: 1.0 G
Installed size: 4.2 G

Expected results:
Install  1 Package
Total download size: 31 M
Installed size: 122 M

Additional info:
dnf debuginfo-install glibc-2.23.1-5.fc24.x86_64 bzip2-libs-1.0.6-20.fc24.x86_64 dbus-libs-1.11.2-1.fc24.x86_64 expat-2.1.0-13.fc24.x86_64 freetype-2.6.3-2.fc24.x86_64 glib2-2.48.0-1.fc24.x86_64 graphite2-1.3.6-1.fc24.x86_64 harfbuzz-1.2.3-1.fc24.x86_64 keyutils-libs-1.5.9-8.fc24.x86_64 kf5-karchive-5.20.0-1.fc24.x86_64 kf5-kauth-5.20.0-1.fc24.x86_64 kf5-kcodecs-5.20.0-1.fc24.x86_64 kf5-kcompletion-5.20.0-1.fc24.x86_64 kf5-kconfig-core-5.20.0-1.fc24.x86_64 kf5-kconfig-gui-5.20.0-1.fc24.x86_64 kf5-kconfigwidgets-5.20.0-1.fc24.x86_64 kf5-kcoreaddons-5.20.0-1.fc24.x86_64 kf5-kdbusaddons-5.20.0-1.fc24.x86_64 kf5-kdeclarative-5.20.0-1.fc24.x86_64 kf5-kguiaddons-5.20.0-1.fc24.x86_64 kf5-ki18n-5.20.0-1.fc24.x86_64 kf5-kiconthemes-5.20.0-1.fc24.x86_64 kf5-kio-core-libs-5.20.0-1.fc24.x86_64 kf5-kio-widgets-libs-5.20.0-1.fc24.x86_64 kf5-kitemviews-5.20.0-1.fc24.x86_64 kf5-kjobwidgets-5.20.0-1.fc24.x86_64 kf5-kpackage-5.20.0-1.fc24.x86_64 kf5-kservice-5.20.0-1.fc24.x86_64 kf5-kwidgetsaddons-5.20.0-1.fc24.x86_64 kf5-kwindowsystem-5.20.0-1.fc24.x86_64 krb5-libs-1.14.1-3.fc24.x86_64 libX11-1.6.3-3.fc24.x86_64 libXau-1.0.8-6.fc24.x86_64 libXdamage-1.1.4-8.fc24.x86_64 libXext-1.3.3-4.fc24.x86_64 libXfixes-5.0.1-6.fc24.x86_64 libXrender-0.9.9-3.fc24.x86_64 libXxf86vm-1.1.4-3.fc24.x86_64 libacl-2.2.52-11.fc24.x86_64 libattr-2.4.47-16.fc24.x86_64 libcap-2.24-9.fc24.x86_64 libcom_err-1.42.13-4.fc24.x86_64 libdrm-2.4.67-3.fc24.x86_64 libffi-3.1-9.fc24.x86_64 libgcc-6.0.0-0.18.fc24.x86_64 libgcrypt-1.6.4-2.fc24.x86_64 libgpg-error-1.21-2.fc24.x86_64 libicu-56.1-3.fc24.x86_64 libmodman-2.0.1-12.fc24.x86_64 libpng-1.6.21-2.fc24.x86_64 libproxy-0.4.12-2.fc24.x86_64 libselinux-2.5-2.fc24.x86_64 libstdc++-6.0.0-0.18.fc24.x86_64 libxcb-1.11.1-2.fc24.x86_64 libxshmfence-1.2-3.fc24.x86_64 lz4-r131-2.fc24.x86_64 mesa-libGL-11.2.0-0.devel.12.24ea81a.fc24.x86_64 mesa-libglapi-11.2.0-0.devel.12.24ea81a.fc24.x86_64 openssl-libs-1.0.2g-3.fc24.x86_64 pcre-8.38-11.fc24.x86_64 qt5-qtbase-5.6.0-9.fc24.x86_64 qt5-qtbase-gui-5.6.0-9.fc24.x86_64 qt5-qtdeclarative-5.6.0-4.fc24.x86_64 qt5-qtsvg-5.6.0-3.fc24.x86_64 qt5-qtx11extras-5.6.0-3.fc24.x86_64 systemd-libs-229-7.fc24.x86_64 xcb-util-keysyms-0.4.0-3.fc24.x86_64 xz-libs-5.2.2-2.fc24.x86_64 zlib-1.2.8-10.fc24.x86_64
 = 69 packages
Install  108 Packages
Total download size: 734 M
Installed size: 2.9 G

vs. sufficient:

dnf --enablerepo=&apos;*debug*&apos; install $(rpm -q --qf &apos;%{sourcerpm}\n&apos; glibc-2.23.1-5.fc24.x86_64 bzip2-libs-1.0.6-20.fc24.x86_64 dbus-libs-1.11.2-1.fc24.x86_64 expat-2.1.0-13.fc24.x86_64 freetype-2.6.3-2.fc24.x86_64 glib2-2.48.0-1.fc24.x86_64 graphite2-1.3.6-1.fc24.x86_64 harfbuzz-1.2.3-1.fc24.x86_64 keyutils-libs-1.5.9-8.fc24.x86_64 kf5-karchive-5.20.0-1.fc24.x86_64 kf5-kauth-5.20.0-1.fc24.x86_64 kf5-kcodecs-5.20.0-1.fc24.x86_64 kf5-kcompletion-5.20.0-1.fc24.x86_64 kf5-kconfig-core-5.20.0-1.fc24.x86_64 kf5-kconfig-gui-5.20.0-1.fc24.x86_64 kf5-kconfigwidgets-5.20.0-1.fc24.x86_64 kf5-kcoreaddons-5.20.0-1.fc24.x86_64 kf5-kdbusaddons-5.20.0-1.fc24.x86_64 kf5-kdeclarative-5.20.0-1.fc24.x86_64 kf5-kguiaddons-5.20.0-1.fc24.x86_64 kf5-ki18n-5.20.0-1.fc24.x86_64 kf5-kiconthemes-5.20.0-1.fc24.x86_64 kf5-kio-core-libs-5.20.0-1.fc24.x86_64 kf5-kio-widgets-libs-5.20.0-1.fc24.x86_64 kf5-kitemviews-5.20.0-1.fc24.x86_64 kf5-kjobwidgets-5.20.0-1.fc24.x86_64 kf5-kpackage-5.20.0-1.fc24.x86_64 kf5-kservice-5.20.0-1.fc24.x86_64 kf5-kwidgetsaddons-5.20.0-1.fc24.x86_64 kf5-kwindowsystem-5.20.0-1.fc24.x86_64 krb5-libs-1.14.1-3.fc24.x86_64 libX11-1.6.3-3.fc24.x86_64 libXau-1.0.8-6.fc24.x86_64 libXdamage-1.1.4-8.fc24.x86_64 libXext-1.3.3-4.fc24.x86_64 libXfixes-5.0.1-6.fc24.x86_64 libXrender-0.9.9-3.fc24.x86_64 libXxf86vm-1.1.4-3.fc24.x86_64 libacl-2.2.52-11.fc24.x86_64 libattr-2.4.47-16.fc24.x86_64 libcap-2.24-9.fc24.x86_64 libcom_err-1.42.13-4.fc24.x86_64 libdrm-2.4.67-3.fc24.x86_64 libffi-3.1-9.fc24.x86_64 libgcc-6.0.0-0.18.fc24.x86_64 libgcrypt-1.6.4-2.fc24.x86_64 libgpg-error-1.21-2.fc24.x86_64 libicu-56.1-3.fc24.x86_64 libmodman-2.0.1-12.fc24.x86_64 libpng-1.6.21-2.fc24.x86_64 libproxy-0.4.12-2.fc24.x86_64 libselinux-2.5-2.fc24.x86_64 libstdc++-6.0.0-0.18.fc24.x86_64 libxcb-1.11.1-2.fc24.x86_64 libxshmfence-1.2-3.fc24.x86_64 lz4-r131-2.fc24.x86_64 mesa-libGL-11.2.0-0.devel.12.24ea81a.fc24.x86_64 mesa-libglapi-11.2.0-0.devel.12.24ea81a.fc24.x86_64 openssl-libs-1.0.2g-3.fc24.x86_64 pcre-8.38-11.fc24.x86_64 qt5-qtbase-5.6.0-9.fc24.x86_64 qt5-qtbase-gui-5.6.0-9.fc24.x86_64 qt5-qtdeclarative-5.6.0-4.fc24.x86_64 qt5-qtsvg-5.6.0-3.fc24.x86_64 qt5-qtx11extras-5.6.0-3.fc24.x86_64 systemd-libs-229-7.fc24.x86_64 xcb-util-keysyms-0.4.0-3.fc24.x86_64 xz-libs-5.2.2-2.fc24.x86_64 zlib-1.2.8-10.fc24.x86_64|sed &apos;s/\(-[^-]*-[^-]*\)\.src\.rpm$/-debuginfo\1.x86_64/&apos;|sed -e &apos;s/dbus-debuginfo-1.11.2-/dbus-debuginfo-1:1.11.2-/&apos; -e &apos;s/libpng-debuginfo-1.6.21-/libpng-debuginfo-2:1.6.21-/&apos; -e &apos;s/openssl-debuginfo-1.0.2g-/openssl-debuginfo-1:1.0.2g-/&apos;)
# Those sed -e at the end are due to:
#   https://bugzilla.redhat.com/show_bug.cgi?id=1286877 - Cannot specify package installation versions without including epoch using DNF
Install  66 Packages
Total download size: 680 M
Installed size: 2.8 G

debuginfo-install installed these needless packages:
Install  46 Packages
Total download size: 320 M
Installed size: 1.2 G

Sure it is not too serious problem.

I do not know if it behaves differently in different version, I have tried just this F-24 dnf version.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9203673</commentid>
    <comment_count>1</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-04-04 04:36:59 -0400</bug_when>
    <thetext>Hi Jan,

In general debuginfo-install plugins works like:

1. Get all packages which you want to install debuginfo (in your case - plasma-workspace)
2. Get all depepndecies (including dependencies of dependencies)
3. Install debuginfo for all of them.

Probably we should introduce some flag which will install only what you requested. What do you think?

Regarding output of rpm -q --reques it&apos;s more about RPM, not DNF. It just don&apos;t have dependencies between debuginfo packages (in fact those are just +- source code).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9204551</commentid>
    <comment_count>2</comment_count>
    <who name="Jan Kratochvil">jan.kratochvil</who>
    <bug_when>2016-04-04 09:36:47 -0400</bug_when>
    <thetext>(In reply to Igor Gnatenko from comment #1)
&gt; In general debuginfo-install plugins works like:
&gt; 2. Get all depepndecies (including dependencies of dependencies)

OK, I did not know that.


&gt; Probably we should introduce some flag which will install only what you
&gt; requested. What do you think?

OK, yes, that looks as the best idea.  GDB can then suggest the DNF command with such a flag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9204604</commentid>
    <comment_count>3</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-04-04 09:51:49 -0400</bug_when>
    <thetext>(In reply to Jan Kratochvil from comment #2)
&gt; (In reply to Igor Gnatenko from comment #1)
&gt; &gt; In general debuginfo-install plugins works like:
&gt; &gt; 2. Get all depepndecies (including dependencies of dependencies)
&gt; 
&gt; OK, I did not know that.
&gt; 
&gt; 
&gt; &gt; Probably we should introduce some flag which will install only what you
&gt; &gt; requested. What do you think?
&gt; 
&gt; OK, yes, that looks as the best idea.  GDB can then suggest the DNF command
&gt; with such a flag.

Will add this flag.

Is there any ideas how gdb is generating that list?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9206695</commentid>
    <comment_count>4</comment_count>
    <who name="Jan Kratochvil">jan.kratochvil</who>
    <bug_when>2016-04-05 00:33:50 -0400</bug_when>
    <thetext>(In reply to Igor Gnatenko from comment #3)
&gt; Is there any ideas how gdb is generating that list?

Yes, it was written by me and it is still a Fedora/RHEL-only patch so far.
http://pkgs.fedoraproject.org/cgit/rpms/gdb.git/tree/gdb-6.6-buildid-locate-rpm.patch

Missing separate debuginfos, use: dnf debuginfo-install ...
For each {main executable,shared library} absolute filename it does:
  rpm -qf THATNAME
and for those dat do not have &quot;stripsuffix(%{sourcerpm})-debuginfo.%{arch}&quot; installed it appends: %{name}-%{version}-%{release}.%{arch}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9206718</commentid>
    <comment_count>5</comment_count>
    <who name="Jan Kratochvil">jan.kratochvil</who>
    <bug_when>2016-04-05 00:49:35 -0400</bug_when>
    <thetext>(In reply to Jan Kratochvil from comment #4)
&gt; For each {main executable,shared library} absolute filename it does:

Those shared libraries are iterated from those really loaded in the debuggee&apos;s memory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9531251</commentid>
    <comment_count>6</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-07-20 05:07:49 -0400</bug_when>
    <thetext>*** Bug 1265273 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9942123</commentid>
    <comment_count>7</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-11-30 04:46:39 -0500</bug_when>
    <thetext>*** Bug 1294471 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10098607</commentid>
    <comment_count>8</comment_count>
    <who name="Dr. David Alan Gilbert">dgilbert</who>
    <bug_when>2017-01-26 06:29:34 -0500</bug_when>
    <thetext>The flag as suggested in comment 1 to only install what was requested would be very useful.
For example, asking for the debuginfo for qemu-system-x86 gets 1.7GB download/7.5GB installed with dozens of packages, but when you&apos;re fighting a problem either in the core of qemu or in just one area 90% of that is wasted.

Dave</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10098618</commentid>
    <comment_count>9</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2017-01-26 06:32:23 -0500</bug_when>
    <thetext>(In reply to Dr. David Alan Gilbert from comment #8)
&gt; The flag as suggested in comment 1 to only install what was requested would
&gt; be very useful.
&gt; For example, asking for the debuginfo for qemu-system-x86 gets 1.7GB
&gt; download/7.5GB installed with dozens of packages, but when you&apos;re fighting a
&gt; problem either in the core of qemu or in just one area 90% of that is wasted.
yeah, I know...

Just don&apos;t have time to work on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10190833</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2017-02-28 04:56:44 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 26 development cycle.
Changing version to &apos;26&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10480546</commentid>
    <comment_count>11</comment_count>
    <who name="Jaroslav Rohel">jrohel</who>
    <bug_when>2017-06-06 06:05:32 -0400</bug_when>
    <thetext>Change of behavior of command &apos;debuginfo-install&apos; to install requested packages. Because old solution installs a lot of useless packages.
Gdb/whatsoever will tell you what to install.

PR https://github.com/rpm-software-management/dnf-plugins-core/pull/221</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10559036</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-07-01 09:44:10 -0400</bug_when>
    <thetext>dnf-plugins-core-2.1.2-1.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-9c8c906365</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10559206</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-07-01 16:55:36 -0400</bug_when>
    <thetext>dnf-plugins-core-2.1.2-1.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-9c8c906365</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10559428</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-07-02 05:45:30 -0400</bug_when>
    <thetext>dnf-plugins-core-2.1.2-2.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-9c8c906365</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10559831</commentid>
    <comment_count>15</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-07-02 16:23:13 -0400</bug_when>
    <thetext>dnf-plugins-core-2.1.2-2.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-9c8c906365</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10576085</commentid>
    <comment_count>16</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-07-07 19:08:01 -0400</bug_when>
    <thetext>dnf-plugins-core-2.1.2-2.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>