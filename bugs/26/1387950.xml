<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1387950</bug_id>
          
          <creation_ts>2016-10-23 21:45:00 -0400</creation_ts>
          <short_desc>kexec-tools: support for arm64 kdump</short_desc>
          <delta_ts>2017-06-27 02:52:30 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>kexec-tools</component>
          <version>26</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>925630</dependson>
          <blocked>245418</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Dave Young">ruyang</reporter>
          <assigned_to name="Pratyush Anand">panand</assigned_to>
          <cc>bhe</cc>
    
    
    <cc>bwalker</cc>
    
    
    <cc>dennis</cc>
    
    
    <cc>dyoung</cc>
    
    
    <cc>extras-qa</cc>
    
    
    <cc>nhorman</cc>
    
    
    <cc>panand</cc>
    
    
    <cc>pbrobinson</cc>
    
    
    <cc>ruyang</cc>
    
    
    <cc>xiyou.wangcong</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>kexec-tools-2.0.15-1.fc26.2</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          <cf_clone_of>925630</cf_clone_of>
          <cf_environment></cf_environment>
          <cf_last_closed>2017-06-27 02:51:34</cf_last_closed>
          <cf_type>---</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9813946</commentid>
    <comment_count>0</comment_count>
    <who name="Dave Young">ruyang</who>
    <bug_when>2016-10-23 21:45:27 -0400</bug_when>
    <thetext>+++ This bug was initially created as a clone of Bug #925630 +++

Support for the ARM 64 bit CPU architecture (aarch64) was introduced in 
autoconf 2.69.  kexec-tools appears to use an earlier version of 
autoconf, preventing its being built.  This can be fixed in of three ways (In order of preference):

1. Work with upstream to migrate the package to autoconf 2.69.

2. Rerun autoconf or autoreconf in %prep or %build prior to running 
configure.

3. Apply the patch at http://ausil.fedorapeople.org/aarch64/kexec-tools/kexec-tools-aarch64.patch
which updates config.guess and config.sub to recognize aarch64.

--- Additional comment from Jan Kurik on 2015-07-15 10:49:22 EDT ---

This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 23 development cycle.
Changing version to &apos;23&apos;.

(As we did not run this process for some time, it could affect also pre-Fedora 23 development
cycle bugs. We are very sorry. It will help us with cleanup during Fedora 23 End Of Life. Thank you.)

More information and reason for this action is here:
https://fedoraproject.org/wiki/BugZappers/HouseKeeping/Fedora23

--- Additional comment from Dave Young on 2016-07-20 00:01:02 EDT ---

Bugzilla automaticlly assign Fedora kexec-tools bugs to Baoquan, move this to Pratyush since he is tracking the arm64 kexec/kdump issues..

--- Additional comment from Peter Robinson on 2016-07-20 23:12:07 EDT ---

For reference the patches have now been posted upstream for review:

kexec-tools: http://www.spinics.net/lists/arm-kernel/msg519421.html
kernel support: http://www.spinics.net/lists/arm-kernel/msg513743.html

--- Additional comment from Jan Kurik on 2016-07-26 00:54:00 EDT ---

This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 25 development cycle.
Changing version to &apos;25&apos;.

--- Additional comment from Peter Robinson on 2016-07-28 02:44:27 EDT ---

Kernel support for kexec and kprobes has landed upstream in the 4.8 kernel

--- Additional comment from Peter Robinson on 2016-09-19 04:04 EDT ---

Initial kexec-tools aarch64 support for Fedora.

koji scratch build: http://koji.fedoraproject.org/koji/taskinfo?taskID=15703232

--- Additional comment from Peter Robinson on 2016-10-19 05:43:04 EDT ---

Any comments or can I push this?

--- Additional comment from Dave Young on 2016-10-19 21:25:48 EDT ---

Hi, Peter,

kexec has been upstreamed, but kdump is not yet. I usually rebase new kexec-tools after upstream kexec-tools bumps a new version. So it means we will have it after a rebase.

Simon, the upstream kexec-tools maintainer will release a new version roughly match mainline kernel release schedule.

Do you want the backport now? Or can we wait for next rebase.

Please let us know, if you think it is urgent, either you or Pratyush can post the backport patches to Fedora kexec list, we can merge them after passing patch review.

Thanks
Dave

--- Additional comment from Peter Robinson on 2016-10-20 04:35:42 EDT ---

(In reply to Dave Young from comment #8)
&gt; Hi, Peter,
&gt; 
&gt; kexec has been upstreamed, but kdump is not yet. I usually rebase new
&gt; kexec-tools after upstream kexec-tools bumps a new version. So it means we
&gt; will have it after a rebase.
&gt; 
&gt; Simon, the upstream kexec-tools maintainer will release a new version
&gt; roughly match mainline kernel release schedule.
&gt; 
&gt; Do you want the backport now? Or can we wait for next rebase.
&gt; 
&gt; Please let us know, if you think it is urgent, either you or Pratyush can
&gt; post the backport patches to Fedora kexec list, we can merge them after
&gt; passing patch review.

I would dearly love to land this in Fedora 25 for GA which freezes on Nov 1st [1] and get it enabled in anaconda (so we&apos;d need to co-ordinate a build there).

I&apos;m not sure if anaconda uses the kdump side of the functionality although I&apos;ve not looked closed hence only adding the kexec bits in that patch (I did vaguely look at the kdump side of things).

The bits actually used by the installer are the more interesting bits for the GA release because we don&apos;t respin post GA where as other functionality can go out as a standard update process.

[1] https://fedoraproject.org/wiki/Releases/25/Schedule

--- Additional comment from Dave Young on 2016-10-20 05:06:15 EDT ---

Peter,

So, could you please post the backports to Fedora kexec list after review I can hopefully merge and build it before f25 freeze..

Thanks
Dave

--- Additional comment from Peter Robinson on 2016-10-20 05:25:43 EDT ---

&gt; So, could you please post the backports to Fedora kexec list after review I
&gt; can hopefully merge and build it before f25 freeze..

It&apos;s attached to this BZ. If it really must be posted by me to the list please provide a link to the list

--- Additional comment from Dave Young on 2016-10-23 06:09:33 EDT ---

(In reply to Peter Robinson from comment #11)
&gt; &gt; So, could you please post the backports to Fedora kexec list after review I
&gt; &gt; can hopefully merge and build it before f25 freeze..
&gt; 
&gt; It&apos;s attached to this BZ. If it really must be posted by me to the list
&gt; please provide a link to the list

Yes, please, we need review the patches and do some test.

--- Additional comment from Dave Young on 2016-10-23 21:44:31 EDT ---

FYI, the kexec list is below:

kexec@lists.fedoraproject.org</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10191451</commentid>
    <comment_count>1</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2017-02-28 05:29:44 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 26 development cycle.
Changing version to &apos;26&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10446422</commentid>
    <comment_count>2</comment_count>
    <who name="Pratyush Anand">panand</who>
    <bug_when>2017-05-25 03:23:05 -0400</bug_when>
    <thetext>ARM64 kdump patches merged in upstream. A rebase to v2.0.15 will bring in all the needed patch for this BZ.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10539584</commentid>
    <comment_count>3</comment_count>
    <who name="Pratyush Anand">panand</who>
    <bug_when>2017-06-26 05:20:59 -0400</bug_when>
    <thetext>2.0.15 is released now. A rebase of fedora kexec-tools will help to resolve this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10542941</commentid>
    <comment_count>4</comment_count>
    <who name="Dave Young">ruyang</who>
    <bug_when>2017-06-27 02:52:30 -0400</bug_when>
    <thetext>Hi Pratyush,

Rebased, if there are still problems we can open new bugs to fix them.

Thanks
Dave</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>