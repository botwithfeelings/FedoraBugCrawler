<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1440110</bug_id>
          
          <creation_ts>2017-04-07 06:12:00 -0400</creation_ts>
          <short_desc>Midnight Command 4.8.19 has broken keymapping for Copy &amp; Move</short_desc>
          <delta_ts>2017-05-17 01:56:10 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>mc</component>
          <version>26</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ali Akcaagac">aliakc</reporter>
          <assigned_to name="Jindrich Novy">novyjindrich</assigned_to>
          <cc>alekcejk</cc>
    
    
    <cc>dvlasenk</cc>
    
    
    <cc>jsafrane</cc>
    
    
    <cc>jskarvad</cc>
    
    
    <cc>nerijus</cc>
    
    
    <cc>novyjindrich</cc>
    
    
    <cc>olegon</cc>
    
    
    <cc>pahan</cc>
    
    
    <cc>proski</cc>
    
    
    <cc>segg.gill</cc>
    
    
    <cc>slavazanko</cc>
    
    
    <cc>van.de.bugger</cc>
    
    
    <cc>vvs009</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>mc-4.8.19-2.fc26 mc-4.8.19-2.fc25 mc-4.8.19-2.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-05-09 17:24:50</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10313785</commentid>
    <comment_count>0</comment_count>
    <who name="Ali Akcaagac">aliakc</who>
    <bug_when>2017-04-07 06:12:39 -0400</bug_when>
    <thetext>The new package mc-1:4.8.19-1.fc26.x86_64 has broken keymapping for Copy &amp; Paste.

The correct order:

F5 = Copy
F6 = Move

Shift + F5 = Copy As
Shift + F6 = Move As

With the new Release (4.8.19):

F5 = Copy
F6 = Move

Shift + F3 = Copy As
Shift + F4 = Move As

This sadly overwrites the Shift + Fx commands for F3 and F4 and looks like a bug (and a nasty one) to me. People using midnight commander for (10+ years) by accident are going to hit the wrong keycombos now and force reactions that usually shouldn&apos;t happen. The new keymapping (which looks like an accidental bug to me) are also not aligned with the Text written inside the Keybar.

This misebhaviour is also valid if you compare mc under XOrg and using it under Console. The keysmapping are kinda wrong...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10313931</commentid>
    <comment_count>1</comment_count>
    <who name="Ali Akcaagac">aliakc</who>
    <bug_when>2017-04-07 07:14:22 -0400</bug_when>
    <thetext>Shift + F6 which used to be &quot;Move As&quot; now deletes files. Bad if someone has &quot;delete confirmation&quot; disabled. An operation that used to be &quot;Move As&quot; with dialog and feedback turns out to become &quot;delete&quot; without feedback (if confirmation was disabled&quot;. This is a huge regression that may lead to fatal misbehaviour AND possible and not intended data loss.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10315495</commentid>
    <comment_count>2</comment_count>
    <who name="Ali Akcaagac">aliakc</who>
    <bug_when>2017-04-07 15:01:50 -0400</bug_when>
    <thetext>I opened a bugreport at:

http://midnight-commander.org/ticket/3807

... and figured out that the issue is related by the switch from &quot;slang&quot; to &quot;ncurses&quot;.

NCurses somehow misaligns the Fx Keys (in combination with Shift, Alt, Ctrl) to other keys.

You can find more information in the ticket above... Also related another ticket...

http://midnight-commander.org/ticket/3254

The problem really is, that NCurses misaligns the Fx Keys to other Fx Keys and thus causing midnight commander to execute other operations that expected. This issue also causes Fx Keys that had a different function to now do something totally differently (overwriting the function).

So either there is an issue with NCurses or it might be necessary to switch back from ncurses to slang. Otherwise midnight commander&apos;s functionality stays broken...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10315698</commentid>
    <comment_count>3</comment_count>
    <who name="Pavel Roskin">proski</who>
    <bug_when>2017-04-07 16:28:19 -0400</bug_when>
    <thetext>*** Bug 1439886 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10315718</commentid>
    <comment_count>4</comment_count>
    <who name="Pavel Roskin">proski</who>
    <bug_when>2017-04-07 16:50:55 -0400</bug_when>
    <thetext>Please note that mc compiled with ncurses cannot use &quot;Learn Keys&quot; to redefine keys. The keys are captured correctly, but take not effect. I believe mc can do raw input with ncurses when learning keys. However, ncurses is allowed to process keys when no learning keys.

I agree that mc should switch from F1x notation to Shift-Fx. F15 is &quot;local copy&quot; because F15 is Shift-F5, and F5 is &quot;copy&quot;. Interpreting F15 as Shift-F3 breaks that natural connection.

I believe the ncurses support in mc has never been on by default, so it&apos;s less tested. If the Fedora mc maintainers insist on using ncurses, they should patch mc to treat Shift-Fn as F(10+n).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10317511</commentid>
    <comment_count>5</comment_count>
    <who name="vvs">vvs009</who>
    <bug_when>2017-04-09 13:10:54 -0400</bug_when>
    <thetext>This is exactly the same bug which existed years ago. Unfortunately, I can&apos;t find it in bugzilla right now. It&apos;s very sad that regression testing is non-existent in mc and it&apos;s always in a state of permanent brokenness, trading one bug for another.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10317557</commentid>
    <comment_count>6</comment_count>
    <who name="Ali Akcaagac">aliakc</who>
    <bug_when>2017-04-09 14:15:55 -0400</bug_when>
    <thetext>(In reply to vvs from comment #5)
&gt; This is exactly the same bug which existed years ago.

This is more a bug in ncurses and the way mc is using it. But the regression appeared because the fedora maintainer chose to change slang to ncurses in the configure options. Please read more about it here:

https://bugzilla.redhat.com/show_bug.cgi?id=1436394

The issue has been reverted but the new spec hasn&apos;t been committed to git.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10317592</commentid>
    <comment_count>7</comment_count>
    <who name="vvs">vvs009</who>
    <bug_when>2017-04-09 16:12:39 -0400</bug_when>
    <thetext>Sorry, I wasn&apos;t finger-pointing to anybody. Shit happens and more often than not it&apos;s in a foreign libraries.

What I meant was that mc desperately needs a regression test suite more than anything else. Especially, when such a bug can be traced to as long ago as https://bugzilla.redhat.com/show_bug.cgi?id=1389 Otherwise it&apos;s doomed to repeat again and again.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10325563</commentid>
    <comment_count>8</comment_count>
    <who name="Jaroslav Å karvada">jskarvad</who>
    <bug_when>2017-04-11 11:59:37 -0400</bug_when>
    <thetext>(In reply to Ali Akcaagac from comment #6)
&gt; (In reply to vvs from comment #5)
&gt; &gt; This is exactly the same bug which existed years ago.
&gt; 
&gt; This is more a bug in ncurses and the way mc is using it. But the regression
&gt; appeared because the fedora maintainer chose to change slang to ncurses in
&gt; the configure options. Please read more about it here:
&gt; 
&gt; https://bugzilla.redhat.com/show_bug.cgi?id=1436394
&gt; 
&gt; The issue has been reverted but the new spec hasn&apos;t been committed to git.

Yes, it&apos;s still not in dist-git. The change has been also made in f25. It&apos;s not good to introduce such changes (i.e. library switch) to stable releases.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10346913</commentid>
    <comment_count>9</comment_count>
    <who name="olegon.ru">olegon</who>
    <bug_when>2017-04-19 14:21:14 -0400</bug_when>
    <thetext>Very bad surprise is to delete files by Shift-F6... I expected more stability from well known commander, I love... :(

Is any workaround? Only downgrade?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10371081</commentid>
    <comment_count>10</comment_count>
    <who name="Ali Akcaagac">aliakc</who>
    <bug_when>2017-04-28 03:36:58 -0400</bug_when>
    <thetext>Contacting FESCo at beginning of next month.

https://bugzilla.redhat.com/show_bug.cgi?id=1436394#c34</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10372283</commentid>
    <comment_count>11</comment_count>
    <who name="Jan Safranek">jsafrane</who>
    <bug_when>2017-04-28 09:33:10 -0400</bug_when>
    <thetext>Not only Shift-Fx are broken, ctrl-&lt;arrows&gt;, ctrl-home and ctrl-end are not working in mcedit, which renders it unusable for me.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10389112</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-05 09:06:53 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-0b205eabf4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10389121</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-05 09:07:37 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-bf0dcd75c6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10389128</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-05 09:08:21 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2017-70c2e0ec52</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10390266</commentid>
    <comment_count>15</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-05 16:59:13 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-70c2e0ec52</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10390303</commentid>
    <comment_count>16</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-05 17:02:05 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-0b205eabf4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10390463</commentid>
    <comment_count>17</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-05 18:39:02 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-bf0dcd75c6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10398274</commentid>
    <comment_count>18</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-09 17:24:50 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10407391</commentid>
    <comment_count>19</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-12 08:04:44 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10419246</commentid>
    <comment_count>20</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-17 01:56:10 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>