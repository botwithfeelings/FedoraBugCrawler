<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1438149</bug_id>
          
          <creation_ts>2017-04-01 04:49:00 -0400</creation_ts>
          <short_desc>mc-wrapper.sh script does not work anymore</short_desc>
          <delta_ts>2017-05-17 01:56:19 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>mc</component>
          <version>26</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>low</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1433602</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Knudch">knud.skrald</reporter>
          <assigned_to name="Jindrich Novy">novyjindrich</assigned_to>
          <cc>dvlasenk</cc>
    
    
    <cc>gbonnema</cc>
    
    
    <cc>mariofutire</cc>
    
    
    <cc>novyjindrich</cc>
    
    
    <cc>pahan</cc>
    
    
    <cc>slavazanko</cc>
    
    
    <cc>vvs009</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>mc-4.8.19-2.fc26 mc-4.8.19-2.fc25 mc-4.8.19-2.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-05-09 17:24:58</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10296222</commentid>
    <comment_count>0</comment_count>
    <who name="Knudch">knud.skrald</who>
    <bug_when>2017-04-01 04:49:14 -0400</bug_when>
    <thetext>After update from F25 to F26 (by means of dnf upgrade) the mc-wrapper.sh script shows no effect. eg. mc allways return to the folder where it was started from.

Have checked that the script generates the MC_PWD_FILE variable

Have checked that /usr/bin/mc -P filename works


Knud</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10315545</commentid>
    <comment_count>1</comment_count>
    <who name="Knudch">knud.skrald</who>
    <bug_when>2017-04-07 15:26:39 -0400</bug_when>
    <thetext>After updating F25 MC from version 1:4.8.17-2.x86_64.fc25 to 1:4.8.19-1 the problem accours.

downgrading to 1:4.8.17-2 makes the problem dissapear

Knud</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10322746</commentid>
    <comment_count>2</comment_count>
    <who name="vvs">vvs009</who>
    <bug_when>2017-04-11 01:13:25 -0400</bug_when>
    <thetext>If nobody noticed yet, this is caused by a changed location for temporary files. It should be changed to /var/tmp in mc-wrapper.sh.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10322748</commentid>
    <comment_count>3</comment_count>
    <who name="vvs">vvs009</who>
    <bug_when>2017-04-11 01:15:28 -0400</bug_when>
    <thetext>This is actually a duplicate of #1433602</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10323121</commentid>
    <comment_count>4</comment_count>
    <who name="Knudch">knud.skrald</who>
    <bug_when>2017-04-11 04:03:52 -0400</bug_when>
    <thetext>Change mc-wrapper.sh pointing to /var/tmp solves the problem</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10327396</commentid>
    <comment_count>5</comment_count>
    <who name="A.J. Bonnema">gbonnema</who>
    <bug_when>2017-04-12 03:40:46 -0400</bug_when>
    <thetext>The mc-wrapper uses the environment variable TMPDIR to point to the temporary directory and /tmp if TMPDIR does not exist. Apparantly the mc-wrapper was designed to work no matter which temp directory was defined, as long as the variable TMPDIR was defined properly. So, the solution should be to define the variable TMPDIR to be /var/tmp, in stead of modifying mc-wrapper.sh.

For reference the mc-wrapper code is: 

MC_USER=`id | sed &apos;s/[^(]*(//;s/).*//&apos;`
MC_PWD_FILE=&quot;${TMPDIR-/tmp}/mc-$MC_USER/mc.pwd.$$&quot;
/usr/bin/mc -P &quot;$MC_PWD_FILE&quot; &quot;$@&quot;

if test -r &quot;$MC_PWD_FILE&quot;; then
	MC_PWD=&quot;`cat &quot;$MC_PWD_FILE&quot;`&quot;
	if test -n &quot;$MC_PWD&quot; &amp;&amp; test -d &quot;$MC_PWD&quot;; then
		cd &quot;$MC_PWD&quot;
	fi
	unset MC_PWD
fi

rm -f &quot;$MC_PWD_FILE&quot;
unset MC_PWD_FILE
unset MC_USER</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10328453</commentid>
    <comment_count>6</comment_count>
    <who name="vvs">vvs009</who>
    <bug_when>2017-04-12 07:33:28 -0400</bug_when>
    <thetext>Is it so? Do you want that every other application would store temporary files in /var/tmp instead of /tmp? The reason for changing that location for mc was its&apos; habit to create huge temporary files which doesn&apos;t fit into tmpfs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10329246</commentid>
    <comment_count>7</comment_count>
    <who name="A.J. Bonnema">gbonnema</who>
    <bug_when>2017-04-12 10:08:34 -0400</bug_when>
    <thetext>(In reply to vvs from comment #6)
&gt; Is it so? Do you want that every other application would store temporary
&gt; files in /var/tmp instead of /tmp? The reason for changing that location for
&gt; mc was its&apos; habit to create huge temporary files which doesn&apos;t fit into
&gt; tmpfs.

Hi vvs,

I am not sure if you are responding to my comment or someone elses comment. Tbh I don&apos;t care which directory is temp, just that modifying mc-wrapper.sh may not be the way to go, because the wrapper uses an environment variable to point to the right directory. That&apos;s why I made my comment and included the source for mc-wrapper.

So, if the directory should be /var/tmp, then besides modifying the temp directory, define TMPDIR to be /var/tmp should solve the problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10389114</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-05 09:07:07 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-0b205eabf4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10389122</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-05 09:07:44 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-bf0dcd75c6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10389129</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-05 09:08:29 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2017-70c2e0ec52</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10390268</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-05 16:59:20 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-70c2e0ec52</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10390304</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-05 17:02:11 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-0b205eabf4</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10390464</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-05 18:39:08 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-bf0dcd75c6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10398275</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-09 17:24:58 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10398891</commentid>
    <comment_count>15</comment_count>
    <who name="Knudch">knud.skrald</who>
    <bug_when>2017-05-10 01:06:32 -0400</bug_when>
    <thetext>Problem still there, need to change mc-wrapper.sh as described in comment #2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10407392</commentid>
    <comment_count>16</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-12 08:04:52 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10409578</commentid>
    <comment_count>17</comment_count>
    <who name="vvs">vvs009</who>
    <bug_when>2017-05-13 04:32:39 -0400</bug_when>
    <thetext>Confirm. It&apos;s not fixed in mc-4.8.19-2.fc25 and should be reopened.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10418162</commentid>
    <comment_count>18</comment_count>
    <who name="Knudch">knud.skrald</who>
    <bug_when>2017-05-16 15:07:14 -0400</bug_when>
    <thetext>4.8.19-4 has also the failure.....exit not to current folder
Change mc-wrapper to /var/tmp from /tmp makes it work</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10419247</commentid>
    <comment_count>19</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-17 01:56:19 -0400</bug_when>
    <thetext>mc-4.8.19-2.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>