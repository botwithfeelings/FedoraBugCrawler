<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1422542</bug_id>
          
          <creation_ts>2017-02-15 08:59:00 -0500</creation_ts>
          <short_desc>Missing chdir call after chroot</short_desc>
          <delta_ts>2017-03-13 22:21:02 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>rsyslog</component>
          <version>26</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jiří Vymazal">jvymazal</reporter>
          <assigned_to name="Jiří Vymazal">jvymazal</assigned_to>
          <cc>dkopecek</cc>
    
    
    <cc>jlieskov</cc>
    
    
    <cc>jvymazal</cc>
    
    
    <cc>lkundrak</cc>
    
    
    <cc>mah.darade</cc>
    
    
    <cc>rsroka</cc>
    
    
    <cc>tosykora</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>rsyslog-8.25.0-2.fc24 rsyslog-8.25.0-2.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-13 19:50:30</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          <external_bugs name="Github">rsyslog/rsyslog/issues/1419</external_bugs>
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10150188</commentid>
    <comment_count>0</comment_count>
    <who name="Jiří Vymazal">jvymazal</who>
    <bug_when>2017-02-15 08:59:14 -0500</bug_when>
    <thetext>Description of problem:
Rsyslog has (with the -T cmd-line option) option to perform chroot call immediately after starting. However it does not perform any chdir call before or after it. This is violating security policy imposed by rpmlint to prevent processes easy chroot jail escape.


Steps to Reproduce:
1. run rpmlint on any rsyslog RPM

Actual results:
rsyslog.x86_64: E: missing-call-to-chdir-with-chroot /usr/sbin/rsyslogd

Expected results:
no errors reported

Additional info:</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10150562</commentid>
    <comment_count>1</comment_count>
      <attachid>1250635</attachid>
    <who name="Jiří Vymazal">jvymazal</who>
    <bug_when>2017-02-15 10:34:49 -0500</bug_when>
    <thetext>Created attachment 1250635
proposed patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10150566</commentid>
    <comment_count>2</comment_count>
    <who name="Jiří Vymazal">jvymazal</who>
    <bug_when>2017-02-15 10:35:40 -0500</bug_when>
    <thetext>added patch and corresponding upstream issue</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10156974</commentid>
    <comment_count>3</comment_count>
    <who name="Jiří Vymazal">jvymazal</who>
    <bug_when>2017-02-17 04:16:51 -0500</bug_when>
    <thetext>patch pushed to rawhide in rsyslog 8.24.0-5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10166896</commentid>
    <comment_count>4</comment_count>
      <attachid>1255677</attachid>
    <who name="Jiří Vymazal">jvymazal</who>
    <bug_when>2017-02-20 07:56:30 -0500</bug_when>
    <thetext>Created attachment 1255677
proposed patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10166903</commentid>
    <comment_count>5</comment_count>
    <who name="Jiří Vymazal">jvymazal</who>
    <bug_when>2017-02-20 07:57:33 -0500</bug_when>
    <thetext>corrected typo in patch, also fixed in rawhide in rsyslog 8.24.0-6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10192251</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2017-02-28 06:18:21 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 26 development cycle.
Changing version to &apos;26&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10201871</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-02 08:21:56 -0500</bug_when>
    <thetext>rsyslog-8.25.0-2.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-d2d16edab7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10201878</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-02 08:22:39 -0500</bug_when>
    <thetext>rsyslog-8.25.0-2.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2017-92e2b77ddc</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10204705</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-02 23:53:33 -0500</bug_when>
    <thetext>rsyslog-8.25.0-2.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-d2d16edab7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10204767</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-03 00:24:11 -0500</bug_when>
    <thetext>rsyslog-8.25.0-2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-92e2b77ddc</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10235128</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-13 19:50:30 -0400</bug_when>
    <thetext>rsyslog-8.25.0-2.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10235170</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-13 19:54:42 -0400</bug_when>
    <thetext>rsyslog-8.25.0-2.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10235615</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-13 22:21:02 -0400</bug_when>
    <thetext>rsyslog-8.25.0-2.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1250635</attachid>
            <date>2017-02-15 10:34:00 -0500</date>
            <delta_ts>2017-02-20 07:56:30 -0500</delta_ts>
            <desc>proposed patch</desc>
            <filename>rsyslog-8.24.0-missing-chdir-w-chroot.patch</filename>
            <type>text/plain</type>
            <size>432</size>
            <attacher name="Jiří Vymazal">jvymazal</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL3Rvb2xzL3JzeXNsb2dkLmMgYi90b29scy9yc3lzbG9nZC5jCmluZGV4IGMw
OTk3MDUuLjEyYjAzN2YgMTAwNjQ0Ci0tLSBhL3Rvb2xzL3JzeXNsb2dkLmMKKysrIGIvdG9vbHMv
cnN5c2xvZ2QuYwpAQCAtMTM1MCw2ICsxMzUwLDEwIEBAIGluaXRBbGwoaW50IGFyZ2MsIGNoYXIg
Kiphcmd2KQogCQkJCXBlcnJvcigiY2hyb290Iik7CiAJCQkJZXhpdCgxKTsKIAkJCX0KKyAgICAg
ICAgICAgIGlmKGNoZGlyKCJcXCIpICE9IDApIHsKKyAgICAgICAgICAgICAgICBwZXJyb3IoImNo
ZGlyIik7CisgICAgICAgICAgICAgICAgZXhpdCgxKTsKKyAgICAgICAgICAgIH0KIAkJCWJyZWFr
OwogCQljYXNlICd1JzoJCS8qIG1pc2MgdXNlciBzZXR0aW5ncyAqLwogCQkJaUhlbHBlclVPcHQg
PSAoYXJnID09IE5VTEwpID8gMCA6IGF0b2koYXJnKTsK
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1255677</attachid>
            <date>2017-02-20 07:56:00 -0500</date>
            <delta_ts>2017-02-20 07:56:30 -0500</delta_ts>
            <desc>proposed patch</desc>
            <filename>rsyslog-8.24.0-missing-chdir-w-chroot.patch</filename>
            <type>text/plain</type>
            <size>431</size>
            <attacher name="Jiří Vymazal">jvymazal</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL3Rvb2xzL3JzeXNsb2dkLmMgYi90b29scy9yc3lzbG9nZC5jCmluZGV4IGMw
OTk3MDUuLjEyYjAzN2YgMTAwNjQ0Ci0tLSBhL3Rvb2xzL3JzeXNsb2dkLmMKKysrIGIvdG9vbHMv
cnN5c2xvZ2QuYwpAQCAtMTM1MCw2ICsxMzUwLDEwIEBAIGluaXRBbGwoaW50IGFyZ2MsIGNoYXIg
Kiphcmd2KQogCQkJCXBlcnJvcigiY2hyb290Iik7CiAJCQkJZXhpdCgxKTsKIAkJCX0KKyAgICAg
ICAgICAgIGlmKGNoZGlyKCIvIikgIT0gMCkgeworICAgICAgICAgICAgICAgIHBlcnJvcigiY2hk
aXIiKTsKKyAgICAgICAgICAgICAgICBleGl0KDEpOworICAgICAgICAgICAgfQogCQkJYnJlYWs7
CiAJCWNhc2UgJ3UnOgkJLyogbWlzYyB1c2VyIHNldHRpbmdzICovCiAJCQlpSGVscGVyVU9wdCA9
IChhcmcgPT0gTlVMTCkgPyAwIDogYXRvaShhcmcpOwo=
</data>

          </attachment>
      

    </bug>

</bugzilla>