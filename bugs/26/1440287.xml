<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1440287</bug_id>
          
          <creation_ts>2017-04-07 15:13:00 -0400</creation_ts>
          <short_desc>glibc: Support broken applications which call __tls_get_addr with an unaligned stack (GCC bug workaround)</short_desc>
          <delta_ts>2017-07-12 03:17:36 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>glibc</component>
          <version>26</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1468807</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Elad Alfassa">elad</reporter>
          <assigned_to name="Florian Weimer">fweimer</assigned_to>
          <cc>arjun.is</cc>
    
    
    <cc>code</cc>
    
    
    <cc>codonell</cc>
    
    
    <cc>cschalle</cc>
    
    
    <cc>debarshir</cc>
    
    
    <cc>dj</cc>
    
    
    <cc>fweimer</cc>
    
    
    <cc>jlayton</cc>
    
    
    <cc>law</cc>
    
    
    <cc>levi</cc>
    
    
    <cc>lord.phoenix.rus</cc>
    
    
    <cc>mattdm</cc>
    
    
    <cc>mfabian</cc>
    
    
    <cc>mryodatak</cc>
    
    
    <cc>negativo17</cc>
    
    
    <cc>netwiz</cc>
    
    
    <cc>nmiell</cc>
    
    
    <cc>pablodav</cc>
    
    
    <cc>pfrankli</cc>
    
    
    <cc>sgallagh</cc>
    
    
    <cc>sid</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>glibc-2.25.90-20.fc27 glibc-2.25-7.fc26 glibc-2.24-9.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-07-12 03:17:36</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          <external_bugs name="GNU Compiler Collection">58066</external_bugs>
    
    
    
    <external_bugs name="Sourceware">21609</external_bugs>
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10315518</commentid>
    <comment_count>0</comment_count>
      <attachid>1269907</attachid>
    <who name="Elad Alfassa">elad</who>
    <bug_when>2017-04-07 15:13:28 -0400</bug_when>
    <thetext>Created attachment 1269907
full backtrace

Description of problem:
Every 64bit game that uses Unity (the game engine) won&apos;t start on Fedora 26 (deadlocks on a black screen). 32bit games work fine.


Version-Release number of selected component (if applicable):
glibc-2.25-4.fc26.x86_64

How reproducible:
100%

Steps to Reproduce:
1. Try starting a Unity based game which has a 64bit executable, such as Gone Home, Firewatch, Cities Skylines, etc.

Actual results:
Game won&apos;t start, it&apos;ll just show a black screen.

Expected results:
Games should start.

Additional info:

Gone Home is a good testcase because it comes with both a 64bit executable and a 32bits one. The 32bits one works well, but the 64bit one deadlocks.

I&apos;ve attached a full backtrace from all threads as an attachment, but here&apos;s a part of it showing the active thread being stuck in malloc()

Thread 27 (Thread 0x7f8fd80e4700 (LWP 5881)):
#0  0x00007f9001b1d6fc in __lll_lock_wait_private () from /lib64/libc.so.6
#1  0x00007f9001a8a9e6 in malloc () from /lib64/libc.so.6
#2  0x00007f900358d455 in tls_get_addr_tail () from /lib64/ld-linux-x86-64.so.2
#3  0x00007f900032d1d0 in mono_domain_get () from /ssd/SteamLibrary/steamapps/common/Gone Home/GoneHome_Data/Mono/x86_64/libmono.so
#4  0x00007f900026b022 in ?? () from /ssd/SteamLibrary/steamapps/common/Gone Home/GoneHome_Data/Mono/x86_64/libmono.so
#5  &lt;signal handler called&gt;
#6  0x00007f9001a87125 in _int_malloc () from /lib64/libc.so.6
#7  0x00007f9001a8a9f8 in malloc () from /lib64/libc.so.6
#8  0x00007f900358d455 in tls_get_addr_tail () from /lib64/ld-linux-x86-64.so.2
#9  0x00007f9000397fbf in mono_thread_current () from /ssd/SteamLibrary/steamapps/common/Gone Home/GoneHome_Data/Mono/x86_64/libmono.so
#10 0x00007f900039806d in mono_thread_attach () from /ssd/SteamLibrary/steamapps/common/Gone Home/GoneHome_Data/Mono/x86_64/libmono.so
#11 0x000000000089d8e1 in ?? ()
#12 0x000000000089dc09 in ?? ()
#13 0x0000000000a02ca5 in ?? ()
#14 0x00007f900250b36d in start_thread () from /lib64/libpthread.so.0
#15 0x00007f9001b0ee0f in clone () from /lib64/libc.so.6


I&apos;m confident this is a glibc bug because all these games worked well in F25, and also if force the game use an alternative malloc() implementation (using LD_PRELOAD), such as jemalloc, it starts with no problem.

I noticed there&apos;s a &quot;&lt;signal handler called&gt;&quot; line in the backtrace (it was generated with the pstack command, on the stuck process). If I start the game with gdb I can see the signal is SIGPWR. I don&apos;t know why the game gets this signal or what sends it, but I can see that the 32bit executable gets it too, but continues without a problem - unlike the 64bit executable which deadlocks when it gets this signal.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10317047</commentid>
    <comment_count>1</comment_count>
    <who name="Florian Weimer">fweimer</who>
    <bug_when>2017-04-09 04:30:52 -0400</bug_when>
    <thetext>This is a known issue in the glibc TLS implementation.  Recompiling applications and libraries with the initial-exec TLS model will work around it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10317059</commentid>
    <comment_count>2</comment_count>
    <who name="Elad Alfassa">elad</who>
    <bug_when>2017-04-09 04:53:01 -0400</bug_when>
    <thetext>I can&apos;t recompile these apps and libraries, they&apos;re proprietary.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10403741</commentid>
    <comment_count>3</comment_count>
    <who name="Levi Bard">levi</who>
    <bug_when>2017-05-11 07:54:27 -0400</bug_when>
    <thetext>I think that https://bugs.freedesktop.org/show_bug.cgi?id=35268 makes the initial-exec model a no-go in any case.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10403979</commentid>
    <comment_count>4</comment_count>
    <who name="Carlos O&apos;Donell">codonell</who>
    <bug_when>2017-05-11 08:40:51 -0400</bug_when>
    <thetext>(In reply to Levi Bard from comment #3)
&gt; I think that https://bugs.freedesktop.org/show_bug.cgi?id=35268 makes the
&gt; initial-exec model a no-go in any case.

Then the alternative is that the thread variable needs to be assigned a value during initialization to force allocation outside of a signal-handler context.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10448124</commentid>
    <comment_count>5</comment_count>
    <who name="Matthew Miller">mattdm</who>
    <bug_when>2017-05-25 11:42:00 -0400</bug_when>
    <thetext>(In reply to Levi Bard from comment #3)
&gt; I think that https://bugs.freedesktop.org/show_bug.cgi?id=35268 makes the
&gt; initial-exec model a no-go in any case.

Levi, do you by any chance have a stand-alone reproducer for this? Something that doesn&apos;t require a purchased game?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10448153</commentid>
    <comment_count>6</comment_count>
    <who name="Carlos O&apos;Donell">codonell</who>
    <bug_when>2017-05-25 11:45:55 -0400</bug_when>
    <thetext>I want to remind people again that there is no easy workaround for this issue.

The glibc limitation for TLS in signal handlers has been present since the first day upstream added thread local storage. It was not well explained or advertised as a limitation though.

The only solution is for applications to *avoid all* TLS in signal handlers.

The Fedora glibc team will be looking into this issue during the year, but it&apos;s going to take time to fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10448256</commentid>
    <comment_count>7</comment_count>
    <who name="Christian Fredrik Kalager Schaller">cschalle</who>
    <bug_when>2017-05-25 12:05:09 -0400</bug_when>
    <thetext>ok, so Carlos would it be your recommendation that for the time being we try to set up the Steam package to preload jemmaloc by default? I am just worried it might potentially cause problems in other games?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10448343</commentid>
    <comment_count>8</comment_count>
    <who name="Carlos O&apos;Donell">codonell</who>
    <bug_when>2017-05-25 12:32:30 -0400</bug_when>
    <thetext>(In reply to Christian Fredrik Kalager Schaller from comment #7)
&gt; ok, so Carlos would it be your recommendation that for the time being we try
&gt; to set up the Steam package to preload jemmaloc by default? I am just
&gt; worried it might potentially cause problems in other games?

I do not recommend that. No allocator is built AS-safe. There is no workaround.

We are working on this and we understand that the glibc limitation on TLS access in signal handlers is a real issue.

Previously in 2015 when we tried to fix this issue it was only Google that showed any real use cases. Unfortunately the fixes we had at the time broke other tooling like valgrind, which is absolutely something we don&apos;t want to break.

I can only recommend you reach out to the vendor and explain the situation and hope you get a new build for Linux that fixes the issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10448388</commentid>
    <comment_count>9</comment_count>
    <who name="Elad Alfassa">elad</who>
    <bug_when>2017-05-25 12:46:29 -0400</bug_when>
    <thetext>(In reply to Carlos O&apos;Donell from comment #8)

&gt; I do not recommend that. No allocator is built AS-safe. There is no
&gt; workaround.

Well, this workaround worked for me for every Unity based game. So it works around this very specific issue with this very specific game engine, even though it doesn&apos;t necessarily works around *all* the issues that might be caused by using TLS in the signal handler.

&gt; I can only recommend you reach out to the vendor and explain the situation
&gt; and hope you get a new build for Linux that fixes the issue.

This is impossible. Unity3D is one of the most popular game engines out there, with (probably) hundreds of Linux games using it. Even if Unity3D fixes it on their end, the chances of the fix getting deployed to their various customers is slim. Many game developers don&apos;t update the engine at all after shipping a game, because it can result in all sort of breakage and a lot of work. We&apos;d have to contact hundreds of different game developers asking them to update the engine, which is unrealistic.

(it&apos;s unrealistic to contact so many vendors and unrealistic to expect every single one of them to release a build that fixes the problem, sometimes &gt;4 years after the game was initially released - most games don&apos;t get patches so long after the initial release).

I guess we can have a CommonBugs entry for this issue, telling users they have to use 32bit builds of games where these are available (32bit Unity builds are not affected by this issue) or use jemalloc when a 32bit build is not available (and not preload jemalloc automatically, to avoid the slim chance of potential issues it might cause with non-Unity games).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10450546</commentid>
    <comment_count>10</comment_count>
    <who name="Levi Bard">levi</who>
    <bug_when>2017-05-26 05:17:36 -0400</bug_when>
    <thetext>(In reply to Matthew Miller from comment #5)
&gt; (In reply to Levi Bard from comment #3)
&gt; &gt; I think that https://bugs.freedesktop.org/show_bug.cgi?id=35268 makes the
&gt; &gt; initial-exec model a no-go in any case.
&gt; 
&gt; Levi, do you by any chance have a stand-alone reproducer for this? Something
&gt; that doesn&apos;t require a purchased game?

http://files.unity3d.com/levi/bug1440287.tar.gz should do it.
(Source project https://github.com/Tak/HelloBugzilla )</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10451292</commentid>
    <comment_count>11</comment_count>
    <who name="Matthew Miller">mattdm</who>
    <bug_when>2017-05-26 09:10:45 -0400</bug_when>
    <thetext>(In reply to Levi Bard from comment #10)
&gt; &gt; Levi, do you by any chance have a stand-alone reproducer for this? Something
&gt; &gt; that doesn&apos;t require a purchased game?
&gt; 
&gt; http://files.unity3d.com/levi/bug1440287.tar.gz should do it.
&gt; (Source project https://github.com/Tak/HelloBugzilla )

Thanks Levi! I can confirm that the x86_64 version runs perfectly on F25 and fails on F26. I repeated 10x on each platform. Would it be possible to make the test program non-interactive and do a short countdown and then exit with a successful error code? Carlos tells me that he expects that there should still be crashes on F25 at random, and I&apos;d like to get a sense for how frequent that might be (that is, doesn&apos;t come up in 10 trials, but maybe in 100 or a 1000).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10451405</commentid>
    <comment_count>12</comment_count>
    <who name="Levi Bard">levi</who>
    <bug_when>2017-05-26 09:45:03 -0400</bug_when>
    <thetext>(In reply to Matthew Miller from comment #11)
&gt; (In reply to Levi Bard from comment #10)
&gt; &gt; &gt; Levi, do you by any chance have a stand-alone reproducer for this? Something
&gt; &gt; &gt; that doesn&apos;t require a purchased game?
&gt; &gt; 
&gt; &gt; http://files.unity3d.com/levi/bug1440287.tar.gz should do it.
&gt; &gt; (Source project https://github.com/Tak/HelloBugzilla )
&gt; 
&gt; Thanks Levi! I can confirm that the x86_64 version runs perfectly on F25 and
&gt; fails on F26. I repeated 10x on each platform. Would it be possible to make
&gt; the test program non-interactive and do a short countdown and then exit with
&gt; a successful error code? Carlos tells me that he expects that there should
&gt; still be crashes on F25 at random, and I&apos;d like to get a sense for how
&gt; frequent that might be (that is, doesn&apos;t come up in 10 trials, but maybe in
&gt; 100 or a 1000).

Uploaded a batch-runnable version to http://files.unity3d.com/levi/bug1440287-batchable.tar.gz (and updated project repo).

Now it will log and exit with a zero exit code after successfully running for 1s (configurable in the source project).

Run with: ./repro.x86_64 -batchmode
(add &quot;-logfile -&quot; if you want logging to stdout instead of the normal log file location (~/.config/unity3d/DefaultCompany/Hello Bugzilla!/Player.log))
(add &quot;-nographics&quot; if you don&apos;t want a window popping up repeatedly)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10451782</commentid>
    <comment_count>13</comment_count>
    <who name="Matthew Miller">mattdm</who>
    <bug_when>2017-05-26 10:52:49 -0400</bug_when>
    <thetext>Thanks Levi. On F26, this reliably hangs on first run. I have it running in a loop on F25, and so far up to 1000 repetitions without hang. I really don&apos;t know about the details here and I trust that Carlos and Florian do, but for whatever reason, this code worked reliably on F25 and fails on F26.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10452160</commentid>
    <comment_count>14</comment_count>
    <who name="Christian Fredrik Kalager Schaller">cschalle</who>
    <bug_when>2017-05-26 12:37:00 -0400</bug_when>
    <thetext>Hmm, I would say that if the bug fixed hits in less than 1 out of a 1000 runs, then dealing with having that bug in Fedora 26 seems a lot more tempting than dealing with a bug that crashes every Unity game every time in Fedora 26.

Ideally it would be great to have neither and long term I suspect Carlos will be able to come up with a fix, but for the short/medium term the current fix seems like a bigger problem that the problem it was meant to resolve.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10452443</commentid>
    <comment_count>15</comment_count>
    <who name="Carlos O&apos;Donell">codonell</who>
    <bug_when>2017-05-26 15:12:36 -0400</bug_when>
    <thetext>(In reply to Christian Fredrik Kalager Schaller from comment #14)
&gt; Hmm, I would say that if the bug fixed hits in less than 1 out of a 1000
&gt; runs, then dealing with having that bug in Fedora 26 seems a lot more
&gt; tempting than dealing with a bug that crashes every Unity game every time in
&gt; Fedora 26.
&gt; 
&gt; Ideally it would be great to have neither and long term I suspect Carlos
&gt; will be able to come up with a fix, but for the short/medium term the
&gt; current fix seems like a bigger problem that the problem it was meant to
&gt; resolve.

We know *exactly* what needs to be fixed, the problem is entirely about resourcing and priority. As I noted earlier the only users who had ever run into this were Google with a Google-sized project, and they just rebuilt their own internal distros to avoid the problem. We couldn&apos;t justify fixing it at that point. However, from a correctness perspective it needs to get fixed. Having a real problem like this bug report goes a long way to raising the priority of the work.

Just to be clear *every* Linux distribution using glibc suffers from this problem, it&apos;s not Fedora. The same problem will exist in Debian, Ubuntu, etc. So it&apos;s not just specific to Fedora. We are going to fix this upstream in coordination with upstream and the other distributions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10452788</commentid>
    <comment_count>16</comment_count>
    <who name="Christian Fredrik Kalager Schaller">cschalle</who>
    <bug_when>2017-05-26 21:04:03 -0400</bug_when>
    <thetext>Carlos I have no doubt about your willingness or ability to fix it. What I am trying to say is that I think shipping with the bug is to big of a regression, so since you are not in a position to commit to finding a proper fix (and no blame on you for that) before we ship Fedora 26 we need to find another solution. 
I can&apos;t know or say what other distributions will decide to do here, but Ubuntu might escape it simply due to their release schedule (meaning their latest release use the previous glibc version and I this might be fixed in time for their next release), but if it isn&apos;t resolved by then I wouldn&apos;t be surprised if they too will decide they are not prepared to ship with this regression and either stick with their current version for another release or find some other workaround. 

We worked so hard over the last two years to escape the image of Fedora just being Red Hats development tool and not something anyone but the especially interested should consider running as their main dektop OS, and this is the sort of breakage that would create enough negative noise online to negate that effort.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10452859</commentid>
    <comment_count>17</comment_count>
    <who name="Carlos O&apos;Donell">codonell</who>
    <bug_when>2017-05-26 22:22:23 -0400</bug_when>
    <thetext>(In reply to Christian Fredrik Kalager Schaller from comment #16)
&gt; Carlos I have no doubt about your willingness or ability to fix it. What I
&gt; am trying to say is that I think shipping with the bug is to big of a
&gt; regression, so since you are not in a position to commit to finding a proper
&gt; fix (and no blame on you for that) before we ship Fedora 26 we need to find
&gt; another solution. 

The &quot;Fedora Release Criteria&quot; are used to determine if a bug is a blocker to the release. The &quot;Fedora 26 Beta Release Criteria&quot; are being met by glibc and there isn&apos;t anything broken in the release criteria by having games that use Unity not work on Fedora 26. There isn&apos;t an entry in the release criteria that says Unity-based games need to run before we can make a release. That means to me that the priority of this request is lower than other security and network related bugs we&apos;re working on. If Unity-based games and games in general are important to Fedora then you need to work to get them on the release criteria. My guidance is taken from the release criteria.

The decision to mark this a &quot;regression&quot; should not be taken lightly. There were 57 new symbols added to the base glibc ABI/API. The presence of these symbols means we would need to undergo some level of rebuilds to purge the distribution of all such ABI atrifacts before a final release. All of this work would be predicated on the decision that your use case is sufficiently important to Fedora as a whole.

We may also find that simply reverting glibc doesn&apos;t fix this problem, and in fact you may have to roll back the compiler, and binutils to get to a point where the generated code doesn&apos;t exhibit the issue (and all new ABI/API introduced there). This is a non-trivial amount of work by a significant number of people for an issue that is not part of the release criteria for Fedora.

I sympathize with your request, but we need to prioritize work based on community priorities.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10453125</commentid>
    <comment_count>18</comment_count>
    <who name="Elad Alfassa">elad</who>
    <bug_when>2017-05-27 02:56:05 -0400</bug_when>
    <thetext>Regarding possible workarounds: the idea of preloading jemalloc in the steam startup script won&apos;t work. While it doesn&apos;t seem to break any game, it breaks the Steam store itself... so it has to be done for each game individually instead of changing the startup script.

It&apos;s clear that reverting glibc in this stage of the release cycle is impossible (see comment #17, and I don&apos;t think there&apos;s any viable &quot;automatic&quot; workaround  (ie. one that would not require any action from users) we can implement.

I suggest we add a CommonBugs entry which should be something along these lines:

--
Some Unity3D-based video games might freeze on startup, showing only a black screen. To work around this issue, install jemalloc (&quot;dnf install jemalloc&quot;) and start the game using jemalloc.sh ./[GameExecutable]. When using Steam to launch your games, right-click on the game on your game list, click properties, then click &quot;set launch options&quot; and write &quot;jemalloc.sh %command%&quot; in the text box that will appear. (note: it must literally be &quot;%command%&quot;, there&apos;s no need to manually replace that with the executable name)
--

This is probably the most we can do from Fedora&apos;s side, especially considering this is all 3rd party software that is not under our control.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10469402</commentid>
    <comment_count>19</comment_count>
    <who name="Carlos O&apos;Donell">codonell</who>
    <bug_when>2017-06-01 11:44:39 -0400</bug_when>
    <thetext>We were lucky that in Fedora 26 we introduced tunables, so we have some way to add a Fedora specific tunable to the hot path without much performance impact.

So we could add FEDORA_GLIBC_TUNABLES=glibc.async_signal_safe_tls=1 which enables the use of the signal-safe allocator we had previously for this fix from Google.

So the steps would be:

(1) Re-apply the following commits.

commit 7f507ee17aee720fa423fa38502bc3caa0dd03d7
commit 1f33d36a8a9e78c81bed59b47f260723f56bb7e6
commit 35e8f7ab94c910659de9d507aa0f3e1f8973d914
commit 69a17d9d245dc3551792e95e1823cc2d877592f3
commit 063b2acbce83549df82ab30f5af573f1b9c4bd19
commit b627fdd58554bc36bd344dc40a8787c4b7a9cc46
commit e81c64bba13d2d8b2a4e53254a82cc80f27c8497

And see if the built glibc can run the Unity games.

(2) Add a tunable which can switch between the regular malloc and the new signal safe allocator for TLS.

Then when running steam games we just say you have to set the above env var to change the TLS allocation behaviour (which we don&apos;t want to change by default because it would break developer tooling).

The glibc team is currently blocked on another high priority issue, and we would appreciate anyone doing the above backport and verifying that things work.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10470465</commentid>
    <comment_count>20</comment_count>
    <who name="Christian Fredrik Kalager Schaller">cschalle</who>
    <bug_when>2017-06-01 18:55:39 -0400</bug_when>
    <thetext>Thanks Carlos! I will have one of my guys look into the proposed solution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10470667</commentid>
    <comment_count>21</comment_count>
    <who name="Matthew Miller">mattdm</who>
    <bug_when>2017-06-01 20:58:03 -0400</bug_when>
    <thetext>Nice. Thanks Carlos!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10515223</commentid>
    <comment_count>22</comment_count>
    <who name="Nicholas Miell">nmiell</who>
    <bug_when>2017-06-17 14:42:52 -0400</bug_when>
    <thetext>I&apos;m seeing similar Unity hangs, except the sequence of events is:

1. Thread attempts to lazy init a TLS variable.
2. There is a SIGSEGV in _int_malloc() on a movaps %xmm0,(%rsp) instruction because RSP is misaligned due to https://gcc.gnu.org/bugzilla/show_bug.cgi?id=58066
3. The Mono SIGSEGV handler gets called.
4. The SIGSEGV handler attempts to lazy init a TLS variable.
5. malloc deadlocks.

LD_PRELOADing the following simple stub fixes the affected Unity games:

#include &lt;dlfcn.h&gt;

__attribute__((force_align_arg_pointer)) void *__tls_get_addr (void *ti)
{
	void *(*tga)(void*) = dlsym(RTLD_NEXT, &quot;__tls_get_addr&quot;);

	return tga(ti);
}

Why doesn&apos;t glibc&apos;s __tls_get_addr() have this attribute to deal with this gcc bug?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10515225</commentid>
    <comment_count>23</comment_count>
    <who name="Nicholas Miell">nmiell</who>
    <bug_when>2017-06-17 14:46:21 -0400</bug_when>
    <thetext>Actually, the stack traces I&apos;m seeing are literally identical to comment #0, except the signal is definitely SIGSEGV (from a MOVAPS instruction), not SIGPWR (from Mono&apos;s garbage collector).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10515250</commentid>
    <comment_count>24</comment_count>
      <attachid>1288634</attachid>
    <who name="Nicholas Miell">nmiell</who>
    <bug_when>2017-06-17 15:05:50 -0400</bug_when>
    <thetext>Created attachment 1288634
LD_PRELOAD stub for __tls_get_addr() that aligns the stack

unzip align-tls-get-addr.zip
cd align-tls-get-addr
meson BUILD
ninja -C BUILD
LD_PRELOAD=$(pwd)/BUILD/tls_get_addr.so /path/to/bug1440287/repro.x86_64

For Steam, Set Launch Options to LD_PRELOAD=/full/path/to/align-tls-get-addr/BUILD/tls_get_addr.so %command%</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10515658</commentid>
    <comment_count>25</comment_count>
      <attachid>1288761</attachid>
    <who name="Nicholas Miell">nmiell</who>
    <bug_when>2017-06-18 00:44:26 -0400</bug_when>
    <thetext>Created attachment 1288761
proposed glibc patch

A proposed patch for glibc.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10515876</commentid>
    <comment_count>26</comment_count>
    <who name="Florian Weimer">fweimer</who>
    <bug_when>2017-06-18 05:14:28 -0400</bug_when>
    <thetext>Thanks for tracking this down.  We will likely use a different approach upstream, involving a compatibility symbol for future glibc versions, and use a sysdeps override for backports.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10553636</commentid>
    <comment_count>27</comment_count>
    <who name="Florian Weimer">fweimer</who>
    <bug_when>2017-06-29 09:55:49 -0400</bug_when>
    <thetext>Upstream patch posted for review: https://sourceware.org/ml/libc-alpha/2017-06/msg00922.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10558230</commentid>
    <comment_count>28</comment_count>
    <who name="Christian Fredrik Kalager Schaller">cschalle</who>
    <bug_when>2017-06-30 15:05:23 -0400</bug_when>
    <thetext>Thanks Florian! Will be be getting this patch into Fedora 26 now?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10558250</commentid>
    <comment_count>29</comment_count>
    <who name="Matthew Miller">mattdm</who>
    <bug_when>2017-06-30 15:18:18 -0400</bug_when>
    <thetext>FWIW I can&apos;t support this as a freeze exception because we&apos;re already at significant risk for slipping, but it&apos;d be great to see as a zero-day.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10558269</commentid>
    <comment_count>30</comment_count>
    <who name="Florian Weimer">fweimer</who>
    <bug_when>2017-06-30 15:28:09 -0400</bug_when>
    <thetext>(In reply to Christian Fredrik Kalager Schaller from comment #28)
&gt; Thanks Florian! Will be be getting this patch into Fedora 26 now?

The patch has not been approved upstream.  I&apos;d like to wait for that.  I&apos;ll build new Fedora 26 (and earlier) glibc packages once the change is upstream.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10559355</commentid>
    <comment_count>31</comment_count>
    <who name="Steven Haigh">netwiz</who>
    <bug_when>2017-07-02 02:01:05 -0400</bug_when>
    <thetext>(In reply to Elad Alfassa from comment #18)
&gt; I suggest we add a CommonBugs entry which should be something along these
&gt; lines:
&gt; 
&gt; --
&gt; Some Unity3D-based video games might freeze on startup, showing only a black
&gt; screen. To work around this issue, install jemalloc (&quot;dnf install jemalloc&quot;)
&gt; and start the game using jemalloc.sh ./[GameExecutable]. When using Steam to
&gt; launch your games, right-click on the game on your game list, click
&gt; properties, then click &quot;set launch options&quot; and write &quot;jemalloc.sh
&gt; %command%&quot; in the text box that will appear. (note: it must literally be
&gt; &quot;%command%&quot;, there&apos;s no need to manually replace that with the executable
&gt; name)
&gt; --
&gt; 
&gt; This is probably the most we can do from Fedora&apos;s side, especially
&gt; considering this is all 3rd party software that is not under our control.

+1 for this. I just did a fresh install for the test day and found this exact problem with Cities: Skylines.

The workaround seems to work without any other problems right now - so it would be good to document this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10559637</commentid>
    <comment_count>32</comment_count>
    <who name="Matthew Miller">mattdm</who>
    <bug_when>2017-07-02 10:32:02 -0400</bug_when>
    <thetext>There is a Common Bugs entry for this at https://fedoraproject.org/wiki/Common_F26_bugs#Games_using_the_Unity_engine_freeze_with_black_screen

It&apos;s a wiki, so feel free to improve.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10559663</commentid>
    <comment_count>33</comment_count>
    <who name="Steven Haigh">netwiz</who>
    <bug_when>2017-07-02 11:23:58 -0400</bug_when>
    <thetext>Have updated the entry for this bug on the wiki. It breaks lots of stuff if you use LD_PRELOAD to launch steam itself - so much better to do it on a title by title basis.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10559665</commentid>
    <comment_count>34</comment_count>
    <who name="Matthew Miller">mattdm</who>
    <bug_when>2017-07-02 11:25:01 -0400</bug_when>
    <thetext>(In reply to Steven Haigh from comment #33)
&gt; Have updated the entry for this bug on the wiki. It breaks lots of stuff if
&gt; you use LD_PRELOAD to launch steam itself - so much better to do it on a
&gt; title by title basis.

Excellent -- thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10568037</commentid>
    <comment_count>35</comment_count>
    <who name="Christian Fredrik Kalager Schaller">cschalle</who>
    <bug_when>2017-07-05 12:53:19 -0400</bug_when>
    <thetext>Florian do you have an estimated ETA for upstream approval? I have not experience with glibc so I don&apos;t know if average review time is one week or one year :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10568068</commentid>
    <comment_count>36</comment_count>
    <who name="Florian Weimer">fweimer</who>
    <bug_when>2017-07-05 13:11:07 -0400</bug_when>
    <thetext>(In reply to Christian Fredrik Kalager Schaller from comment #35)
&gt; Florian do you have an estimated ETA for upstream approval? I have not
&gt; experience with glibc so I don&apos;t know if average review time is one week or
&gt; one year :)

Please be patient.  There are several competing patches now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10570712</commentid>
    <comment_count>37</comment_count>
    <who name="Steven Haigh">netwiz</who>
    <bug_when>2017-07-06 10:07:07 -0400</bug_when>
    <thetext>I note that this hasn&apos;t been added as a blocker for F26 - however with the freeze currently in place, would be it suitable to be pushed through the freeze to make the installation media etc?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10570732</commentid>
    <comment_count>38</comment_count>
    <who name="Florian Weimer">fweimer</who>
    <bug_when>2017-07-06 10:11:36 -0400</bug_when>
    <thetext>(In reply to Steven Haigh from comment #37)
&gt; I note that this hasn&apos;t been added as a blocker for F26 - however with the
&gt; freeze currently in place, would be it suitable to be pushed through the
&gt; freeze to make the installation media etc?

I&apos;m against that.  The bug clearly is not a blocker, and it does not make sense to risk destabilizing the for this issue.  Nothing in Fedora requires this change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10570746</commentid>
    <comment_count>39</comment_count>
    <who name="Steven Haigh">netwiz</who>
    <bug_when>2017-07-06 10:13:19 -0400</bug_when>
    <thetext>So more a 0day update?

I know we&apos;ve got the installation notes - but I&apos;m guessing we&apos;ll have quite a few hit it just after install.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10570805</commentid>
    <comment_count>40</comment_count>
    <who name="Matthew Miller">mattdm</who>
    <bug_when>2017-07-06 10:27:00 -0400</bug_when>
    <thetext>If we had another week I might be in favor of a Freeze Exception, but we&apos;re hoping to go gold today. If by some chance we end up delayed, then we could revisit. I think a zero-day is adequate -- as Florian says, nothing we ship will fail to work out of the box.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10570819</commentid>
    <comment_count>41</comment_count>
    <who name="Steven Haigh">netwiz</who>
    <bug_when>2017-07-06 10:30:16 -0400</bug_when>
    <thetext>Ok, I&apos;ll monitor this and if I see anything either way, I&apos;ll try to remember to update the wiki with the latest info to hopefully reduce the number of bugzilla reports on the topic.

I&apos;ve seen a lot of discussion on reddit etc about this issue as well - so I&apos;m kinda expecting the worst :P</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10571735</commentid>
    <comment_count>42</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-07-06 16:31:59 -0400</bug_when>
    <thetext>glibc-2.24-9.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-364f4be949</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10571736</commentid>
    <comment_count>43</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-07-06 16:32:11 -0400</bug_when>
    <thetext>glibc-2.25-7.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-ab2085210e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10572851</commentid>
    <comment_count>44</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-07-07 05:05:54 -0400</bug_when>
    <thetext>glibc-2.24-9.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-364f4be949</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10573208</commentid>
    <comment_count>45</comment_count>
    <who name="Steven Haigh">netwiz</who>
    <bug_when>2017-07-07 07:50:32 -0400</bug_when>
    <thetext>For the record, tested glibc-2.25-7.fc26 as per:
https://bodhi.fedoraproject.org/updates/FEDORA-2017-ab2085210e

Workaround using jemalloc for Unity based games no longer required.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10576686</commentid>
    <comment_count>46</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-07-08 22:52:45 -0400</bug_when>
    <thetext>glibc-2.25-7.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-ab2085210e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10584392</commentid>
    <comment_count>47</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-07-11 16:55:31 -0400</bug_when>
    <thetext>glibc-2.25-7.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10585284</commentid>
    <comment_count>48</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-07-11 23:24:09 -0400</bug_when>
    <thetext>glibc-2.24-9.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1269907</attachid>
            <date>2017-04-07 15:13:00 -0400</date>
            <delta_ts>2017-04-07 15:13:28 -0400</delta_ts>
            <desc>full backtrace</desc>
            <filename>stacktrace.txt</filename>
            <type>text/plain</type>
            <size>12632</size>
            <attacher name="Elad Alfassa">elad</attacher>
            
              <data encoding="base64">VGhyZWFkIDI3IChUaHJlYWQgMHg3ZjhmZDgwZTQ3MDAgKExXUCA1ODgxKSk6CiMwICAweDAwMDA3
ZjkwMDFiMWQ2ZmMgaW4gX19sbGxfbG9ja193YWl0X3ByaXZhdGUgKCkgZnJvbSAvbGliNjQvbGli
Yy5zby42CiMxICAweDAwMDA3ZjkwMDFhOGE5ZTYgaW4gbWFsbG9jICgpIGZyb20gL2xpYjY0L2xp
YmMuc28uNgojMiAgMHgwMDAwN2Y5MDAzNThkNDU1IGluIHRsc19nZXRfYWRkcl90YWlsICgpIGZy
b20gL2xpYjY0L2xkLWxpbnV4LXg4Ni02NC5zby4yCiMzICAweDAwMDA3ZjkwMDAzMmQxZDAgaW4g
bW9ub19kb21haW5fZ2V0ICgpIGZyb20gL3NzZC9TdGVhbUxpYnJhcnkvc3RlYW1hcHBzL2NvbW1v
bi9Hb25lIEhvbWUvR29uZUhvbWVfRGF0YS9Nb25vL3g4Nl82NC9saWJtb25vLnNvCiM0ICAweDAw
MDA3ZjkwMDAyNmIwMjIgaW4gPz8gKCkgZnJvbSAvc3NkL1N0ZWFtTGlicmFyeS9zdGVhbWFwcHMv
Y29tbW9uL0dvbmUgSG9tZS9Hb25lSG9tZV9EYXRhL01vbm8veDg2XzY0L2xpYm1vbm8uc28KIzUg
IDxzaWduYWwgaGFuZGxlciBjYWxsZWQ+CiM2ICAweDAwMDA3ZjkwMDFhODcxMjUgaW4gX2ludF9t
YWxsb2MgKCkgZnJvbSAvbGliNjQvbGliYy5zby42CiM3ICAweDAwMDA3ZjkwMDFhOGE5ZjggaW4g
bWFsbG9jICgpIGZyb20gL2xpYjY0L2xpYmMuc28uNgojOCAgMHgwMDAwN2Y5MDAzNThkNDU1IGlu
IHRsc19nZXRfYWRkcl90YWlsICgpIGZyb20gL2xpYjY0L2xkLWxpbnV4LXg4Ni02NC5zby4yCiM5
ICAweDAwMDA3ZjkwMDAzOTdmYmYgaW4gbW9ub190aHJlYWRfY3VycmVudCAoKSBmcm9tIC9zc2Qv
U3RlYW1MaWJyYXJ5L3N0ZWFtYXBwcy9jb21tb24vR29uZSBIb21lL0dvbmVIb21lX0RhdGEvTW9u
by94ODZfNjQvbGlibW9uby5zbwojMTAgMHgwMDAwN2Y5MDAwMzk4MDZkIGluIG1vbm9fdGhyZWFk
X2F0dGFjaCAoKSBmcm9tIC9zc2QvU3RlYW1MaWJyYXJ5L3N0ZWFtYXBwcy9jb21tb24vR29uZSBI
b21lL0dvbmVIb21lX0RhdGEvTW9uby94ODZfNjQvbGlibW9uby5zbwojMTEgMHgwMDAwMDAwMDAw
ODlkOGUxIGluID8/ICgpCiMxMiAweDAwMDAwMDAwMDA4OWRjMDkgaW4gPz8gKCkKIzEzIDB4MDAw
MDAwMDAwMGEwMmNhNSBpbiA/PyAoKQojMTQgMHgwMDAwN2Y5MDAyNTBiMzZkIGluIHN0YXJ0X3Ro
cmVhZCAoKSBmcm9tIC9saWI2NC9saWJwdGhyZWFkLnNvLjAKIzE1IDB4MDAwMDdmOTAwMWIwZWUw
ZiBpbiBjbG9uZSAoKSBmcm9tIC9saWI2NC9saWJjLnNvLjYKVGhyZWFkIDI2IChUaHJlYWQgMHg3
ZjhmZmMwMTg3MDAgKExXUCA1ODgwKSk6CiMwICAweDAwMDA3ZjkwMDFhZDI4NWQgaW4gbmFub3Ns
ZWVwICgpIGZyb20gL2xpYjY0L2xpYmMuc28uNgojMSAgMHgwMDAwN2Y5MDAxYjA1N2Q3IGluIHVz
bGVlcCAoKSBmcm9tIC9saWI2NC9saWJjLnNvLjYKIzIgIDB4MDAwMDAwMDAwMTAwNGI5ZiBpbiA/
PyAoKQojMyAgMHgwMDAwMDAwMDAwZmZiOTI0IGluID8/ICgpCiM0ICAweDAwMDA3ZjkwMDI1MGIz
NmQgaW4gc3RhcnRfdGhyZWFkICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQuc28uMAojNSAgMHgw
MDAwN2Y5MDAxYjBlZTBmIGluIGNsb25lICgpIGZyb20gL2xpYjY0L2xpYmMuc28uNgpUaHJlYWQg
MjUgKFRocmVhZCAweDdmOGZiNTkxOTcwMCAoTFdQIDU4NzkpKToKIzAgIDB4MDAwMDdmOTAwMjUx
MTdkYiBpbiBwdGhyZWFkX2NvbmRfd2FpdEBAR0xJQkNfMi4zLjIgKCkgZnJvbSAvbGliNjQvbGli
cHRocmVhZC5zby4wCiMxICAweDAwMDA3ZjhmYzExYmUxNTggaW4gcGFfdGhyZWFkZWRfbWFpbmxv
b3Bfd2FpdCAoKSBmcm9tIC9saWI2NC9saWJwdWxzZS5zby4wCiMyICAweDAwMDA3ZjhmYzEzZGRj
NTQgaW4gcGFfc2ltcGxlX3dyaXRlICgpIGZyb20gL2xpYjY0L2xpYnB1bHNlLXNpbXBsZS5zby4w
CiMzICAweDAwMDAwMDAwMDEwMGE5NzAgaW4gPz8gKCkKIzQgIDB4MDAwMDAwMDAwMGZmYjkxNSBp
biA/PyAoKQojNSAgMHgwMDAwN2Y5MDAyNTBiMzZkIGluIHN0YXJ0X3RocmVhZCAoKSBmcm9tIC9s
aWI2NC9saWJwdGhyZWFkLnNvLjAKIzYgIDB4MDAwMDdmOTAwMWIwZWUwZiBpbiBjbG9uZSAoKSBm
cm9tIC9saWI2NC9saWJjLnNvLjYKVGhyZWFkIDI0IChUaHJlYWQgMHg3ZjhmYjYxMWE3MDAgKExX
UCA1ODc4KSk6CiMwICAweDAwMDA3ZjkwMDFiMDJjZWQgaW4gcG9sbCAoKSBmcm9tIC9saWI2NC9s
aWJjLnNvLjYKIzEgIDB4MDAwMDdmOGZjMTFiZGI3MSBpbiBwb2xsX2Z1bmMgKCkgZnJvbSAvbGli
NjQvbGlicHVsc2Uuc28uMAojMiAgMHgwMDAwN2Y4ZmMxMWFmNTMwIGluIHBhX21haW5sb29wX3Bv
bGwgKCkgZnJvbSAvbGliNjQvbGlicHVsc2Uuc28uMAojMyAgMHgwMDAwN2Y4ZmMxMWFmYmMwIGlu
IHBhX21haW5sb29wX2l0ZXJhdGUgKCkgZnJvbSAvbGliNjQvbGlicHVsc2Uuc28uMAojNCAgMHgw
MDAwN2Y4ZmMxMWFmYzUwIGluIHBhX21haW5sb29wX3J1biAoKSBmcm9tIC9saWI2NC9saWJwdWxz
ZS5zby4wCiM1ICAweDAwMDA3ZjhmYzExYmRhYjkgaW4gdGhyZWFkICgpIGZyb20gL2xpYjY0L2xp
YnB1bHNlLnNvLjAKIzYgIDB4MDAwMDdmOGZjMGY1ZDA3OCBpbiBpbnRlcm5hbF90aHJlYWRfZnVu
YyAoKSBmcm9tIC91c3IvbGliNjQvcHVsc2VhdWRpby9saWJwdWxzZWNvbW1vbi0xMC4wLnNvCiM3
ICAweDAwMDA3ZjkwMDI1MGIzNmQgaW4gc3RhcnRfdGhyZWFkICgpIGZyb20gL2xpYjY0L2xpYnB0
aHJlYWQuc28uMAojOCAgMHgwMDAwN2Y5MDAxYjBlZTBmIGluIGNsb25lICgpIGZyb20gL2xpYjY0
L2xpYmMuc28uNgpUaHJlYWQgMjMgKFRocmVhZCAweDdmOGZjMjdmYzcwMCAoTFdQIDU4NTUpKToK
IzAgIDB4MDAwMDdmOTAwMjUxNDUxNiBpbiBkb19mdXRleF93YWl0LmNvbnN0cHJvcCAoKSBmcm9t
IC9saWI2NC9saWJwdGhyZWFkLnNvLjAKIzEgIDB4MDAwMDdmOTAwMjUxNDYwOCBpbiBfX25ld19z
ZW1fd2FpdF9zbG93LmNvbnN0cHJvcC4wICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQuc28uMAoj
MiAgMHgwMDAwMDAwMDAwN2E2ZDUwIGluID8/ICgpCiMzICAweDAwMDAwMDAwMDBhMDJjYTUgaW4g
Pz8gKCkKIzQgIDB4MDAwMDdmOTAwMjUwYjM2ZCBpbiBzdGFydF90aHJlYWQgKCkgZnJvbSAvbGli
NjQvbGlicHRocmVhZC5zby4wCiM1ICAweDAwMDA3ZjkwMDFiMGVlMGYgaW4gY2xvbmUgKCkgZnJv
bSAvbGliNjQvbGliYy5zby42ClRocmVhZCAyMiAoVGhyZWFkIDB4N2Y4ZmMyZmZkNzAwIChMV1Ag
NTg1NCkpOgojMCAgMHgwMDAwN2Y5MDAyNTE0NTE2IGluIGRvX2Z1dGV4X3dhaXQuY29uc3Rwcm9w
ICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQuc28uMAojMSAgMHgwMDAwN2Y5MDAyNTE0NjA4IGlu
IF9fbmV3X3NlbV93YWl0X3Nsb3cuY29uc3Rwcm9wLjAgKCkgZnJvbSAvbGliNjQvbGlicHRocmVh
ZC5zby4wCiMyICAweDAwMDAwMDAwMDEyMTZhYjggaW4gPz8gKCkKIzMgIDB4MDAwMDdmOTAwMjUw
YjM2ZCBpbiBzdGFydF90aHJlYWQgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4wCiM0ICAw
eDAwMDA3ZjkwMDFiMGVlMGYgaW4gY2xvbmUgKCkgZnJvbSAvbGliNjQvbGliYy5zby42ClRocmVh
ZCAyMSAoVGhyZWFkIDB4N2Y4ZmMzN2ZlNzAwIChMV1AgNTg1MykpOgojMCAgMHgwMDAwN2Y5MDAy
NTE0NTE2IGluIGRvX2Z1dGV4X3dhaXQuY29uc3Rwcm9wICgpIGZyb20gL2xpYjY0L2xpYnB0aHJl
YWQuc28uMAojMSAgMHgwMDAwN2Y5MDAyNTE0NjA4IGluIF9fbmV3X3NlbV93YWl0X3Nsb3cuY29u
c3Rwcm9wLjAgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4wCiMyICAweDAwMDAwMDAwMDEy
MTZhYjggaW4gPz8gKCkKIzMgIDB4MDAwMDdmOTAwMjUwYjM2ZCBpbiBzdGFydF90aHJlYWQgKCkg
ZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4wCiM0ICAweDAwMDA3ZjkwMDFiMGVlMGYgaW4gY2xv
bmUgKCkgZnJvbSAvbGliNjQvbGliYy5zby42ClRocmVhZCAyMCAoVGhyZWFkIDB4N2Y4ZmMzZmZm
NzAwIChMV1AgNTg1MikpOgojMCAgMHgwMDAwN2Y5MDAyNTE0NTE2IGluIGRvX2Z1dGV4X3dhaXQu
Y29uc3Rwcm9wICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQuc28uMAojMSAgMHgwMDAwN2Y5MDAy
NTE0NjA4IGluIF9fbmV3X3NlbV93YWl0X3Nsb3cuY29uc3Rwcm9wLjAgKCkgZnJvbSAvbGliNjQv
bGlicHRocmVhZC5zby4wCiMyICAweDAwMDAwMDAwMDEyMTZhYjggaW4gPz8gKCkKIzMgIDB4MDAw
MDdmOTAwMjUwYjM2ZCBpbiBzdGFydF90aHJlYWQgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5z
by4wCiM0ICAweDAwMDA3ZjkwMDFiMGVlMGYgaW4gY2xvbmUgKCkgZnJvbSAvbGliNjQvbGliYy5z
by42ClRocmVhZCAxOSAoVGhyZWFkIDB4N2Y4ZmQ4ZmY5NzAwIChMV1AgNTg1MSkpOgojMCAgMHgw
MDAwN2Y5MDAyNTE0NTE2IGluIGRvX2Z1dGV4X3dhaXQuY29uc3Rwcm9wICgpIGZyb20gL2xpYjY0
L2xpYnB0aHJlYWQuc28uMAojMSAgMHgwMDAwN2Y5MDAyNTE0NjA4IGluIF9fbmV3X3NlbV93YWl0
X3Nsb3cuY29uc3Rwcm9wLjAgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4wCiMyICAweDAw
MDAwMDAwMDEyMTZhYjggaW4gPz8gKCkKIzMgIDB4MDAwMDdmOTAwMjUwYjM2ZCBpbiBzdGFydF90
aHJlYWQgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4wCiM0ICAweDAwMDA3ZjkwMDFiMGVl
MGYgaW4gY2xvbmUgKCkgZnJvbSAvbGliNjQvbGliYy5zby42ClRocmVhZCAxOCAoVGhyZWFkIDB4
N2Y4ZmQ5N2ZhNzAwIChMV1AgNTg1MCkpOgojMCAgMHgwMDAwN2Y5MDAyNTE0NTE2IGluIGRvX2Z1
dGV4X3dhaXQuY29uc3Rwcm9wICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQuc28uMAojMSAgMHgw
MDAwN2Y5MDAyNTE0NjA4IGluIF9fbmV3X3NlbV93YWl0X3Nsb3cuY29uc3Rwcm9wLjAgKCkgZnJv
bSAvbGliNjQvbGlicHRocmVhZC5zby4wCiMyICAweDAwMDAwMDAwMDEyMTZhYjggaW4gPz8gKCkK
IzMgIDB4MDAwMDdmOTAwMjUwYjM2ZCBpbiBzdGFydF90aHJlYWQgKCkgZnJvbSAvbGliNjQvbGli
cHRocmVhZC5zby4wCiM0ICAweDAwMDA3ZjkwMDFiMGVlMGYgaW4gY2xvbmUgKCkgZnJvbSAvbGli
NjQvbGliYy5zby42ClRocmVhZCAxNyAoVGhyZWFkIDB4N2Y4ZmQ5ZmZiNzAwIChMV1AgNTg0OSkp
OgojMCAgMHgwMDAwN2Y5MDAyNTE0NTE2IGluIGRvX2Z1dGV4X3dhaXQuY29uc3Rwcm9wICgpIGZy
b20gL2xpYjY0L2xpYnB0aHJlYWQuc28uMAojMSAgMHgwMDAwN2Y5MDAyNTE0NjA4IGluIF9fbmV3
X3NlbV93YWl0X3Nsb3cuY29uc3Rwcm9wLjAgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4w
CiMyICAweDAwMDAwMDAwMDEyMTZhYjggaW4gPz8gKCkKIzMgIDB4MDAwMDdmOTAwMjUwYjM2ZCBp
biBzdGFydF90aHJlYWQgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4wCiM0ICAweDAwMDA3
ZjkwMDFiMGVlMGYgaW4gY2xvbmUgKCkgZnJvbSAvbGliNjQvbGliYy5zby42ClRocmVhZCAxNiAo
VGhyZWFkIDB4N2Y4ZmRhN2ZjNzAwIChMV1AgNTg0OCkpOgojMCAgMHgwMDAwN2Y5MDAyNTE0NTE2
IGluIGRvX2Z1dGV4X3dhaXQuY29uc3Rwcm9wICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQuc28u
MAojMSAgMHgwMDAwN2Y5MDAyNTE0NjA4IGluIF9fbmV3X3NlbV93YWl0X3Nsb3cuY29uc3Rwcm9w
LjAgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4wCiMyICAweDAwMDAwMDAwMDEyMTZhYjgg
aW4gPz8gKCkKIzMgIDB4MDAwMDdmOTAwMjUwYjM2ZCBpbiBzdGFydF90aHJlYWQgKCkgZnJvbSAv
bGliNjQvbGlicHRocmVhZC5zby4wCiM0ICAweDAwMDA3ZjkwMDFiMGVlMGYgaW4gY2xvbmUgKCkg
ZnJvbSAvbGliNjQvbGliYy5zby42ClRocmVhZCAxNSAoVGhyZWFkIDB4N2Y4ZmRhZmZkNzAwIChM
V1AgNTg0NykpOgojMCAgMHgwMDAwN2Y5MDAyNTE0NTE2IGluIGRvX2Z1dGV4X3dhaXQuY29uc3Rw
cm9wICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQuc28uMAojMSAgMHgwMDAwN2Y5MDAyNTE0NjA4
IGluIF9fbmV3X3NlbV93YWl0X3Nsb3cuY29uc3Rwcm9wLjAgKCkgZnJvbSAvbGliNjQvbGlicHRo
cmVhZC5zby4wCiMyICAweDAwMDAwMDAwMDBhMDBlMTAgaW4gPz8gKCkKIzMgIDB4MDAwMDAwMDAw
MGEwMmNhNSBpbiA/PyAoKQojNCAgMHgwMDAwN2Y5MDAyNTBiMzZkIGluIHN0YXJ0X3RocmVhZCAo
KSBmcm9tIC9saWI2NC9saWJwdGhyZWFkLnNvLjAKIzUgIDB4MDAwMDdmOTAwMWIwZWUwZiBpbiBj
bG9uZSAoKSBmcm9tIC9saWI2NC9saWJjLnNvLjYKVGhyZWFkIDE0IChUaHJlYWQgMHg3ZjhmZGI3
ZmU3MDAgKExXUCA1ODQ2KSk6CiMwICAweDAwMDA3ZjkwMDI1MTQ1MTYgaW4gZG9fZnV0ZXhfd2Fp
dC5jb25zdHByb3AgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4wCiMxICAweDAwMDA3Zjkw
MDI1MTQ2MDggaW4gX19uZXdfc2VtX3dhaXRfc2xvdy5jb25zdHByb3AuMCAoKSBmcm9tIC9saWI2
NC9saWJwdGhyZWFkLnNvLjAKIzIgIDB4MDAwMDAwMDAwMGEwMGUxMCBpbiA/PyAoKQojMyAgMHgw
MDAwMDAwMDAwYTAyY2E1IGluID8/ICgpCiM0ICAweDAwMDA3ZjkwMDI1MGIzNmQgaW4gc3RhcnRf
dGhyZWFkICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQuc28uMAojNSAgMHgwMDAwN2Y5MDAxYjBl
ZTBmIGluIGNsb25lICgpIGZyb20gL2xpYjY0L2xpYmMuc28uNgpUaHJlYWQgMTMgKFRocmVhZCAw
eDdmOGZkYmZmZjcwMCAoTFdQIDU4NDUpKToKIzAgIDB4MDAwMDdmOTAwMjUxNDUxNiBpbiBkb19m
dXRleF93YWl0LmNvbnN0cHJvcCAoKSBmcm9tIC9saWI2NC9saWJwdGhyZWFkLnNvLjAKIzEgIDB4
MDAwMDdmOTAwMjUxNDYwOCBpbiBfX25ld19zZW1fd2FpdF9zbG93LmNvbnN0cHJvcC4wICgpIGZy
b20gL2xpYjY0L2xpYnB0aHJlYWQuc28uMAojMiAgMHgwMDAwMDAwMDAwYTAwZTEwIGluID8/ICgp
CiMzICAweDAwMDAwMDAwMDBhMDJjYTUgaW4gPz8gKCkKIzQgIDB4MDAwMDdmOTAwMjUwYjM2ZCBp
biBzdGFydF90aHJlYWQgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4wCiM1ICAweDAwMDA3
ZjkwMDFiMGVlMGYgaW4gY2xvbmUgKCkgZnJvbSAvbGliNjQvbGliYy5zby42ClRocmVhZCAxMiAo
VGhyZWFkIDB4N2Y4ZmYwYTFhNzAwIChMV1AgNTg0NCkpOgojMCAgMHgwMDAwN2Y5MDAyNTE0NTE2
IGluIGRvX2Z1dGV4X3dhaXQuY29uc3Rwcm9wICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQuc28u
MAojMSAgMHgwMDAwN2Y5MDAyNTE0NjA4IGluIF9fbmV3X3NlbV93YWl0X3Nsb3cuY29uc3Rwcm9w
LjAgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4wCiMyICAweDAwMDAwMDAwMDBhMDBlMTAg
aW4gPz8gKCkKIzMgIDB4MDAwMDAwMDAwMGEwMmNhNSBpbiA/PyAoKQojNCAgMHgwMDAwN2Y5MDAy
NTBiMzZkIGluIHN0YXJ0X3RocmVhZCAoKSBmcm9tIC9saWI2NC9saWJwdGhyZWFkLnNvLjAKIzUg
IDB4MDAwMDdmOTAwMWIwZWUwZiBpbiBjbG9uZSAoKSBmcm9tIC9saWI2NC9saWJjLnNvLjYKVGhy
ZWFkIDExIChUaHJlYWQgMHg3ZjhmZjEyMWI3MDAgKExXUCA1ODQzKSk6CiMwICAweDAwMDA3Zjkw
MDI1MTQ1MTYgaW4gZG9fZnV0ZXhfd2FpdC5jb25zdHByb3AgKCkgZnJvbSAvbGliNjQvbGlicHRo
cmVhZC5zby4wCiMxICAweDAwMDA3ZjkwMDI1MTQ2MDggaW4gX19uZXdfc2VtX3dhaXRfc2xvdy5j
b25zdHByb3AuMCAoKSBmcm9tIC9saWI2NC9saWJwdGhyZWFkLnNvLjAKIzIgIDB4MDAwMDAwMDAw
MGEwMGUxMCBpbiA/PyAoKQojMyAgMHgwMDAwMDAwMDAwYTAyY2E1IGluID8/ICgpCiM0ICAweDAw
MDA3ZjkwMDI1MGIzNmQgaW4gc3RhcnRfdGhyZWFkICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQu
c28uMAojNSAgMHgwMDAwN2Y5MDAxYjBlZTBmIGluIGNsb25lICgpIGZyb20gL2xpYjY0L2xpYmMu
c28uNgpUaHJlYWQgMTAgKFRocmVhZCAweDdmOGZmMWExYzcwMCAoTFdQIDU4NDIpKToKIzAgIDB4
MDAwMDdmOTAwMjUxNDUxNiBpbiBkb19mdXRleF93YWl0LmNvbnN0cHJvcCAoKSBmcm9tIC9saWI2
NC9saWJwdGhyZWFkLnNvLjAKIzEgIDB4MDAwMDdmOTAwMjUxNDYwOCBpbiBfX25ld19zZW1fd2Fp
dF9zbG93LmNvbnN0cHJvcC4wICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQuc28uMAojMiAgMHgw
MDAwMDAwMDAwYTAwZTEwIGluID8/ICgpCiMzICAweDAwMDAwMDAwMDBhMDJjYTUgaW4gPz8gKCkK
IzQgIDB4MDAwMDdmOTAwMjUwYjM2ZCBpbiBzdGFydF90aHJlYWQgKCkgZnJvbSAvbGliNjQvbGli
cHRocmVhZC5zby4wCiM1ICAweDAwMDA3ZjkwMDFiMGVlMGYgaW4gY2xvbmUgKCkgZnJvbSAvbGli
NjQvbGliYy5zby42ClRocmVhZCA5IChUaHJlYWQgMHg3ZjhmZjIyMWQ3MDAgKExXUCA1ODQxKSk6
CiMwICAweDAwMDA3ZjkwMDI1MTQ1MTYgaW4gZG9fZnV0ZXhfd2FpdC5jb25zdHByb3AgKCkgZnJv
bSAvbGliNjQvbGlicHRocmVhZC5zby4wCiMxICAweDAwMDA3ZjkwMDI1MTQ2MDggaW4gX19uZXdf
c2VtX3dhaXRfc2xvdy5jb25zdHByb3AuMCAoKSBmcm9tIC9saWI2NC9saWJwdGhyZWFkLnNvLjAK
IzIgIDB4MDAwMDAwMDAwMGEwMGUxMCBpbiA/PyAoKQojMyAgMHgwMDAwMDAwMDAwYTAyY2E1IGlu
ID8/ICgpCiM0ICAweDAwMDA3ZjkwMDI1MGIzNmQgaW4gc3RhcnRfdGhyZWFkICgpIGZyb20gL2xp
YjY0L2xpYnB0aHJlYWQuc28uMAojNSAgMHgwMDAwN2Y5MDAxYjBlZTBmIGluIGNsb25lICgpIGZy
b20gL2xpYjY0L2xpYmMuc28uNgpUaHJlYWQgOCAoVGhyZWFkIDB4N2Y4ZmYyYTFlNzAwIChMV1Ag
NTg0MCkpOgojMCAgMHgwMDAwN2Y5MDAyNTExN2RiIGluIHB0aHJlYWRfY29uZF93YWl0QEBHTElC
Q18yLjMuMiAoKSBmcm9tIC9saWI2NC9saWJwdGhyZWFkLnNvLjAKIzEgIDB4MDAwMDdmOGZmY2U4
M2FmYiBpbiB1dGlsX3F1ZXVlX3RocmVhZF9mdW5jICgpIGZyb20gL3Vzci9saWI2NC9kcmkvcmFk
ZW9uc2lfZHJpLnNvCiMyICAweDAwMDA3ZjhmZmNlODM4MzcgaW4gaW1wbF90aHJkX3JvdXRpbmUg
KCkgZnJvbSAvdXNyL2xpYjY0L2RyaS9yYWRlb25zaV9kcmkuc28KIzMgIDB4MDAwMDdmOTAwMjUw
YjM2ZCBpbiBzdGFydF90aHJlYWQgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4wCiM0ICAw
eDAwMDA3ZjkwMDFiMGVlMGYgaW4gY2xvbmUgKCkgZnJvbSAvbGliNjQvbGliYy5zby42ClRocmVh
ZCA3IChUaHJlYWQgMHg3ZjhmZjMyMWY3MDAgKExXUCA1ODM5KSk6CiMwICAweDAwMDA3ZjkwMDI1
MTE3ZGIgaW4gcHRocmVhZF9jb25kX3dhaXRAQEdMSUJDXzIuMy4yICgpIGZyb20gL2xpYjY0L2xp
YnB0aHJlYWQuc28uMAojMSAgMHgwMDAwN2Y4ZmZjZTgzYWZiIGluIHV0aWxfcXVldWVfdGhyZWFk
X2Z1bmMgKCkgZnJvbSAvdXNyL2xpYjY0L2RyaS9yYWRlb25zaV9kcmkuc28KIzIgIDB4MDAwMDdm
OGZmY2U4MzgzNyBpbiBpbXBsX3RocmRfcm91dGluZSAoKSBmcm9tIC91c3IvbGliNjQvZHJpL3Jh
ZGVvbnNpX2RyaS5zbwojMyAgMHgwMDAwN2Y5MDAyNTBiMzZkIGluIHN0YXJ0X3RocmVhZCAoKSBm
cm9tIC9saWI2NC9saWJwdGhyZWFkLnNvLjAKIzQgIDB4MDAwMDdmOTAwMWIwZWUwZiBpbiBjbG9u
ZSAoKSBmcm9tIC9saWI2NC9saWJjLnNvLjYKVGhyZWFkIDYgKFRocmVhZCAweDdmOGZmM2EyMDcw
MCAoTFdQIDU4MzgpKToKIzAgIDB4MDAwMDdmOTAwMjUxMTdkYiBpbiBwdGhyZWFkX2NvbmRfd2Fp
dEBAR0xJQkNfMi4zLjIgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4wCiMxICAweDAwMDA3
ZjhmZmNlODNhZmIgaW4gdXRpbF9xdWV1ZV90aHJlYWRfZnVuYyAoKSBmcm9tIC91c3IvbGliNjQv
ZHJpL3JhZGVvbnNpX2RyaS5zbwojMiAgMHgwMDAwN2Y4ZmZjZTgzODM3IGluIGltcGxfdGhyZF9y
b3V0aW5lICgpIGZyb20gL3Vzci9saWI2NC9kcmkvcmFkZW9uc2lfZHJpLnNvCiMzICAweDAwMDA3
ZjkwMDI1MGIzNmQgaW4gc3RhcnRfdGhyZWFkICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQuc28u
MAojNCAgMHgwMDAwN2Y5MDAxYjBlZTBmIGluIGNsb25lICgpIGZyb20gL2xpYjY0L2xpYmMuc28u
NgpUaHJlYWQgNSAoVGhyZWFkIDB4N2Y4ZmY0MjIxNzAwIChMV1AgNTgzNykpOgojMCAgMHgwMDAw
N2Y5MDAyNTExN2RiIGluIHB0aHJlYWRfY29uZF93YWl0QEBHTElCQ18yLjMuMiAoKSBmcm9tIC9s
aWI2NC9saWJwdGhyZWFkLnNvLjAKIzEgIDB4MDAwMDdmOGZmY2U4M2FmYiBpbiB1dGlsX3F1ZXVl
X3RocmVhZF9mdW5jICgpIGZyb20gL3Vzci9saWI2NC9kcmkvcmFkZW9uc2lfZHJpLnNvCiMyICAw
eDAwMDA3ZjhmZmNlODM4MzcgaW4gaW1wbF90aHJkX3JvdXRpbmUgKCkgZnJvbSAvdXNyL2xpYjY0
L2RyaS9yYWRlb25zaV9kcmkuc28KIzMgIDB4MDAwMDdmOTAwMjUwYjM2ZCBpbiBzdGFydF90aHJl
YWQgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4wCiM0ICAweDAwMDA3ZjkwMDFiMGVlMGYg
aW4gY2xvbmUgKCkgZnJvbSAvbGliNjQvbGliYy5zby42ClRocmVhZCA0IChUaHJlYWQgMHg3Zjhm
ZjRjMjc3MDAgKExXUCA1ODM2KSk6CiMwICAweDAwMDA3ZjkwMDI1MTE3ZGIgaW4gcHRocmVhZF9j
b25kX3dhaXRAQEdMSUJDXzIuMy4yICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQuc28uMAojMSAg
MHgwMDAwN2Y4ZmZjZTgzYWZiIGluIHV0aWxfcXVldWVfdGhyZWFkX2Z1bmMgKCkgZnJvbSAvdXNy
L2xpYjY0L2RyaS9yYWRlb25zaV9kcmkuc28KIzIgIDB4MDAwMDdmOGZmY2U4MzgzNyBpbiBpbXBs
X3RocmRfcm91dGluZSAoKSBmcm9tIC91c3IvbGliNjQvZHJpL3JhZGVvbnNpX2RyaS5zbwojMyAg
MHgwMDAwN2Y5MDAyNTBiMzZkIGluIHN0YXJ0X3RocmVhZCAoKSBmcm9tIC9saWI2NC9saWJwdGhy
ZWFkLnNvLjAKIzQgIDB4MDAwMDdmOTAwMWIwZWUwZiBpbiBjbG9uZSAoKSBmcm9tIC9saWI2NC9s
aWJjLnNvLjYKVGhyZWFkIDMgKFRocmVhZCAweDdmOGZmZmFlYjcwMCAoTFdQIDU4MzUpKToKIzAg
IDB4MDAwMDdmOTAwMjUxNDUxNiBpbiBkb19mdXRleF93YWl0LmNvbnN0cHJvcCAoKSBmcm9tIC9s
aWI2NC9saWJwdGhyZWFkLnNvLjAKIzEgIDB4MDAwMDdmOTAwMjUxNDYwOCBpbiBfX25ld19zZW1f
d2FpdF9zbG93LmNvbnN0cHJvcC4wICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQuc28uMAojMiAg
MHgwMDAwN2Y5MDAwM2NiY2U3IGluIG1vbm9fc2VtX3dhaXQgKCkgZnJvbSAvc3NkL1N0ZWFtTGli
cmFyeS9zdGVhbWFwcHMvY29tbW9uL0dvbmUgSG9tZS9Hb25lSG9tZV9EYXRhL01vbm8veDg2XzY0
L2xpYm1vbm8uc28KIzMgIDB4MDAwMDdmOTAwMDMzMjRhZiBpbiA/PyAoKSBmcm9tIC9zc2QvU3Rl
YW1MaWJyYXJ5L3N0ZWFtYXBwcy9jb21tb24vR29uZSBIb21lL0dvbmVIb21lX0RhdGEvTW9uby94
ODZfNjQvbGlibW9uby5zbwojNCAgMHgwMDAwN2Y5MDAwMzljYTBhIGluID8/ICgpIGZyb20gL3Nz
ZC9TdGVhbUxpYnJhcnkvc3RlYW1hcHBzL2NvbW1vbi9Hb25lIEhvbWUvR29uZUhvbWVfRGF0YS9N
b25vL3g4Nl82NC9saWJtb25vLnNvCiM1ICAweDAwMDA3ZjkwMDAzYzM5MGMgaW4gPz8gKCkgZnJv
bSAvc3NkL1N0ZWFtTGlicmFyeS9zdGVhbWFwcHMvY29tbW9uL0dvbmUgSG9tZS9Hb25lSG9tZV9E
YXRhL01vbm8veDg2XzY0L2xpYm1vbm8uc28KIzYgIDB4MDAwMDdmOTAwMDNlNGFjMSBpbiA/PyAo
KSBmcm9tIC9zc2QvU3RlYW1MaWJyYXJ5L3N0ZWFtYXBwcy9jb21tb24vR29uZSBIb21lL0dvbmVI
b21lX0RhdGEvTW9uby94ODZfNjQvbGlibW9uby5zbwojNyAgMHgwMDAwN2Y5MDAyNTBiMzZkIGlu
IHN0YXJ0X3RocmVhZCAoKSBmcm9tIC9saWI2NC9saWJwdGhyZWFkLnNvLjAKIzggIDB4MDAwMDdm
OTAwMWIwZWUwZiBpbiBjbG9uZSAoKSBmcm9tIC9saWI2NC9saWJjLnNvLjYKVGhyZWFkIDIgKFRo
cmVhZCAweDdmOTAwMzc4MzcwMCAoTFdQIDU4MzQpKToKIzAgIDB4MDAwMDdmOTAwMjUxNTdkZCBp
biBuYW5vc2xlZXAgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5zby4wCiMxICAweDAwMDA3Zjkw
MDAzYjAwMWUgaW4gPz8gKCkgZnJvbSAvc3NkL1N0ZWFtTGlicmFyeS9zdGVhbWFwcHMvY29tbW9u
L0dvbmUgSG9tZS9Hb25lSG9tZV9EYXRhL01vbm8veDg2XzY0L2xpYm1vbm8uc28KIzIgIDB4MDAw
MDdmOTAwMjUwYjM2ZCBpbiBzdGFydF90aHJlYWQgKCkgZnJvbSAvbGliNjQvbGlicHRocmVhZC5z
by4wCiMzICAweDAwMDA3ZjkwMDFiMGVlMGYgaW4gY2xvbmUgKCkgZnJvbSAvbGliNjQvbGliYy5z
by42ClRocmVhZCAxIChUaHJlYWQgMHg3ZjkwMDM3NWZkYzAgKExXUCA1ODMzKSk6CiMwICAweDAw
MDA3ZjkwMDI1MTU3ZGQgaW4gbmFub3NsZWVwICgpIGZyb20gL2xpYjY0L2xpYnB0aHJlYWQuc28u
MAojMSAgMHgwMDAwMDAwMDAwYTAyZjIzIGluID8/ICgpCiMyICAweDAwMDAwMDAwMDA4OWQ1MWQg
aW4gPz8gKCkKIzMgIDB4MDAwMDAwMDAwMDg5ODczMiBpbiA/PyAoKQojNCAgMHgwMDAwMDAwMDAw
YmFiODY0IGluID8/ICgpCiM1ICAweDAwMDA3ZjkwMDFhMWU1ZmUgaW4gX19saWJjX3N0YXJ0X21h
aW4gKCkgZnJvbSAvbGliNjQvbGliYy5zby42CiM2ICAweDAwMDAwMDAwMDA0NGI5YjkgaW4gPz8g
KCkKIzcgIDB4MDAwMDdmZmUyMDM5MmM1OCBpbiA/PyAoKQojOCAgMHgwMDAwN2Y5MDAzN2EyMTgw
IGluIHR1bmFibGVfbGlzdCAoKSBmcm9tIC9saWI2NC9sZC1saW51eC14ODYtNjQuc28uMgojOSAg
MHgwMDAwMDAwMDAwMDAwMDAxIGluID8/ICgpCiMxMCAweDAwMDA3ZmZlMjAzOTQxMzEgaW4gPz8g
KCkKIzExIDB4MDAwMDAwMDAwMDAwMDAwMCBpbiA/PyAoKQo=
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1288634</attachid>
            <date>2017-06-17 15:05:00 -0400</date>
            <delta_ts>2017-06-17 15:05:50 -0400</delta_ts>
            <desc>LD_PRELOAD stub for __tls_get_addr() that aligns the stack</desc>
            <filename>align-tls-get-addr.zip</filename>
            <type>application/zip</type>
            <size>921</size>
            <attacher name="Nicholas Miell">nmiell</attacher>
            
              <data encoding="base64">UEsDBAoAAAAAAFtf0UoAAAAAAAAAAAAAAAATABwAYWxpZ24tdGxzLWdldC1hZGRyL1VUCQAD7XtF
We17RVl1eAsAAQToAwAABOgDAABQSwMEFAAAAAgAC1/RSusq5gKNAAAArgAAACEAHABhbGlnbi10
bHMtZ2V0LWFkZHIvdGxzX2dldF9hZGRyLmNVVAkAA1V7RVmTe0VZdXgLAAEE6AMAAAToAwAAVYyx
CsIwFEXnvq941CUp4g9UnXQTB+ng9ohJGgNpKq8vgoj/brGT47mHe1Yx21Scx61Lvc2b+x6AyIhw
vBXxREr1I1tPJsWQyXCgxxizeNYan2N02BBJmih4IeMco1pWiRreUC2gGglG/0yjcYcuTa9BXbrT
gc7Ha7fG+j9S6xagYi+FM85XNdda+MAXUEsDBBQAAAAIACdf0UoVRj7k0gAAACcBAAAeABwAYWxp
Z24tdGxzLWdldC1hZGRyL21lc29uLmJ1aWxkVVQJAAOJe0VZj3tFWXV4CwABBOgDAAAE6AMAAF1P
O2vDMBCe61+hTQ7UhqwGT23p1kJCplKErDsrKqeT0AOa/vpKZCh0ueG77xlT+EJTRqnJWZ4K5cli
mTRAko9CmnYAd12pqBCLC5zFIj6kUbnAarkej522VUdQbhFXwK3azvTuB0F+Hoaheal4j1E62eqR
Sx7l9Kxe3y7q/H45Pb2s3YY026otLj23CYHEKjzmwHPrpEzw0RGmsX/n3TEoclvS6TZKoC7IV53w
Dx0eZNujuva+5x8wmw6x9tj64e6+W3BHACMyIBuHeRFAw2H4BVBLAQIeAwoAAAAAAFtf0UoAAAAA
AAAAAAAAAAATABgAAAAAAAAAEAD4QQAAAABhbGlnbi10bHMtZ2V0LWFkZHIvVVQFAAPte0VZdXgL
AAEE6AMAAAToAwAAUEsBAh4DFAAAAAgAC1/RSusq5gKNAAAArgAAACEAGAAAAAAAAQAAALCBTQAA
AGFsaWduLXRscy1nZXQtYWRkci90bHNfZ2V0X2FkZHIuY1VUBQADVXtFWXV4CwABBOgDAAAE6AMA
AFBLAQIeAxQAAAAIACdf0UoVRj7k0gAAACcBAAAeABgAAAAAAAEAAACwgTUBAABhbGlnbi10bHMt
Z2V0LWFkZHIvbWVzb24uYnVpbGRVVAUAA4l7RVl1eAsAAQToAwAABOgDAABQSwUGAAAAAAMAAwAk
AQAAXwIAAAAA
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1288761</attachid>
            <date>2017-06-18 00:44:00 -0400</date>
            <delta_ts>2017-06-18 00:44:26 -0400</delta_ts>
            <desc>proposed glibc patch</desc>
            <filename>0001-Align-the-stack-on-entry-to-__tls_get_addr.patch</filename>
            <type>text/plain</type>
            <size>1214</size>
            <attacher name="Nicholas Miell">nmiell</attacher>
            
              <data encoding="base64">RnJvbSAzMjg4YzZkYTY0YWRkM2I0NTYxYjhjMTBmZmY1MjIwMjdjYWVhMDFjIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBOaWNob2xhcyBNaWVsbCA8bm1pZWxsQGdtYWlsLmNvbT4KRGF0
ZTogU2F0LCAxNyBKdW4gMjAxNyAxODoyMTowNyAtMDcwMApTdWJqZWN0OiBbUEFUQ0hdIEFsaWdu
IHRoZSBzdGFjayBvbiBlbnRyeSB0byBfX3Rsc19nZXRfYWRkcigpCgpPbGQgdmVyc2lvbnMgb2Yg
Z2NjICg0ICYgNSkgZGlkbid0IGFsaWduIHRoZSBzdGFjayBhY2NvcmRpbmcgdG8gdGhlCkFNRDY0
IHBzQUJJIHdoZW4gY2FsbGluZyBfX3Rsc19nZXRfYWRkcigpLiBBcHBhcmVudGx5IG5ldyB2ZXJz
aW9ucyBvZgpnY2MgKDcpIGdvdCBtdWNoIG1vcmUgYWdncmVzc2l2ZSBhYm91dCB2ZWN0b3Jpemlu
ZyBhbmQgZ2VuZXJhdGluZyBNT1ZBUFMKaW5zdHJ1Y3Rpb25zLCB3aGljaCBtZWFucyBvbGQgYmlu
YXJpZXMgYnVpbHQgd2l0aCB0aGUgYnVnZ3kgdmVyc2lvbnMgb2YKZ2NjIGFyZSBtdWNoIG1vcmUg
bGlrZWx5IHRvIGNyYXNoIHdoZW4gdXNpbmcgdmVyc2lvbnMgb2YgZ2xpYmMgYnVpbHQKdXNpbmcg
Z2NjIDcuCgpGb3IgZXhhbXBsZSwgYSBsYXJnZSBudW1iZXIgb2YgTGludXggZ2FtZXMgYnVpbHQg
dXNpbmcgdGhlIFVuaXR5IGdhbWUKZW5naW5lIGFuZCBhdmFpbGFibGUgZm9yIHB1cmNoYXNlIG9u
IFN0ZWFtLgotLS0KIGVsZi9kbC10bHMuYyB8IDQgKysrKwogMSBmaWxlIGNoYW5nZWQsIDQgaW5z
ZXJ0aW9ucygrKQoKZGlmZiAtLWdpdCBhL2VsZi9kbC10bHMuYyBiL2VsZi9kbC10bHMuYwppbmRl
eCA1YWJhMzNiM2ZhLi4zZjNjYjkxN2RlIDEwMDY0NAotLS0gYS9lbGYvZGwtdGxzLmMKKysrIGIv
ZWxmL2RsLXRscy5jCkBAIC04MjcsNiArODI3LDEwIEBAIHJ0bGRfaGlkZGVuX3Byb3RvIChfX3Rs
c19nZXRfYWRkcikKIHJ0bGRfaGlkZGVuX2RlZiAoX190bHNfZ2V0X2FkZHIpCiAjZW5kaWYKIAor
I2lmZGVmIF9feDg2XzY0X18KKy8qIE9sZCB2ZXJzaW9ucyBvZiBnY2MgZGlkbid0IGFsaWduIHRo
ZSBzdGFjay4gKi8KK19fYXR0cmlidXRlX18oKGZvcmNlX2FsaWduX2FyZ19wb2ludGVyKSkKKyNl
bmRpZgogLyogVGhlIGdlbmVyaWMgZHluYW1pYyBhbmQgbG9jYWwgZHluYW1pYyBtb2RlbCBjYW5u
b3QgYmUgdXNlZCBpbgogICAgc3RhdGljYWxseSBsaW5rZWQgYXBwbGljYXRpb25zLiAgKi8KIHZv
aWQgKgotLSAKMi4xMy4wCgo=
</data>

          </attachment>
      

    </bug>

</bugzilla>