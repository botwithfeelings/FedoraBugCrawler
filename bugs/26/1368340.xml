<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1368340</bug_id>
          
          <creation_ts>2016-08-19 02:23:00 -0400</creation_ts>
          <short_desc>crash with unicode directory name</short_desc>
          <delta_ts>2017-05-02 12:50:38 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>dnf</component>
          <version>26</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>RAWHIDE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>i18n, Reopened, Triaged</keywords>
          <priority>high</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1308994</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Igor Gnatenko">ignatenko</reporter>
          <assigned_to name="Michael Mráka">mmraka</assigned_to>
          <cc>extras-qa</cc>
    
    
    <cc>ignatenko</cc>
    
    
    <cc>jmracek</cc>
    
    
    <cc>mhroncok</cc>
    
    
    <cc>mluscon</cc>
    
    
    <cc>mmraka</cc>
    
    
    <cc>packaging-team-maint</cc>
    
    
    <cc>pnemade</cc>
    
    
    <cc>rpm-software-management</cc>
    
    
    <cc>vmukhame</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          <cf_clone_of>1308994</cf_clone_of>
          <cf_environment></cf_environment>
          <cf_last_closed>2017-05-02 12:50:38</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9629420</commentid>
    <comment_count>0</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-08-19 02:23:58 -0400</bug_when>
    <thetext>[brain@x1carbon ~]$ LANG=C sudo dnf install ./Stažené/valgrind-3.11.0-26.fc25.x86_64.rpm
--- Logging error ---
Traceback (most recent call last):
  File &quot;/usr/lib64/python3.5/logging/__init__.py&quot;, line 982, in emit
    stream.write(msg)
UnicodeEncodeError: &apos;ascii&apos; codec can&apos;t encode characters in position 49-50: ordinal not in range(128)
Call stack:
  File &quot;/bin/dnf&quot;, line 58, in &lt;module&gt;
    main.user_main(sys.argv[1:], exit_code=True)
  File &quot;/usr/lib/python3.5/site-packages/dnf/cli/main.py&quot;, line 174, in user_main
    errcode = main(args)
  File &quot;/usr/lib/python3.5/site-packages/dnf/cli/main.py&quot;, line 60, in main
    return _main(base, args)
  File &quot;/usr/lib/python3.5/site-packages/dnf/cli/main.py&quot;, line 93, in _main
    cli.configure(list(map(ucd, args)))
  File &quot;/usr/lib/python3.5/site-packages/dnf/cli/cli.py&quot;, line 1035, in configure
    self._log_essentials()
  File &quot;/usr/lib/python3.5/site-packages/dnf/cli/cli.py&quot;, line 792, in _log_essentials
    &apos;Command: %s&apos;, self.cmdstring)
Message: &apos;Command: %s&apos;
Arguments: (&apos;dnf install ./Sta\udcc5\udcbeen\udcc3\udca9/valgrind-3.11.0-26.fc25.x86_64.rpm &apos;,)
Last metadata expiration check: 0:03:52 ago on Fri Aug 19 08:18:03 2016.
Segmentation fault




We should open logging file using codecs.open().</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9629654</commentid>
    <comment_count>1</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2016-08-19 04:04:36 -0400</bug_when>
    <thetext>Igor, please can you provide standard information for bug reports, like version, what&apos;s the problem, what behavior you expect, how to reproduce it. Just keep in mind, that the bug can be solved by someone else and not by you. All this information are essential even if you provide a solution. Also keep in mind that your report can other reporters take as a standard format, how to report a bug on DNF. Thank you very much.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9629769</commentid>
    <comment_count>2</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-08-19 04:41:20 -0400</bug_when>
    <thetext>(In reply to Jaroslav Mracek from comment #1)
&gt; Igor, please can you provide standard information for bug reports, like
&gt; version, what&apos;s the problem, what behavior you expect, how to reproduce it.
&gt; Just keep in mind, that the bug can be solved by someone else and not by
&gt; you. All this information are essential even if you provide a solution. Also
&gt; keep in mind that your report can other reporters take as a standard format,
&gt; how to report a bug on DNF. Thank you very much.

It&apos;s updated rawhide which means 1.1.10 and it contains info how to reproduce bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9713547</commentid>
    <comment_count>3</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2016-09-16 04:03:38 -0400</bug_when>
    <thetext>This problem will be pretty difficult to solve according to additional fails with dnf with python2. Se bellow with dnf-2.0.0-1.git.400.da4630f.fc24.noarch. 


[jmracek@dhcp-0-213 ~]$ LANG=C sudo dnf-2 install ./Stažené/*.rpm
Last metadata expiration check: 1:29:56 ago on Fri Sep 16 08:31:13 2016 CEST.
Traceback (most recent call last):
  File &quot;/bin/dnf-2&quot;, line 58, in &lt;module&gt;
    main.user_main(sys.argv[1:], exit_code=True)
  File &quot;/usr/lib/python2.7/site-packages/dnf/cli/main.py&quot;, line 170, in user_main
    errcode = main(args)
  File &quot;/usr/lib/python2.7/site-packages/dnf/cli/main.py&quot;, line 60, in main
    return _main(base, args)
  File &quot;/usr/lib/python2.7/site-packages/dnf/cli/main.py&quot;, line 111, in _main
    cli.run()
  File &quot;/usr/lib/python2.7/site-packages/dnf/cli/cli.py&quot;, line 947, in run
    return self.command.run()
  File &quot;/usr/lib/python2.7/site-packages/dnf/cli/commands/install.py&quot;, line 76, in run
    for pkg in self.base.add_remote_rpms(self.opts.filenames, strict=strict):
  File &quot;/usr/lib/python2.7/site-packages/dnf/base.py&quot;, line 982, in add_remote_rpms
    if not os.path.exists(path) and &apos;://&apos; in path:
  File &quot;/usr/lib64/python2.7/genericpath.py&quot;, line 26, in exists
    os.stat(path)
UnicodeEncodeError: &apos;ascii&apos; codec can&apos;t encode character u&apos;\u017e&apos; in position 5: ordinal not in range(128)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9713909</commentid>
    <comment_count>4</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-09-16 06:30:12 -0400</bug_when>
    <thetext>(In reply to Jaroslav Mracek from comment #3)
&gt; u&apos;\u017e&apos;

This is completely broken.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9911795</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Mráka">mmraka</who>
    <bug_when>2016-11-22 07:20:03 -0500</bug_when>
    <thetext>Tested with dnf-2.0.0-0.rc1.1.git.0.e6df665.fc24.noarch. Works as expected.

[root@swm-lab01-vm02 ~]# LANG=C sudo dnf-2 install  ./Stažené/*.rpm 
Last metadata expiration check: 2:12:15 ago on Tue Nov 22 11:05:28 2016 CET.
Dependencies resolved.
================================================================================
 Package                  Arch       Version             Repository        Size
================================================================================
Installing:
 openssh-askpass          x86_64     7.2p2-10.fc24       @commandline      82 k
...
Total size: 2.5 M
Is this ok [y/N]: n
Operation aborted.

[root@swm-lab01-vm02 ~]# LANG=C sudo dnf-3 install  ./Stažené/*.rpm 
enabling fedora-debuginfo repository
enabling updates-debuginfo repository
Last metadata expiration check: 2:13:07 ago on Tue Nov 22 11:05:29 2016 CET.
Dependencies resolved.
================================================================================
 Package                  Arch       Version             Repository        Size
================================================================================
Installing:
 openssh-askpass          x86_64     7.2p2-10.fc24       @commandline      82 k
...
Total size: 2.5 M
Is this ok [y/N]: n
Operation aborted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10191043</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2017-02-28 05:07:43 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 26 development cycle.
Changing version to &apos;26&apos;.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>