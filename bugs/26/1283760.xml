<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1283760</bug_id>
          
          <creation_ts>2015-11-19 13:30:00 -0500</creation_ts>
          <short_desc>coreutils: tail: inotify support changes behavior of -F with subdirs</short_desc>
          <delta_ts>2017-05-15 00:26:24 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>coreutils</component>
          <version>26</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>low</priority>
          <bug_severity>low</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Robbie Harwood">rharwood</reporter>
          <assigned_to name="Sebastian Kisela">skisela</assigned_to>
          <cc>admiller</cc>
    
    
    <cc>kdudka</cc>
    
    
    <cc>kzak</cc>
    
    
    <cc>ovasik</cc>
    
    
    <cc>p</cc>
    
    
    <cc>rharwood</cc>
    
    
    <cc>twaugh</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>coreutils-8.27-5.fc26</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-05-01 14:16:57</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8842730</commentid>
    <comment_count>0</comment_count>
    <who name="Robbie Harwood">rharwood</who>
    <bug_when>2015-11-19 13:30:02 -0500</bug_when>
    <thetext>When watching, e.g., `tail -F scratchdir/tests.log` with inotify
support, if scratchdir (and contents) ceases to exist and is re-created,
tail *will not* show the contents of the new file.

By contrast, with, e.g., `tail ---disable-inotify -F
scratchdir/tests.log`, when scratchdir (and contents) ceases to exist
and is re-created, tail *will* show the contents of the new file.

To my mind, the behavior *without* inotify is the correct one (it&apos;s
certainly the one that the description of &quot;following names&quot; from the man
page suggests to me) and the behavior *with* inotify is in error.

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8842843</commentid>
    <comment_count>1</comment_count>
    <who name="Kamil Dudka">kdudka</who>
    <bug_when>2015-11-19 14:14:07 -0500</bug_when>
    <thetext>This appears to work just fine on my Fedora 23 box with an ext4 file system and coreutils-8.24-4.fc23.x86_64:

$ mkdir scratchdir
$ touch scratchdir/tests.log
$ tail -F scratchdir/tests.log &amp;
[1] 5060
$ echo test &gt; scratchdir/tests.log
test
$ rm scratchdir/tests.log
tail: ‘scratchdir/tests.log’ has become inaccessible: No such file or directory
$ echo test &gt; scratchdir/tests.log
tail: ‘scratchdir/tests.log’ has appeared;  following new file
test

Please tell us:
- the exact NVR of coreutils
- the output of &quot;uname -a&quot;
- type of the file system in use
- what exactly you tried (a finite sequence of commands)
- what the actual result was</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8842868</commentid>
    <comment_count>2</comment_count>
    <who name="Kamil Dudka">kdudka</who>
    <bug_when>2015-11-19 14:24:21 -0500</bug_when>
    <thetext>Looking once again, I figured out that you actually meant this:

$ rm -rf scratchdir

Then I am able to reproduce it on Fedora 23.  It indeed does not work.  I guess it is related to the following comment in tail&apos;s source code:

         FIXME: when using inotify, and a directory for a watched file
         is recreated, then we don&apos;t recheck any new file when
         follow_mode == Follow_name.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8842956</commentid>
    <comment_count>3</comment_count>
    <who name="Robbie Harwood">rharwood</who>
    <bug_when>2015-11-19 14:34:07 -0500</bug_when>
    <thetext>Yes, you are right; sorry for the confusion.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9409040</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Admin XMLRPC Client">fedora-admin-xmlrpc</who>
    <bug_when>2016-06-13 05:05:29 -0400</bug_when>
    <thetext>This package has changed ownership in the Fedora Package Database.  Reassigning to the new owner of this component.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9922869</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2016-11-24 08:35:33 -0500</bug_when>
    <thetext>This message is a reminder that Fedora 23 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 23. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;23&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 23 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10190724</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2017-02-28 04:50:39 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 26 development cycle.
Changing version to &apos;26&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10291426</commentid>
    <comment_count>7</comment_count>
    <who name="Kamil Dudka">kdudka</who>
    <bug_when>2017-03-30 11:46:07 -0400</bug_when>
    <thetext>Reassigning to Sebastian Kisela, who is currently working on a patch for this.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10305717</commentid>
    <comment_count>8</comment_count>
    <who name="Sebastian Kisela">skisela</who>
    <bug_when>2017-04-05 03:37:51 -0400</bug_when>
    <thetext>This issue is discussed also here:
http://lists.gnu.org/archive/html/bug-coreutils/2017-04/msg00005.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10372010</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-28 08:25:43 -0400</bug_when>
    <thetext>coreutils-8.27-5.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-b17d54561b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10372171</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-28 09:05:57 -0400</bug_when>
    <thetext>coreutils-8.25-17.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-a9fd966808</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10372667</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-28 11:07:26 -0400</bug_when>
    <thetext>coreutils-8.25-9.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2017-fb8bb34a62</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10374701</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-29 22:23:48 -0400</bug_when>
    <thetext>coreutils-8.25-9.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-fb8bb34a62</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10374715</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-29 22:26:17 -0400</bug_when>
    <thetext>coreutils-8.25-17.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-a9fd966808</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10374776</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-29 23:51:48 -0400</bug_when>
    <thetext>coreutils-8.27-5.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-b17d54561b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10376852</commentid>
    <comment_count>15</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-01 14:16:57 -0400</bug_when>
    <thetext>coreutils-8.27-5.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10377447</commentid>
    <comment_count>16</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-01 22:02:11 -0400</bug_when>
    <thetext>coreutils-8.25-17.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10411010</commentid>
    <comment_count>17</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-15 00:26:24 -0400</bug_when>
    <thetext>coreutils-8.25-9.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>