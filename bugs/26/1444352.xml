<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1444352</bug_id>
          
          <creation_ts>2017-04-21 04:32:00 -0400</creation_ts>
          <short_desc>can&apos;t refresh keys since I&apos;ve updated to 26</short_desc>
          <delta_ts>2017-04-27 16:54:34 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>gnupg2</component>
          <version>26</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Ludovic Hirlimann">ludovic</reporter>
          <assigned_to name="Tomas Mraz">tmraz</assigned_to>
          <cc>bcl</cc>
    
    
    <cc>jamielinux</cc>
    
    
    <cc>ludovic</cc>
    
    
    <cc>rdieter</cc>
    
    
    <cc>tmraz</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>gnupg2-2.1.20-2.fc26</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-04-27 16:54:34</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10352625</commentid>
    <comment_count>0</comment_count>
    <who name="Ludovic Hirlimann">ludovic</who>
    <bug_when>2017-04-21 04:32:14 -0400</bug_when>
    <thetext>Description of problem:

I can&apos;t --refresh keys from the command line.

Version-Release number of selected component (if applicable):

26

How reproducible:

All the time.

[ludo@Oulanl ~]$ gpg2 --refresh-keys
gpg: refreshing 219 keys from hkp://ipv6.pool.sks-keyservers.net
gpg: keyserver refresh failed: Address family not supported by protocol
[ludo@Oulanl ~]$ gpg2 --refresh-keys --keyserver hpk://pgp.mit.edu
gpg: refreshing 219 keys from hpk://pgp.mit.edu
gpg: keyserver refresh failed: No keyserver available
[ludo@Oulanl ~]$ gpg2  --keyserver hpk://pgp.mit.edu --refresh-keys
gpg: refreshing 219 keys from hpk://pgp.mit.edu
gpg: keyserver refresh failed: No keyserver available
[ludo@Oulanl ~]$ man gpg2
[ludo@Oulanl ~]$ gpg2 --refresh-keys --verbose
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: refreshing 219 keys from hkp://ipv6.pool.sks-keyservers.net
gpg: keyserver refresh failed: Address family not supported by protocol
[ludo@Oulanl ~]$ gpg2  --keyserver hpk://pgp.mit.edu --refresh-keys --verbose
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: refreshing 219 keys from hpk://pgp.mit.edu
gpg: keyserver refresh failed: No keyserver available
[ludo@Oulanl ~]$ ping ipv6.pool.sks-keyservers.net
PING ipv6.pool.sks-keyservers.net(2a01:4f8:161:4283:1000::203 (2a01:4f8:161:4283:1000::203)) 56 data bytes
64 bytes from 2a01:4f8:161:4283:1000::203 (2a01:4f8:161:4283:1000::203): icmp_seq=1 ttl=51 time=38.0 ms
^C
--- ipv6.pool.sks-keyservers.net ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 38.097/38.097/38.097/0.000 ms
[ludo@Oulanl ~]$ ping pgp.mit.edu
PING cryptonomicon.mit.edu (18.9.60.141) 56(84) bytes of data.
^C
--- cryptonomicon.mit.edu ping statistics ---
3 packets transmitted, 0 received, 100% packet loss, time 2024ms

[ludo@Oulanl ~]$ ping gpg.mit.edu
ping: gpg.mit.edu: Name or service not known
[ludo@Oulanl ~]$ gpg2  --keyserver hpk://pool.sks-keyservers.net --refresh-keys --verbose
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: subpacket of type 20 has critical bit set
gpg: refreshing 219 keys from hpk://pool.sks-keyservers.net
gpg: keyserver refresh failed: No keyserver available
[ludo@Oulanl ~]$ ping pool.sks-keyservers.net
PING pool.sks-keyservers.net(2a01:4f8:161:4283:1000::203 (2a01:4f8:161:4283:1000::203)) 56 data bytes
64 bytes from 2a01:4f8:161:4283:1000::203 (2a01:4f8:161:4283:1000::203): icmp_seq=1 ttl=51 time=40.4 ms
64 bytes from 2a01:4f8:161:4283:1000::203 (2a01:4f8:161:4283:1000::203): icmp_seq=2 ttl=51 time=41.0 ms
^C
--- pool.sks-keyservers.net ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1001ms
rtt min/avg/max/mdev = 40.486/40.767/41.049/0.346 ms</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10352711</commentid>
    <comment_count>1</comment_count>
    <who name="Tomas Mraz">tmraz</who>
    <bug_when>2017-04-21 04:59:15 -0400</bug_when>
    <thetext>Unfortunately I do not have IPv6 connection so I cannot test whether the IPv6 support in gnupg2 regressed in Fedora 26 or whether it is some kind of misconfiguration on your machine.

Does other IPv6 connectivity work, not just ping?

But note that the protocol is hkp and not hpk - you have this typo in some cases in your report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10352857</commentid>
    <comment_count>2</comment_count>
    <who name="Ludovic Hirlimann">ludovic</who>
    <bug_when>2017-04-21 05:58:08 -0400</bug_when>
    <thetext>
(In reply to Tomas Mraz from comment #1)
&gt; Unfortunately I do not have IPv6 connection so I cannot test whether the
&gt; IPv6 support in gnupg2 regressed in Fedora 26 or whether it is some kind of
&gt; misconfiguration on your machine.
&gt; 
&gt; Does other IPv6 connectivity work, not just ping?

test-ipv6.com works nicely.
 
&gt; But note that the protocol is hkp and not hpk - you have this typo in some
&gt; cases in your report.

Yeah a typo. It used to work because I could update a few weeks ago. I didn&apos;t change any items related to network. I&apos;m willing to provide all the debug info and config files you&apos;ll need.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10357233</commentid>
    <comment_count>3</comment_count>
    <who name="Tomas Mraz">tmraz</who>
    <bug_when>2017-04-24 11:30:37 -0400</bug_when>
    <thetext>I can now reproduce the problem and it does not affect just the IPv6 enabled systems. It broke with introduction of libdns in gnupg2-2.1.17. I am building 2.1.20 with the libdns disabled as it is still broken there.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10357355</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-24 12:01:06 -0400</bug_when>
    <thetext>gnupg2-2.1.20-1.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-f2b99a5ac7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10357452</commentid>
    <comment_count>5</comment_count>
    <who name="Ludovic Hirlimann">ludovic</who>
    <bug_when>2017-04-24 12:18:28 -0400</bug_when>
    <thetext>Anything special I need to do to test ? or will I get the update when I just dnf update ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10359024</commentid>
    <comment_count>6</comment_count>
    <who name="Tomas Mraz">tmraz</who>
    <bug_when>2017-04-25 03:06:13 -0400</bug_when>
    <thetext>Either you have to wait until the package is pushed into the testing repository or you can download and install the build from the koji directly here:
https://koji.fedoraproject.org/koji/buildinfo?buildID=882864</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10362112</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-25 17:28:51 -0400</bug_when>
    <thetext>gnupg2-2.1.20-1.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-f2b99a5ac7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10362817</commentid>
    <comment_count>8</comment_count>
    <who name="Ludovic Hirlimann">ludovic</who>
    <bug_when>2017-04-25 23:46:43 -0400</bug_when>
    <thetext>(In reply to Fedora Update System from comment #7)
&gt; gnupg2-2.1.20-1.fc26 has been pushed to the Fedora 26 testing repository. If
&gt; problems still persist, please make note of it in this bug report.
&gt; See https://fedoraproject.org/wiki/QA:Updates_Testing for
&gt; instructions on how to install test updates.
&gt; You can provide feedback for this update here:
&gt; https://bodhi.fedoraproject.org/updates/FEDORA-2017-f2b99a5ac7

[ludo@Oulanl Pictures]$ sudo dnf --disablerepo virtualbox --disablerepo bitcoin update gnupg2 --enablerepo updates-testing
Last metadata expiration check: 0:02:11 ago on Wed Apr 26 05:42:37 2017 CEST.
Dependencies resolved.
Nothing to do.
Complete!
[ludo@Oulanl Pictures]$ 
[ludo@Oulanl Pictures]$ rpm -qa |grep gnupg2
gnupg2-smime-2.1.18-2.fc26.x86_64
gnupg2-2.1.18-2.fc26.x86_64
[ludo@Oulanl Pictures]$

Shall I file a bug for the above ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10362956</commentid>
    <comment_count>9</comment_count>
    <who name="Ludovic Hirlimann">ludovic</who>
    <bug_when>2017-04-26 01:18:11 -0400</bug_when>
    <thetext>scrap the previous comment. I just updated and things work again.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10363242</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-26 03:23:36 -0400</bug_when>
    <thetext>gnupg2-2.1.20-2.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-f2b99a5ac7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10366418</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-26 17:52:11 -0400</bug_when>
    <thetext>gnupg2-2.1.20-2.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-f2b99a5ac7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10370242</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-27 16:54:34 -0400</bug_when>
    <thetext>gnupg2-2.1.20-2.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>