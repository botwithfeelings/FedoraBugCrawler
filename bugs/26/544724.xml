<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>544724</bug_id>
          
          <creation_ts>2009-12-06 02:13:00 -0500</creation_ts>
          <short_desc>Moodle bundles libraries.</short_desc>
          <delta_ts>2017-03-14 12:32:37 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>moodle</component>
          <version>26</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>low</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>542027</dependson>
    
    
    <dependson>542036</dependson>
    
    
    <dependson>542045</dependson>
          <blocked>504493</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="David Nalley">david</reporter>
          <assigned_to name="Gwyn Ciesla">limburgher</assigned_to>
          <cc>awilliam</cc>
    
    
    <cc>iarnell</cc>
    
    
    <cc>limburgher</cc>
    
    
    <cc>tis</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-14 12:32:37</cf_last_closed>
          <cf_type>---</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>2518503</commentid>
    <comment_count>0</comment_count>
    <who name="David Nalley">david</who>
    <bug_when>2009-12-06 02:13:40 -0500</bug_when>
    <thetext>While working on removing bundled libraries from sahana, I noted  that moodle bundles multiple libraries. 

Because I was working on these libraries, I most closely noted:
fpdf, htmlpurifier, nusoap, and snoopy - I either already have these in Fedora or have them up for review to solve my own bundled libraries problems. 

It appears, though I haven&apos;t done an exhaustive search, that there are multiple other bundled libraries in the lib/ directory. 

https://fedoraproject.org/wiki/Packaging:No_Bundled_Libraries</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2520231</commentid>
    <comment_count>1</comment_count>
    <who name="Gwyn Ciesla">limburgher</who>
    <bug_when>2009-12-07 09:20:04 -0500</bug_when>
    <thetext>I&apos;m aware of Moodle&apos;s bundling, and thought I had removed all that were in Fedora.  I&apos;ll start work on this shortly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>2520389</commentid>
    <comment_count>2</comment_count>
    <who name="David Nalley">david</who>
    <bug_when>2009-12-07 10:38:09 -0500</bug_when>
    <thetext>Hi Jon: 

You may want to look at bug 544722, I am on the hook to package a number of bundled libs from one of my packages, and have a number in progress. Just don&apos;t want us duplicating effort unnecessarily. 

The list of libs I am packaging is in the above. 

Thanks, 

David Nalley</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3092529</commentid>
    <comment_count>3</comment_count>
    <who name="Gwyn Ciesla">limburgher</who>
    <bug_when>2010-08-19 14:30:55 -0400</bug_when>
    <thetext>moodle is moving to system php-pear-CAS shortly.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3106981</commentid>
    <comment_count>4</comment_count>
    <who name="Iain Arnell">iarnell</who>
    <bug_when>2010-08-26 05:15:07 -0400</bug_when>
    <thetext>Jon, 

I&apos;ve just taken the Fedora Engineering ticket for unbundling php libraries[1]. For starters, I&apos;ve made a brief audit of the libraries currently bundled in moodle. Please let me know if there&apos;s something I can do to assist in resolving this matter. Feel free to copy me on any resulting package reviews and I&apos;ll take a look at them.


There already seems to be a suitably packaged version of these available:

* markdown.php - php-markdown
* pear/Auth/RADIUS - php-pear-Auth-RADIUS
* pear/Console/Getopt - php-pear
* pear/Crypt/CHAP - php-pear-Crypt-CHAP
* pear/HTML/Common - php-pear-HTML-Common
* pear/HTML/QuickForm - php-pear-HTML-QuickForm
* pear/OLE - php-pear-OLE


These seem to be pure bundling; no changes from upstream, or inconsequential changes. Should be simple to package separately and remove from moodle.

* pear/HTML/AJAX - http://pear.php.net/package/HTML_AJAX/
* pear/HTML/QuickForm/Renderer/Tableless.php - http://pear.php.net/package/HTML_QuickForm_Renderer_Tableless
* pear/HTML/QuickForm/DHTMLRulesTableless.php - http://pear.php.net/package/HTML_QuickForm_DHTMLRulesTableless
* pear/HTTP/WebDAV - http://pear.php.net/package/HTTP_WebDAV_Server
* bennu - http://bennu.sourceforge.net/
* editor/tinymce - http://tinymce.moxiecode.com/
* geoip - http://www.maxmind.com/app/php
* overlib - http://www.bosrup.com/web/overlib/
* pclzip (patched) - http://www.phpconcept.net/pclzip/ (patch appears to affect windows only)
* phpxml - http://keithdevens.com/software/phpxml
* recaptchalib.php - http://code.google.com/apis/recaptcha/docs/php.html
* snoopy (patched) - http://sourceforge.net/projects/snoopy/ (patch appears to be cosmetic)
* speller - http://spellerpages.sourceforge.net/
* tcpdf (patched) - http://www.tcpdf.org/ (moodle ships a trimmed down version; api &amp; code are the same)
* typo3 - http://typo3.org/ (only a couple of classes are bundled)
* validateurlsyntax.php - http://www.canowhoopass.com/guides/regex/
* yui - http://developer.yahoo.com/yui/


These three contain binary swf files that are not compiled from source; if they cannot be built from source, they need to be removed from the package:

* flashdetect
* mp3player
* swfobject


These appear to be unnecessary and can probably be removed:

* base32.php - seems to be unused
* soap/nusoap - not used with php5
* ufo.js - http://www.bobbyvandersluis.com/ufo/index.html - but can probably be removed if we can&apos;t include flash objects


These appear to contain significant changes from their respective upstream. 

* pear/Spreadsheet/Excel/Writer - php-pear-Spreadsheet-Excel-Writer package available
* editor/htmlarea - upstream dead?
* evalmath - http://www.phpclasses.org/browse/package/2695.html
* excel - mostly replaced by pear/Spreadsheet/Excel; only referenced in mod/hotspot/report/default.php
* fpdf - unused? replaced by tcpdf
* graphlib.php - http://www.phpclasses.org/browse/package/176.html
* html2text.php - http://www.chuggnutt.com/html2text.php
* htmlpurifier - package review at #542045
* lexer.php - seems to come from http://www.lastcraft.com/simple_test.php which is also bundled
* magpie - php-magpierss already available but didn&apos;t work
* phpmailer - php-PHPMailer package available
* simpletestlib - http://lastcraft.com/simple_test.php


[1] https://fedorahosted.org/fedora-engineering-services/ticket/38</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>3263039</commentid>
    <comment_count>5</comment_count>
    <who name="Bug Zapper">triage</who>
    <bug_when>2010-11-04 00:12:24 -0400</bug_when>
    <thetext>
This message is a reminder that Fedora 12 is nearing its end of life.
Approximately 30 (thirty) days from now Fedora will stop maintaining
and issuing updates for Fedora 12.  It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained.  At that time
this bug will be closed as WONTFIX if it remains open with a Fedora 
&apos;version&apos; of &apos;12&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version prior to Fedora 12&apos;s end of life.

Bug Reporter: Thank you for reporting this issue and we are sorry that 
we may not be able to fix it before Fedora 12 is end of life.  If you 
would still like to see this bug fixed and are able to reproduce it 
against a later version of Fedora please change the &apos;version&apos; of this 
bug to the applicable version.  If you are unable to change the version, 
please add a comment here and someone will do it for you.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events.  Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.

The process we are following is described here: 
http://fedoraproject.org/wiki/BugZappers/HouseKeeping</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>4661879</commentid>
    <comment_count>6</comment_count>
    <who name="Gwyn Ciesla">limburgher</who>
    <bug_when>2012-05-09 12:30:23 -0400</bug_when>
    <thetext>Sorry for the delay. . .

DONE markdown.php - php-markdown
DONE pear/Auth/RADIUS - php-pear-Auth-RADIUS
NO LONGER USED pear/Console/Getopt - php-pear
DONE pear/Crypt/CHAP - php-pear-Crypt-CHAP
DONE pear/HTML/Common - php-pear-HTML-Common
DONE pear/HTML/QuickForm - php-pear-HTML-QuickForm
DONE pear/OLE - php-pear-OLE

More to come. . .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>5798686</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2013-04-03 16:08:39 -0400</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 19 development cycle.
Changing version to &apos;19&apos;.

(As we did not run this process for some time, it could affect also pre-Fedora 19 development
cycle bugs. We are very sorry. It will help us with cleanup during Fedora 19 End Of Life. Thank you.)

More information and reason for this action is here:
https://fedoraproject.org/wiki/BugZappers/HouseKeeping/Fedora19</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6272290</commentid>
    <comment_count>8</comment_count>
    <who name="Tuomo Soini">tis</who>
    <bug_when>2013-09-04 02:21:33 -0400</bug_when>
    <thetext>QuickForm can not be unbundled - it is heavily modified by moodle folks and system QuickForm won&apos;t work at all - moodle update will always hang if QuickForm is used requiring database restore and going back to last version with bundled QuickForm

see lib/pear/README_MOODLE.txt for full list of modifications to upstream modules before doing any unbundling.

Current moodle package is totally broken because of QuickForms unbundling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6273840</commentid>
    <comment_count>9</comment_count>
    <who name="Gwyn Ciesla">limburgher</who>
    <bug_when>2013-09-04 09:24:12 -0400</bug_when>
    <thetext>Is this still the case with the modified unbundling I applied in July, for 2.4.5-2?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6300416</commentid>
    <comment_count>10</comment_count>
    <who name="Tuomo Soini">tis</who>
    <bug_when>2013-09-12 06:24:05 -0400</bug_when>
    <thetext>You must mean 2.5.1-2 ? No - that&apos;s not enough. you can&apos;t unbundle QuickForm - and also is very hard to go back to bundled version because of file conflict via symlinks...

From that README_MOODLE.txt on moodle 2.4.6:

Quickforms
==========
Full of our custom hacks, no way to upgrade to latest upstream.
Most probably we will stop using this library in the future.

MDL-20876 - replaced split() with explode() or preg_split() where appropriate

And note: that means you can&apos;t use moodle with later upstream Quickforms!

That file really need to be consulted before unbundling pear modules.

Since unbundling feodra moodle package can&apos;t be upgraded to new versions without breaking database permanently. I really hope everybody do have database backup from older versions...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6696332</commentid>
    <comment_count>11</comment_count>
    <who name="Adam Williamson">awilliam</who>
    <bug_when>2014-01-10 15:11:58 -0500</bug_when>
    <thetext>&quot;DONE pear/Crypt/CHAP - php-pear-Crypt-CHAP&quot;

But:

[adamw@adam SPECS]$ sudo repoquery -l moodle-0:2.6-1.fc21.noarch | grep Crypt
/var/www/moodle/web/lib/pear/Crypt
/var/www/moodle/web/lib/pear/Crypt/CHAP.php</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6696334</commentid>
    <comment_count>12</comment_count>
    <who name="Adam Williamson">awilliam</who>
    <bug_when>2014-01-10 15:12:29 -0500</bug_when>
    <thetext>oh, is it a symlink? I didn&apos;t check.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7830178</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2015-01-09 16:41:22 -0500</bug_when>
    <thetext>This message is a notice that Fedora 19 is now at end of life. Fedora 
has stopped maintaining and issuing updates for Fedora 19. It is 
Fedora&apos;s policy to close all bug reports from releases that are no 
longer maintained. Approximately 4 (four) weeks from now this bug will
be closed as EOL if it remains open with a Fedora &apos;version&apos; of &apos;19&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 19 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7830465</commentid>
    <comment_count>14</comment_count>
    <who name="Adam Williamson">awilliam</who>
    <bug_when>2015-01-09 16:56:54 -0500</bug_when>
    <thetext>this at least wasn&apos;t intrinsically f19-related, so bump for safety. jon, what&apos;s current status?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8445388</commentid>
    <comment_count>15</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2015-07-15 11:20:21 -0400</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 23 development cycle.
Changing version to &apos;23&apos;.

(As we did not run this process for some time, it could affect also pre-Fedora 23 development
cycle bugs. We are very sorry. It will help us with cleanup during Fedora 23 End Of Life. Thank you.)

More information and reason for this action is here:
https://fedoraproject.org/wiki/BugZappers/HouseKeeping/Fedora23</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9919494</commentid>
    <comment_count>16</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2016-11-24 05:26:00 -0500</bug_when>
    <thetext>This message is a reminder that Fedora 23 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 23. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;23&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 23 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9935109</commentid>
    <comment_count>17</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-11-28 10:04:13 -0500</bug_when>
    <thetext>wondering why needinfo is still set.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10190358</commentid>
    <comment_count>18</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2017-02-28 04:28:45 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 26 development cycle.
Changing version to &apos;26&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10238573</commentid>
    <comment_count>19</comment_count>
    <who name="Gwyn Ciesla">limburgher</who>
    <bug_when>2017-03-14 12:32:37 -0400</bug_when>
    <thetext>Using Provides: per new guidelines for most bundled libs, and moved to system version where possible.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>