<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1300801</bug_id>
          
          <creation_ts>2016-01-21 13:27:00 -0500</creation_ts>
          <short_desc>[UX] dnf incorrectly displays installed size for large packages</short_desc>
          <delta_ts>2017-06-14 10:44:00 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>dnf</component>
          <version>26</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>NEXTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>EasyFix, Triaged</keywords>
          <priority>low</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jonathan Underwood">jonathan.underwood</reporter>
          <assigned_to name="Jaroslav Rohel">jrohel</assigned_to>
          <cc>jmracek</cc>
    
    
    <cc>jonathan.underwood</cc>
    
    
    <cc>jrohel</cc>
    
    
    <cc>mluscon</cc>
    
    
    <cc>packaging-team-maint</cc>
    
    
    <cc>pnemade</cc>
    
    
    <cc>vmukhame</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-06-14 10:44:00</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      <flag name="needinfo"
          id="3044752"
          type_id="16"
          status="?"
          setter="jmracek"
          requestee="jonathan.underwood"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9000597</commentid>
    <comment_count>0</comment_count>
    <who name="Jonathan Underwood">jonathan.underwood</who>
    <bug_when>2016-01-21 13:27:30 -0500</bug_when>
    <thetext>Description of problem:
When installing or removing a package which has a very big installed size, the Installed size is displayed incorrectly as &quot;16E&quot;, presumably there&apos;s an overflow occuring somewhere, or incorrect formatting statement or somesuch.

Eg.

# dnf install ./Mathematica-10.3.0-1.fc23.x86_64.rpm 
Last metadata expiration check performed 0:22:19 ago on Thu Jan 21 17:58:53 2016.
Dependencies resolved.
========================================================================================================================================================
 Package                             Arch                           Version                                  Repository                            Size
========================================================================================================================================================
Installing:
 Mathematica                         x86_64                         10.3.0-1.fc23                            @commandline                         2.5 G

Transaction Summary
========================================================================================================================================================
Install  1 Package

Total size: 2.5 G
Installed size: 16 E


This is with dnf version 1.1.5-1.fc23</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9490506</commentid>
    <comment_count>1</comment_count>
    <who name="Fedora Admin XMLRPC Client">fedora-admin-xmlrpc</who>
    <bug_when>2016-07-08 05:40:29 -0400</bug_when>
    <thetext>This package has changed ownership in the Fedora Package Database.  Reassigning to the new owner of this component.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9924511</commentid>
    <comment_count>2</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2016-11-24 10:05:59 -0500</bug_when>
    <thetext>This message is a reminder that Fedora 23 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 23. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;23&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 23 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10190765</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2017-02-28 04:52:59 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 26 development cycle.
Changing version to &apos;26&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10371844</commentid>
    <comment_count>4</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2017-04-28 08:03:37 -0400</bug_when>
    <thetext>Please, we tried it but we were unable to reproduce it with dnf-2.3. We are not sure if the problem was solved or the lack of Mathematica rpm could be the point. Please can you reproduce the problem with latest dnf and libsolv version (dnf-0:2.3.0_1-17g1f1b2b6, libsolv-0.6.27-1 or later version) from our test repository (dnf copr enable rpmsoftwaremanagement/dnf-nightly). We provide there rpm for Fedora 24 or later version. Unfortunately without your help we have no other choices than close it as insufficient data.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10386872</commentid>
    <comment_count>5</comment_count>
    <who name="Jaroslav Rohel">jrohel</who>
    <bug_when>2017-05-04 12:38:45 -0400</bug_when>
    <thetext>I am able to reproduce the problem. I created RPM with 15GB file.

Problem is in bad or unimplemented support for large files somewhere (dnf, libdnf, libsolv). So I am working on it.

During tests I found probably similar problem in  utility for creating repos - createrepo_c lack support for large files in RPM. It stores &quot;0&quot; if the size is too big. Example of bad line in primary.xml file:
 &lt;size package=&quot;2294242&quot; installed=&quot;0&quot; archive=&quot;0&quot;/&gt;

This error causes problems later during using this repo.
DNF then will show: Installed size: 0
I created PR: https://github.com/rpm-software-management/createrepo_c/pull/76

With PR is OK:
&lt;size package=&quot;2294242&quot; installed=&quot;15728640000&quot; archive=&quot;15728640140&quot;/&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10396634</commentid>
    <comment_count>6</comment_count>
    <who name="Jaroslav Rohel">jrohel</who>
    <bug_when>2017-05-09 09:44:16 -0400</bug_when>
    <thetext>Bug is in the libsolv library.
I made a fix PR https://github.com/openSUSE/libsolv/pull/196</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10505594</commentid>
    <comment_count>7</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2017-06-14 10:44:00 -0400</bug_when>
    <thetext>The patch was merged and will be part of next release of libsolv-0.6.28</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>