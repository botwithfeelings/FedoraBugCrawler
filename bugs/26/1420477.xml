<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1420477</bug_id>
          
          <creation_ts>2017-02-08 14:22:00 -0500</creation_ts>
          <short_desc>Build fails on ppc64</short_desc>
          <delta_ts>2017-03-23 18:19:52 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>lazarus</component>
          <version>26</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>RAWHIDE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Mattia Verga">mattia.verga</reporter>
          <assigned_to name="Joost van der Sluis">joost</assigned_to>
          <cc>joost</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-23 18:19:52</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10132212</commentid>
    <comment_count>0</comment_count>
    <who name="Mattia Verga">mattia.verga</who>
    <bug_when>2017-02-08 14:22:38 -0500</bug_when>
    <thetext>I&apos;ve added ppc64 architecture to %fpc_arches macro in rawhide and a provenpackager tried to rebuild lazarus, but the build fails on ppc64:
https://koji.fedoraproject.org/koji/taskinfo?taskID=17589319

/builddir/build/BUILD/lazarus-1.6.2/lazarus/components/PascalScript/Source/powerpc.inc(334,55) Error: (4054) Illegal type conversion: &quot;AnsiString&quot; to &quot;LongWord&quot;

Is lazarus compatible with ppc64 or should I remove that architecture from %fpc_arches?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10135702</commentid>
    <comment_count>1</comment_count>
    <who name="Joost van der Sluis">joost</who>
    <bug_when>2017-02-09 13:46:40 -0500</bug_when>
    <thetext>I was a little bit surprised when you added ppc64 to fpc_arches, on the other hand, how can we test it when we do not compile anything with it?

The build-log also is full of warnings that PascalScript is not available on powerpc64.

But PascalScript is optional, I&apos;ll see what I can do.

And if it does not work I think that the solution is to adapt ExclusiveArch in Lazarus.spec. That Lazarus does not support an architecture does not mean that fpc does not support it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10135844</commentid>
    <comment_count>2</comment_count>
    <who name="Mattia Verga">mattia.verga</who>
    <bug_when>2017-02-09 14:55:30 -0500</bug_when>
    <thetext>I&apos;ve added ppc64 to fpc_arches because I saw that fpc is now available on ppc64 and I thought builds could be unblocked on that architecture. But I don&apos;t know how reliable can be (if I&apos;m not wrong, ppc64 is supported by fpc since a long time).

I&apos;m open to your suggestions, feel free to remove ppc64 to fpc_arches if you think it can cause more problems than good things. 

Or maybe I was wrong suggesting in a previous bug to use fpc_arches in lazarus and we can leave ppc64 enabled and revert back lazarus to use ExclusiveArch.
But in this case all packages that rely on lazarus should revert back to use ExclusiveArch instead of fpc_arches... unless we create a separate macro (lazarus_arches) inside fpc_srpm_macros to list architectures where lazarus is available.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10192169</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2017-02-28 06:13:13 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 26 development cycle.
Changing version to &apos;26&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10273120</commentid>
    <comment_count>4</comment_count>
    <who name="Joost van der Sluis">joost</who>
    <bug_when>2017-03-23 18:19:52 -0400</bug_when>
    <thetext>I was just surprised that you changed it that quickly.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>