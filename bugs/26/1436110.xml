<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1436110</bug_id>
          
          <creation_ts>2017-03-27 03:56:00 -0400</creation_ts>
          <short_desc>lz4 (-libs) prevents upgrading from Fedora 25 to Fedora 26 in some cases</short_desc>
          <delta_ts>2017-07-13 15:52:04 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>libsolv</component>
          <version>26</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Elad Alfassa">elad</reporter>
          <assigned_to>rpm-software-management</assigned_to>
          <cc>altarasyuk</cc>
    
    
    <cc>bugzilla.somor</cc>
    
    
    <cc>devin</cc>
    
    
    <cc>fcaviggia</cc>
    
    
    <cc>ignatenko</cc>
    
    
    <cc>kwizart</cc>
    
    
    <cc>laurent.treguier.sink</cc>
    
    
    <cc>mluscon</cc>
    
    
    <cc>mobile.harvey</cc>
    
    
    <cc>nekohayo</cc>
    
    
    <cc>obmun.h</cc>
    
    
    <cc>pawel.wierzbicki.pl</cc>
    
    
    <cc>pj.pandit</cc>
    
    
    <cc>ppywlkiqletw</cc>
    
    
    <cc>rpm-software-management</cc>
    
    
    <cc>schaum</cc>
    
    
    <cc>vmukhame</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>libsolv-0.6.26-3.fc25 libsolv-0.6.26-3.fc26 libsolv-0.6.26-3.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-28 21:31:58</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10278275</commentid>
    <comment_count>0</comment_count>
    <who name="Elad Alfassa">elad</who>
    <bug_when>2017-03-27 03:56:00 -0400</bug_when>
    <thetext>If you have lz4.i686 installed on an x86_64 system, and try to upgrade from Fedora 25 to Fedora 26,  you get a weird, nondescriptive error:

&quot;Error: problem with installed package lz4-1.7.5-1.fc25.i686&quot;

after getting this error, I tried to manually install F26&apos;s version of lz4-libs.i686, and got this error:

Error: Transaction check error:
  file /usr/lib/liblz4.so.1.7.5 from install of lz4-libs-1.7.5-3.fc26.i686 conflicts with file from package lz4-1.7.5-1.fc25.i686


This definitely has something to do with multilib, since lz4.i686 does not exist on x86_64 on F26, only lz4-libs.i686 does, and it doesn&apos;t have an &quot;Obsoletes&quot; for lz4-1.7.5-1.fc25.i686... So dnf doesn&apos;t have an upgrade path. I&apos;m not how this can be solved, though - if you obsolete the older lz4.i686 in lz4-libs.i686, this would break existing i686 installs.

Perhaps a -compat package has to be introduced, that would obsolete lz4-1.7.5-1.fc25.i686, and have a Requires for both lz4-libs and a file-based require for /usr/bin/lz4 ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10280786</commentid>
    <comment_count>1</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-27 15:21:50 -0400</bug_when>
    <thetext>libsolv-0.6.26-3.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-61fe9031f7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10281551</commentid>
    <comment_count>2</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-27 21:49:39 -0400</bug_when>
    <thetext>libsolv-0.6.26-3.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-252eaa84dd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10282416</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-28 04:51:35 -0400</bug_when>
    <thetext>libsolv-0.6.26-3.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-16351e28f1</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10285427</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-03-28 21:31:58 -0400</bug_when>
    <thetext>libsolv-0.6.26-3.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10296931</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-01 13:32:15 -0400</bug_when>
    <thetext>libsolv-0.6.26-3.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10298490</commentid>
    <comment_count>6</comment_count>
    <who name="Nicolas Chauvet (kwizart)">kwizart</who>
    <bug_when>2017-04-03 05:47:22 -0400</bug_when>
    <thetext>*** Bug 1437442 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10303962</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-04-04 16:50:21 -0400</bug_when>
    <thetext>libsolv-0.6.26-3.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10495775</commentid>
    <comment_count>8</comment_count>
    <who name="Jacobo Cabaleiro">obmun.h</who>
    <bug_when>2017-06-11 07:04:31 -0400</bug_when>
    <thetext>I&apos;m experiencing the same symptoms with a F25 when trying to upgrade to a 26 release:

[obmun@madrid ~]$ sudo dnf system-upgrade download -q --refresh --releasever=26
Error: problem with installed package lz4-1.7.5-1.fc25.i686

[obmun@madrid ~]$ dnf info lz4
Last metadata expiration check: 2:32:18 ago on Sun Jun 11 10:25:19 2017.
Installed Packages
Name        : lz4
Arch        : i686
Epoch       : 0
Version     : 1.7.5
Release     : 1.fc25

Installed libsolv is more recent that the one listed above:
[obmun@madrid ~]$ rpm -q libsolv
libsolv-0.6.27-2.fc25.x86_64

[obmun@madrid ~]$ sudo dnf repoquery --arch i686 --installed --alldeps --whatrequires lz4 
systemd-libs-0:231-15.fc25.i686

System is fully updated:
[obmun@madrid ~]$ sudo dnf update
Last metadata expiration check: 0:06:50 ago on Sun Jun 11 12:56:26 2017.
Dependencies resolved.
Nothing to do.
Complete!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10516823</commentid>
    <comment_count>9</comment_count>
    <who name="Arne">bugzilla.somor</who>
    <bug_when>2017-06-18 23:54:19 -0400</bug_when>
    <thetext>Also does not work on my system:

dnf list lz4
Last metadata expiration check: 16 days, 1:16:00 ago on Sat Jun  3 12:33:58 2017.
Installed Packages
lz4.i686                                                              1.7.5-1.fc25                                                            @updates
lz4.x86_64                                                            1.7.5-1.fc25                                                            @updates

dnf list libsolv
Last metadata expiration check: 16 days, 1:15:01 ago on Sat Jun  3 12:33:58 2017.
Installed Packages
libsolv.x86_64                                                         0.6.27-2.fc25                                                          @updates
Available Packages
libsolv.i686                                                           0.6.27-1.fc25                                                          updates 



dnf system-upgrade download --refresh --releasever=26
Fedora 26 - x86_64 - Updates                                                                                          1.1 kB/s | 257  B     00:00    
Fedora 26 - x86_64                                                                                                    165 kB/s |  53 MB     05:30    
RPM Fusion for Fedora 26 - Free                                                                                       240 kB/s | 518 kB     00:02    
RPM Fusion for Fedora 26 - Nonfree                                                                                    213 kB/s | 158 kB     00:00    
Last metadata expiration check: 0:00:03 ago on Mon Jun 19 13:45:34 2017.
Error: problem with installed package lz4-1.7.5-1.fc25.i686
(try to add &apos;--allowerasing&apos; to command line to replace conflicting packages)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10530765</commentid>
    <comment_count>10</comment_count>
    <who name="">feddy</who>
    <bug_when>2017-06-22 05:20:37 -0400</bug_when>
    <thetext>Same prob as above trying to update 26.

This is marked closed but I don&apos;t see when it got closed or why. 

Is the resolution of this remove the lz4 package and install libsolv ? Does this provide the same functionality. 

Some comment would be helpful, rather than making people read between the lines and guess what was intended. 

thx.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10530814</commentid>
    <comment_count>11</comment_count>
    <who name="">feddy</who>
    <bug_when>2017-06-22 05:29:05 -0400</bug_when>
    <thetext>dnf remove lz4
Dependencies resolved.
Error: The operation would result in removing the following protected packages: dnf, systemd-udev, systemd.


So what is the solution here ???</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10531095</commentid>
    <comment_count>12</comment_count>
    <who name="Arne">bugzilla.somor</who>
    <bug_when>2017-06-22 06:55:23 -0400</bug_when>
    <thetext>Workaround is to add --allow-erasing

This will  remove the lz4 i686 package, but keep the x86_64 package.

I do not know how to fix it though</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10532346</commentid>
    <comment_count>13</comment_count>
    <who name="">feddy</who>
    <bug_when>2017-06-22 11:46:01 -0400</bug_when>
    <thetext>Thanks, that is what I needed to know.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10576407</commentid>
    <comment_count>14</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2017-07-08 10:54:53 -0400</bug_when>
    <thetext>*** Bug 1468821 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10583408</commentid>
    <comment_count>15</comment_count>
    <who name="Jean-François Fortin Tam">nekohayo</who>
    <bug_when>2017-07-11 11:38:48 -0400</bug_when>
    <thetext>Issue still present today.

sudo dnf remove lz4.i686

...solved the problem for me, but it implies uninstalling Skype (which was i686 only, requiring in turn i686 PulseAudio and all the rest)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10583699</commentid>
    <comment_count>16</comment_count>
    <who name="Laurent Tréguier">laurent.treguier.sink</who>
    <bug_when>2017-07-11 13:33:42 -0400</bug_when>
    <thetext>The latest lz4 release in Bodhi is supposed to &quot;Split libs properly for multilib&quot;, so when it gets to the updates repository the issue should probably get fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10585091</commentid>
    <comment_count>17</comment_count>
    <who name="Frank Caviggia">fcaviggia</who>
    <bug_when>2017-07-11 21:54:20 -0400</bug_when>
    <thetext>
Here&apos;s the workaround that I found, I downloaded the two missing packages from the site below and manually installed them with `dnf install lz4*rpm`, the upgrade from Fedora 25 to 26 worked without a hitch after that.

https://dl.fedoraproject.org/pub/fedora-secondary/development/26/Everything/i386/os/Packages/l/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10585490</commentid>
    <comment_count>18</comment_count>
    <who name="Villy Kruse">ppywlkiqletw</who>
    <bug_when>2017-07-12 00:40:24 -0400</bug_when>
    <thetext>My problem was resolved by the way suggested by the error message, namely, adding &quot;--best --allowerasing&quot; to the &quot;dnf upgrade&quot; command.  That was before libsolv-0.6.26-3.fc24 was released.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10587285</commentid>
    <comment_count>19</comment_count>
    <who name="Oleksandr Tarasiuk">altarasyuk</who>
    <bug_when>2017-07-12 08:39:59 -0400</bug_when>
    <thetext>The same issue when updating from 25 to 26.

Error: problem with installed package lz4-1.7.5-1.fc25.i686

I have 64bit os installed but had installed this 32bit package as dependency to 32bit application.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10588291</commentid>
    <comment_count>20</comment_count>
    <who name="Phillip Wirth">schaum</who>
    <bug_when>2017-07-12 12:00:10 -0400</bug_when>
    <thetext>Same issue here ... when upgrading from 25 to 26, can someone reopen this bug?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10588469</commentid>
    <comment_count>21</comment_count>
    <who name="">mobile.harvey</who>
    <bug_when>2017-07-12 12:56:18 -0400</bug_when>
    <thetext>Same here too. Unable to upgrade from 25 to 26 until this is cleared.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10589822</commentid>
    <comment_count>22</comment_count>
    <who name="Devin Henderson">devin</who>
    <bug_when>2017-07-12 23:14:23 -0400</bug_when>
    <thetext>--allowerasing worked for me</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10591042</commentid>
    <comment_count>23</comment_count>
    <who name="Paweł">pawel.wierzbicki.pl</who>
    <bug_when>2017-07-13 07:47:21 -0400</bug_when>
    <thetext>Same issue for me. In my case, lz4 is needed for IBM Notes 9 client on a 64 bit Fedora 25. If I remove lz4, the app stops working and I connot do my work.

(In reply to Laurent Tréguier from comment #16)
&gt; The latest lz4 release in Bodhi is supposed to &quot;Split libs properly for
&gt; multilib&quot;, so when it gets to the updates repository the issue should
&gt; probably get fixed.

So we have to wait then? How to check status of the lz4 package - is that it?
https://bodhi.fedoraproject.org/updates/lz4-1.7.5-4.fc26</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10592514</commentid>
    <comment_count>24</comment_count>
    <who name="Laurent Tréguier">laurent.treguier.sink</who>
    <bug_when>2017-07-13 14:12:01 -0400</bug_when>
    <thetext>(In reply to Paweł from comment #23)
&gt; So we have to wait then? How to check status of the lz4 package - is that it?
&gt; https://bodhi.fedoraproject.org/updates/lz4-1.7.5-4.fc26

This is the release yes. And I think that all we can do is either wait like you suggest, or manually download and install like Frank Caviggia suggests:

(In reply to Frank Caviggia from comment #17)
&gt; Here&apos;s the workaround that I found, I downloaded the two missing packages
&gt; from the site below and manually installed them with `dnf install lz4*rpm`,
&gt; the upgrade from Fedora 25 to 26 worked without a hitch after that.
&gt; 
&gt; https://dl.fedoraproject.org/pub/fedora-secondary/development/26/Everything/
&gt; i386/os/Packages/l/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10592743</commentid>
    <comment_count>25</comment_count>
    <who name="Laurent Tréguier">laurent.treguier.sink</who>
    <bug_when>2017-07-13 15:52:04 -0400</bug_when>
    <thetext>Actually now tht I tried it, using `--allowerasing` like dnf and other people here suggest works fine. lz4.i686 is removed, but the new lz4-libs i686 and x86_64 subpackages are automatically selected for installation, so only the obsolete lz4.i686 is removed and not the software that makes use of it.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>