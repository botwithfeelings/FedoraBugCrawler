<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1379640</bug_id>
          
          <creation_ts>2016-09-27 05:39:00 -0400</creation_ts>
          <short_desc>install is wrong for big endian platforms</short_desc>
          <delta_ts>2017-05-16 07:26:34 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>python-cassandra-driver</component>
          <version>26</version>
          <rep_platform>s390x</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>467765</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Dan Horák">dan</reporter>
          <assigned_to name="Lumír Balhar">lbalhar</assigned_to>
          <cc>filip</cc>
    
    
    <cc>lbalhar</cc>
    
    
    <cc>lkundrak</cc>
    
    
    <cc>praiskup</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-05-16 07:26:34</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9745802</commentid>
    <comment_count>0</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-09-27 05:39:56 -0400</bug_when>
    <thetext>The build of python-cassandra-driver fails on s390x (a big endian platform) with

...
running install_scripts
===============================================================================
The optional C extensions are not supported on big-endian systems.
===============================================================================
+ mkdir -p /builddir/build/BUILDROOT/python-cassandra-driver-3.7.0-1.fc26.s390x/usr/lib64/python2.7/site-packages
+ mv &apos;/builddir/build/BUILDROOT/python-cassandra-driver-3.7.0-1.fc26.s390x/usr/lib/python2.7/site-packages/*&apos; /builddir/build/BUILDROOT/python-cassandra-driver-3.7.0-1.fc26.s390x/usr/lib64/python2.7/site-packages
mv: cannot stat &apos;/builddir/build/BUILDROOT/python-cassandra-driver-3.7.0-1.fc26.s390x/usr/lib/python2.7/site-packages/*&apos;: No such file or directory
RPM build errors:
...

for full logs please see http://s390.koji.fedoraproject.org/koji/taskinfo?taskID=2359154

The fix-up part in the %install section (http://pkgs.fedoraproject.org/cgit/rpms/python-cassandra-driver.git/tree/python-cassandra-driver.spec#n85) doesn&apos;t seem to be correct.


Version-Release number of selected component (if applicable):
python-cassandra-driver-3.7.0-1.fc26</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9764459</commentid>
    <comment_count>1</comment_count>
    <who name="Lumír Balhar">lbalhar</who>
    <bug_when>2016-10-04 08:30:08 -0400</bug_when>
    <thetext>Hello.

Thank you for fill the bug. I investigated the problem and I found same behavior on ppc64 platform.

The problem comes from workaround in specfile in the %install section which moves files from /usr/lib to /usr/lib64 on big endian platforms but it looks that this workaround is not necessary anymore because files are already installed in the correct folder.

Another problem was empty debugfiles.list so I enabled this automatically created subpackage only for specified architectures.

Scratch builds now looks good. Could you please check new specfile version and build logs? Then I can push this change and build new version in rawhide.

SPEC: https://lbalhar.fedorapeople.org/python-cassandra-driver.spec
Builds:
http://koji.fedoraproject.org/koji/taskinfo?taskID=15935431
http://s390.koji.fedoraproject.org/koji/taskinfo?taskID=2364706
http://ppc.koji.fedoraproject.org/koji/taskinfo?taskID=3777298

Thank you one more time. Have a nice day.
Lumir</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9764569</commentid>
    <comment_count>2</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2016-10-04 08:57:39 -0400</bug_when>
    <thetext>Thanks, it builds, then ship it :-) The logs look good, except the failing test, which I suspect is related to a &quot;hard-coded&quot; little endian value. It might be worth to fix it too.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9768165</commentid>
    <comment_count>3</comment_count>
    <who name="Lumír Balhar">lbalhar</who>
    <bug_when>2016-10-05 09:51:58 -0400</bug_when>
    <thetext>Hello.

New version 3.7.0-2 is in rawhide and updates are prepared. I&apos;ll leave this bug opened and I&apos;ll try to fix mentioned test for big endian systems.

Bodhi updates: https://bodhi.fedoraproject.org/updates/FEDORA-2016-d6d0a70bbb 
https://bodhi.fedoraproject.org/updates/FEDORA-2016-a2fe74417c

Have a nice day.
Lumir</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9769539</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-05 18:23:43 -0400</bug_when>
    <thetext>python-cassandra-driver-3.7.0-2.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-a2fe74417c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9769963</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-05 21:51:14 -0400</bug_when>
    <thetext>python-cassandra-driver-3.7.0-2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-d6d0a70bbb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9776627</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-09 14:49:54 -0400</bug_when>
    <thetext>python-cassandra-driver-3.7.0-2.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9780533</commentid>
    <comment_count>7</comment_count>
    <who name="Lumír Balhar">lbalhar</who>
    <bug_when>2016-10-11 03:41:42 -0400</bug_when>
    <thetext>Hello.

Because I cannot solve this issue by myself, I&apos;ve created bug report in upstream JIRA portal: https://datastax-oss.atlassian.net/browse/PYTHON-653

Have a nice day.
Lumír</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9789996</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-13 17:53:49 -0400</bug_when>
    <thetext>python-cassandra-driver-3.7.0-2.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9796221</commentid>
    <comment_count>9</comment_count>
    <who name="Lumír Balhar">lbalhar</who>
    <bug_when>2016-10-17 05:04:33 -0400</bug_when>
    <thetext>I have a response from upstream developers:

&gt; I was wondering if by any chance you or one of your colleagues could submit a
&gt; fix for this as I&apos;m not sure how easy it will be for us to get access to such 
&gt; architectures. Thanks

But I am not sure where the problem comes from. If is it the problem only in test (hardcoded results from the hash function), we can write separated test for BE platform. But if is it problem in hash function itself, it would be harder to fix it.

What do you think?

Thanks for help and have a nice day.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10191316</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2017-02-28 05:21:43 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 26 development cycle.
Changing version to &apos;26&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10416460</commentid>
    <comment_count>11</comment_count>
    <who name="Lumír Balhar">lbalhar</who>
    <bug_when>2017-05-16 07:26:34 -0400</bug_when>
    <thetext>I moved this slightly forward but unfortunately, I still cannot enable tests on all platforms. I fixed the issue in tests of Murmur algorithm [0] but other bugs appeared.

I am working on it in cooperation with upstream developers. Because there is the open issue in Jira portal and build/install issue was fixed, I think that we can close this bug.

[0] https://github.com/datastax/python-driver/pull/762

Have a nice day.
Lumír</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>