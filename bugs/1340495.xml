<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1340495</bug_id>

    <creation_ts>2016-05-27 10:22:00 -0400</creation_ts>
    <short_desc>NetworkManager GUI for openconnect VPN does not provide option for &quot;--juniper&quot;</short_desc>
    <delta_ts>2016-12-09 17:25:52 -0500</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>NetworkManager-openconnect</component>
    <version>24</version>
    <rep_platform>Unspecified</rep_platform>
    <op_sys>Unspecified</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>ERRATA</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard></status_whiteboard>
    <keywords></keywords>
    <priority>unspecified</priority>
    <bug_severity>unspecified</bug_severity>
    <target_milestone>---</target_milestone>

    <everconfirmed>1</everconfirmed>
    <reporter>contact</reporter>
    <assigned_to name="David Woodhouse">dwmw2</assigned_to>
    <cc>dcbw</cc>

    <cc>dwmw2</cc>

    <cc>psimerda</cc>

    <cc>tadej.j</cc>

    <cc>thaller</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in>NetworkManager-openconnect-1.2.4-1.fc25</cf_fixed_in>
  <cf_doc_type>If docs needed, set a value</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2016-12-09 17:25:52</cf_last_closed>
<cf_type>Bug</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>
<external_bugs name="GNOME Desktop">746664</external_bugs>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>9365701</commentid>
<comment_count>0</comment_count>
<who name="">contact</who>
<bug_when>2016-05-27 10:22:53 -0400</bug_when>
<thetext>Description of problem: Using Command line openconnect I am able to connect to my work VPN as: sudo openconnect --juniper vpn.xxxx.xxx However the GUI does not seem to have a provision for passing the --juniper switch. Would it be possible
to add this ability to the GUI so those of us needing the juniper switch do not need to keep a terminal going in the background for VPN? Version-Release number of selected component (if applicable): Fedora 23 &amp; 24 $ openconnect --version
OpenConnect version v7.06-4.fc24 Using GnuTLS. Features present: TPM, PKCS#11, RSA software token, HOTP software token, TOTP software token, Yubikey OATH, System keys, DTLS # dnf info NetworkManager Last metadata expiration check: 1:00:04 ago on Fri
May 27 07:17:20 2016. Installed Packages Name : NetworkManager Arch : x86_64 Epoch : 1 Version : 1.2.2 Release : 1.fc24 Size : 10 M Repo : @System From repo : updates-testing</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9736865</commentid>
<comment_count>1</comment_count>
<who name="Tadej Jane탑">tadej.j</who>
<bug_when>2016-09-23 04:47:33 -0400</bug_when>
<thetext>Would it be possible to push the changes to the f24 branch and make an update?</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9737104</commentid>
<comment_count>2</comment_count>
<who name="David Woodhouse">dwmw2</who>
<bug_when>2016-09-23 05:43:55 -0400</bug_when>
<thetext>Does this not already work? Create a NM VPN of type &apos;anyconnect&apos; and then go into it and change the protocol. You don&apos;t get the nice pretty top-level choice of Juniper without some more intrusive changes to NM which
aren&apos;t easy to backport. But you can do it this way, I think.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9737194</commentid>
<comment_count>3</comment_count>
<who name="Tadej Jane탑">tadej.j</who>
<bug_when>2016-09-23 06:06:08 -0400</bug_when>
<thetext>No, it doesn&apos;t work that way. And even manually adding it via: nmcli con add type vpn con-name &quot;Juniper&quot; ifname &quot;*&quot; vpn-type openconnect -- vpn.data &quot;gateway=&lt;gateway-address&gt;,protocol=nc&quot;
doesn&apos;t work. Here is an example log output for a failed connection: POST https://vpn.sund.ku.dk/linux Attempting to connect to server 192.38.117.10:443 Connected to 192.38.117.10:443 SSL negotiation with vpn.sund.ku.dk Connected to HTTPS on
vpn.sund.ku.dk Got HTTP response: HTTP/1.1 302 Found Location: https://vpn.sund.ku.dk/dana-na/auth/welcome.cgi Content-Type: text/html; charset=utf-8 Set-Cookie: DSLaunchURL=2F6C696E7578; path=/; Secure Connection: close Content-Length: 0 HTTP body
length: (0) GET https://vpn.sund.ku.dk/linux Attempting to connect to server 192.38.117.10:443 Connected to 192.38.117.10:443 SSL negotiation with vpn.sund.ku.dk Connected to HTTPS on vpn.sund.ku.dk Got HTTP response: HTTP/1.1 302 Found Location:
https://vpn.sund.ku.dk/dana-na/auth/welcome.cgi Content-Type: text/html; charset=utf-8 Set-Cookie: DSLaunchURL=2F6C696E7578; path=/; Secure Connection: close Content-Length: 0 HTTP body length: (0) GET https://vpn.sund.ku.dk/dana-na/auth/welcome.cgi
SSL negotiation with vpn.sund.ku.dk Connected to HTTPS on vpn.sund.ku.dk Got HTTP response: HTTP/1.1 302 Found Location: https://vpn.sund.ku.dk/ Content-Type: text/html; charset=utf-8 Connection: close Content-Length: 0 HTTP body length: (0) GET
https://vpn.sund.ku.dk/ SSL negotiation with vpn.sund.ku.dk Connected to HTTPS on vpn.sund.ku.dk Got HTTP response: HTTP/1.1 302 Found Location: https://vpn.sund.ku.dk/dana-na/auth/url_0/welcome.cgi Content-Type: text/html; charset=utf-8 Set-Cookie:
DSSIGNIN=url_0; path=/dana-na/; expires=Thu, 31-Dec-2037 00:00:00 GMT; secure Set-Cookie: DSIVS=; path=/; expires=Thu, 01 Jan 1970 22:00:00 GMT; secure Set-Cookie: DSSignInURL=/; path=/; secure Connection: close Content-Length: 0 HTTP body length:
(0) I&apos;ve rebuilt NetworkManager-openconnect from f25/rawhide (https://pkgs.fedoraproject.org/cgit/rpms/NetworkManager-openconnect.git/commit/?id=452f8438f66b26e88c1eaaedf87f258ed237c225) locally and manually added the connection, i.e. there is
no way to change the protocol to &quot;nc&quot; in the GUI. Then things work and I get the &quot;nice&quot; realm, username, password GUI dialog.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9737261</commentid>
<comment_count>4</comment_count>
<who name="David Woodhouse">dwmw2</who>
<bug_when>2016-09-23 06:31:48 -0400</bug_when>
<thetext>Hm yes, I added that later didn&apos;t I? I&apos;ve updated the package in rawhide, and it should allow you to select the protocol via the GUI. Please could you test that; if it&apos;s working nicely for you then I&apos;ll look at pushing it
to F2[45]. Thanks.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9737472</commentid>
<comment_count>5</comment_count>
<who name="Tadej Jane탑">tadej.j</who>
<bug_when>2016-09-23 07:45:48 -0400</bug_when>
<thetext>(In reply to David Woodhouse from comment #4) &gt; &gt; I&apos;ve updated the package in rawhide, and it should allow you to select the &gt; protocol via the GUI. Please could you test that; if it&apos;s working nicely for &gt; you then
I&apos;ll look at pushing it to F2[45]. Great, thanks! Will the protocol selection in GUI work with NetworkManager that&apos;s in Fedora 24 (NetworkManager-1.2.4-2.fc24.x86_64)? I&apos;ll rebuild and test the package ASAP.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9737499</commentid>
<comment_count>6</comment_count>
<who name="David Woodhouse">dwmw2</who>
<bug_when>2016-09-23 07:57:16 -0400</bug_when>
<thetext>Yes, the updated NM-openconnect package should work with the version of NetworkManager that&apos;s in F24.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9737586</commentid>
<comment_count>7</comment_count>
<who name="Tadej Jane탑">tadej.j</who>
<bug_when>2016-09-23 08:21:03 -0400</bug_when>
<thetext>(In reply to David Woodhouse from comment #6) &gt; Yes, the updated NM-openconnect package should work with the version of &gt; NetworkManager that&apos;s in F24. Great. I&apos;ve rebuild and tested:
NetworkManager-openconnect-1.2.3-0.20160923gitac5cdf.fc24.x86_64 NetworkManager-openconnect-gnome-1.2.3-0.20160923gitac5cdf.fc24.x86_64 and it works (the GUI protocol chooser also works as advertised).</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9955694</commentid>
<comment_count>8</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-12-05 07:02:26 -0500</bug_when>
<thetext>NetworkManager-openconnect-1.2.4-1.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-4b0e78e336</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9958415</commentid>
<comment_count>9</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-12-05 22:25:12 -0500</bug_when>
<thetext>NetworkManager-openconnect-1.2.4-1.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how
to install test updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-4b0e78e336</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9973013</commentid>
<comment_count>10</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-12-09 17:25:52 -0500</bug_when>
<thetext>NetworkManager-openconnect-1.2.4-1.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>

</bug>

</bugzilla>
