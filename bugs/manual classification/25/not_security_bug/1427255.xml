<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1427255</bug_id>

    <creation_ts>2017-02-27 12:14:00 -0500</creation_ts>
    <short_desc>PHP doesn&apos;t fallback to urandom when getrandom is not available</short_desc>
    <delta_ts>2017-03-18 15:53:20 -0400</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>php</component>
    <version>25</version>
    <rep_platform>Unspecified</rep_platform>
    <op_sys>Unspecified</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>ERRATA</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard></status_whiteboard>
    <keywords></keywords>
    <priority>unspecified</priority>
    <bug_severity>urgent</bug_severity>
    <target_milestone>---</target_milestone>

    <everconfirmed>1</everconfirmed>
    <reporter name="Jiri Eischmann">jeischma</reporter>
    <assigned_to name="Remi Collet">fedora</assigned_to>
    <cc>fedora</cc>

    <cc>fran</cc>

    <cc>jorton</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in>php-7.0.17-1.fc25</cf_fixed_in>
  <cf_doc_type>If docs needed, set a value</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2017-03-18 15:53:20</cf_last_closed>
<cf_type>Bug</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>
<external_bugs name="PHP Bug Tracker">74105</external_bugs>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>10187553</commentid>
<comment_count>0</comment_count>
<who name="Jiri Eischmann">jeischma</who>
<bug_when>2017-02-27 12:14:36 -0500</bug_when>
<thetext>If PHP is compiled on a newer kernel, it requires getrandom which is not available on older kernels. That causes problems when Fedora runs in a container on a host with an older kernel (e.g. RHEL 7). PHP should fallback to urandom in these
cases. The bug has been fixed upstream, see the linked bug report. This bug has a potential to break pretty much every security-concerned php app running on Fedora in a container on a host with an older kernel which is a typical scenario. In my case,
it broke Nextcloud running on Fedora 25 in openvz on CentOS 7. A temporary solution is downgrading to PHP 7.0.15 which doesn&apos;t suffer from this bug.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10189744</commentid>
<comment_count>1</comment_count>
<who name="Remi Collet">fedora</who>
<bug_when>2017-02-28 00:43:09 -0500</bug_when>
<thetext>The fix for upstream bug 74105 will be part of PHP 7.0.17 (planed for March 17th). I will try to provide a 7.0.17RC1 build later this week (planed for March 2nd).</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10193823</commentid>
<comment_count>2</comment_count>
<who name="Remi Collet">fedora</who>
<bug_when>2017-02-28 09:03:47 -0500</bug_when>
<thetext>Package: php-7.1.3-0.1.RC1.fc26 Status: complete Built by: remi Package: php-7.0.17-0.1.RC1.fc25 Status: complete Built by: remi</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10193837</commentid>
<comment_count>3</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2017-02-28 09:05:38 -0500</bug_when>
<thetext>php-7.0.17-0.1.RC1.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-8f457feb78</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10195891</commentid>
<comment_count>4</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2017-02-28 21:54:42 -0500</bug_when>
<thetext>php-7.0.17-0.1.RC1.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to install test
updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-8f457feb78</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10196608</commentid>
<comment_count>5</comment_count>
<who name="Jiri Eischmann">jeischma</who>
<bug_when>2017-03-01 04:38:31 -0500</bug_when>
<thetext>The provided build has fixed the issue for me.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10240836</commentid>
<comment_count>6</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2017-03-15 04:54:53 -0400</bug_when>
<thetext>php-7.0.17-1.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2017-79e959b421</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10243387</commentid>
<comment_count>7</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2017-03-15 15:58:34 -0400</bug_when>
<thetext>php-7.0.17-1.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to install test
updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-79e959b421</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10251669</commentid>
<comment_count>8</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2017-03-18 15:53:20 -0400</bug_when>
<thetext>php-7.0.17-1.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>

</bug>

</bugzilla>
