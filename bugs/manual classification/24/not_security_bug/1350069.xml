<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1350069</bug_id>

    <creation_ts>2016-06-25 00:25:00 -0400</creation_ts>
    <short_desc>fltk-config imposes iunternal build flags on the user</short_desc>
    <delta_ts>2016-07-03 08:23:16 -0400</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>fltk</component>
    <version>24</version>
    <rep_platform>All</rep_platform>
    <op_sys>All</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>ERRATA</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard></status_whiteboard>
    <keywords></keywords>
    <priority>unspecified</priority>
    <bug_severity>medium</bug_severity>
    <target_milestone>---</target_milestone>

    <everconfirmed>1</everconfirmed>
    <reporter name="Dmitri A. Sergatskov">dasergatskov</reporter>
    <assigned_to name="Rex Dieter">rdieter</assigned_to>
    <cc>hobbes1069</cc>

    <cc>jchaloup</cc>

    <cc>mtmiller</cc>

    <cc>phracek</cc>

    <cc>rdieter</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in>fltk-1.3.3-8.fc24</cf_fixed_in>
  <cf_doc_type>If docs needed, set a value</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2016-07-03 08:23:16</cf_last_closed>
<cf_type>Bug</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>9452086</commentid>
<comment_count>0</comment_count>
<who name="Dmitri A. Sergatskov">dasergatskov</who>
<bug_when>2016-06-25 00:25:41 -0400</bug_when>
<thetext>Description of problem: fltk-config --cflags (and --cxxflags) exports the flags that fltk was built with. Version-Release number of selected component (if applicable): 1.3.3-6 How reproducible: 100% Steps to Reproduce: 1. run
&quot;fltk-config --cxxflags&quot; 2. 3. Actual results: -I/usr/include/freetype2 -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches
-specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic -fvisibility-inlines-hidden -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_THREAD_SAFE -D_REENTRANT Expected results: -I/usr/include/freetype2 Additional info: This is a longstanding
bug with fltk (see bug #199656). Also see e.g.: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=828081 Dmitri. --</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9453606</commentid>
<comment_count>1</comment_count>
<who name="Rex Dieter">rdieter</who>
<bug_when>2016-06-26 19:33:41 -0400</bug_when>
<thetext>OK, we can omit duplicated items from OPTIM, but I think we may have to keep @LARGEFILE@ and @PTHREAD_FLAGS@</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9453737</commentid>
<comment_count>2</comment_count>
<who name="Rex Dieter">rdieter</who>
<bug_when>2016-06-26 20:32:40 -0400</bug_when>
<thetext>Well, I&apos;m *pretty* sure @LARGEFILE@ needs to stay at least, less sure about @PTHREAD_FLAGS@, but I&apos;m keeping both to be on the safe side for now.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9453740</commentid>
<comment_count>3</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-06-26 20:34:47 -0400</bug_when>
<thetext>fltk-1.3.3-7.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-62255dcdf8</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9453781</commentid>
<comment_count>4</comment_count>
<who name="Dmitri A. Sergatskov">dasergatskov</who>
<bug_when>2016-06-26 21:10:09 -0400</bug_when>
<thetext>fltk-config --cxxflags should tell the end user of fltk library which flags he has to use to compile his program that uses fltk library. Not the flags that one needs to compile fltk itself. So it is up to the user to decide if he wants to
use e.g. @LARGEFILE@ Dmitri.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9453846</commentid>
<comment_count>5</comment_count>
<who name="Rex Dieter">rdieter</who>
<bug_when>2016-06-26 22:30:07 -0400</bug_when>
<thetext>It is my understanding you cannot mix apps/libraries that use largefile flags with those that do not. I *think* the same can be said for threading-related ones, but I&apos;m less certain there.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9455325</commentid>
<comment_count>6</comment_count>
<who name="Rex Dieter">rdieter</who>
<bug_when>2016-06-27 09:09:28 -0400</bug_when>
<thetext>That said, if you have contrary experience or evidence that means @LARGEFILE@ and/or @PTHREAD_FLAGS@ can be safely removed, I&apos;d happy to do so.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9456692</commentid>
<comment_count>7</comment_count>
<who name="Mike Miller">mtmiller</who>
<bug_when>2016-06-27 15:26:10 -0400</bug_when>
<thetext>My understanding is the contrary, that the _LARGEFILE_SOURCE and _LARGEFILE64_SOURCE options only affect individual compilation units. According to the glibc user manual
(https://www.gnu.org/software/libc/manual/html_node/Feature-Test-Macros.html), the macros _LARGEFILE_SOURCE, _LARGEFILE64_SOURCE, _REENTRANT, and _THREAD_SAFE only serve to make certain function prototypes available. If the macro is not defined, the
prototypes are simply not visible to the source in question. The option that is bad to mix is _FILE_OFFSET_BITS=64, because this option actually changes the sizes of structure members and shadows function names and so on. But even that can be done if
you are careful not to expose C I/O library types over the interface between projects. AFAIK the macros _LARGEFILE_SOURCE, _LARGEFILE64_SOURCE, _THREAD_SAFE, and _REENTRANT do not actually change the interface of anything, they only define additional
non-conflicting functions and types.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9457231</commentid>
<comment_count>8</comment_count>
<who name="Rex Dieter">rdieter</who>
<bug_when>2016-06-27 20:35:35 -0400</bug_when>
<thetext>OK, thanks for looking more into it. I will remove those too then.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9457593</commentid>
<comment_count>9</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-06-28 00:25:09 -0400</bug_when>
<thetext>fltk-1.3.3-7.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to install test
updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-62255dcdf8</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9458596</commentid>
<comment_count>10</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-06-28 07:05:55 -0400</bug_when>
<thetext>fltk-1.3.3-8.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-62255dcdf8</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9466432</commentid>
<comment_count>11</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-06-29 18:56:48 -0400</bug_when>
<thetext>fltk-1.3.3-8.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to install test
updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-62255dcdf8</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9474889</commentid>
<comment_count>12</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-07-03 08:23:13 -0400</bug_when>
<thetext>fltk-1.3.3-8.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>

</bug>

</bugzilla>
