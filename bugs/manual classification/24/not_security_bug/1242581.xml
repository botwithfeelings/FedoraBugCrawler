<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1242581</bug_id>

    <creation_ts>2015-07-13 12:03:00 -0400</creation_ts>
    <short_desc>rsyslog $IMJournalPersistStateInterval directive appears to do nothing</short_desc>
    <delta_ts>2016-12-21 09:09:05 -0500</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>rsyslog</component>
    <version>24</version>
    <rep_platform>Unspecified</rep_platform>
    <op_sys>Unspecified</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>RAWHIDE</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard></status_whiteboard>
    <keywords>Reopened</keywords>
    <priority>unspecified</priority>
    <bug_severity>unspecified</bug_severity>
    <target_milestone>---</target_milestone>

    <everconfirmed>1</everconfirmed>
    <reporter name="Chris Siebenmann">cks-rhbugzilla</reporter>
    <assigned_to name="Jiří Vymazal">jvymazal</assigned_to>
    <cc>amalgam5125</cc>

    <cc>jlieskov</cc>

    <cc>jvymazal</cc>

    <cc>lkundrak</cc>

    <cc>mah.darade</cc>

    <cc>prokhorov.max</cc>

    <cc>pvrabec</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in></cf_fixed_in>
  <cf_doc_type>Bug Fix</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2016-12-21 09:09:05</cf_last_closed>
<cf_type>Bug</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>8433934</commentid>
<comment_count>0</comment_count>
<who name="Chris Siebenmann">cks-rhbugzilla</who>
<bug_when>2015-07-13 12:03:48 -0400</bug_when>
<thetext>Description of problem: Due to bug 1242569 I want to force rsyslog to update its /var/lib/rsyslog/imjournal.state relatively frequently, so a system shutdown replays as few log entries as possible. In theory this is apparently done by
setting the option $IMJournalPersistStateInterval, eg: $IMJournalPersistStateInterval 100 This should update imjournal.state every 100 messages. I&apos;ve put this directive in a file in /etc/rsyslog.d/ and restarted rsyslog (repeatedly), but
imjournal.state never updates. Version-Release number of selected component (if applicable): rsyslog-8.8.0-3.fc22.x86_64 How reproducible: Completely. I can easily reproduce this in a completely stock scratch Fedora 22 virtual machine. Steps to
Reproduce: 1. Create /etc/rsyslog.d/imjournal.conf with the contents: $IMJournalPersistStateInterval 10 2. Restart rsyslog: &apos;systemctl restart rsyslog&apos; 3. Do something that generates a lot of syslog messages over several minutes (monitor
the volume in eg /var/log/messages). 4. Observe that /var/lib/rsyslog/imjournal.state does not update, even after hundreds of lines of syslog output in /var/log/messages. Actual results: No change in /var/lib/rsyslog/imjournal.state. Expected
results: /var/lib/rsyslog/imjournal.state updated frequently.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9315878</commentid>
<comment_count>1</comment_count>
<who name="Prokhorov Max">prokhorov.max</who>
<bug_when>2016-05-11 03:50:42 -0400</bug_when>
<thetext>This should to be fixed upstream since version 8.15 https://github.com/rsyslog/rsyslog/commit/3a65d27e74f6a1f6e53aca3156667fb9cc603bf1 For Fedora bug persists through versions 22, 23 and 24 as they use rsyslog 8.8, 8.10 and 8.12 respectively</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9525560</commentid>
<comment_count>2</comment_count>
<who name="Fedora End Of Life">jkurik</who>
<bug_when>2016-07-19 11:20:22 -0400</bug_when>
<thetext>Fedora 22 changed to end-of-life (EOL) status on 2016-07-19. Fedora 22 is no longer maintained, which means that it will not receive any further security or bug fix updates. As a result we are closing this bug. If you can reproduce this bug
against a currently maintained version of Fedora please feel free to reopen this bug against that version. If you are unable to reopen this bug, please file a new report against the current release. If you experience problems, please add a comment to
this bug. Thank you for reporting this bug and we are sorry it could not be fixed.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9525664</commentid>
<comment_count>3</comment_count>
<who name="Chris Siebenmann">cks-rhbugzilla</who>
<bug_when>2016-07-19 11:30:55 -0400</bug_when>
<thetext>This remains a bug in Fedora 24. Based on comment #1, it could be fixed with an update to rsyslog 8.15 or a direct application of the patch from the commit.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10011239</commentid>
<comment_count>5</comment_count>
<who name="Jiří Vymazal">jvymazal</who>
<bug_when>2016-12-21 09:09:05 -0500</bug_when>
<thetext>rsyslog in rawhide updated to 8.23.0 where issue is fixed, closing</thetext>
</long_desc>

</bug>

</bugzilla>
