<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1314545</bug_id>

    <creation_ts>2016-03-03 16:18:00 -0500</creation_ts>
    <short_desc>error: first argument to ‘va_arg’ not of type ‘va_list’ in C++ on s390(x)</short_desc>
    <delta_ts>2016-03-10 09:44:07 -0500</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>gcc</component>
    <version>24</version>
    <rep_platform>s390x</rep_platform>
    <op_sys>Unspecified</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>RAWHIDE</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard></status_whiteboard>
    <keywords></keywords>
    <priority>unspecified</priority>
    <bug_severity>unspecified</bug_severity>
    <target_milestone>---</target_milestone>

    <blocked>467765</blocked>
    <everconfirmed>1</everconfirmed>
    <reporter name="Dan Horák">dan</reporter>
    <assigned_to name="Jakub Jelinek">jakub</assigned_to>
    <cc>davejohansen</cc>

    <cc>jakub</cc>

    <cc>jwakely</cc>

    <cc>law</cc>

    <cc>mpolacek</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in></cf_fixed_in>
  <cf_doc_type>Bug Fix</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2016-03-10 09:44:07</cf_last_closed>
<cf_type>Bug</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>
<external_bugs name="GNU Compiler Collection">70084</external_bugs>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>9119403</commentid>
<comment_count>0</comment_count>
<who name="Dan Horák">dan</who>
<bug_when>2016-03-03 16:18:57 -0500</bug_when>
<thetext>Build of glibmm24-2.47.4-2.fc24 fails on s390(x) with gcc-c++-6.0.0-0.14.fc24 with an error, while it succeeds elsewhere. from build.log at http://s390.koji.fedoraproject.org/koji/taskinfo?taskID=2135162 ... libtool: compile: g++
-DHAVE_CONFIG_H -I.. -I../.. -DG_LOG_DOMAIN=\&quot;glibmm\&quot; -DGLIBMM_BUILD=1 -pthread -I/usr/include/sigc++-2.0 -I/usr/lib64/sigc++-2.0/include -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -Wall -O2 -g -pipe -Wall
-Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -march=z9-109 -mtune=z10 -c object.cc -fPIC -DPIC -o
.libs/object.o In file included from /usr/include/glib-2.0/glib/gerror.h:27:0, from /usr/include/glib-2.0/glib/gthread.h:33, from /usr/include/glib-2.0/glib/gasyncqueue.h:32, from /usr/include/glib-2.0/glib.h:32, from
/usr/include/glib-2.0/gobject/gbinding.h:28, from /usr/include/glib-2.0/glib-object.h:23, from ../glibmm/class.h:25, from ../glibmm/objectbase.h:22, from ../glibmm/object.h:28, from object.cc:18: object.cc: In constructor
&apos;Glib::ConstructParams::ConstructParams(const Glib::Class&amp;, const char*, ...)&apos;: /usr/include/glib-2.0/gobject/gvaluecollector.h:105:41: error: first argument to &apos;va_arg&apos; not of type &apos;va_list&apos; _cvalue-&gt;v_int =
va_arg ((var_args), gint); \ ~ /usr/include/glib-2.0/gobject/gvaluecollector.h:156:3: note: in expansion of macro &apos;G_VALUE_COLLECT_INIT&apos; G_VALUE_COLLECT_INIT(value, _value_type, var_args, flags, __error); \ ^~~~~~~~~~~~~~~~~~~~
object.cc:109:5: note: in expansion of macro &apos;G_VALUE_COLLECT&apos; G_VALUE_COLLECT(&amp;param.value, var_args, 0, &amp;collect_error); ^~~~~~~~~~~~~~~ /usr/include/glib-2.0/gobject/gvaluecollector.h:108:42: error: first argument to
&apos;va_arg&apos; not of type &apos;va_list&apos; _cvalue-&gt;v_long = va_arg ((var_args), glong); \ ~ /usr/include/glib-2.0/gobject/gvaluecollector.h:156:3: note: in expansion of macro &apos;G_VALUE_COLLECT_INIT&apos; G_VALUE_COLLECT_INIT(value,
_value_type, var_args, flags, __error); \ ^~~~~~~~~~~~~~~~~~~~ object.cc:109:5: note: in expansion of macro &apos;G_VALUE_COLLECT&apos; G_VALUE_COLLECT(&amp;param.value, var_args, 0, &amp;collect_error); ^~~~~~~~~~~~~~~
/usr/include/glib-2.0/gobject/gvaluecollector.h:111:43: error: first argument to &apos;va_arg&apos; not of type &apos;va_list&apos; _cvalue-&gt;v_int64 = va_arg ((var_args), gint64); \ ~ /usr/include/glib-2.0/gobject/gvaluecollector.h:156:3: note: in
expansion of macro &apos;G_VALUE_COLLECT_INIT&apos; G_VALUE_COLLECT_INIT(value, _value_type, var_args, flags, __error); \ ^~~~~~~~~~~~~~~~~~~~ object.cc:109:5: note: in expansion of macro &apos;G_VALUE_COLLECT&apos; G_VALUE_COLLECT(&amp;param.value,
var_args, 0, &amp;collect_error); ^~~~~~~~~~~~~~~ /usr/include/glib-2.0/gobject/gvaluecollector.h:114:44: error: first argument to &apos;va_arg&apos; not of type &apos;va_list&apos; _cvalue-&gt;v_double = va_arg ((var_args), gdouble); \ ~
/usr/include/glib-2.0/gobject/gvaluecollector.h:156:3: note: in expansion of macro &apos;G_VALUE_COLLECT_INIT&apos; G_VALUE_COLLECT_INIT(value, _value_type, var_args, flags, __error); \ ^~~~~~~~~~~~~~~~~~~~ object.cc:109:5: note: in expansion of
macro &apos;G_VALUE_COLLECT&apos; G_VALUE_COLLECT(&amp;param.value, var_args, 0, &amp;collect_error); ^~~~~~~~~~~~~~~ /usr/include/glib-2.0/gobject/gvaluecollector.h:117:45: error: first argument to &apos;va_arg&apos; not of type &apos;va_list&apos;
_cvalue-&gt;v_pointer = va_arg ((var_args), gpointer); \ ~ /usr/include/glib-2.0/gobject/gvaluecollector.h:156:3: note: in expansion of macro &apos;G_VALUE_COLLECT_INIT&apos; G_VALUE_COLLECT_INIT(value, _value_type, var_args, flags, __error); \
^~~~~~~~~~~~~~~~~~~~ object.cc:109:5: note: in expansion of macro &apos;G_VALUE_COLLECT&apos; G_VALUE_COLLECT(&amp;param.value, var_args, 0, &amp;collect_error); ^~~~~~~~~~~~~~~ Makefile:744: recipe for target &apos;object.lo&apos; failed The source
source is https://git.gnome.org/browse/glibmm/tree/glib/glibmm/object.cc?id=42a47cb78e4815da6d6ebccafda864326fcdd22c#n69 and then https://git.gnome.org/browse/glib/tree/gobject/gvaluecollector.h?h=2.47.5#n88 I have reduced the code and I&apos;m
getting an error on s390x, but not on x86_64 [sharkcz@devel10 glibmm]$ cat a.cc #include &lt;cstdarg&gt; class A { public: A(const char* f, ...); }; A::A(const char *f, ...) { va_list var_args; va_start(var_args, f); int i; i = va_arg ((var_args),
int); va_end(var_args); } [sharkcz@devel10 glibmm]$ g++ -Wall -O2 -Wall -c a.cc -o a.o a.cc: In constructor ‘A::A(const char*, ...)’: a.cc:14:7: warning: variable ‘i’ set but not used [-Wunused-but-set-variable] int i; ^ In file included from
/usr/include/c++/6.0.0/cstdarg:43:0, from a.cc:1: a.cc: In constructor ‘A::A(const char*, ...)’: a.cc:15:27: error: first argument to ‘va_arg’ not of type ‘va_list’ i = va_arg ((var_args), int); ~ [sharkcz@devel10 glibmm]$ rpm -q gcc-c++
gcc-c++-6.0.0-0.14.fc24.s390x while compile on x86_64 returns: &lt;mock-chroot&gt;sh-4.3# g++ -Wall -O2 -Wall -c a.cc -o a.o a.cc: In constructor &apos;A::A(const char*, ...)&apos;: a.cc:14:7: warning: variable &apos;i&apos; set but not used
[-Wunused-but-set-variable] int i; ^ &lt;mock-chroot&gt;sh-4.3# rpm -q gcc-c++ gcc-c++-6.0.0-0.13.fc24.x86_64</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9119414</commentid>
<comment_count>1</comment_count>
<who name="Dan Horák">dan</who>
<bug_when>2016-03-03 16:23:53 -0500</bug_when>
<thetext>It might be still an incorrect code, but why the result is inconsistent between arches? Doesn&apos;t have &quot;stdarg&quot; a specific implementation on s390(x)?</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9121309</commentid>
<comment_count>2</comment_count>
<who name="Dan Horák">dan</who>
<bug_when>2016-03-04 08:52:08 -0500</bug_when>
<thetext>cannot be reproduced with gcc 5.3 and -std=c++14 [sharkcz@devel6 ~]$ g++ -std=c++14 -O2 -Wall -c a.cc -o a.o a.cc: In constructor ‘A::A(const char*, ...)’: a.cc:14:7: warning: variable ‘i’ set but not used [-Wunused-but-set-variable] int i;
^ [sharkcz@devel6 ~]$ rpm -q gcc-c++ gcc-c++-5.3.1-2.fc23.s390x</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9121318</commentid>
<comment_count>3</comment_count>
<attachid>1133167</attachid>
<who name="Dan Horák">dan</who>
<bug_when>2016-03-04 08:56:58 -0500</bug_when>
<thetext>Created attachment 1133167 preprocessed source file with gcc-c++-6.0.0-0.14.fc24.s390x</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9121350</commentid>
<comment_count>4</comment_count>
<who name="Dan Horák">dan</who>
<bug_when>2016-03-04 09:02:00 -0500</bug_when>
<thetext>and yes, removing the extra parentheses around the first argument in va_arg() makes the error go away</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9121356</commentid>
<comment_count>5</comment_count>
<who name="Jonathan Wakely">jwakely</who>
<bug_when>2016-03-04 09:03:29 -0500</bug_when>
<thetext>There have been some G++ bugs relating to extra parens causing problems in C++14 mode, this looks like another of those.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9123162</commentid>
<comment_count>6</comment_count>
<who name="Dan Horák">dan</who>
<bug_when>2016-03-05 14:02:32 -0500</bug_when>
<thetext>The problem went away when gcc-6.0.0-0.15.fc24 was used in the build.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9138447</commentid>
<comment_count>7</comment_count>
<who name="Marek Polacek">mpolacek</who>
<bug_when>2016-03-10 09:44:07 -0500</bug_when>
<thetext>The fix is in gcc-6.0.0-0.15.fc24, closing.</thetext>
</long_desc>

<attachment isobsolete="0" ispatch="0" isprivate="0">
<attachid>1133167</attachid>
<date>2016-03-04 08:56:00 -0500</date>
<delta_ts>2016-03-04 08:56:58 -0500</delta_ts>
<desc>preprocessed source file</desc>
<filename>a.i</filename>
<type>text/plain</type>
<size>3133</size>
<attacher name="Dan Horák">dan</attacher>

<data encoding="base64">IyAxICJhLmNjIgojIDEgIjxidWlsdC1pbj4iCiMgMSAiPGNvbW1hbmQtbGluZT4iCiMgMSAiL3Vz ci9pbmNsdWRlL3N0ZGMtcHJlZGVmLmgiIDEgMyA0CiMgMSAiPGNvbW1hbmQtbGluZT4iIDIKIyAx
ICJhLmNjIgojIDEgIi91c3IvaW5jbHVkZS9jKysvNi4wLjAvY3N0ZGFyZyIgMSAzCiMgMzkgIi91 c3IvaW5jbHVkZS9jKysvNi4wLjAvY3N0ZGFyZyIgMwogICAgICAgCiMgNDAgIi91c3IvaW5jbHVk ZS9jKysvNi4wLjAvY3N0ZGFyZyIgMwoKCiMgMSAiL3Vzci9pbmNsdWRlL2MrKy82LjAuMC9zMzkw
eC1yZWRoYXQtbGludXgvYml0cy9jKytjb25maWcuaCIgMSAzCgoKIyAxICIvdXNyL2luY2x1ZGUv Yml0cy93b3Jkc2l6ZS5oIiAxIDMgNAojIDQgIi91c3IvaW5jbHVkZS9jKysvNi4wLjAvczM5MHgt cmVkaGF0LWxpbnV4L2JpdHMvYysrY29uZmlnLmgiIDIgMwojIDIwODYgIi91c3IvaW5jbHVkZS9j
KysvNi4wLjAvczM5MHgtcmVkaGF0LWxpbnV4L2JpdHMvYysrY29uZmlnLmgiIDMKCiMgMjA4NiAi L3Vzci9pbmNsdWRlL2MrKy82LjAuMC9zMzkweC1yZWRoYXQtbGludXgvYml0cy9jKytjb25maWcu aCIgMwpuYW1lc3BhY2Ugc3RkCnsKICB0eXBlZGVmIGxvbmcgdW5zaWduZWQgaW50IHNpemVfdDsK
ICB0eXBlZGVmIGxvbmcgaW50IHB0cmRpZmZfdDsKCgogIHR5cGVkZWYgZGVjbHR5cGUobnVsbHB0 cikgbnVsbHB0cl90OwoKfQojIDIxMDggIi91c3IvaW5jbHVkZS9jKysvNi4wLjAvczM5MHgtcmVk aGF0LWxpbnV4L2JpdHMvYysrY29uZmlnLmgiIDMKbmFtZXNwYWNlIHN0ZAp7CiAgaW5saW5lIG5h
bWVzcGFjZSBfX2N4eDExIF9fYXR0cmlidXRlX18oKF9fYWJpX3RhZ19fICgiY3h4MTEiKSkpIHsg fQp9Cm5hbWVzcGFjZSBfX2dudV9jeHgKewogIGlubGluZSBuYW1lc3BhY2UgX19jeHgxMSBfX2F0 dHJpYnV0ZV9fKChfX2FiaV90YWdfXyAoImN4eDExIikpKSB7IH0KfQojIDIyODMgIi91c3IvaW5j
bHVkZS9jKysvNi4wLjAvczM5MHgtcmVkaGF0LWxpbnV4L2JpdHMvYysrY29uZmlnLmgiIDMKbmFt ZXNwYWNlIHN0ZAp7CiAgaW5saW5lIG5hbWVzcGFjZSBfX2dudV9jeHhfbGRibDEyOCB7IH0KfQoj IDIzODUgIi91c3IvaW5jbHVkZS9jKysvNi4wLjAvczM5MHgtcmVkaGF0LWxpbnV4L2JpdHMvYysr
Y29uZmlnLmgiIDMKIyAxICIvdXNyL2luY2x1ZGUvYysrLzYuMC4wL3MzOTB4LXJlZGhhdC1saW51 eC9iaXRzL29zX2RlZmluZXMuaCIgMSAzCiMgMzkgIi91c3IvaW5jbHVkZS9jKysvNi4wLjAvczM5 MHgtcmVkaGF0LWxpbnV4L2JpdHMvb3NfZGVmaW5lcy5oIiAzCiMgMSAiL3Vzci9pbmNsdWRlL2Zl
YXR1cmVzLmgiIDEgMyA0CiMgMzY4ICIvdXNyL2luY2x1ZGUvZmVhdHVyZXMuaCIgMyA0CiMgMSAi L3Vzci9pbmNsdWRlL3N5cy9jZGVmcy5oIiAxIDMgNAojIDQxMCAiL3Vzci9pbmNsdWRlL3N5cy9j ZGVmcy5oIiAzIDQKIyAxICIvdXNyL2luY2x1ZGUvYml0cy93b3Jkc2l6ZS5oIiAxIDMgNAojIDQx
MSAiL3Vzci9pbmNsdWRlL3N5cy9jZGVmcy5oIiAyIDMgNAojIDM2OSAiL3Vzci9pbmNsdWRlL2Zl YXR1cmVzLmgiIDIgMyA0CiMgMzkyICIvdXNyL2luY2x1ZGUvZmVhdHVyZXMuaCIgMyA0CiMgMSAi L3Vzci9pbmNsdWRlL2dudS9zdHVicy5oIiAxIDMgNAoKCgoKIyAxICIvdXNyL2luY2x1ZGUvYml0
cy93b3Jkc2l6ZS5oIiAxIDMgNAojIDYgIi91c3IvaW5jbHVkZS9nbnUvc3R1YnMuaCIgMiAzIDQK CgoKCgojIDEgIi91c3IvaW5jbHVkZS9nbnUvc3R1YnMtNjQuaCIgMSAzIDQKIyAxMiAiL3Vzci9p bmNsdWRlL2dudS9zdHVicy5oIiAyIDMgNAojIDM5MyAiL3Vzci9pbmNsdWRlL2ZlYXR1cmVzLmgi
IDIgMyA0CiMgNDAgIi91c3IvaW5jbHVkZS9jKysvNi4wLjAvczM5MHgtcmVkaGF0LWxpbnV4L2Jp dHMvb3NfZGVmaW5lcy5oIiAyIDMKIyAyMzg2ICIvdXNyL2luY2x1ZGUvYysrLzYuMC4wL3MzOTB4 LXJlZGhhdC1saW51eC9iaXRzL2MrK2NvbmZpZy5oIiAyIDMKCgojIDEgIi91c3IvaW5jbHVkZS9j
KysvNi4wLjAvczM5MHgtcmVkaGF0LWxpbnV4L2JpdHMvY3B1X2RlZmluZXMuaCIgMSAzCiMgMjM4 OSAiL3Vzci9pbmNsdWRlL2MrKy82LjAuMC9zMzkweC1yZWRoYXQtbGludXgvYml0cy9jKytjb25m aWcuaCIgMiAzCiMgNDMgIi91c3IvaW5jbHVkZS9jKysvNi4wLjAvY3N0ZGFyZyIgMiAzCiMgMSAi
L3Vzci9saWIvZ2NjL3MzOTB4LXJlZGhhdC1saW51eC82LjAuMC9pbmNsdWRlL3N0ZGFyZy5oIiAx IDMgNAojIDQwICIvdXNyL2xpYi9nY2MvczM5MHgtcmVkaGF0LWxpbnV4LzYuMC4wL2luY2x1ZGUv c3RkYXJnLmgiIDMgNAp0eXBlZGVmIF9fYnVpbHRpbl92YV9saXN0IF9fZ251Y192YV9saXN0Owoj
IDk5ICIvdXNyL2xpYi9nY2MvczM5MHgtcmVkaGF0LWxpbnV4LzYuMC4wL2luY2x1ZGUvc3RkYXJn LmgiIDMgNAp0eXBlZGVmIF9fZ251Y192YV9saXN0IHZhX2xpc3Q7CiMgNDQgIi91c3IvaW5jbHVk ZS9jKysvNi4wLjAvY3N0ZGFyZyIgMiAzCiMgNTMgIi91c3IvaW5jbHVkZS9jKysvNi4wLjAvY3N0
ZGFyZyIgMwpuYW1lc3BhY2Ugc3RkCnsKICB1c2luZyA6OnZhX2xpc3Q7Cn0KIyAyICJhLmNjIiAy CgoKIyAzICJhLmNjIgpjbGFzcyBBCnsKcHVibGljOgogICAgQShjb25zdCBjaGFyKiBmLCAuLi4p Owp9OwoKQTo6QShjb25zdCBjaGFyICpmLCAuLi4pCnsKICB2YV9saXN0IHZhcl9hcmdzOwogIAoj
IDEyICJhLmNjIiAzIDQKIF9fYnVpbHRpbl92YV9zdGFydCgKIyAxMiAiYS5jYyIKIHZhcl9hcmdz CiMgMTIgImEuY2MiIDMgNAogLAojIDEyICJhLmNjIgogZgojIDEyICJhLmNjIiAzIDQKICkKIyAx MiAiYS5jYyIKICAgICAgICAgICAgICAgICAgICAgIDsKCiAgaW50IGk7CiAgaSA9IAojIDE1ICJh
LmNjIiAzIDQKICAgICBfX2J1aWx0aW5fdmFfYXJnKAojIDE1ICJhLmNjIgogICAgICh2YXJfYXJn cykKIyAxNSAiYS5jYyIgMyA0CiAgICAgLAojIDE1ICJhLmNjIgogICAgIGludAojIDE1ICJhLmNj IiAzIDQKICAgICApCiMgMTUgImEuY2MiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOwoK
ICAKIyAxNyAiYS5jYyIgMyA0CiBfX2J1aWx0aW5fdmFfZW5kKAojIDE3ICJhLmNjIgogdmFyX2Fy Z3MKIyAxNyAiYS5jYyIgMyA0CiApCiMgMTcgImEuY2MiCiAgICAgICAgICAgICAgICAgOwp9Cg==
</data>

</attachment>

</bug>

</bugzilla>
