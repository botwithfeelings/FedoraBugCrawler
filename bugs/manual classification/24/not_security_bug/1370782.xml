<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1370782</bug_id>

    <creation_ts>2016-08-27 05:11:00 -0400</creation_ts>
    <short_desc>World writable /dev/ttyUSB* and /dev/ttyACM* with 3dprinter-udev-rules</short_desc>
    <delta_ts>2016-10-11 11:33:22 -0400</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>3dprinter-udev-rules</component>
    <version>24</version>
    <rep_platform>All</rep_platform>
    <op_sys>Linux</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>ERRATA</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard></status_whiteboard>
    <keywords>Reopened</keywords>
    <priority>unspecified</priority>
    <bug_severity>unspecified</bug_severity>
    <target_milestone>---</target_milestone>

    <everconfirmed>1</everconfirmed>
    <reporter name="Doncho N. Gunchev">dgunchev</reporter>
    <assigned_to name="Miro Hrončok">mhroncok</assigned_to>
    <cc>mhroncok</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in>3dprinter-udev-rules-0.2-1.fc25 3dprinter-udev-rules-0.2-1.fc23.1 3dprinter-udev-rules-0.2-1.fc24</cf_fixed_in>
  <cf_doc_type>If docs needed, set a value</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2016-09-17 15:19:19</cf_last_closed>
<cf_type>Bug</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>9655378</commentid>
<comment_count>0</comment_count>
<who name="Doncho N. Gunchev">dgunchev</who>
<bug_when>2016-08-27 05:11:44 -0400</bug_when>
<thetext>Description of problem: With file mode of 666 any user (even nobody) can write to a character device (say SeLinux is permissive/disabled). I was quite surprised Fedora took such insecure path after upgrading from 22 to 24. The dialout (or
any other group) with mode 660 looks way better. Version-Release number of selected component (if applicable): any How reproducible: always Steps to Reproduce: 1. Install/upgrade to Fedora 24 Actual results: /dev/ttyUSB* and /dev/ttyACM* have file
mode 0666. Expected results: /dev/ttyUSB* and /dev/ttyACM* have file mode 0660 and special group. Additional info: Removing the package also removes cura, plater, etc... One has to either override or edit /usr/lib/udev/rules.d/66-3dprinter.rules.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9655393</commentid>
<comment_count>1</comment_count>
<who name="Miro Hrončok">mhroncok</who>
<bug_when>2016-08-27 05:40:00 -0400</bug_when>
<thetext>You say this is insecure when you install Fedora? It is designed to be &quot;insecure&quot; once you have that package. If you have a proper fix for this in mind, please suggest. The reason for this package was that the users will not have
to add themselves to the dialout group. Also, how dangerous this exactly is? I have no idea, so if you provide an example of an actual damage that could be done, I might reconsider this approach and go back to how it was before. There is new approach
being designed at https://github.com/hroncok/3dprinter-udev-rules/blob/master/66-3dprinter.rules but we are not sure if we have enough data to ship it.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9655869</commentid>
<comment_count>2</comment_count>
<who name="Doncho N. Gunchev">dgunchev</who>
<bug_when>2016-08-27 08:52:49 -0400</bug_when>
<thetext>I checked checked the &apos;uaccess&apos; tag - it is good for desktop users. The problem is that you can not have cura, CuraEngine, plater, printrun, etc..., etc... without this package. CuraEngine is command line application, not a desktop
one. What was the problem with a prompt &quot;Do you want to be added to group &apos;dialout&apos; to access...&quot; (no idea what the text was exactly&quot;, clicking yes, entering a password and logout/login? Anyways, the current solution scares
me, how secure will the next RHEL be? My BusPirate udev file is: --- cut --- # Rules for BusPirate SUBSYSTEM!=&quot;usb&quot;, ACTION!=&quot;add&quot;, GOTO=&quot;buspirate_end&quot; ATTRS{idVendor}==&quot;0403&quot;,
ATTRS{idProduct}==&quot;6001&quot;, MODE=&quot;0660&quot;, GROUP=&quot;dgunchev&quot;, KERNEL==&quot;ttyUSB*&quot;, SYMLINK+=&quot;BusPirate%n&quot; ATTRS{idVendor}==&quot;0403&quot;, ATTRS{idProduct}==&quot;6001&quot;,
ENV{ID_MM_DEVICE_IGNORE}=&quot;1&quot; LABEL=&quot;buspirate_end&quot; --- cut --- however, I updated to Fedora 24 and now everyone can control it. Other devices that got world exposed are my OBD adapter and my phone. I was thinking what about two
packages both providing &apos;3dprinter-udev-rules&apos; (serial-port-user-access to be more precise, ttyUSB* and ttyACM* is 3d printers, scanners, cutters, arduinos, OBD dongles, modems, phones...) but conflicting with each other allowing for two
approaches - desktop and server, but have no idea how to install one of the above by default and so on. Maybe with alternatives? Or just another &apos;secure-3dprinter-udev-rules&apos; that adopts the fedora 22&apos;s approach?</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9656024</commentid>
<comment_count>3</comment_count>
<who name="Miro Hrončok">mhroncok</who>
<bug_when>2016-08-27 09:20:43 -0400</bug_when>
<thetext>(In reply to Doncho N. Gunchev from comment #2) &gt; I checked checked the &apos;uaccess&apos; tag - it is good for desktop users. &gt; &gt; The problem is that you can not have cura, CuraEngine, plater, printrun, &gt; etc..., etc... without
this package. CuraEngine is command line application, &gt; not a desktop one. You should be able to have CuraEngine just fine without this package. &gt; What was the problem with a prompt &quot;Do you want to be added to group &gt;
&apos;dialout&apos; to access...&quot; (no idea what the text was exactly&quot;, clicking yes, &gt; entering a password and logout/login? That it would have to be patch-added to all the apps? If you implement it in all the apps, we can drop this
package. $ dnf repoquery --whatrequires 3dprinter-udev-rules --releasever 24 RepetierHost-0:0.90D-7.fc24.noarch cura-0:15.04.4-3.fc24.noarch cura-lulzbot-0:19.12-1.fc24.noarch pronsole-0:2015.03.10-4.fc24.noarch pronterface-0:2015.03.10-4.fc24.noarch
repsnapper-0:2.3.2-0.10.a5.fc24.x86_64 &gt; Anyways, the current solution scares me, how secure will the next RHEL be? Well, this is not intended to be in RHEL, so the question is irrelevant. &gt; My BusPirate udev file is: &gt; --- cut --- &gt; #
Rules for BusPirate &gt; SUBSYSTEM!=&quot;usb&quot;, ACTION!=&quot;add&quot;, GOTO=&quot;buspirate_end&quot; &gt; &gt; ATTRS{idVendor}==&quot;0403&quot;, ATTRS{idProduct}==&quot;6001&quot;, MODE=&quot;0660&quot;, &gt; GROUP=&quot;dgunchev&quot;,
KERNEL==&quot;ttyUSB*&quot;, SYMLINK+=&quot;BusPirate%n&quot; &gt; ATTRS{idVendor}==&quot;0403&quot;, ATTRS{idProduct}==&quot;6001&quot;, &gt; ENV{ID_MM_DEVICE_IGNORE}=&quot;1&quot; &gt; &gt; LABEL=&quot;buspirate_end&quot; &gt; --- cut --- &gt;
however, I updated to Fedora 24 and now everyone can control it. Other &gt; devices that got world exposed are my OBD adapter and my phone. I see. &gt; I was thinking what about two packages both providing &apos;3dprinter-udev-rules&apos; &gt;
(serial-port-user-access to be more precise, ttyUSB* and ttyACM* is 3d &gt; printers, scanners, cutters, arduinos, OBD dongles, modems, phones...) but &gt; conflicting with each other allowing for two approaches - desktop and &gt; server, but have no
idea how to install one of the above by default and so &gt; on. Maybe with alternatives? Or just another &apos;secure-3dprinter-udev-rules&apos; &gt; that adopts the fedora 22&apos;s approach? We can make the package different on Workstation and
Server. But I&apos;m not sure if it&apos;s worth it. Someone will say its insecure on Workstation. I think we should release new version of this package based on https://github.com/hroncok/3dprinter-udev-rules/blob/master/66-3dprinter.rules Would
that solve the problem for you? (BTW I will be gone for next couple of days, but will continue to work on this later on...)</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9690213</commentid>
<comment_count>4</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-09-08 07:35:50 -0400</bug_when>
<thetext>3dprinter-udev-rules-0.2-1.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-a9a3b1c70a</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9690216</commentid>
<comment_count>5</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-09-08 07:36:44 -0400</bug_when>
<thetext>3dprinter-udev-rules-0.2-1.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-5b761a2cd2</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9690217</commentid>
<comment_count>6</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-09-08 07:37:10 -0400</bug_when>
<thetext>3dprinter-udev-rules-0.2-1.fc23 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2016-c8925abeb6</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9690287</commentid>
<comment_count>7</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-09-08 07:56:53 -0400</bug_when>
<thetext>3dprinter-udev-rules-0.2-1.fc23.1 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2016-88015ac54d</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9692863</commentid>
<comment_count>8</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-09-09 02:25:03 -0400</bug_when>
<thetext>3dprinter-udev-rules-0.2-1.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to
install test updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-a9a3b1c70a</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9695064</commentid>
<comment_count>9</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-09-09 13:57:12 -0400</bug_when>
<thetext>3dprinter-udev-rules-0.2-1.fc23.1 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to
install test updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-88015ac54d</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9698949</commentid>
<comment_count>10</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-09-12 09:17:58 -0400</bug_when>
<thetext>3dprinter-udev-rules-0.2-1.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9699664</commentid>
<comment_count>11</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-09-12 11:27:53 -0400</bug_when>
<thetext>3dprinter-udev-rules-0.2-1.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to
install test updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-5b761a2cd2</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9718105</commentid>
<comment_count>12</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-09-17 15:19:16 -0400</bug_when>
<thetext>3dprinter-udev-rules-0.2-1.fc23.1 has been pushed to the Fedora 23 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9732095</commentid>
<comment_count>13</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-09-21 20:25:11 -0400</bug_when>
<thetext>3dprinter-udev-rules-0.2-1.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9781689</commentid>
<comment_count>14</comment_count>
<who name="Doncho N. Gunchev">dgunchev</who>
<bug_when>2016-10-11 11:33:22 -0400</bug_when>
<thetext>Thank you very much! Sorry I could not check earlier, had to go to a country with censored Internet...</thetext>
</long_desc>

</bug>

</bugzilla>
