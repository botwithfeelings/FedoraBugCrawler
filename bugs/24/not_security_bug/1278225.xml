<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1278225</bug_id>

    <creation_ts>2015-11-04 20:05:00 -0500</creation_ts>
    <short_desc>erase all the cache regardless --releasever specified</short_desc>
    <delta_ts>2017-03-31 11:59:12 -0400</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>dnf</component>
    <version>24</version>
    <rep_platform>Unspecified</rep_platform>
    <op_sys>Linux</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>RAWHIDE</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard></status_whiteboard>
    <keywords>Reopened, Triaged</keywords>
    <priority>low</priority>
    <bug_severity>low</bug_severity>
    <target_milestone>---</target_milestone>

    <everconfirmed>1</everconfirmed>
    <reporter name="John C. Beima">jbeima</reporter>
    <assigned_to>rpm-software-management</assigned_to>
    <cc>jbeima</cc>

    <cc>jmracek</cc>

    <cc>mluscon</cc>

    <cc>packaging-team-maint</cc>

    <cc>ttomecek</cc>

    <cc>vmukhame</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in></cf_fixed_in>
  <cf_doc_type>Bug Fix</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2017-03-31 11:59:12</cf_last_closed>
<cf_type>Bug</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>8793345</commentid>
<comment_count>0</comment_count>
<who name="John C. Beima">jbeima</who>
<bug_when>2015-11-04 20:05:00 -0500</bug_when>
<thetext>Description of problem: The command &quot;dnf clean all&quot; does not clean out the cache created by the system-upgrade plugin. It only &quot;cleans&quot; part of it. For example: You issue: dnf clean all dnf update To bring Fedora 22
current. Then you issue: dnf system-upgrade download --releasever=23 --best This will then download the Fedora 23 and Fedora 23 Update Repositories. In my case this generated an error: kf5-kdesu-5.15.0-2 requires kf5-filesystem &gt;= 5.15.0, but no
provider can provide it. So I waited a day and issued the following commands: dnf clean all dnf update dnf system-upgrade download --releasever=23 --best At this point dnf only download the Fedora 23 Update Repository. This was because the &quot;dnf
clean all&quot; did not &quot;clean&quot; the Fedora 23 Repository. It stayed. Version-Release number of selected component (if applicable): dnf - 1.1.3-1.fc22 dnf-plugins-system-upgrade - 0.7.0-1.fc22 How reproducible: Steps to Reproduce: 1. dnf
clean all 2. dnf update 3. dnf system-upgrade download --releasever=23 --bext 4. dnf clean all 5. dnf system-upgrade download --releasever=23 --best Actual results: You will see it cleans and re-loads the Fedora 23 Updates Repository. However it
maintains the orginially download Fedora 23 Repository. Expected results: A &quot;dnf clean all&quot; should remove or &quot;clean&quot; out all respositories. Additional info:</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>8795764</commentid>
<comment_count>1</comment_count>
<who name="John C. Beima">jbeima</who>
<bug_when>2015-11-05 11:52:28 -0500</bug_when>
<thetext>In my case, in order to get the dnf system-upgrade to work, I had to do the following to clear the package dependency error out: 1. cd /var/cache/dnf 2. rm -rf * 3. dnf update 4. dnf system-upgrade download --releasever=23 --best 5. dnf
system-upgrade reboot After cleaning out the cache manually/forcefully the upgrade performed. The &quot;clean all&quot; parameter simply needs to be aware of the repositories the plugins create.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>8803336</commentid>
<comment_count>2</comment_count>
<who name="Honza Silhan">jsilhan</who>
<bug_when>2015-11-09 08:07:04 -0500</bug_when>
<thetext>tip: you can use these steps for upgrade where the new metadata are requested: * dnf upgrade * dnf system-upgrade download --releasever=23 --refresh * dnf system-upgrade reboot</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>8804859</commentid>
<comment_count>3</comment_count>
<who name="John C. Beima">jbeima</who>
<bug_when>2015-11-09 15:17:12 -0500</bug_when>
<thetext>Jan: I did not try the &quot;--refresh&quot;, since I was unaware that it existed. However a &quot;clean all&quot; should clean all no matter what. :) Just my humble opinion. Jan the problem was also in the Fedora 23 cache not the update
cache. Since once I physically erased the contents of the dnf cache directory the upgrade proceeded. I know it was Fedora, since when I was checking dnf was re-downloading the upgrade repo, and keeping the orginal Fedora repo. If that helps at all.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>8804864</commentid>
<comment_count>4</comment_count>
<who name="John C. Beima">jbeima</who>
<bug_when>2015-11-09 15:19:51 -0500</bug_when>
<thetext>I think we have 2 seperate bugs here. First clean all does not clean all when repos are created by system-upgrade. Second system-upgrade should erase all caches when the --releasever is used. Two seperate issues...</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>8962625</commentid>
<comment_count>5</comment_count>
<who name="Michal Domonkos">mdomonko</who>
<bug_when>2016-01-07 12:41:19 -0500</bug_when>
<thetext>*** Bug 1253806 has been marked as a duplicate of this bug. ***</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9490278</commentid>
<comment_count>6</comment_count>
<who name="Fedora Admin XMLRPC Client">fedora-admin-xmlrpc</who>
<bug_when>2016-07-08 05:31:24 -0400</bug_when>
<thetext>This package has changed ownership in the Fedora Package Database. Reassigning to the new owner of this component.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9527973</commentid>
<comment_count>7</comment_count>
<who name="Fedora End Of Life">jkurik</who>
<bug_when>2016-07-19 14:56:10 -0400</bug_when>
<thetext>Fedora 22 changed to end-of-life (EOL) status on 2016-07-19. Fedora 22 is no longer maintained, which means that it will not receive any further security or bug fix updates. As a result we are closing this bug. If you can reproduce this bug
against a currently maintained version of Fedora please feel free to reopen this bug against that version. If you are unable to reopen this bug, please file a new report against the current release. If you experience problems, please add a comment to
this bug. Thank you for reporting this bug and we are sorry it could not be fixed.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9528030</commentid>
<comment_count>8</comment_count>
<who name="John C. Beima">jbeima</who>
<bug_when>2016-07-19 15:01:24 -0400</bug_when>
<thetext>Not sure why this was closed, since it exists in all versions of Fedora, it is simply being ignored as opposed to being addressed. :) Leaving it for over a year, because it has a lower priority doesn&apos;t fix it. :)</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10295001</commentid>
<comment_count>9</comment_count>
<who name="Jaroslav Mracek">jmracek</who>
<bug_when>2017-03-31 11:59:12 -0400</bug_when>
<thetext>I cannot reproduce the problem with dnf-2.2.0_1-3g33c95a8.fc25.noarch. Please can you try to reproduce your problem with dnf-2.0? It was released for fc26 and rawhide, but we provide the test repository for Fedora 24 and later versions.</thetext>
</long_desc>

</bug>

</bugzilla>
