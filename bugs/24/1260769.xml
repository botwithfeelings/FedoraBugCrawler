<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1260769</bug_id>
          
          <creation_ts>2015-09-07 12:47:00 -0400</creation_ts>
          <short_desc>[GTK3][Wayland] Firefox crashes in GTK when main window is resized</short_desc>
          <delta_ts>2017-06-19 07:37:41 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>gtk3</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>RAWHIDE</resolution>
          
          
          <bug_file_loc>https://github.com/stransky/gecko-dev</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1054334</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Martin Stransky">stransky</reporter>
          <assigned_to name="Matthias Clasen">mclasen</assigned_to>
          <cc>alexl</cc>
    
    
    <cc>anton4linux</cc>
    
    
    <cc>ccecchi</cc>
    
    
    <cc>gecko-bugs-nobody</cc>
    
    
    <cc>jadahl</cc>
    
    
    <cc>johannespfrang+redhat</cc>
    
    
    <cc>jorgeml</cc>
    
    
    <cc>mclasen</cc>
    
    
    <cc>rhbz2</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          <cf_clone_of>1054334</cf_clone_of>
          <cf_environment></cf_environment>
          <cf_last_closed>2017-06-19 07:37:41</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          <external_bugs name="Mozilla Foundation">635134</external_bugs>
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8612486</commentid>
    <comment_count>0</comment_count>
    <who name="Martin Stransky">stransky</who>
    <bug_when>2015-09-07 12:47:15 -0400</bug_when>
    <thetext>Reproduction steps:

In Wayland sesion:

1) git pull https://github.com/stransky/gecko-dev src
2) cd src; ./mach build
3) cd objdir/dist/bin
4) ./firefox -ProfileManager (create your custom profile)
5) ./firefox -P your_profile -no-remote

Crash in:

static void
gdk_wayland_window_attach_image (GdkWindow *window)

impl-&gt;surface is NULL here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8612489</commentid>
    <comment_count>1</comment_count>
    <who name="Martin Stransky">stransky</who>
    <bug_when>2015-09-07 12:52:10 -0400</bug_when>
    <thetext>bt:

#0  0x00007ffff3418800 in cairo_surface_get_user_data (surface=0x0, key=key@entry=0x7ffff4719108 &lt;gdk_wayland_cairo_key&gt;)
    at cairo-surface.c:1123
#1  0x00007ffff44c5e40 in _gdk_wayland_is_shm_surface (surface=&lt;optimized out&gt;) at gdkdisplay-wayland.c:1117
#2  0x00007ffff44cd89f in gdk_wayland_window_attach_image (window=window@entry=0x7fffcad22680 [GdkWaylandWindow])
    at gdkwindow-wayland.c:553
#3  0x00007ffff44cd9ab in gdk_window_impl_wayland_end_paint (window=0x7fffcad22680 [GdkWaylandWindow]) at gdkwindow-wayland.c:646
#4  0x00007ffff4487fc5 in gdk_window_end_paint (window=0x7fffcad22680 [GdkWaylandWindow]) at gdkwindow.c:3074
#5  0x00007ffff4954ffd in gtk_main_do_event (event=0x7fffffffbce0) at gtkmain.c:1765
#6  0x00007ffff447f3cf in _gdk_window_process_updates_recurse_helper (window=0x7fffcad22680 [GdkWaylandWindow], expose_region=&lt;optimized out&gt;) at gdkwindow.c:3553
#7  0x00007ffff448049c in gdk_window_process_updates_internal (window=0x7fffcad22680 [GdkWaylandWindow]) at gdkwindow.c:3678
#8  0x00007ffff4480653 in gdk_window_process_updates_with_mode (window=&lt;optimized out&gt;, recurse_mode=&lt;optimized out&gt;)
    at gdkwindow.c:3879
#9  0x00007ffff1dbc304 in _g_closure_invoke_va (closure=closure@entry=0x7fffcade78a0, return_value=return_value@entry=0x0, instance=instance@entry=0x7fffcb023320, args=args@entry=0x7fffffffc048, n_params=&lt;optimized out&gt;, param_types=0x0) at gclosure.c:864
#10 0x00007ffff1dd70ad in g_signal_emit_valist (instance=instance@entry=0x7fffcb023320, signal_id=signal_id@entry=29, detail=detail@entry=0, var_args=var_args@entry=0x7fffffffc048) at gsignal.c:3281
#11 0x00007ffff1dd7bb5 in g_signal_emit_by_name (instance=0x7fffcb023320, detailed_signal=detailed_signal@entry=0x7ffff44e4607 &quot;paint&quot;) at gsignal.c:3468
#12 0x00007ffff4479574 in gdk_frame_clock_paint_idle (data=&lt;optimized out&gt;) at gdkframeclockidle.c:430
#13 0x00007ffff4468438 in gdk_threads_dispatch (data=0x7fffbe546b40, 
    data@entry=&lt;error reading variable: value has been optimized out&gt;) at gdk.c:719
#14 0x00007ffff1abd9a3 in g_timeout_dispatch (source=0x7fffbe5fa6a0, callback=&lt;optimized out&gt;, user_data=&lt;optimized out&gt;)
    at gmain.c:4577
#15 0x00007ffff1abcf4a in g_main_context_dispatch (context=0x7ffff6bfd060) at gmain.c:3154
#16 0x00007ffff1abcf4a in g_main_context_dispatch (context=context@entry=0x7ffff6bfd060) at gmain.c:3769
#17 0x00007ffff1abd2e0 in g_main_context_iterate (context=context@entry=0x7ffff6bfd060, block=block@entry=1, dispatch=dispatch@entry=1, self=&lt;optimized out&gt;) at gmain.c:3840
#18 0x00007ffff1abd38c in g_main_context_iteration (context=0x7ffff6bfd060, may_block=1) at gmain.c:3901</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9092230</commentid>
    <comment_count>2</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-02-24 08:44:03 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 24 development cycle.
Changing version to &apos;24&apos;.

More information and reason for this action is here:
https://fedoraproject.org/wiki/Fedora_Program_Management/HouseKeeping/Fedora24#Rawhide_Rebase</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10470280</commentid>
    <comment_count>3</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2017-06-01 16:41:43 -0400</bug_when>
    <thetext>I cannot reproduce this issue any more with firefox-wayland-55.6-1.fc26.x86_64 from stransky&apos;s firefox-wayland copr.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10517928</commentid>
    <comment_count>4</comment_count>
    <who name="Martin Stransky">stransky</who>
    <bug_when>2017-06-19 07:37:41 -0400</bug_when>
    <thetext>Already fixed.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>