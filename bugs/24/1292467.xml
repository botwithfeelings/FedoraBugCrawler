<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1292467</bug_id>
          
          <creation_ts>2015-12-17 09:26:00 -0500</creation_ts>
          <short_desc>FTBFS: test.test_venv.EnsurePipTest fails</short_desc>
          <delta_ts>2016-09-09 05:34:02 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>python3</component>
          <version>24</version>
          <rep_platform>powerpc</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>RAWHIDE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>high</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1292461</dependson>
    
    
    <dependson>1292462</dependson>
          <blocked>1071880</blocked>
    
    
    <blocked>1287556</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Karsten Hopp">karsten</reporter>
          <assigned_to name="Charalampos Stratakis">cstratak</assigned_to>
          <cc>bkabrda</cc>
    
    
    <cc>jberan</cc>
    
    
    <cc>mike</cc>
    
    
    <cc>pviktori</cc>
    
    
    <cc>tomspur</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-08-31 08:45:25</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8926684</commentid>
    <comment_count>0</comment_count>
    <who name="Karsten Hopp">karsten</who>
    <bug_when>2015-12-17 09:26:41 -0500</bug_when>
    <thetext>Description of problem:
self checks on ppc64 fail:
[373/396] test_venv
test_defaults (test.test_venv.BasicTest) ... ok
test_executable (test.test_venv.BasicTest) ... ok
test_executable_symlinks (test.test_venv.BasicTest) ... ok
test_isolation (test.test_venv.BasicTest) ... ok
test_overwrite_existing (test.test_venv.BasicTest) ... ok
test_prefixes (test.test_venv.BasicTest) ... ok
test_symlinking (test.test_venv.BasicTest) ... ok
test_unoverwritable_fails (test.test_venv.BasicTest) ... ok
test_upgrade (test.test_venv.BasicTest) ... ok
test_devnull_exists_and_is_empty (test.test_venv.EnsurePipTest) ... ok
test_explicit_no_pip (test.test_venv.EnsurePipTest) ... ok
test_no_pip_by_default (test.test_venv.EnsurePipTest) ... ok
test_with_pip (test.test_venv.EnsurePipTest) ... Got an error:
[SSL: TLSV1_ALERT_UNKNOWN_CA] tlsv1 alert unknown ca (_ssl.c:645)
Got an error:
[SSL: TLSV1_ALERT_UNKNOWN_CA] tlsv1 alert unknown ca (_ssl.c:645)
test test_venv failed
FAIL

======================================================================
FAIL: test_with_pip (test.test_venv.EnsurePipTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &quot;/builddir/build/BUILD/Python-3.5.1/Lib/test/test_venv.py&quot;, line 390, in test_with_pip
    self.assertEqual(err, &quot;&quot;)
AssertionError: &quot;The directory &apos;/builddir/.cache/pip/http[204 chars]g.\n&quot; != &apos;&apos;
- The directory &apos;/builddir/.cache/pip/http&apos; or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo&apos;s -H flag.


Version-Release number of selected component (if applicable):
python3-3.5.1-1.fc24
python3-pip-7.1.0-3.fc24

How reproducible:


Steps to Reproduce:
1. ppc-koji build --scratch f24 python3-3.5.1-1.fc24.src.rpm
2.
3.


Additional info:
This error shows up after fixing bug#1292461 and bug#1292462</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8936559</commentid>
    <comment_count>1</comment_count>
    <who name="Karsten Hopp">karsten</who>
    <bug_when>2015-12-22 04:53:37 -0500</bug_when>
    <thetext>fixed in python3-3.5.1-2.fc24 so that we can proceed on secondary archs, but needs review</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9021038</commentid>
    <comment_count>2</comment_count>
    <who name="Fedora Admin XMLRPC Client">fedora-admin-xmlrpc</who>
    <bug_when>2016-01-29 08:07:34 -0500</bug_when>
    <thetext>This package has changed ownership in the Fedora Package Database.  Reassigning to the new owner of this component.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9094292</commentid>
    <comment_count>3</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-02-24 10:32:51 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 24 development cycle.
Changing version to &apos;24&apos;.

More information and reason for this action is here:
https://fedoraproject.org/wiki/Fedora_Program_Management/HouseKeeping/Fedora24#Rawhide_Rebase</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9667305</commentid>
    <comment_count>4</comment_count>
    <who name="Charalampos Stratakis">cstratak</who>
    <bug_when>2016-08-31 08:45:25 -0400</bug_when>
    <thetext>Test passes now successfully without the patch, so it was dropped on rebasing Python to 3.5.2, currently in rawhide (and soon in F25).

build without the patch:
http://ppc.koji.fedoraproject.org/koji/taskinfo?taskID=3658934</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9692226</commentid>
    <comment_count>5</comment_count>
    <who name="Mike Goodwin">mike</who>
    <bug_when>2016-09-08 17:29:56 -0400</bug_when>
    <thetext>Upstream is deprecating `pyvenv` in favor of `python3 -m venv` and it currently doesn&apos;t work because there&apos;s no ensurepip module. 

Does this ticket address that issue? I intended to file a separate bug but then I saw this and now I&apos;m not so sure. 

https://bugs.python.org/issue27285 - pyvenv is depreacted for 3.6 and they recommend the use of `python3 -m venv` as early as 3.5.1 

FYI, I&apos;ve also seen this behavior in EPEL - it is also missing ensurepip so not even pyvenv - the alternative is to download the pip bootstrap from PyPa....

All of which defeats the purpose of having virtualenv tools to begin with.

What&apos;s the purpose behind not shipping ensurepip?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9693456</commentid>
    <comment_count>6</comment_count>
    <who name="Charalampos Stratakis">cstratak</who>
    <bug_when>2016-09-09 05:34:02 -0400</bug_when>
    <thetext>(In reply to Mike Goodwin from comment #5)
&gt; Upstream is deprecating `pyvenv` in favor of `python3 -m venv` and it
&gt; currently doesn&apos;t work because there&apos;s no ensurepip module. 
&gt; 
&gt; Does this ticket address that issue? I intended to file a separate bug but
&gt; then I saw this and now I&apos;m not so sure. 
&gt; 
&gt; https://bugs.python.org/issue27285 - pyvenv is depreacted for 3.6 and they
&gt; recommend the use of `python3 -m venv` as early as 3.5.1 
&gt; 
&gt; FYI, I&apos;ve also seen this behavior in EPEL - it is also missing ensurepip so
&gt; not even pyvenv - the alternative is to download the pip bootstrap from
&gt; PyPa....
&gt; 
&gt; All of which defeats the purpose of having virtualenv tools to begin with.
&gt; 
&gt; What&apos;s the purpose behind not shipping ensurepip?

Ensurepip actually is shipped with python3 and &apos;python3 -m venv&apos; works at my machine (F24, python3-3.5.1-13.fc24.x86_64). What is the exact issue you are facing?</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>