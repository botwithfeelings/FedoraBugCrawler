<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1233009</bug_id>
          
          <creation_ts>2015-06-17 23:33:00 -0400</creation_ts>
          <short_desc>DMA errors in r592</short_desc>
          <delta_ts>2016-12-23 15:57:50 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>kernel</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Stuart D Gathman">stuart</reporter>
          <assigned_to name="Neil Horman">nhorman</assigned_to>
          <cc>gansalmon</cc>
    
    
    <cc>itamar</cc>
    
    
    <cc>jonathan</cc>
    
    
    <cc>kernel-maint</cc>
    
    
    <cc>madhu.chinakonda</cc>
    
    
    <cc>mchehab</cc>
    
    
    <cc>nhorman</cc>
    
    
    <cc>stuart</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-12-23 15:57:50</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8347940</commentid>
    <comment_count>0</comment_count>
    <who name="Stuart D Gathman">stuart</who>
    <bug_when>2015-06-17 23:33:51 -0400</bug_when>
    <thetext>Description of problem:
Repeated DMA errors logged while reading SD card

Version-Release number of selected component (if applicable):
kernel-4.0.4-303.fc22.i686

How reproducible:
always

Steps to Reproduce:
1. insert SD card
2. read from it (e.g. mount and play music files or look at pictures)
3.

Actual results:
...
Jun 17 23:23:52 test.gathman.org kernel: r592: IRQ: DMA error
Jun 17 23:23:58 test.gathman.org kernel: r592: IRQ: card added
Jun 17 23:23:58 test.gathman.org kernel: r592: IRQ: DMA error
Jun 17 23:23:58 test.gathman.org kernel: r592: IRQ: card added
Jun 17 23:23:58 test.gathman.org kernel: r592: IRQ: DMA error
Jun 17 23:23:58 test.gathman.org kernel: r592: IRQ: card added
Jun 17 23:23:58 test.gathman.org kernel: r592: IRQ: DMA error
...


Expected results:
No errors logged.

Additional info:
The reads do usually work - they just fill up the journal with errors.  Occasionally, the read actually fails, and I have to reinsert the card.  This does not happen in F21.

This is a regression from Fedora 21, but see bug#1119361.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8347942</commentid>
    <comment_count>1</comment_count>
    <who name="Stuart D Gathman">stuart</who>
    <bug_when>2015-06-17 23:34:58 -0400</bug_when>
    <thetext>lspci includes:

02:09.1 SD Host controller: Ricoh Co Ltd R5C822 SD/SDIO/MMC/MS/MSPro Host Adapter (rev 22)
02:09.2 System peripheral: Ricoh Co Ltd R5C592 Memory Stick Bus Host Adapter (rev 12)
02:09.3 System peripheral: Ricoh Co Ltd xD-Picture Card Controller (rev 12)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8350616</commentid>
    <comment_count>2</comment_count>
    <who name="Stuart D Gathman">stuart</who>
    <bug_when>2015-06-18 11:32:09 -0400</bug_when>
    <thetext>This seems to be yet another suspend/resume problem.  The problem goes away on reboot, and resumes after suspend/resume.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8739184</commentid>
    <comment_count>3</comment_count>
    <who name="Justin M. Forbes">jforbes</who>
    <bug_when>2015-10-20 15:46:52 -0400</bug_when>
    <thetext>*********** MASS BUG UPDATE **************

We apologize for the inconvenience.  There is a large number of bugs to go through and several of them have gone stale.  Due to this, we are doing a mass bug update across all of the Fedora 22 kernel bugs.

Fedora 22 has now been rebased to 4.2.3-200.fc22.  Please test this kernel update (or newer) and let us know if you issue has been resolved or if it is still present with the newer kernel.

If you have moved on to Fedora 23, and are still experiencing this issue, please change the version to Fedora 23.

If you experience different issues, please open a new bug report for those.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8774968</commentid>
    <comment_count>4</comment_count>
    <who name="Stuart D Gathman">stuart</who>
    <bug_when>2015-11-02 09:26:19 -0500</bug_when>
    <thetext>Same problem on kernel-4.2.3-200.fc22.i686</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9525046</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2016-07-19 10:53:50 -0400</bug_when>
    <thetext>Fedora 22 changed to end-of-life (EOL) status on 2016-07-19. Fedora 22 is
no longer maintained, which means that it will not receive any further
security or bug fix updates. As a result we are closing this bug.

If you can reproduce this bug against a currently maintained version of
Fedora please feel free to reopen this bug against that version. If you
are unable to reopen this bug, please file a new report against the
current release. If you experience problems, please add a comment to this
bug.

Thank you for reporting this bug and we are sorry it could not be fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9525146</commentid>
    <comment_count>6</comment_count>
    <who name="Stuart D Gathman">stuart</who>
    <bug_when>2016-07-19 10:59:22 -0400</bug_when>
    <thetext>Still happening in f24 with kernel-4.6.3-300.fc24.x86_64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9738968</commentid>
    <comment_count>7</comment_count>
    <who name="Laura Abbott">labbott</who>
    <bug_when>2016-09-23 15:22:36 -0400</bug_when>
    <thetext>*********** MASS BUG UPDATE **************
 
We apologize for the inconvenience.  There is a large number of bugs to go through and several of them have gone stale.  Due to this, we are doing a mass bug update across all of the Fedora 24 kernel bugs.
 
Fedora 24 has now been rebased to 4.7.4-200.fc24.  Please test this kernel update (or newer) and let us know if you issue has been resolved or if it is still present with the newer kernel.
 
If you have moved on to Fedora 25, and are still experiencing this issue, please change the version to Fedora 25.
 
If you experience different issues, please open a new bug report for those.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9755435</commentid>
    <comment_count>8</comment_count>
    <who name="Stuart D Gathman">stuart</who>
    <bug_when>2016-09-29 19:08:25 -0400</bug_when>
    <thetext>Still happening in 4.7.4-200.fc24.x86_64.  If there was a way to stop journaling all the errors, it would be more usable.  It just uses up too much disk.  I&apos;ve been using an SD -&gt; USB adapter as a work around.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9834945</commentid>
    <comment_count>9</comment_count>
    <who name="Neil Horman">nhorman</who>
    <bug_when>2016-10-31 14:09:19 -0400</bug_when>
    <thetext>It looks like there is a discrepancy int he irq handler for this driver and the comments.  It appears we should at least be ignoring the insert/remove bits in the MSC.  I&apos;ll have to dig up the docs on this to understand more</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9837464</commentid>
    <comment_count>10</comment_count>
    <who name="Neil Horman">nhorman</who>
    <bug_when>2016-11-01 10:30:51 -0400</bug_when>
    <thetext>Just out of curiosity, has this card reader worked previously?  I.e. have you been able to read a memstick and not get the reported errors?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9838288</commentid>
    <comment_count>11</comment_count>
    <who name="Stuart D Gathman">stuart</who>
    <bug_when>2016-11-01 13:40:06 -0400</bug_when>
    <thetext>Yes.  Although, it&apos;s been a long time ago now.  I still have f21 on an old (160G!) hard disk - if I get a chance, I can pop that disk in for a spin.

I&apos;ve already deleted f19, but my notes say the f21 was working as well.  Laptop is pretty old, BIOS is dated 2008.  Dell model 0U990C.  So, since the drive does function (aside from spamming dmesg with errors), I wouldn&apos;t sweat it if newer laptops work without errors.   Do newer laptops still use that Ricoh component?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9838309</commentid>
    <comment_count>12</comment_count>
    <who name="Stuart D Gathman">stuart</who>
    <bug_when>2016-11-01 13:44:45 -0400</bug_when>
    <thetext>I am currently testing f25 on an even older laptop with the same (reported via lspci) model Richoh card reader.  Let me see if that has the problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9838374</commentid>
    <comment_count>13</comment_count>
    <who name="Stuart D Gathman">stuart</who>
    <bug_when>2016-11-01 14:10:01 -0400</bug_when>
    <thetext>You&apos;ll be interested to know that on a Dell 1501, BIOS dated 2006, with the same model drive, the same SD card reads with no errors.  So possibly this is a (highly coincidental) hardware regression.  The older laptop is a single core AMD 64-bit cpu, vs the dual core Intel on the laptop with errors, so we could still be looking at a race condition with the dual cpus.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9838528</commentid>
    <comment_count>14</comment_count>
    <who name="Neil Horman">nhorman</who>
    <bug_when>2016-11-01 15:01:56 -0400</bug_when>
    <thetext>i&apos;ve not been able to find any documentation regarding this part, theres not even a mention of it on the ricoh site, which suggests its out of production.  This feels to me like it may just happen to be a specific hardware malfunction.  While it would not be a guarantee, I would be interested to know if your failing laptop still fails with your f19 hard drive.  That would give some modicum of support to that theory.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10018826</commentid>
    <comment_count>15</comment_count>
    <who name="Stuart D Gathman">stuart</who>
    <bug_when>2016-12-23 15:57:50 -0500</bug_when>
    <thetext>Ok, with Christmas break I put in my old Fedora-21 disk.  The mmc works perfectly with kernel-4.1.8

Interestingly, with kernel-4.8.14, it also works perfectly with no more log spamming.  So it looks like the regression has been fixed.

Now if only they could fix the regression with Intel video...</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>