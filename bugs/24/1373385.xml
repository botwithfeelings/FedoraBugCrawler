<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1373385</bug_id>
          
          <creation_ts>2016-09-06 03:13:00 -0400</creation_ts>
          <short_desc>SELinux is preventing hpcups-update-p from &apos;create&apos; accesses on the file 1.</short_desc>
          <delta_ts>2016-10-10 16:03:13 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>selinux-policy</component>
          <version>24</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard>abrt_hash:e26a05474b5d93dbcbfb5da87864125cbace60903de15a9e1d5e47ff6127d677;VARIANT_ID=workstation;</status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Juraci Paixão Kröhling">jcosta</reporter>
          <assigned_to name="Lukas Vrabec">lvrabec</assigned_to>
          <cc>dimitri.papadopoulos</cc>
    
    
    <cc>dominick.grift</cc>
    
    
    <cc>dwalsh</cc>
    
    
    <cc>edwardp</cc>
    
    
    <cc>j.orti.alcaine</cc>
    
    
    <cc>lvrabec</cc>
    
    
    <cc>mgrepl</cc>
    
    
    <cc>obliterator666</cc>
    
    
    <cc>palaceks</cc>
    
    
    <cc>plautrba</cc>
    
    
    <cc>romain.rubi</cc>
    
    
    <cc>samuelmarqueslima1</cc>
    
    
    <cc>tmoreira</cc>
    
    
    <cc>vpodzime</cc>
    
    
    <cc>v</cc>
    
    
    <cc>westphal2006</cc>
    
    
    <cc>wilf</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>selinux-policy-3.13.1-191.16.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-09-21 20:22:38</cf_last_closed>
          <cf_type>---</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9681278</commentid>
    <comment_count>0</comment_count>
    <who name="Juraci Paixão Kröhling">jcosta</who>
    <bug_when>2016-09-06 03:13:41 -0400</bug_when>
    <thetext>Description of problem:
SELinux is preventing hpcups-update-p from &apos;create&apos; accesses on the file 1.

*****  Plugin catchall (100. confidence) suggests   **************************

If you believe that hpcups-update-p should be allowed create access on the 1 file by default.
Then you should report this as a bug.
You can generate a local policy module to allow this access.
Do
allow this access for now by executing:
# ausearch -c &apos;hpcups-update-p&apos; --raw | audit2allow -M my-hpcupsupdatep
# semodule -X 300 -i my-hpcupsupdatep.pp

Additional Information:
Source Context                unconfined_u:unconfined_r:rpm_script_t:s0-s0:c0.c1
                              023
Target Context                unconfined_u:object_r:rpm_script_t:s0
Target Objects                1 [ file ]
Source                        hpcups-update-p
Source Path                   hpcups-update-p
Port                          &lt;Unknown&gt;
Host                          (removed)
Source RPM Packages           
Target RPM Packages           
Policy RPM                    selinux-policy-3.13.1-191.14.fc24.noarch
Selinux Enabled               True
Policy Type                   targeted
Enforcing Mode                Enforcing
Host Name                     (removed)
Platform                      Linux (removed) 4.7.2-201.fc24.x86_64 #1 SMP Fri
                              Aug 26 15:58:40 UTC 2016 x86_64 x86_64
Alert Count                   1
First Seen                    2016-09-06 09:09:22 CEST
Last Seen                     2016-09-06 09:09:22 CEST
Local ID                      257f25dc-1999-4d6a-9227-29358167458a

Raw Audit Messages
type=AVC msg=audit(1473145762.305:2037): avc:  denied  { create } for  pid=23432 comm=&quot;hpcups-update-p&quot; name=&quot;1&quot; scontext=unconfined_u:unconfined_r:rpm_script_t:s0-s0:c0.c1023 tcontext=unconfined_u:object_r:rpm_script_t:s0 tclass=file permissive=0


Hash: hpcups-update-p,rpm_script_t,rpm_script_t,file,create

Version-Release number of selected component:
selinux-policy-3.13.1-191.14.fc24.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.7.2-201.fc24.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9682002</commentid>
    <comment_count>1</comment_count>
    <who name="Tiago M. Vieira">tmoreira</who>
    <bug_when>2016-09-06 07:18:02 -0400</bug_when>
    <thetext>Got this alert right after updating F24.

=========================================================================================================
 Package                           Arch              Version                    Repository          Size
=========================================================================================================
Upgrading:
 hplip                             x86_64            3.16.8-2.fc24              updates             12 M
 hplip-common                      x86_64            3.16.8-2.fc24              updates            101 k
 hplip-libs                        x86_64            3.16.8-2.fc24              updates            190 k
 libsane-hpaio                     x86_64            3.16.8-2.fc24              updates            119 k
 setroubleshoot                    x86_64            3.3.11-1.fc24              updates            136 k
 setroubleshoot-plugins            noarch            3.3.6-1.fc24               updates            362 k
 setroubleshoot-server             x86_64            3.3.11-1.fc24              updates            391 k

--------------------------------------------------------
SELinux is preventing hpcups-update-p from &apos;create&apos; accesses on the file 1.

*****  Plugin catchall (100. confidence) suggests   **************************

If you believe that hpcups-update-p should be allowed create access on the 1 file by default.
Then you should report this as a bug.
You can generate a local policy module to allow this access.
Do
allow this access for now by executing:
# ausearch -c &apos;hpcups-update-p&apos; --raw | audit2allow -M my-hpcupsupdatep
# semodule -X 300 -i my-hpcupsupdatep.pp

Additional Information:
Source Context                unconfined_u:unconfined_r:rpm_script_t:s0-s0:c0.c1
                              023
Target Context                unconfined_u:object_r:rpm_script_t:s0
Target Objects                1 [ file ]
Source                        hpcups-update-p
Source Path                   hpcups-update-p
Port                          &lt;Unknown&gt;
Host                          (removed)
Source RPM Packages           
Target RPM Packages           
Policy RPM                    selinux-policy-3.13.1-191.14.fc24.noarch
Selinux Enabled               True
Policy Type                   targeted
Enforcing Mode                Enforcing
Host Name                     (removed)
Platform                      Linux (removed) 4.7.2-201.fc24.x86_64 #1 SMP Fri
                              Aug 26 15:58:40 UTC 2016 x86_64 x86_64
Alert Count                   2
First Seen                    2016-09-06 08:13:16 BRT
Last Seen                     2016-09-06 08:13:18 BRT
Local ID                      0b384b1e-f186-4c4a-ae90-c0c17e9a094c

Raw Audit Messages
type=AVC msg=audit(1473160398.48:356): avc:  denied  { create } for  pid=6599 comm=&quot;hpcups-update-p&quot; name=&quot;1&quot; scontext=unconfined_u:unconfined_r:rpm_script_t:s0-s0:c0.c1023 tcontext=unconfined_u:object_r:rpm_script_t:s0 tclass=file permissive=0


Hash: hpcups-update-p,rpm_script_t,rpm_script_t,file,create</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9682355</commentid>
    <comment_count>2</comment_count>
    <who name="Daniel Walsh">dwalsh</who>
    <bug_when>2016-09-06 08:47:06 -0400</bug_when>
    <thetext>This looks like the same problem we are seeing with chrome.  I think we should just add a dontaudit that does

dontaudit domain self:file create;

And be done with it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9682357</commentid>
    <comment_count>3</comment_count>
    <who name="Daniel Walsh">dwalsh</who>
    <bug_when>2016-09-06 08:48:12 -0400</bug_when>
    <thetext>BTW I don&apos;t believe anything is being blocked here.  The kernel is checking for a create access on /proc, where no processes are allowed to create files.  The process does not fail because the file already exists.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9683193</commentid>
    <comment_count>4</comment_count>
    <who name="Wilf">wilf</who>
    <bug_when>2016-09-06 11:32:38 -0400</bug_when>
    <thetext>Description of problem:
This seemed to occure after updating hplip from hplip-3.16.7-2.fc24.x86_64 to hplip-3.16.8-2.fc24.x86_64 using DNF

Version-Release number of selected component:
selinux-policy-3.13.1-191.14.fc24.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.7.2-201.fc24.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9684935</commentid>
    <comment_count>5</comment_count>
    <who name="Stanislav Paláček">palaceks</who>
    <bug_when>2016-09-07 00:55:02 -0400</bug_when>
    <thetext>Description of problem:
After starting of google-chrome.

Version-Release number of selected component:
selinux-policy-3.13.1-191.14.fc24.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.7.2-201.fc24.x86_64+debug
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9685021</commentid>
    <comment_count>6</comment_count>
    <who name="Romano">romain.rubi</who>
    <bug_when>2016-09-07 01:52:32 -0400</bug_when>
    <thetext>Description of problem:
Ran &quot;sudo dnf update -y&quot;
SELinux alerted during update process.
Update process finished without errors.

Version-Release number of selected component:
selinux-policy-3.13.1-191.14.fc24.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.7.2-201.fc24.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696424</commentid>
    <comment_count>7</comment_count>
    <who name="OoZooL">obliterator666</who>
    <bug_when>2016-09-10 19:46:27 -0400</bug_when>
    <thetext>Description of problem:
Some update to the HP-CUPS utility I suppose...

Version-Release number of selected component:
selinux-policy-3.13.1-191.14.fc24.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.7.2-201.fc24.x86_64+debug
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9696699</commentid>
    <comment_count>8</comment_count>
    <who name="">westphal2006</who>
    <bug_when>2016-09-11 09:26:57 -0400</bug_when>
    <thetext>Description of problem:
I opened the Chrome browser on Fedora 24.

Version-Release number of selected component:
selinux-policy-3.13.1-191.14.fc24.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.7.2-201.fc24.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9702363</commentid>
    <comment_count>9</comment_count>
    <who name="Vratislav Podzimek">vpodzime</who>
    <bug_when>2016-09-13 07:11:09 -0400</bug_when>
    <thetext>Description of problem:
I was updating my Fedora 24 system.

Version-Release number of selected component:
selinux-policy-3.13.1-191.14.fc24.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.7.2-201.fc24.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9712028</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-15 13:24:16 -0400</bug_when>
    <thetext>selinux-policy-3.13.1-191.16.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-fe39b806b6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9712853</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-15 20:52:03 -0400</bug_when>
    <thetext>selinux-policy-3.13.1-191.16.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-fe39b806b6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9732045</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-21 20:22:38 -0400</bug_when>
    <thetext>selinux-policy-3.13.1-191.16.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9779484</commentid>
    <comment_count>13</comment_count>
    <who name="Vasco Rodrigues">v</who>
    <bug_when>2016-10-10 16:03:13 -0400</bug_when>
    <thetext>Description of problem:
Did a dnf update, hplip was in it.
And the selinux-targeted, was also marked for upgrade, but done after the hplip.

Maybe, dnf should always upgrade selinux, before any other package.

Policy could have been updated after the hplip update. not sure.

Version-Release number of selected component:
selinux-policy-3.13.1-191.14.fc24.noarch
selinux-policy-3.13.1-191.18.fc24.noarch

Additional info:
reporter:       libreport-2.7.2
hashmarkername: setroubleshoot
kernel:         4.7.3-200.fc24.x86_64
type:           libreport</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>