<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1350084</bug_id>
          
          <creation_ts>2016-06-25 06:22:00 -0400</creation_ts>
          <short_desc>Touchpad edge scrolling does not work</short_desc>
          <delta_ts>2017-02-21 14:15:27 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>mutter</component>
          <version>24</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>NEXTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>urgent</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Martin Šťastný">stastny.m</reporter>
          <assigned_to name="Florian Müllner">fmuellner</assigned_to>
          <cc>blouin.arno</cc>
    
    
    <cc>djuran</cc>
    
    
    <cc>fmuellner</cc>
    
    
    <cc>gracca</cc>
    
    
    <cc>jeroen</cc>
    
    
    <cc>jshubin</cc>
    
    
    <cc>klember</cc>
    
    
    <cc>LailahFSF</cc>
    
    
    <cc>mkasik</cc>
    
    
    <cc>nielsenb</cc>
    
    
    <cc>ofourdan</cc>
    
    
    <cc>oholy</cc>
    
    
    <cc>otaylor</cc>
    
    
    <cc>peter.hutterer</cc>
    
    
    <cc>peterm</cc>
    
    
    <cc>przemo</cc>
    
    
    <cc>rmatos</cc>
    
    
    <cc>roger.k.wells</cc>
    
    
    <cc>rstrode</cc>
    
    
    <cc>sergio</cc>
    
    
    <cc>tiagomatos</cc>
    
    
    <cc>ttomst</cc>
    
    
    <cc>walters</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>mutter-3.22.3-1.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-02-21 14:15:27</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          <external_bugs name="GNOME Desktop">768245</external_bugs>
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9452214</commentid>
    <comment_count>0</comment_count>
    <who name="Martin Šťastný">stastny.m</who>
    <bug_when>2016-06-25 06:22:38 -0400</bug_when>
    <thetext>Description of problem:
After upgrade to 24, I have been forced to start using libinput instead of synaptics. Additionally, I started using Wayland. Problem is, that edge scrolling does not work now. In &quot;Mouse &amp; Touchpad&quot; I have just options to enable/disable touchpad, enable/disable natural scrolling and set touchpad speed. In dconf editor, there are more options including tap-to-click and edge-scrolling-enabled which is both set to true. Interesting thing is, that when I am sliding with my finger in the edge of touchpad, cursor is not moving, so it looks like that in some point it is recognized as scrolling event. Even more interesting thing is, that in output of libinput-debug-events there is no output when I am sliding on the edge. 

Version-Release number of selected component (if applicable):
libinput-1.3.2

How reproducible:
Even on clean (live) install on Fedora.

Steps to Reproduce:
1.
2.
3.

Actual results:
Edge scrolling does not work

Expected results:
Edge scrolling does work

Additional info:
Output of libinput-list-devices

Device:           AlpsPS/2 ALPS DualPoint TouchPad
Kernel:           /dev/input/event6
Group:            7
Seat:             seat0, default
Size:             80.00x43.75mm
Capabilities:     pointer 
Tap-to-click:     disabled
Tap-and-drag:     enabled
Tap drag lock:    disabled
Left-handed:      disabled
Nat.scrolling:    disabled
Middle emulation: enabled
Calibration:      n/a
Scroll methods:   *two-finger edge 
Click methods:    none
Disable-w-typing: enabled
Accel profiles:   none

Side note: tap-to-click is enabled and working. Side note 2: it will be very nice, if it will be possible to enable tap-drag-lock.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9452994</commentid>
    <comment_count>1</comment_count>
    <who name="Germán Racca">gracca</who>
    <bug_when>2016-06-26 07:02:18 -0400</bug_when>
    <thetext>The very same thing happens to me. Waiting for a solution.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9453253</commentid>
    <comment_count>2</comment_count>
    <who name="Martin Šťastný">stastny.m</who>
    <bug_when>2016-06-26 11:34:53 -0400</bug_when>
    <thetext>Ok, it looks like, that this is not bug but a feature! I did some research and if I am not wrong or I am not misunderstanding anything, great people who hacking on gnome-settings-daemon and gnome-control-center just decided, that if you have two finger scroll capable touchpad, it will be enabled by default *WITHOUT* option to disable it in favour of edge scrolling. They have created new gsettings key edge-scrolling-enabled (scroll-method is deprecated now) which purpose is only if you have non two finger scroll capable touchpad to disable it, but *NOT* enable it on capable one! I am very disappointed by this decision, I can&apos;t find polite words on this situation, it&apos;s just rubbish! 

Now it&apos;s clear, that this is not fault of libinput, because you are able to enable it (edge scroll) in Xorg with xinput command (which passes it directly do the driver), but on Wayland there is no way. Libinput supports it, so why the good heavens you are dropping it from control-center and settings-daemon?

Sources:
https://github.com/GNOME/gnome-control-center/commit/07c6c4d3f749893af17506ae036f59456efc9c15
https://bugzilla.gnome.org/show_bug.cgi?id=759304
https://bugzilla.gnome.org/show_bug.cgi?id=759307
https://github.com/GNOME/gnome-settings-daemon/commit/570cc8a2561728bdf4ec6c91064c618debc3e5d4
https://bugzilla.gnome.org/show_bug.cgi?id=759559</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9453298</commentid>
    <comment_count>3</comment_count>
    <who name="Martin Šťastný">stastny.m</who>
    <bug_when>2016-06-26 12:34:36 -0400</bug_when>
    <thetext>Upstream bug: https://bugzilla.gnome.org/show_bug.cgi?id=768071</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9460798</commentid>
    <comment_count>4</comment_count>
    <who name="Brandon Nielsen">nielsenb</who>
    <bug_when>2016-06-28 17:21:24 -0400</bug_when>
    <thetext>On my HP 8510w, libinput shows that my Synaptics TouchPad supports two-finger scrolling, however I&apos;ve never seen any evidence that is actually the case. Enabling two-finger scrolling in Gnome does not result in functional two-finger scrolling. Even if two-finger scrolling worked on this TouchPad, I&apos;d prefer edge scrolling due to its size.

Manually enabling edge scrolling (since the switch is hidden) with &apos;xinput set-prop 10 290 0, 1, 0&apos; results in functional edge scrolling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9460812</commentid>
    <comment_count>5</comment_count>
    <who name="Martin Šťastný">stastny.m</who>
    <bug_when>2016-06-28 17:40:17 -0400</bug_when>
    <thetext>(In reply to Brandon Nielsen from comment #4)
&gt; On my HP 8510w, libinput shows that my Synaptics TouchPad supports
&gt; two-finger scrolling, however I&apos;ve never seen any evidence that is actually
&gt; the case. Enabling two-finger scrolling in Gnome does not result in
&gt; functional two-finger scrolling. Even if two-finger scrolling worked on this
&gt; TouchPad, I&apos;d prefer edge scrolling due to its size.
&gt; 
&gt; Manually enabling edge scrolling (since the switch is hidden) with &apos;xinput
&gt; set-prop 10 290 0, 1, 0&apos; results in functional edge scrolling.

I think, that root cause of your problem is, that libinput badly recognizes your touchpad as two finger scroll capable which it isn&apos;t. My advice is to fill bug against libinput. When your touchpad is recognized as non two finger scroll capable, everything will work excellent for you.

This bug does have only secondary impact on you. If this bug did not exist, you will be able to manually switch to edge scroll in g-c-c in spite of supposed capabilities of your touchpad. But thank you for your commitment, because it clearly shows, how terribly wrong decision to remove this option from g-c-c and g-s-d was.

I am using same workaround as you, but it will not work in Wayland and is not persistent across reboots by itself.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9461294</commentid>
    <comment_count>6</comment_count>
    <who name="Peter Hutterer">peter.hutterer</who>
    <bug_when>2016-06-28 23:23:19 -0400</bug_when>
    <thetext>(In reply to Martin Šťastný from comment #5)
&gt; (In reply to Brandon Nielsen from comment #4)
&gt; I think, that root cause of your problem is, that libinput badly recognizes
&gt; your touchpad as two finger scroll capable which it isn&apos;t. My advice is to
&gt; fill bug against libinput.

yes, please file a bug against libinput with an evemu recording attached that shows a two-finger scroll sequence. There are a few touchpads that claim to have 2fg support but their precision is so bad that we can&apos;t do 2fg scrolling on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9464983</commentid>
    <comment_count>7</comment_count>
    <who name="Brandon Nielsen">nielsenb</who>
    <bug_when>2016-06-29 11:42:27 -0400</bug_when>
    <thetext>(In reply to Peter Hutterer from comment #6)
&gt; (In reply to Martin Šťastný from comment #5)
&gt; &gt; (In reply to Brandon Nielsen from comment #4)
&gt; &gt; I think, that root cause of your problem is, that libinput badly recognizes
&gt; &gt; your touchpad as two finger scroll capable which it isn&apos;t. My advice is to
&gt; &gt; fill bug against libinput.
&gt; 
&gt; yes, please file a bug against libinput with an evemu recording attached
&gt; that shows a two-finger scroll sequence. There are a few touchpads that
&gt; claim to have 2fg support but their precision is so bad that we can&apos;t do 2fg
&gt; scrolling on it.

Submitted as bug 1351285</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9647426</commentid>
    <comment_count>8</comment_count>
    <who name="Peter Hutterer">peter.hutterer</who>
    <bug_when>2016-08-24 19:40:36 -0400</bug_when>
    <thetext>fwiw gnome upstream has merged this back, see https://bugzilla.gnome.org/show_bug.cgi?id=768245, mutter commit 36cd7177f

so it&apos;s back to working in F25 but I don&apos;t know if it&apos;ll be backported to F24</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10144445</commentid>
    <comment_count>9</comment_count>
    <who name="Sylvia Sánchez">LailahFSF</who>
    <bug_when>2017-02-13 16:43:22 -0500</bug_when>
    <thetext>
I have no scrolling at all. No edge scrolling, no two fingers, nothing. 
My laptop is a Dell Latitude E6500 with Nvidia card and in Fedora 24 was working fine. After upgrading &quot;lost&quot; the scrolling but in DConf is set as true. And I can click on the option in Settings, but yet that I have no scrolling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10172244</commentid>
    <comment_count>10</comment_count>
    <who name="Rui Matos">rmatos</who>
    <bug_when>2017-02-21 14:15:27 -0500</bug_when>
    <thetext>There was mutter bug which would prevent edge scrolling from being enabled if two finger scrolling was enabled even though two finger wasn&apos;t available in libinput. This should now be fixed in mutter-3.22.3-1.fc25 . Please re-open if it still doesn&apos;t work.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>