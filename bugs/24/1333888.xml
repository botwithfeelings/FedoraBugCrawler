<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1333888</bug_id>
          
          <creation_ts>2016-05-06 10:45:00 -0400</creation_ts>
          <short_desc>shim in F24 needs upstream d01421eb5ae6 for working with grub 2.02-0.26 and later on AARCH64</short_desc>
          <delta_ts>2016-05-21 16:27:50 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>shim-signed</component>
          <version>24</version>
          <rep_platform>aarch64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Andrea Bolognani">abologna</reporter>
          <assigned_to name="Peter Jones">pjones</assigned_to>
          <cc>bcl</cc>
    
    
    <cc>lersek</cc>
    
    
    <cc>lkundrak</cc>
    
    
    <cc>mads</cc>
    
    
    <cc>mjg59</cc>
    
    
    <cc>mjuszkie</cc>
    
    
    <cc>pbrobinson</cc>
    
    
    <cc>pjones</cc>
    
    
    <cc>rjones</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>shim-signed-0.8-9</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-05-21 16:27:50</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9299642</commentid>
    <comment_count>0</comment_count>
    <who name="Andrea Bolognani">abologna</who>
    <bug_when>2016-05-06 10:45:37 -0400</bug_when>
    <thetext>Description of problem
======================

After a guest has been upgraded from Fedora 23 to Fedora 24, it
can no longer be booted and remains stuck in AAVMF.

This is the error shown on the guest console:

    Failed to set MokListRT: Invalid Parameter


    Synchronous Exception at 0x00000000B83BE498

      X0 0x1100069417FFFFE2   X1 0x00000000BBFF0018   X2 0x00000000B83C4C58   X3 0x00000000000FC400
      X4 0x0000000000000000   X5 0x0000000000000007   X6 0x00000000B9DEF018   X7 0x00000000BF1743A4
      X8 0x00000000BF1746E8   X9 0x00000000BF174A00  X10 0x0000000000000023  X11 0x000000000000009A
     X12 0x00000000700FE0FA  X13 0x0000000000000000  X14 0x0000000000000000  X15 0x0000000000000000
     X16 0x00000000BF174C80  X17 0x0000000000000000  X18 0x0000000000000000  X19 0x00000000BBFF0018
     X20 0x0000000000000000  X21 0x00000000B83C5000  X22 0x0000000000000000  X23 0xAA1303E4F940E022
     X24 0x0000000000000000  X25 0x0000000000000000  X26 0x0000000000000000  X27 0x0000000000000000
     X28 0x0000000000000000   FP 0x00000000BF174A10   LR 0x00000000B83BF040  

      V0 0x0000000000000000 0000000000000000   V1 0x0000000000000000 0000000000000000
      V2 0x0000000000000000 0000000000000000   V3 0x0000000000000000 0000000000000000
      V4 0x0000000000000000 0000000000000000   V5 0x0000000000000000 0000000000000000
      V6 0x0000000000000000 0000000000000000   V7 0x0000000000000000 0000000000000000
      V8 0x0000000000000000 0000000000000000   V9 0x0000000000000000 0000000000000000
     V10 0x0000000000000000 0000000000000000  V11 0x0000000000000000 0000000000000000
     V12 0x0000000000000000 0000000000000000  V13 0x0000000000000000 0000000000000000
     V14 0x0000000000000000 0000000000000000  V15 0x0000000000000000 0000000000000000
     V16 0x0000000000000000 0000000000000000  V17 0x0000000000000000 0000000000000000
     V18 0x0000000000000000 0000000000000000  V19 0x0000000000000000 0000000000000000
     V20 0x0000000000000000 0000000000000000  V21 0x0000000000000000 0000000000000000
     V22 0x0000000000000000 0000000000000000  V23 0x0000000000000000 0000000000000000
     V24 0x0000000000000000 0000000000000000  V25 0x0000000000000000 0000000000000000
     V26 0x0000000000000000 0000000000000000  V27 0x0000000000000000 0000000000000000
     V28 0x0000000000000000 0000000000000000  V29 0x0000000000000000 0000000000000000
     V30 0x0000000000000000 0000000000000000  V31 0x0000000000000000 0000000000000000

      SP 0x00000000BF174A10  ELR 0x00000000B83BE498  SPSR 0x60000305  FPSR 0x00000000
     ESR 0x96000004          FAR 0x1100069417FFFFE2

     ESR : EC 0x25  IL 0x1  ISS 0x00000004

    Data abort: Translation fault, zeroth level
    ASSERT [ArmCpuDxe] /builddir/build/BUILD/ovmf-90bb4c5/ArmPkg/Library/DefaultExceptionHandlerLib/AArch64/DefaultExceptionHandler.c(184): ((BOOLEAN)(0==1))


Version-Release number of selected component (if applicable)
============================================================

  * kernel-4.5.0-0.33.el7.aarch64
  * libvirt-client-1.3.4-1.el7.aarch64
  * AAVMF-20160419-1.git90bb4c5.el7.noarch
  * custom QEMU binary built from tag v2.6.0-rc4


Steps to Reproduce
==================

  1. Create Fedora 23 guest

  2. Follow procedure outlined in
     [https://fedoraproject.org/wiki/DNF_system_upgrade] to
     upgrade from Fedora 23 to Fedora 24. The upgrade will
     complete successfully and the guest will reboot

  3. The guest will no longer be able to get past AAVMF


Additional info
===============

  This is the domain XML:

    &lt;domain type=&apos;kvm&apos;&gt;
      &lt;name&gt;abologna-f23&lt;/name&gt;
      &lt;uuid&gt;10a494bc-76ca-40d0-adec-fee38467a1ca&lt;/uuid&gt;
      &lt;memory unit=&apos;KiB&apos;&gt;2097152&lt;/memory&gt;
      &lt;currentMemory unit=&apos;KiB&apos;&gt;2097152&lt;/currentMemory&gt;
      &lt;vcpu placement=&apos;static&apos;&gt;4&lt;/vcpu&gt;
      &lt;os&gt;
        &lt;type arch=&apos;aarch64&apos; machine=&apos;virt-2.6&apos;&gt;hvm&lt;/type&gt;
        &lt;loader readonly=&apos;yes&apos; type=&apos;pflash&apos;&gt;/usr/share/AAVMF/AAVMF_CODE.fd&lt;/loader&gt;
        &lt;nvram&gt;/var/lib/libvirt/qemu/nvram/abologna-f23_VARS.fd&lt;/nvram&gt;
        &lt;boot dev=&apos;hd&apos;/&gt;
      &lt;/os&gt;
      &lt;features&gt;
        &lt;gic version=&apos;2&apos;/&gt;
      &lt;/features&gt;
      &lt;cpu mode=&apos;host-passthrough&apos;/&gt;
      &lt;clock offset=&apos;utc&apos;/&gt;
      &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
      &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
      &lt;on_crash&gt;restart&lt;/on_crash&gt;
      &lt;devices&gt;
        &lt;emulator&gt;/usr/libexec/abologna-qemu-kvm&lt;/emulator&gt;
        &lt;disk type=&apos;file&apos; device=&apos;disk&apos;&gt;
          &lt;driver name=&apos;qemu&apos; type=&apos;qcow2&apos;/&gt;
          &lt;source file=&apos;/var/lib/libvirt/images/abologna-f23.qcow2&apos;/&gt;
          &lt;target dev=&apos;sda&apos; bus=&apos;scsi&apos;/&gt;
          &lt;address type=&apos;drive&apos; controller=&apos;0&apos; bus=&apos;0&apos; target=&apos;0&apos; unit=&apos;0&apos;/&gt;
        &lt;/disk&gt;
        &lt;controller type=&apos;scsi&apos; index=&apos;0&apos; model=&apos;virtio-scsi&apos;&gt;
          &lt;address type=&apos;virtio-mmio&apos;/&gt;
        &lt;/controller&gt;
        &lt;controller type=&apos;pci&apos; index=&apos;0&apos; model=&apos;pcie-root&apos;/&gt;
        &lt;controller type=&apos;pci&apos; index=&apos;1&apos; model=&apos;dmi-to-pci-bridge&apos;&gt;
          &lt;model name=&apos;i82801b11-bridge&apos;/&gt;
          &lt;address type=&apos;pci&apos; domain=&apos;0x0000&apos; bus=&apos;0x00&apos; slot=&apos;0x01&apos; function=&apos;0x0&apos;/&gt;
        &lt;/controller&gt;
        &lt;controller type=&apos;pci&apos; index=&apos;2&apos; model=&apos;pci-bridge&apos;&gt;
          &lt;model name=&apos;pci-bridge&apos;/&gt;
          &lt;target chassisNr=&apos;2&apos;/&gt;
          &lt;address type=&apos;pci&apos; domain=&apos;0x0000&apos; bus=&apos;0x01&apos; slot=&apos;0x00&apos; function=&apos;0x0&apos;/&gt;
        &lt;/controller&gt;
        &lt;interface type=&apos;network&apos;&gt;
          &lt;mac address=&apos;52:54:00:44:73:48&apos;/&gt;
          &lt;source network=&apos;default&apos;/&gt;
          &lt;model type=&apos;virtio&apos;/&gt;
          &lt;address type=&apos;virtio-mmio&apos;/&gt;
        &lt;/interface&gt;
        &lt;serial type=&apos;pty&apos;&gt;
          &lt;target port=&apos;0&apos;/&gt;
        &lt;/serial&gt;
        &lt;console type=&apos;pty&apos;&gt;
          &lt;target type=&apos;serial&apos; port=&apos;0&apos;/&gt;
        &lt;/console&gt;
      &lt;/devices&gt;
    &lt;/domain&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9299845</commentid>
    <comment_count>2</comment_count>
    <who name="Laszlo Ersek">lersek</who>
    <bug_when>2016-05-06 11:22:01 -0400</bug_when>
    <thetext>Hi Andrea,

the error message you quoted (&quot;Failed to set MokListRT&quot;) comes from shim. I think that the shim package was upgraded as part of the F23 -&gt; F24 transition. Also, since shim is a UEFI application, if it dances a fandango on core (NULL pointer deref and the like), that would be consistent with the symptom you are seeing (CPU exception caught and dumped by the edk2 exception handler).

What are your shim package versions, before and after?

CC&apos;ing Peter.

Anyway, the error message is printed when the MokListRT or MokListXRT UEFI variables cannot be set (with the SetVariable() runtime service). The EFI_INVALID_PARAMETER error code is specified for the following cases:

* An invalid combination of attribute bits, name, and GUID was supplied, or the
  DataSize exceeds the maximum allowed.

* VariableName is an empty string.

Did you try installing an F24 guest from scratch? (Or maybe there&apos;s no released ISO yet, I don&apos;t know.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9300762</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">lersek</who>
    <bug_when>2016-05-06 18:44:31 -0400</bug_when>
    <thetext>I reproduced the bug, using the exact same host-side components, and a
practically identical guest configuration too.

There was one important difference in my setup: instead of AAVMF_CODE.fd, I
used AAVMF_CODE.verbose.fd, which is why I have a bit of additional
information now, from the console:

&gt; Booting Fedora
&gt; FSOpen: Open &apos;\EFI\fedora\shim.efi&apos; Success
&gt; InstallProtocolInterface: 5B1B31A1-9562-11D2-8E3F-00A0C969723B BA0238C0
&gt; Loading driver at 0x000B85B6000 EntryPoint=0x000B85B6148
&gt; Loading driver at 0x000B85B6000 EntryPoint=0x000B85B6148
&gt; InstallProtocolInterface: BC62157E-3E33-4FEC-9920-2D3B36D750DF BA01EA58
&gt; InstallProtocolInterface: 605DAB50-E046-4300-ABB6-3DD810DD8B23 B8652948
&gt; Failed to set MokListRT: Invalid Parameter
&gt; FSOpen: Open &apos;\EFI\fedora\grubaa64.efi&apos; Success
&gt;
&gt;
&gt; Synchronous Exception at 0x00000000B83BE498
&gt;
&gt;   X0 0x1100069417FFFFE2   X1 0x00000000BBFF0018   X2 0x00000000B83C4C58   X3 0x00000000000FC400
&gt;   X4 0x0000000000000000   X5 0x0000000000000007   X6 0x00000000B9DEF018   X7 0x00000000BF1743A4
&gt;   X8 0x00000000BF1746E8   X9 0x00000000BF174A00  X10 0x000000000000003D  X11 0x00000000000000B6
&gt;  X12 0x00000000700FE0FA  X13 0x0000000000000000  X14 0x0000000000000000  X15 0x0000000000000000
&gt;  X16 0x00000000BF174C80  X17 0x0000000000000000  X18 0x0000000000000000  X19 0x00000000BBFF0018
&gt;  X20 0x0000000000000000  X21 0x00000000B83C5000  X22 0x0000000000000000  X23 0xAA1303E4F940E022
&gt;  X24 0x0000000000000000  X25 0x0000000000000000  X26 0x0000000000000000  X27 0x0000000000000000
&gt;  X28 0x0000000000000000   FP 0x00000000BF174A10   LR 0x00000000B83BF040
&gt;
&gt;   V0 0x0000000000000000 0000000000000000   V1 0x0000000000000000 0000000000000000
&gt;   V2 0x0000000000000000 0000000000000000   V3 0x0000000000000000 0000000000000000
&gt;   V4 0x0000000000000000 0000000000000000   V5 0x0000000000000000 0000000000000000
&gt;   V6 0x0000000000000000 0000000000000000   V7 0x0000000000000000 0000000000000000
&gt;   V8 0x0000000000000000 0000000000000000   V9 0x0000000000000000 0000000000000000
&gt;  V10 0x0000000000000000 0000000000000000  V11 0x0000000000000000 0000000000000000
&gt;  V12 0x0000000000000000 0000000000000000  V13 0x0000000000000000 0000000000000000
&gt;  V14 0x0000000000000000 0000000000000000  V15 0x0000000000000000 0000000000000000
&gt;  V16 0x0000000000000000 0000000000000000  V17 0x0000000000000000 0000000000000000
&gt;  V18 0x0000000000000000 0000000000000000  V19 0x0000000000000000 0000000000000000
&gt;  V20 0x0000000000000000 0000000000000000  V21 0x0000000000000000 0000000000000000
&gt;  V22 0x0000000000000000 0000000000000000  V23 0x0000000000000000 0000000000000000
&gt;  V24 0x0000000000000000 0000000000000000  V25 0x0000000000000000 0000000000000000
&gt;  V26 0x0000000000000000 0000000000000000  V27 0x0000000000000000 0000000000000000
&gt;  V28 0x0000000000000000 0000000000000000  V29 0x0000000000000000 0000000000000000
&gt;  V30 0x0000000000000000 0000000000000000  V31 0x0000000000000000 0000000000000000
&gt;
&gt;   SP 0x00000000BF174A10  ELR 0x00000000B83BE498  SPSR 0x60000305  FPSR 0x00000000
&gt;  ESR 0x96000004          FAR 0x1100069417FFFFE2
&gt;
&gt;  ESR : EC 0x25  IL 0x1  ISS 0x00000004
&gt;
&gt; Data abort: Translation fault, zeroth level
&gt; ASSERT [ArmCpuDxe] /builddir/build/BUILD/ovmf-90bb4c5/ArmPkg/Library/DefaultExceptionHandlerLib/AArch64/DefaultExceptionHandler.c(184): ((BOOLEAN)(0==1))

See those &quot;FSOpen&quot; lines? Those are printed by the FAT driver, when it was
not built with a silent log mask.

So, from the above, we can tell that &quot;shim.efi&quot; recovers from the &quot;Failed to
set MokListRT&quot; error, launches grub, and &quot;grubaa64.efi&quot; blows up.

Interestingly, if I reboot the guest, interrupt the boot process, go to the
UEFI shell, then launch grubaa64.efi manually, then it works all fine. If I
launch &quot;shim.efi&quot; from the UEFI shell, then the same issue occurs.

Now, let&apos;s compare the shim and grub versions, across the upgrade. The shim
version doesn&apos;t change, it is &quot;shim-0.8-8.aarch64&quot; on both sides of the
upgrade.

The grub2 and grubby packages change from:

  grub2-efi-2.02-0.25.fc23.aarch64
  grub2-tools-2.02-0.25.fc23.aarch64
  grubby-8.40-2.fc23.aarch64

to:

  grub2-efi-2.02-0.30.fc24.aarch64
  grub2-tools-2.02-0.30.fc24.aarch64
  grubby-8.40-3.fc24.aarch64

The grubby change is irrelevant, it is only

&gt; * Wed Feb 03 2016 Fedora Release Engineering &lt;releng@fedoraproject.org&gt; - 8.40-3
&gt; - Rebuilt for https://fedoraproject.org/wiki/Fedora_24_Mass_Rebuild

grub2 is more interesting:

&gt; * Thu Apr 07 2016 pjones &lt;pjones@redhat.com&gt; - 1:2.02-0.30
&gt; - Revert 27e66193, which was replaced by upstream&apos;s 49426e9fd
&gt;   Resolves: rhbz#1251600
&gt;
&gt; * Thu Apr 07 2016 Peter Jones &lt;pjones@redhat.com&gt; - 2.02-0.29
&gt; - Fix ppc64 build failure on fedora-24
&gt;
&gt; * Tue Apr 05 2016 pjones &lt;pjones@redhat.com&gt; - 1:2.02-0.27
&gt; - Pull TPM updates from mjg59.
&gt;   Resolves: rhbz#1318067
&gt;
&gt; * Tue Mar 08 2016 pjones &lt;pjones@redhat.com&gt; - 1:2.02-0.27
&gt; - Fix aarch64 build problem.
&gt;
&gt; * Fri Mar 04 2016 Peter Jones &lt;pjones@redhat.com&gt; - 2.02-0.26
&gt; - Rebased to newer upstream (grub-2.02-beta3) for fedora-24

I downgraded to grub2-2.02-0.27.fc24, from Koji (the smallest release
increment available in Koji after 2.02-0.25). The bug persists.

Then I downgraded to grub2-2.02-0.24.fc24 (again from Koji) -- the closest
earlier version. With it the guest boots all fine, using shim.efi, without
any manual intervention.

I think the culprit is probably the rebase to upstream beta3, in the
2.02-0.26 downstream version (which was first built for aarch64 as
2.02-0.27).

Namely, the changelog mentions bug 1318067, so I briefly looked that over,
before the above &quot;bisection&quot;. One of the comments there, bug 1318067 comment
33, says &quot;It&apos;s 2 years between beta2 and beta3, per upstream&apos;s summary, with
hundreds of insertions/deletions&quot;. That&apos;s where I expect the regression to
come from.

Reassigning to grub2, per the above results:

- grub2-efi-2.02-0.24.fc24.aarch64: PASS
- grub2-efi-2.02-0.25.fc23.aarch64: PASS
- grub2-efi-2.02-0.27.fc24.aarch64: FAIL
- grub2-efi-2.02-0.30.fc24.aarch64: FAIL</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9317606</commentid>
    <comment_count>4</comment_count>
    <who name="Laszlo Ersek">lersek</who>
    <bug_when>2016-05-11 11:52:06 -0400</bug_when>
    <thetext>Actually, this is a bug in shim. Grub is not at fault; the grub2 versions I
identified above as problematic only trigger the bug in shim. (This is also
evident, in retrospect, from the fact that the UEFI shell has zero problems
launching grub2 directly.)

Using most recent upstream shim (e22a7b5b772d), things work. I tried to
bisect upstream shim, between 0.8 and e22a7b5b772d. The bisection narrowed
it down to the following commit range:

broken 4316fbd2a2ba Bump version to 0.8
skip   361716dd4a61 Add nostdinc to the CFLAGS for lib
skip   d01421eb5ae6 Align the sections we&apos;re loading, and check for validity /after/ discarding.
skip   5195d7d31bde Don&apos;t install our protocols if we&apos;re not in secure mode.
skip   90c65f72f882 fallback: Fix comparison between signed and unsigned in debugging code.
skip   6b2510522f92 Fix length of allocated buffer for boot option comparison.
skip   7fdbd9d48a4e Make lib/ build right with the cflags it should be using...
fixed  605be9f1793e Make lib/ use the right CFLAGS.

Those skipped commits are marked as such because they don&apos;t build.

(In general my impression of the shim upstream repository is: throw patches
at the wall until something sticks. There seems to be minimal effort to
ensure a healthy build on *all* supported architectures. My impression is
that noone cares about bisectability as a first class goal. And this shows;
see above.

Even just to get this far in the bisection, I regularly had to hack the
Makefile (remember: I started to bisect the range 0.8..e22a7b5b772d). For
example, for commits beyond

  929b5b762be0 Make the build failed with objcopy &lt; 2.24

I had to undo the changes added by this patch, because it broke the build on
my aarch64 host *unconditionally*, despite my objcopy being &gt;= 2.24! (The
exact version was &quot;2.25.1-9.el7&quot;.))

So anyway, after eyeballing the listed commits, d01421eb5ae6 looks like a
clear suspect.

I tried to port this commit to Fedora 24&apos;s shim-signed package, on top of
build 0.8-8 (more precisely, on top of dist-git commit 99c75437001f). I have
fedpkg installed on my RHEL-7 system, and I have scratch-built Fedora
packages before. (I have a valid FAS account and a fresh certificate too.)

Clearly, I couldn&apos;t do that in this case, because aarch64 is a secondary
architecture for Fedora, with a separate Koji instance at
&lt;http://arm.koji.fedoraproject.org/koji/&gt;; and my fedpkg doesn&apos;t know
anything about it.

In an aarch64 Fedora 24 guest, I installed the &quot;fedora-packager&quot; package. I
grabbed the ARM koji configuration from it, and tried to pass it to  fedpkg
with --config. Unfortunately, the fedpkg command needs a *higher level*
configuration file, which in turn references the koji config file. I found
this higher level fedpkg config file on my RHEL-7 system
(/etc/rpkg/fedpkg.conf), but I failed to customize it (beyond the reference
to the ARM koji config file) for aarch64. I found no usable documentation
either.

Thus, shim in Fedora 24 needs a backport of upstream commit d01421eb5ae6,
otherwise it corrupts the grubaa64.efi image, and I couldn&apos;t test such a
build myself, because the infrastructure is plain unusable for someone who
doesn&apos;t work with it every day. Not good, Fedora, not good.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9320089</commentid>
    <comment_count>5</comment_count>
    <who name="Marcin Juszkiewicz">mjuszkie</who>
    <bug_when>2016-05-12 05:12:21 -0400</bug_when>
    <thetext>Yesterday I also looked at that with help from Peter Jones. Shim is definitely the source of problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9334550</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-05-17 13:59:35 -0400</bug_when>
    <thetext>shim-signed-0.8-9 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-0b7e5ceb72</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9336519</commentid>
    <comment_count>7</comment_count>
    <who name="Marcin Juszkiewicz">mjuszkie</who>
    <bug_when>2016-05-18 06:00:41 -0400</bug_when>
    <thetext>Fedora 24 cloud image from 20160518 booted perfectly:

FSOpen: Open &apos;\EFI\BOOT\BOOTAA64.EFI&apos; Success
FSOpen: Open &apos;\EFI\BOOT\BOOTAA64.EFI&apos; Success
InstallProtocolInterface: 5B1B31A1-9562-11D2-8E3F-00A0C969723B B9F3D8C0
Loading driver at 0x000B8564000 EntryPoint=0x000B8564148
Loading driver at 0x000B8564000 EntryPoint=0x000B8564148 
InstallProtocolInterface: BC62157E-3E33-4FEC-9920-2D3B36D750DF BB1D3998
Failed to set MokListRT: Invalid Parameter
FSOpen: Open &apos;\EFI\BOOT\fallback.efi&apos; Success
FSOpen: Open &apos;\EFI\BOOT\fallback.efi&apos; Success
System BootOrder not found.  Initializing defaults.
FSOpen: Open &apos;EFI&apos; Success
FSOpen: Open &apos;fedora&apos; Success
FSOpen: Open &apos;BOOT.CSV&apos; Success
FSOpen: Open &apos;\EFI\fedora\BOOT.CSV&apos; Success
Creating boot entry &quot;Boot0003&quot; with label &quot;Fedora&quot; for file &quot;\EFI\fedora\shim.efi&quot;
FSOpen: Open &apos;\EFI\fedora\shim.efi&apos; Success
InstallProtocolInterface: 5B1B31A1-9562-11D2-8E3F-00A0C969723B B9F41AC0
Loading driver at 0x000B8498000 EntryPoint=0x000B8498148
Loading driver at 0x000B8498000 EntryPoint=0x000B8498148 
InstallProtocolInterface: BC62157E-3E33-4FEC-9920-2D3B36D750DF B9F3DB58
Failed to set MokListRT: Invalid Parameter
FSOpen: Open &apos;\EFI\fedora\grubaa64.efi&apos; Success




      Fedora (4.5.4-300.fc24.aarch64) 24 (Cloud Edition)                        
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                                

      Use the ^ and v keys to change the selection.                       
      Press &apos;e&apos; to edit the selected item, or &apos;c&apos; for a command prompt.   
   The selected entry will be started automatically in 0s.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9336529</commentid>
    <comment_count>8</comment_count>
    <who name="Peter Robinson">pbrobinson</who>
    <bug_when>2016-05-18 06:04:28 -0400</bug_when>
    <thetext>Fixed in today&apos;s compose

https://dl.fedoraproject.org/pub/fedora-secondary/development/24/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9346224</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-05-20 21:35:44 -0400</bug_when>
    <thetext>shim-signed-0.8-9 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-0b7e5ceb72</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9347153</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-05-21 16:27:41 -0400</bug_when>
    <thetext>shim-signed-0.8-9 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>