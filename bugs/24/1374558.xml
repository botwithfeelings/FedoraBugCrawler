<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1374558</bug_id>
          
          <creation_ts>2016-09-08 23:46:00 -0400</creation_ts>
          <short_desc>Laptop Brightness Oscillates Up/Down kernel-4.7.2-201.fc24</short_desc>
          <delta_ts>2016-09-28 14:36:20 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>kernel</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>NEXTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Garry T. Williams">gtwilliams</reporter>
          <assigned_to name="Kernel Maintainer List">kernel-maint</assigned_to>
          <cc>gansalmon</cc>
    
    
    <cc>ichavero</cc>
    
    
    <cc>itamar</cc>
    
    
    <cc>jonathan</cc>
    
    
    <cc>kernel-maint</cc>
    
    
    <cc>madhu.chinakonda</cc>
    
    
    <cc>markzzzsmith</cc>
    
    
    <cc>mchehab</cc>
    
    
    <cc>roger.k.wells</cc>
    
    
    <cc>talipdurmus1</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-09-28 14:36:20</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9692692</commentid>
    <comment_count>0</comment_count>
    <who name="Garry T. Williams">gtwilliams</who>
    <bug_when>2016-09-08 23:46:27 -0400</bug_when>
    <thetext>Description of problem:
Laptop brightness oscillates bright/dim about once per second.  Laptop brightness keys are unresponsive.

No problem on previous kernel and ever for that matter.


Version-Release number of selected component (if applicable):
kernel-4.7.2-201.fc24


How reproducible:
always.


Steps to Reproduce:
1. Boot new kernel
2.
3.

Actual results: Screen brightness now oscillates bright/dim.  Brightness keys are ineffective.


Expected results: Screen brightness as before.  Keys work as before.


Additional info: Laptop is Dell XPS-13.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9694098</commentid>
    <comment_count>1</comment_count>
    <who name="Roger Wells">roger.k.wells</who>
    <bug_when>2016-09-09 09:13:28 -0400</bug_when>
    <thetext>FYI
same kernel, no problem.
Laptop is Thinkpad X240, Intel graphics.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9705290</commentid>
    <comment_count>2</comment_count>
    <who name="">markzzzsmith</who>
    <bug_when>2016-09-13 22:15:38 -0400</bug_when>
    <thetext>I&apos;m having the same problem, also with a Dell XPS-13. Didn&apos;t happen with former F24 4.6.7 kernel.

The once a second thing suggested that two different things were competing to set the screen brightness, and I also noticed that it started happening during boot.

I disabled both systemd-backlight and the xfce power manager, which stopped it, however the screen backlight was now at full brightness.

Actually, I&apos;ve just noticed that under 4.6.7, the backlight directory under /sys/class/backlight is called &apos;acpi_video0&apos;, and has a max_brightness range up to 100, where as under 4.7.2 it had a name with &apos;intel&apos; in it (I&apos;ll boot in a moment and check properly), and a max_brightness of up to around 4880.

This reminded me of this problem, although it seems to be in reverse - the ACPI backlight interface works correctly under 4.6.7, where as the switch to the Intel backlight interface is causing trouble.

Bit more research has shown that the kernel parameter &apos;acpi_backlight&apos; parameter can be set to &apos;vendor&apos; or &apos;video&apos;, with &apos;video&apos; meaning use the ACPI video driver, which I think 4.6.7 is using. I&apos;ll give &apos;acpi_backlight=video&apos; a go with 4.7.2.

(Given the much bigger range that the Intel video driver provides that might be the longer term better driver to use, although thats probably debatable.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9709220</commentid>
    <comment_count>3</comment_count>
    <who name="Garry T. Williams">gtwilliams</who>
    <bug_when>2016-09-14 20:31:10 -0400</bug_when>
    <thetext>Still broken with 4.7.3-200.fc24 .</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9709850</commentid>
    <comment_count>4</comment_count>
    <who name="">markzzzsmith</who>
    <bug_when>2016-09-15 02:13:54 -0400</bug_when>
    <thetext>I tried &apos;acpi_backlight&apos; set to &apos;video&apos;, the &apos;acpi_video0&apos; file reappeared, however &apos;intel_backlight&apos; was also still there and the problem still existed.

I was unsuccessful in finding any instructions on how to disable the vendor backlight control, which I thought would restore just the use of &apos;acpi_video0&apos; as the backlight control.

I think this case you have its priority and severity set above and to pretty high, as the only way to avoid this backlight flaring is to have the backlight set to full intensity, which will use up the battery very quickly. This issue basically makes 4.7.x kernels effectively unusable when running on battery (and running the backlight on full intensity on mains power isn&apos;t really much better either - full brightness is bright!)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9709855</commentid>
    <comment_count>5</comment_count>
    <who name="">markzzzsmith</who>
    <bug_when>2016-09-15 02:15:52 -0400</bug_when>
    <thetext>&quot;I think this case you have its priority and severity set above and to pretty high,&quot;

that went off the rails, I meant this case should have its priority and severity set pretty high because the issue is making 4.7.x kernels pretty much unusable in practice.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9709858</commentid>
    <comment_count>6</comment_count>
    <who name="">markzzzsmith</who>
    <bug_when>2016-09-15 02:17:29 -0400</bug_when>
    <thetext>This bug seems somewhat related, the thing that has changed between 4.6.x and 4.7.x is the appearance of the &apos;intel_backlight&apos; file -

&quot;Screen brightness adjustment stopped working with 4.7.2 kernel&quot;
https://bugzilla.redhat.com/show_bug.cgi?id=1374071</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9715307</commentid>
    <comment_count>7</comment_count>
    <who name="Talip DurmuÅŸ">talipdurmus1</who>
    <bug_when>2016-09-16 14:28:14 -0400</bug_when>
    <thetext>I have same problem with 4.7.2 and 4.7.3 kernel. We are waiting for hotfix.  THANKS</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9738539</commentid>
    <comment_count>8</comment_count>
    <who name="Garry T. Williams">gtwilliams</who>
    <bug_when>2016-09-23 13:44:27 -0400</bug_when>
    <thetext>Same problem with 4.7.4-200 .

(I&apos;ll be running out of old kernels soon.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9739978</commentid>
    <comment_count>9</comment_count>
    <who name="">markzzzsmith</who>
    <bug_when>2016-09-24 03:22:45 -0400</bug_when>
    <thetext>I locked my kernel upgrades using the versionlock dnf extension to stop 4.6.x being removed:

http://perltricks.com/article/prevent-harmful-updates-with-versionlock/

I&apos;ve also tried a vanilla stable kernel of 4.7.x, and that is also still suffering from the problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9749130</commentid>
    <comment_count>10</comment_count>
    <who name="">markzzzsmith</who>
    <bug_when>2016-09-28 01:50:17 -0400</bug_when>
    <thetext>Just upgraded my system which included an upgrade to the vanilla 4.7.5 kernel (4.7.5-200.vanilla.knurd.1.fc24.x86_64). Problem seems to have been fixed, there is now only a single &apos;acpi_video0&apos; file under /sys/class/backlight, and the periodic flaring has gone away.

I haven&apos;t been running it for long, 10 minutes or so, but it is looking good.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9751052</commentid>
    <comment_count>11</comment_count>
    <who name="Garry T. Williams">gtwilliams</who>
    <bug_when>2016-09-28 14:36:20 -0400</bug_when>
    <thetext>Fixed with 4.7.5-200.fc24 .</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>