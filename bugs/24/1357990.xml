<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1357990</bug_id>
          
          <creation_ts>2016-07-19 14:24:00 -0400</creation_ts>
          <short_desc>Rightmost 1/4 of MacBook touchpad cannot initiate events</short_desc>
          <delta_ts>2016-10-05 20:50:35 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>systemd</component>
          <version>24</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Peter Wood">peter</reporter>
          <assigned_to>systemd-maint</assigned_to>
          <cc>johannbg</cc>
    
    
    <cc>jsynacek</cc>
    
    
    <cc>lnykryn</cc>
    
    
    <cc>msekleta</cc>
    
    
    <cc>muadda</cc>
    
    
    <cc>peter.hutterer</cc>
    
    
    <cc>peter</cc>
    
    
    <cc>ssahani</cc>
    
    
    <cc>s</cc>
    
    
    <cc>systemd-maint</cc>
    
    
    <cc>zbyszek</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>systemd-229-16.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-10-05 20:50:35</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9527413</commentid>
    <comment_count>0</comment_count>
    <who name="Peter Wood">peter</who>
    <bug_when>2016-07-19 14:24:08 -0400</bug_when>
    <thetext>Description of problem:

The rightmost 1/4 of the trackpad cannot independently initiate events, apparently. It can be used in conjunction with a tap or gesture that starts in the left 3/4 of the trackpad. For example, a two-fingered scroll with one finger on the left side and one on the right, or a two-fingered tap with one finger on the left and one on the right, or a drag motion starting on the left side and moving to the right. However, single taps on the right 1/4, or two-finger taps or gestures that occur solely in the right 1/4, do not work at all.

Version-Release number of selected component (if applicable):


How reproducible:
Install Fedora 24 on a MacBook4,1 and attempt to use the right side of the trackpad.

Steps to Reproduce:
1.
2.
3.

Actual results:

Tap/drag/scroll events are not recognized if they are initiated in the right 1/4 of the trackpad.

Expected results:

Tap/drag/scroll events should be recognized, regardless of which part of the trackpad they initiate from.


Additional info:
Info from libinput-list-devices:

Device:           appletouch
Kernel:           /dev/input/event10
Group:            8
Seat:             seat0, default
Size:             110.45x82.14mm
Capabilities:     pointer 
Tap-to-click:     disabled
Tap-and-drag:     enabled
Tap drag lock:    disabled
Left-handed:      disabled
Nat.scrolling:    disabled
Middle emulation: n/a
Calibration:      n/a
Scroll methods:   *two-finger edge 
Click methods:    none
Disable-w-typing: enabled
Accel profiles:   none

Physical measurements of the trackpad are 100x50mm, which differs from the measurements shown in libinput-list-devices.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9529647</commentid>
    <comment_count>1</comment_count>
    <who name="Peter Hutterer">peter.hutterer</who>
    <bug_when>2016-07-19 18:02:43 -0400</bug_when>
    <thetext>Run the touchpad-edge-detector tool please and attach the output here, thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9530422</commentid>
    <comment_count>2</comment_count>
    <who name="Peter Wood">peter</who>
    <bug_when>2016-07-19 22:41:48 -0400</bug_when>
    <thetext>[peter@localhost ~]$ sudo touchpad-edge-detector /dev/input/event10
Touchpad applesmc on /dev/input/event10
Move one finger around the touchpad to detect the actual edges
Kernel says:	x [-256..256], y [-256..256]
Touchpad sends:	x [-2..3], y [-3..9] \^C48], y [1..5] \

Touchpad has no resolution, size unknown
Calculate resolution as:
	x axis: 512/&lt;width in mm&gt;
	y axis: 512/&lt;height in mm&gt;

Suggested udev rule:
# &lt;Laptop model description goes here&gt;
evdev:name:applesmc:dmi:bvnAppleInc.:bvrMB41.88Z.00C1.B00.0802091535:bd02/09/08:svnAppleInc.:pnMacBook4,1:pvr1.0:rvnAppleInc.:rnMac-F22788A9:rvrPVT:cvnAppleInc.:ct2:cvrMac-F22788A9:*
 EVDEV_ABS_00=-2:3:&lt;x resolution&gt;
 EVDEV_ABS_01=-3:9:&lt;y resolution&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9531252</commentid>
    <comment_count>3</comment_count>
    <who name="Peter Hutterer">peter.hutterer</who>
    <bug_when>2016-07-20 05:08:07 -0400</bug_when>
    <thetext>(In reply to Peter Wood from comment #2)
&gt; Touchpad sends:	x [-2..3], y [-3..9] \^C48], y [1..5] \

whoah, that doesn&apos;t look right. Did you move your finger around the whole touchpad area?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9591819</commentid>
    <comment_count>4</comment_count>
    <who name="Peter Hutterer">peter.hutterer</who>
    <bug_when>2016-08-08 01:06:43 -0400</bug_when>
    <thetext>ping?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9640292</commentid>
    <comment_count>5</comment_count>
    <who name="Peter Wood">peter</who>
    <bug_when>2016-08-23 09:13:14 -0400</bug_when>
    <thetext>(In reply to Peter Hutterer from comment #4)
&gt; ping?

In response to your question, I had moved my finger around the whole touchpad, at least by my definition, which was to slide it along the entire perimeter of the touchpad, but not anywhere in the middle. 

Unfortunately, I have removed Fedora from my Macbook since I originally posted this bug, so at the moment I cannot provide any further info. If I have a chance I may try to boot Fedora from a usb stick on this machine in order to get the needed info.

I am now running Ubuntu on this machine, so if there is a way to get the same info from Ubuntu, I can do that, but I suspect it would differ since my trackpad works correctly in Ubuntu.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9642913</commentid>
    <comment_count>6</comment_count>
    <who name="Peter Hutterer">peter.hutterer</who>
    <bug_when>2016-08-23 18:39:57 -0400</bug_when>
    <thetext>the same tool should be available in ubuntu, the output will be the same. And yes, moving your finger around the outside edges is sufficient but please do make sure you get all of the edges, not just the bits that are &quot;comfortable&quot; to reach.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9643328</commentid>
    <comment_count>7</comment_count>
    <who name="Peter Wood">peter</who>
    <bug_when>2016-08-23 22:56:25 -0400</bug_when>
    <thetext>(In reply to Peter Hutterer from comment #6)
&gt; the same tool should be available in ubuntu, the output will be the same.
&gt; And yes, moving your finger around the outside edges is sufficient but
&gt; please do make sure you get all of the edges, not just the bits that are
&gt; &quot;comfortable&quot; to reach.

Here&apos;s what I get in Ubuntu:

peter@petermacbook:~$ sudo touchpad-edge-detector /dev/input/event10
Touchpad appletouch on /dev/input/event10
Move one finger around the touchpad to detect the actual edges
Kernel says:	x [0..1215], y [0..575]
Touchpad sends:	x [256..1468], y [257..832] /^C[459..461] -

Touchpad has no resolution, size unknown
Calculate resolution as:
	x axis: 1215/&lt;width in mm&gt;
	y axis: 575/&lt;height in mm&gt;

Suggested udev rule:
# &lt;Laptop model description goes here&gt;
evdev:input:b0003v05ACp0229*
 EVDEV_ABS_00=256:1468:&lt;x resolution&gt;
 EVDEV_ABS_01=257:832:&lt;y resolution&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9644298</commentid>
    <comment_count>8</comment_count>
    <who name="Peter Hutterer">peter.hutterer</who>
    <bug_when>2016-08-24 00:35:36 -0400</bug_when>
    <thetext>https://github.com/systemd/systemd/pull/4030

punting over to systemd, please backport when ready


Peter: meanwhile you can look for 60-evdev.hwdb and follow the instructions at the top to add a local entry. This will fix things locally until the systemd update is ready.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9767587</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-05 07:21:17 -0400</bug_when>
    <thetext>systemd-229-16.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-faf2598d0c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9769846</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-05 20:50:35 -0400</bug_when>
    <thetext>systemd-229-16.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>