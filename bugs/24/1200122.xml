<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1200122</bug_id>
          
          <creation_ts>2015-03-09 14:44:00 -0400</creation_ts>
          <short_desc>Fedora Atomic should report atomic in os-release</short_desc>
          <delta_ts>2016-08-24 13:11:04 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>fedora-release</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Langdon White">langdon</reporter>
          <assigned_to name="Stephen Gallagher">sgallagh</assigned_to>
          <cc>cdrage</cc>
    
    
    <cc>dennis</cc>
    
    
    <cc>dustymabe</cc>
    
    
    <cc>dwalsh</cc>
    
    
    <cc>fdeutsch</cc>
    
    
    <cc>jdisnard</cc>
    
    
    <cc>jeder</cc>
    
    
    <cc>jlebon</cc>
    
    
    <cc>kevin</cc>
    
    
    <cc>lsm5</cc>
    
    
    <cc>miabbott</cc>
    
    
    <cc>nshaikh</cc>
    
    
    <cc>pbrobinson</cc>
    
    
    <cc>sgallagh</cc>
    
    
    <cc>sghosh</cc>
    
    
    <cc>stefw</cc>
    
    
    <cc>walters</cc>
    
    
    <cc>zbyszek</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>fedora-release-24-0.14</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-03-11 12:51:20</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8024770</commentid>
    <comment_count>0</comment_count>
    <who name="Langdon White">langdon</who>
    <bug_when>2015-03-09 14:44:38 -0400</bug_when>
    <thetext>Description of problem:
In order for tooling (e.g. vagrant) to properly work with atomic (e.g. know that it can&apos;t use yum), we need to identify it as such. In other words, the word &quot;atomic&quot; should appear somewhere in os-release.


Seems related:
https://bugzilla.redhat.com/show_bug.cgi?id=1102241</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8025075</commentid>
    <comment_count>1</comment_count>
    <who name="Colin Walters">walters</who>
    <bug_when>2015-03-09 16:51:28 -0400</bug_when>
    <thetext>I&apos;d prefer looking for features.  For example in this case, if yum isn&apos;t present, assume you can&apos;t do whatever you would do with yum?

If you need to though runtime, there is /run/ostree-booted, which isn&apos;t the same as [Fedora/CentOS/Red Hat Enterprise Linux] Atomic (it&apos;s also present on gnome-continuous and other OSTree-consuming distributions), but it exists.

Or you could do what yum does and check for /usr being a read-only bind mount (preferred is via statvfs(2), but you can just shell out to &apos;test -w&apos; which uses access(2) )</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8025164</commentid>
    <comment_count>2</comment_count>
    <who name="Langdon White">langdon</who>
    <bug_when>2015-03-09 17:40:44 -0400</bug_when>
    <thetext>I understand what you are saying, however, the example may just not be a great one. I think there are countless reasons why you would want to know what OS you are on. Fundamentally, I feel like you need to treat an atomic-OS as something different than a traditional version of Fedora. 

At its simplest, I think it will be weird/confusing/not-DRY to have a bunch of branching code for various capabilities (e.g. is rsync locally present? is it in a container? is it something else in one spot; is nfs available? in a container? etc) where the branches essentially, but not completely, repeat. Generally speaking, I would expect to branch once (e.g. this thing is &quot;atomic fedora&quot; and that thing is &quot;server fedora&quot; and that one is &quot;workstation fedora&quot;) and then have a reduced set of tests within. 

Now, arguably, if &quot;atomic-ness&quot; is a &quot;feature&quot; of cloud, wkstn, server, kde-spin, etc then, I would be more inclined to agree with your argument. However, thus far, we seem to be treating &quot;atomic-ness&quot; as a variant of &quot;fedora&quot; not a variant of an edition/spin.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8059389</commentid>
    <comment_count>3</comment_count>
    <who name="Colin Walters">walters</who>
    <bug_when>2015-03-19 12:34:28 -0400</bug_when>
    <thetext>The &quot;is it in a container&quot; question also applies to mainline systems too.

If you want to branch globally of &quot;can I install packages&quot;, the read-only bind mount seems like a useful global state, and would clearly distinguish mainline from Atomic now and into the forseeable future.


Re: &quot;atomic-ness&quot; - indeed, there are people interested in using the rpm-ostree technology outside of the Docker Container Host.  For example, workstation labs.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8127771</commentid>
    <comment_count>4</comment_count>
    <who name="Colin Walters">walters</who>
    <bug_when>2015-04-09 11:04:17 -0400</bug_when>
    <thetext>All of the above said I&apos;m fine making a new -release package.  We already have a separate product package.

I think we&apos;d just take the existing release package and append &quot;Atomic Host&quot; to it or so.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8561300</commentid>
    <comment_count>5</comment_count>
    <who name="Daniel Walsh">dwalsh</who>
    <bug_when>2015-08-21 01:08:49 -0400</bug_when>
    <thetext>Colin do you want Lokesh to create a atomic-release package?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8563193</commentid>
    <comment_count>6</comment_count>
    <who name="Colin Walters">walters</who>
    <bug_when>2015-08-21 13:54:09 -0400</bug_when>
    <thetext>(In reply to Daniel Walsh from comment #5)
&gt; Colin do you want Lokesh to create a atomic-release package?

Let&apos;s wait for the outcome of https://lists.fedoraproject.org/pipermail/cloud/2015-August/005660.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8677862</commentid>
    <comment_count>7</comment_count>
    <who name="Daniel Walsh">dwalsh</who>
    <bug_when>2015-09-29 11:03:12 -0400</bug_when>
    <thetext>Colin, so what should we do?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8818224</commentid>
    <comment_count>8</comment_count>
    <who name="Stef Walter">stefw</who>
    <bug_when>2015-11-13 08:41:25 -0500</bug_when>
    <thetext>Cockpit will likely also need this in the future.

We need a central place to look for this information (such as /etc/os-release and friends) and not just imagine we can look at the whole system for features.

In addition, on RHEL Atomic, in the future Cockpit really wants to know which other Red Hat products have been installed.

Subhendu may have some insight here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8818755</commentid>
    <comment_count>9</comment_count>
    <who name="Charlie Drage">cdrage</who>
    <bug_when>2015-11-13 11:14:27 -0500</bug_when>
    <thetext>While implementing an atomic provider for Docker Machine I too encountered this problem with /etc/os-release. The way that Docker Machine detects what OS to provision is by grepping the releaseid from /etc/os-release. Unfortunately Atomic hosts are the only ones that do not abide by this rule (all others such as CoreOS, RancherOS, SUSE, etc follow suit). 

Even providing a hyphenated release id would be great (centos7-atomic, fedora23-atomic, etc.).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8818758</commentid>
    <comment_count>10</comment_count>
    <who name="Colin Walters">walters</who>
    <bug_when>2015-11-13 11:15:14 -0500</bug_when>
    <thetext>(In reply to Charlie Drage from comment #9)
&gt; While implementing an atomic provider for Docker Machine I too encountered
&gt; this problem with /etc/os-release. The way that Docker Machine detects what
&gt; OS to provision is by grepping the releaseid from /etc/os-release.

But what do you want to do with this information?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8818816</commentid>
    <comment_count>11</comment_count>
    <who name="Charlie Drage">cdrage</who>
    <bug_when>2015-11-13 11:28:11 -0500</bug_when>
    <thetext>(In reply to Colin Walters from comment #10)
&gt; (In reply to Charlie Drage from comment #9)
&gt; &gt; While implementing an atomic provider for Docker Machine I too encountered
&gt; &gt; this problem with /etc/os-release. The way that Docker Machine detects what
&gt; &gt; OS to provision is by grepping the releaseid from /etc/os-release.
&gt; 
&gt; But what do you want to do with this information?

The releaseid information from /etc/os-release helps determine what underlying OS is runnning on the system. Having this information would be able implement an atomic provider for Docker Machine as well as a better implemented ansible atomic detection.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8818905</commentid>
    <comment_count>12</comment_count>
    <who name="Colin Walters">walters</who>
    <bug_when>2015-11-13 11:56:21 -0500</bug_when>
    <thetext>(In reply to Charlie Drage from comment #11)

&gt; The releaseid information from /etc/os-release helps determine what
&gt; underlying OS is runnning on the system. Having this information would be
&gt; able implement an atomic provider for Docker Machine as well as a better
&gt; implemented ansible atomic detection.

What exactly would docker machine do differently in an Atomic Host provider versus say a Fedora Server one, or for that matter Debian?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8818937</commentid>
    <comment_count>13</comment_count>
    <who name="Charlie Drage">cdrage</who>
    <bug_when>2015-11-13 12:09:44 -0500</bug_when>
    <thetext>(In reply to Colin Walters from comment #12)
&gt; (In reply to Charlie Drage from comment #11)
&gt; 
&gt; &gt; The releaseid information from /etc/os-release helps determine what
&gt; &gt; underlying OS is runnning on the system. Having this information would be
&gt; &gt; able implement an atomic provider for Docker Machine as well as a better
&gt; &gt; implemented ansible atomic detection.
&gt; 
&gt; What exactly would docker machine do differently in an Atomic Host provider
&gt; versus say a Fedora Server one, or for that matter Debian?

Quite a bit :)

See https://github.com/docker/machine/blob/master/libmachine/provision/redhat.go

A TLDR:

Installs Docker (not applicable to atomic). 
Provisions a hostname
Provisions the systemd docker config for clustering / swarm / networking
Installs relevant packages (not applicable to atomic)
Update repo (not applicable to atomic)

In other words, the integration is to have clustering / networking / swarm working natively with the --generic docker machine provider. 

A better example of what I am integrating would be very similar to the current CoreOS provider:

https://github.com/docker/machine/blob/master/libmachine/provision/coreos.go

Where the only relevant things that are changed at the hostname and daemon options.

We *could* simply add an *if* statement for the redhat.go provider on Docker machine to check /run/ostree-booted, or /etc/system-release-cpe but I believe that wouldn&apos;t be best practice in comparison to adding the relevant information to /etc/os-release.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8825002</commentid>
    <comment_count>14</comment_count>
    <who name="Dusty Mabe">dustymabe</who>
    <bug_when>2015-11-16 12:17:45 -0500</bug_when>
    <thetext>I&apos;m +1 on having something in there to indicate:

1 - I am running on Fedora 23 (or CentOS 7) 
2 - I am an Atomic Host.


I think it is easier for upstream projects (ansible, docker-machine, cloud-init, others..) to look at one place to determine what environment they are in.


Just my $.02</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8827436</commentid>
    <comment_count>15</comment_count>
    <who name="Jeremy Eder">jeder</who>
    <bug_when>2015-11-17 06:19:39 -0500</bug_when>
    <thetext>Colin, is this not the purpose of /etc/system-release-cpe ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8828092</commentid>
    <comment_count>16</comment_count>
    <who name="Fabian Deutsch">fdeutsch</who>
    <bug_when>2015-11-17 10:42:32 -0500</bug_when>
    <thetext>Let me point out that /etc/os.release.d/* could also help.

/etc/os-release could indicate the platform

A file i.e. /etc/os.release.d/atomic

can override the VARIANT and VARIANT_ID field to signal that it&apos;s the Atomic flavor.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8828344</commentid>
    <comment_count>17</comment_count>
    <who name="Colin Walters">walters</who>
    <bug_when>2015-11-17 12:06:58 -0500</bug_when>
    <thetext>(In reply to Charlie Drage from comment #13)

&gt; https://github.com/docker/machine/blob/master/libmachine/provision/redhat.go

The nature of &quot;provisioning glue&quot; type code means that it won&apos;t be beautiful.  And I have certainly myself written some ugly bits in Ansible and those type of things.

That said, this code is pretty awful.

   &quot;sudo hostname %s &amp;&amp; echo %q | sudo tee /etc/hostname&quot;,

No apparent awareness of shell quoting issues, or idempotency (&quot;don&apos;t do this if the hostname is already set&quot;).  Or the fact that `tee` does an open(O_TRUNC) and so will potentially leave a corrupted file if interrupted, etc.

Really the whole thing should admit it&apos;s just a pile of hacky shell script and not actually Go.  

In the bigger picture, Docker Machine would do well to follow the path of Vagrant, and support callouts to well-known remote automation tools like Ansible/Puppet etc.  (Vagrant has some of its own builtin provisioning that&apos;s mostly just as hacky as Docker Machine, but at least it&apos;s easy to hook up sane provisioning tools in Vagrant)

&gt; Installs Docker (not applicable to atomic). 
&gt; Provisions a hostname

Best done by detecting that the host uses systemd, and call out to `systemctl set-hostname --static`.

&gt; Provisions the systemd docker config for clustering / swarm / networking

Tricky and system dependent, but also *not* specific to Atomic Host - the same instructions would apply to a Fedora 23 Server with Docker.

&gt; Installs relevant packages (not applicable to atomic)
&gt; Update repo (not applicable to atomic)

Yes, best done by detecting that `rpm -q docker` is found and not trying to install it, like Ansible&apos;s `yum state=present` does.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8828382</commentid>
    <comment_count>18</comment_count>
    <who name="Charlie Drage">cdrage</who>
    <bug_when>2015-11-17 12:19:09 -0500</bug_when>
    <thetext>(In reply to Colin Walters from comment #17)
&gt; (In reply to Charlie Drage from comment #13)
&gt; 
&gt; &gt; https://github.com/docker/machine/blob/master/libmachine/provision/redhat.go
&gt; 
&gt; The nature of &quot;provisioning glue&quot; type code means that it won&apos;t be
&gt; beautiful.  And I have certainly myself written some ugly bits in Ansible
&gt; and those type of things.
&gt; 
&gt; That said, this code is pretty awful.
&gt; 
&gt;    &quot;sudo hostname %s &amp;&amp; echo %q | sudo tee /etc/hostname&quot;,
&gt; 

I do admit it&apos;s extremely hacky. There&apos;s an open PR for this to be fixed:
https://github.com/docker/machine/pull/1586

Imo, the --generic option is a glorified shell script at the moment for Docker Machine.


Regardless, I would like to see a central location that we can gather information whether or not it is an atomic host, similar to other OS&apos; that have followed suit this way.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8828388</commentid>
    <comment_count>19</comment_count>
    <who name="Charlie Drage">cdrage</who>
    <bug_when>2015-11-17 12:21:25 -0500</bug_when>
    <thetext>(In reply to Jeremy Eder from comment #15)
&gt; Colin, is this not the purpose of /etc/system-release-cpe ?

Unfortunately I don&apos;t think this is standard between RHEL-based Atomic Hosts :(

I&apos;ve just done this on a CentOS 7 Atomic:

[centos@cloud ~]$ sudo cat /etc/system-release-cpe
cpe:/o:centos:centos:7

[centos@cloud ~]$ cat /etc/os-release 
NAME=&quot;CentOS Linux&quot;
VERSION=&quot;7 (Core)&quot;
ID=&quot;centos&quot;
ID_LIKE=&quot;rhel fedora&quot;
VERSION_ID=&quot;7&quot;
PRETTY_NAME=&quot;CentOS Linux 7 (Core)&quot;
ANSI_COLOR=&quot;0;31&quot;
CPE_NAME=&quot;cpe:/o:centos:centos:7&quot;
HOME_URL=&quot;https://www.centos.org/&quot;
BUG_REPORT_URL=&quot;https://bugs.centos.org/&quot;

CENTOS_MANTISBT_PROJECT=&quot;CentOS-7&quot;
CENTOS_MANTISBT_PROJECT_VERSION=&quot;7&quot;
REDHAT_SUPPORT_PRODUCT=&quot;centos&quot;
REDHAT_SUPPORT_PRODUCT_VERSION=&quot;7&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8828484</commentid>
    <comment_count>20</comment_count>
    <who name="Charlie Drage">cdrage</who>
    <bug_when>2015-11-17 13:04:44 -0500</bug_when>
    <thetext>(sorry to spam)

But I have filed https://bugs.centos.org/view.php?id=9776 after finding that the previous bug had been closed. 

I don&apos;t believe that &quot;grep &apos;ostree=&apos; /proc/cmdline&quot; is a viable solution for finding whether a host is Atomic or not.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8959512</commentid>
    <comment_count>21</comment_count>
    <who name="Daniel Walsh">dwalsh</who>
    <bug_when>2016-01-06 14:29:20 -0500</bug_when>
    <thetext>Any update on this?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9040533</commentid>
    <comment_count>22</comment_count>
    <who name="Dusty Mabe">dustymabe</who>
    <bug_when>2016-02-06 07:33:42 -0500</bug_when>
    <thetext>In a presentation at DevConf today the presenter tried to show the host he was on was an Atomic host by looking at /etc/{fedora,redhat}-release. When that didn&apos;t show what he wanted he just tried to write a file in /usr/ (in order to get a read only filesystem error) to prove that he was on Atomic.

We need a clear way for people to find this out that doesn&apos;t fall too far outside of their already known methods for discovering what platform they are on.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9042347</commentid>
    <comment_count>23</comment_count>
    <who name="Fabian Deutsch">fdeutsch</who>
    <bug_when>2016-02-08 04:07:44 -0500</bug_when>
    <thetext>Please use the VARIANT and VARIANT_ID fields in /etc/os-release.

It aligns well with what we have, it is easy to discover, and it is the same on CentOS and Fedora.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9042937</commentid>
    <comment_count>24</comment_count>
    <who name="Colin Walters">walters</who>
    <bug_when>2016-02-08 07:52:23 -0500</bug_when>
    <thetext>It seems this would be a patch to
http://pkgs.fedoraproject.org/cgit/rpms/fedora-release.git/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9043102</commentid>
    <comment_count>25</comment_count>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-02-08 08:29:30 -0500</bug_when>
    <thetext>(In reply to Colin Walters from comment #24)
&gt; It seems this would be a patch to
&gt; http://pkgs.fedoraproject.org/cgit/rpms/fedora-release.git/

Tell me *exactly* what you want the resulting os-release file to look like and I&apos;ll get it done.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9043390</commentid>
    <comment_count>26</comment_count>
    <who name="Charlie Drage">cdrage</who>
    <bug_when>2016-02-08 09:40:46 -0500</bug_when>
    <thetext>(In reply to Fabian Deutsch from comment #23)
&gt; Please use the VARIANT and VARIANT_ID fields in /etc/os-release.
&gt; 
&gt; It aligns well with what we have, it is easy to discover, and it is the same
&gt; on CentOS and Fedora.

Yeah, according to https://www.freedesktop.org/software/systemd/man/os-release.html that&apos;d be a good route.

for ex.

VARIANT=&quot;Fedora 23 (Atomic Host)&quot;
VARIANT_ID=atomic

Can this be consistent across all platforms however? (ex. server vs workstation vs atomic, etc.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9043434</commentid>
    <comment_count>27</comment_count>
    <who name="Colin Walters">walters</who>
    <bug_when>2016-02-08 09:49:46 -0500</bug_when>
    <thetext>I&apos;d prefer if it was VARIANT_ID=atomichost for the same reason as it&apos;s &quot;Atomic Host&quot; in VARIANT.

Otherwise, yes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9043441</commentid>
    <comment_count>28</comment_count>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-02-08 09:51:18 -0500</bug_when>
    <thetext>(In reply to Charlie Drage from comment #26)
&gt; VARIANT=&quot;Fedora 23 (Atomic Host)&quot;
&gt; VARIANT_ID=atomic
&gt; 
&gt; Can this be consistent across all platforms however? (ex. server vs
&gt; workstation vs atomic, etc.)

Could you clarify this? I&apos;m not sure what you&apos;re asking to be consistent.

We already have:

VARIANT=Server Edition
VARIANT_ID=server
PRETTY_NAME=Fedora 23 (Server Edition)

So I assume what we&apos;d be looking for here is

VARIANT=Atomic Host
VARIANT_ID=atomic
PRETTY_NAME=Fedora 23 (Atomic Host)

Are you asking for something different related to a hypothetical Atomic Server Edition (or Workstation)?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9043821</commentid>
    <comment_count>29</comment_count>
    <who name="Charlie Drage">cdrage</who>
    <bug_when>2016-02-08 11:19:33 -0500</bug_when>
    <thetext>(In reply to Stephen Gallagher from comment #28)
&gt; (In reply to Charlie Drage from comment #26)
&gt; &gt; VARIANT=&quot;Fedora 23 (Atomic Host)&quot;
&gt; &gt; VARIANT_ID=atomic
&gt; &gt; 
&gt; &gt; Can this be consistent across all platforms however? (ex. server vs
&gt; &gt; workstation vs atomic, etc.)
&gt; 
&gt; Could you clarify this? I&apos;m not sure what you&apos;re asking to be consistent.
&gt; 
&gt; We already have:
&gt; 
&gt; VARIANT=Server Edition
&gt; VARIANT_ID=server
&gt; PRETTY_NAME=Fedora 23 (Server Edition)
&gt; 
&gt; So I assume what we&apos;d be looking for here is
&gt; 
&gt; VARIANT=Atomic Host
&gt; VARIANT_ID=atomic
&gt; PRETTY_NAME=Fedora 23 (Atomic Host)
&gt; 
&gt; Are you asking for something different related to a hypothetical Atomic
&gt; Server Edition (or Workstation)?

Ah yeah, sorry, I meant a hypothetical Atomic Server edition (possibly not workstation, although there is another OS out there which wants to go that route...) 

I&apos;d prefer VARIANT_ID to be &quot;atomic&quot; in my opinion. Code-wise would be better to grep when implementing atomic host support in ansible / docker-machine / chef, etc.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9056085</commentid>
    <comment_count>30</comment_count>
    <who name="Colin Walters">walters</who>
    <bug_when>2016-02-12 10:18:26 -0500</bug_when>
    <thetext>(In reply to Charlie Drage from comment #29)

&gt; I&apos;d prefer VARIANT_ID to be &quot;atomic&quot; in my opinion. Code-wise would be
&gt; better to grep when implementing atomic host support in ansible /
&gt; docker-machine / chef, etc.

Why VARIANT_ID=atomic and not VARIANT_ID=atomichost ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9091810</commentid>
    <comment_count>31</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-02-24 08:21:46 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 24 development cycle.
Changing version to &apos;24&apos;.

More information and reason for this action is here:
https://fedoraproject.org/wiki/Fedora_Program_Management/HouseKeeping/Fedora24#Rawhide_Rebase</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9128543</commentid>
    <comment_count>32</comment_count>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-03-08 06:43:31 -0500</bug_when>
    <thetext>Just a reminder, I&apos;m still waiting for a clear answer on what this should look like. It&apos;s probably not going to make F24 Alpha at this point.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9129696</commentid>
    <comment_count>33</comment_count>
    <who name="Charlie Drage">cdrage</who>
    <bug_when>2016-03-08 11:45:54 -0500</bug_when>
    <thetext>In my opinion the variant_id should be &quot;atomic&quot;. It&apos;s be good for parsing and as of right now I don&apos;t think there are any other products that use the &quot;atomic&quot; ID that&apos;s significantly different than Project Atomic hosts.

What Stephen Gallagher said previously I 100% agree with:

VARIANT=Atomic Host
VARIANT_ID=atomic
PRETTY_NAME=Fedora 23 (Atomic Host)

If anyone else has some input please say!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9129713</commentid>
    <comment_count>34</comment_count>
    <who name="Colin Walters">walters</who>
    <bug_when>2016-03-08 11:53:43 -0500</bug_when>
    <thetext>(In reply to Charlie Drage from comment #33)
&gt; In my opinion the variant_id should be &quot;atomic&quot;. It&apos;s be good for parsing
&gt; and as of right now I don&apos;t think there are any other products that use the
&gt; &quot;atomic&quot; ID that&apos;s significantly different than Project Atomic hosts.

https://fedoraproject.org/wiki/Workstation/AtomicWorkstation</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9129716</commentid>
    <comment_count>35</comment_count>
    <who name="Colin Walters">walters</who>
    <bug_when>2016-03-08 11:54:35 -0500</bug_when>
    <thetext>The other reason to use atomichost is that there are *many* things now under the Project Atomic banner that are not Atomic Host.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9129936</commentid>
    <comment_count>36</comment_count>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-03-08 13:13:05 -0500</bug_when>
    <thetext>What I am going to do is generate /usr/lib/os-release with the following content:

VARIANT=Atomic Host
VARIANT_ID=atomic.host
PRETTY_NAME=Fedora 24 (Atomic Host)

This VARIANT_ID should be very easy to parse while still offering a secondary mark to denote a particular Atomic project (in this case, Atomic Host).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9129982</commentid>
    <comment_count>37</comment_count>
    <who name="Charlie Drage">cdrage</who>
    <bug_when>2016-03-08 13:42:23 -0500</bug_when>
    <thetext>Will changes to usr/lib/os-release be noted in etc/os-release as well?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9129996</commentid>
    <comment_count>38</comment_count>
    <who name="Zbigniew Jędrzejewski-Szmek">zbyszek</who>
    <bug_when>2016-03-08 13:47:46 -0500</bug_when>
    <thetext>It&apos;s a symlink to /usr/lib/os-release.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9129999</commentid>
    <comment_count>39</comment_count>
    <who name="Fabian Deutsch">fdeutsch</who>
    <bug_when>2016-03-08 13:48:50 -0500</bug_when>
    <thetext>Stephen, I&apos;ve already seen dashes (-) in VARIANT_ID, but not dots.
This might sound nit picky, but what about replacing the dot with a dash ..</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9130009</commentid>
    <comment_count>40</comment_count>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-03-08 13:52:11 -0500</bug_when>
    <thetext>From the os-release(5) manpage:
&quot;&quot;&quot;
A lower-case string (no spaces or other characters outside of 0–9, a–z, &quot;.&quot;, &quot;_&quot; and &quot;-&quot;)
&quot;&quot;&quot;

(Which is a little self-referential since I wrote that manpage...)


The dot is fine IMHO and I&apos;ve already added it to the queue of fedora-release package changes under review here:

https://pagure.io/fedora-release/pull-request/29 (Rawhide/F25)
https://pagure.io/fedora-release/pull-request/30 (F24)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9130019</commentid>
    <comment_count>41</comment_count>
    <who name="Charlie Drage">cdrage</who>
    <bug_when>2016-03-08 13:56:33 -0500</bug_when>
    <thetext>I&apos;m happy with atomic.host

Makes sense.

As long as the ID differentiates to other Fedora releases (server, workstation, etc.) I&apos;m happy, since that means that tools such as Ansible and docker-machine can now work with determining if the release is an Atomic Host or not.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9547622</commentid>
    <comment_count>42</comment_count>
    <who name="Jonathan Lebon">jlebon</who>
    <bug_when>2016-07-25 13:08:03 -0400</bug_when>
    <thetext>Cross-linking this here for completeness:
https://pagure.io/fedora-atomic/issue/6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9641134</commentid>
    <comment_count>43</comment_count>
    <who name="Charlie Drage">cdrage</who>
    <bug_when>2016-08-23 11:44:45 -0400</bug_when>
    <thetext>Could we re-open this as this has yet to still be fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9646585</commentid>
    <comment_count>44</comment_count>
    <who name="Colin Walters">walters</who>
    <bug_when>2016-08-24 13:11:04 -0400</bug_when>
    <thetext>Cross-linking the CentOS implementation: https://github.com/CentOS/sig-atomic-buildscripts/issues/61#issuecomment-242139868</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>