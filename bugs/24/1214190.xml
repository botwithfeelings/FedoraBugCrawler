<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1214190</bug_id>
          
          <creation_ts>2015-04-22 04:20:00 -0400</creation_ts>
          <short_desc>Add rlIsCentOS to do the right thing on CentOS, similar to rlIsRHEL</short_desc>
          <delta_ts>2017-02-16 03:48:27 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>beakerlib</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          <see_also>https://bugzilla.redhat.com/show_bug.cgi?id=1214191</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Patch</keywords>
          <priority>medium</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1173652</blocked>
    
    
    <blocked>1173650</blocked>
    
    
    <blocked>1214412</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Jan Pazdziora">jpazdziora</reporter>
          <assigned_to name="Ales Zelinka">azelinka</assigned_to>
          <cc>azelinka</cc>
    
    
    <cc>dapospis</cc>
    
    
    <cc>fsumsal</cc>
    
    
    <cc>jprokes</cc>
    
    
    <cc>mkyral</cc>
    
    
    <cc>ohudlick</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>beakerlib-1.13-1</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-02-16 03:48:27</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8167536</commentid>
    <comment_count>0</comment_count>
    <who name="Jan Pazdziora">jpazdziora</who>
    <bug_when>2015-04-22 04:20:49 -0400</bug_when>
    <thetext>Description of problem:

On CentOS 7 machine, rlIsRHEL 7 exists with 1, and reading beakerlib man page, there does not seem to be an easy way (similar in complexity to rlIsRHEL) to check the OS and its version.

Please consider adding rlIsCentOS.

Version-Release number of selected component (if applicable):

beakerlib-1.10-2.el7eso.noarch

How reproducible:

Deterministic.

Steps to Reproduce:
1. Have CentOS 7 machine (CentOS Linux release 7.1.1503 (Core))
2. Try to check for CentOS 7

Actual results:

No rlIs* way.

Expected results:

There is rlIsCentOS.

Additional info:

Alternatively, rlIsRHEL could be modified to identify CentOS as RHEL but that could open its own set of issues.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8169375</commentid>
    <comment_count>1</comment_count>
    <who name="Ales Zelinka">azelinka</who>
    <bug_when>2015-04-22 12:28:33 -0400</bug_when>
    <thetext>patch adding rlIsCentOS on review:

https://git.fedorahosted.org/cgit/beakerlib.git/commit/?h=devel&amp;id=cce2b41b68f9b0559d4f58d01edd5407ee70f77e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8172945</commentid>
    <comment_count>2</comment_count>
    <who name="Dalibor Pospíšil">dapospis</who>
    <bug_when>2015-04-23 09:38:03 -0400</bug_when>
    <thetext>(In reply to Ales Zelinka from comment #1)
&gt; patch adding rlIsCentOS on review:
&gt; 
&gt; https://git.fedorahosted.org/cgit/beakerlib.git/commit/
&gt; ?h=devel&amp;id=cce2b41b68f9b0559d4f58d01edd5407ee70f77e

This is bad:
- if [[ &quot;$arg&quot; == &quot;$major&quot; || &quot;$arg&quot; == &quot;$whole&quot; ]]
+ if [[ &quot;$whole&quot; =~ ^${arg}.* ]]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8173051</commentid>
    <comment_count>3</comment_count>
    <who name="Ales Zelinka">azelinka</who>
    <bug_when>2015-04-23 10:02:22 -0400</bug_when>
    <thetext>(In reply to Dalibor Pospíšil from comment #2)

&gt; This is bad:
&gt; - if [[ &quot;$arg&quot; == &quot;$major&quot; || &quot;$arg&quot; == &quot;$whole&quot; ]]
&gt; + if [[ &quot;$whole&quot; =~ ^${arg}.* ]]

um, why? What did I miss?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8173262</commentid>
    <comment_count>4</comment_count>
    <who name="Dalibor Pospíšil">dapospis</who>
    <bug_when>2015-04-23 10:45:08 -0400</bug_when>
    <thetext>(In reply to Ales Zelinka from comment #3)
&gt; (In reply to Dalibor Pospíšil from comment #2)
&gt; 
&gt; &gt; This is bad:
&gt; &gt; - if [[ &quot;$arg&quot; == &quot;$major&quot; || &quot;$arg&quot; == &quot;$whole&quot; ]]
&gt; &gt; + if [[ &quot;$whole&quot; =~ ^${arg}.* ]]
&gt; 
&gt; um, why? What did I miss?

# whole=5.10
# arg=5.1
# [[ &quot;$whole&quot; =~ ^${arg}.* ]]; echo $?
0

BTW, what was wrong on the old one?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8173303</commentid>
    <comment_count>5</comment_count>
    <who name="Ales Zelinka">azelinka</who>
    <bug_when>2015-04-23 10:55:08 -0400</bug_when>
    <thetext>I see, that is a bug. 

&gt; BTW, what was wrong on the old one?

It assumed that $whole - $major = $minor which is incorrect for CentOS7.1 because it has 3rd number in the release (7.1.1503).

I&apos;ll just rewrite the function to use proper $major $minor parsing instead of the $whole thingie.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8173366</commentid>
    <comment_count>6</comment_count>
    <who name="Dalibor Pospíšil">dapospis</who>
    <bug_when>2015-04-23 11:07:23 -0400</bug_when>
    <thetext>(In reply to Ales Zelinka from comment #5)
&gt; I see, that is a bug. 
&gt; 
&gt; &gt; BTW, what was wrong on the old one?
&gt; 
&gt; It assumed that $whole - $major = $minor which is incorrect for CentOS7.1
&gt; because it has 3rd number in the release (7.1.1503).
&gt; 
&gt; I&apos;ll just rewrite the function to use proper $major $minor parsing instead
&gt; of the $whole thingie.

rlTestVersion is able to handle unlimited number of dots. The problem comes to play if we want to compare just at the level of minors or in this case possibli lower. I think it would be nice to implement some universal approach, like to cut content of whole to match expected number of dots...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8790324</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2015-11-04 10:35:14 -0500</bug_when>
    <thetext>This message is a reminder that Fedora 21 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 21. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;21&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 21 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9094558</commentid>
    <comment_count>8</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-02-24 10:48:38 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 24 development cycle.
Changing version to &apos;24&apos;.

More information and reason for this action is here:
https://fedoraproject.org/wiki/Fedora_Program_Management/HouseKeeping/Fedora24#Rawhide_Rebase</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9738476</commentid>
    <comment_count>9</comment_count>
    <who name="Dalibor Pospíšil">dapospis</who>
    <bug_when>2016-09-23 13:15:57 -0400</bug_when>
    <thetext>patch fixed by https://git.fedorahosted.org/cgit/beakerlib.git/commit/?id=5ea3ff1e479c307cbb4edf42f1ffa4bb6ea12c93</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>