<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1295295</bug_id>
          
          <creation_ts>2016-01-04 01:38:00 -0500</creation_ts>
          <short_desc>uglify task fails: An error occurred while processing a template: &lt;template function&gt; has no method &apos;indexOf&apos;</short_desc>
          <delta_ts>2017-01-19 01:19:48 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>nodejs-grunt</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1323858</dependson>
          <blocked>1307666</blocked>
    
    
    <blocked>1307668</blocked>
    
    
    <blocked>1307806</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Dan Callaghan">dcallagh</reporter>
          <assigned_to name="Jamie Nguyen">jamielinux</assigned_to>
          <cc>ctubbsii</cc>
    
    
    <cc>jamielinux</cc>
    
    
    <cc>piotr1212</cc>
    
    
    <cc>tchollingsworth</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>nodejs-grunt-1.0.1-2.fc25 nodejs-grunt-1.0.1-1.fc24</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-01-19 01:19:48</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8950410</commentid>
    <comment_count>0</comment_count>
    <who name="Dan Callaghan">dcallagh</who>
    <bug_when>2016-01-04 01:38:18 -0500</bug_when>
    <thetext>Description of problem:
nodejs-typeahead.js fails to build in rawhide due to an error in the grunt uglify task.

Version-Release number of selected component (if applicable):
nodejs-grunt-contrib-uglify-0.5.0-3.fc24.noarch

How reproducible:
by rebuilding nodejs-typeahead.js

Steps to Reproduce:
1. Rebuild the nodejs-typeahead.js package

Actual results:
Build fails with this confusing error from grunt:

Running &quot;uglify:bloodhound&quot; (uglify) task
Warning: An error occurred while processing a template (Object function (obj) {
obj || (obj = {});
var __t, __p = &apos;&apos;;
with (obj) {
__p +=
((__t = ( buildDir )) == null ? &apos;&apos; : __t) +
&apos;/bloodhound.js&apos;;

}
return __p
} has no method &apos;indexOf&apos;). Use --force to continue.

Aborted due to warnings.

Expected results:
Should build successfully.

Additional info:
typeahead.js has this in its Gruntfile:

    uglify: {
      options: {
        banner: &apos;&lt;%= banner %&gt;&apos;,
        enclose: { &apos;window.jQuery&apos;: &apos;$&apos; }
      },  
      bloodhound: {
        options: {
          mangle: false,
          beautify: true,
          compress: false
        },
        src: files.common.concat(files.bloodhound),
        dest: &apos;&lt;%= buildDir %&gt;/bloodhound.js&apos;
      },  
      ...

It looks like the template in question is dest. I don&apos;t understand why something is calling indexOf on the unrendered template function. A real stack trace would have been nice...

This is probably caused by the lodash 2-&gt;3 transition which happened in rawhide recently. The build works fine on Fedora 23 which still has lodash 2. nodejs-grunt-contrib-uglify was just hacked in rawhide to accept the new lodash version but it probably needed more extensive patching than that.

The current version of nodejs-grunt-contrib-uglify (0.5.0) is a few years old now, the latest version (0.11.0) actually requires lodash 3 so possibly just updating to that version would fix things. That&apos;s bug 1108714.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9062902</commentid>
    <comment_count>1</comment_count>
    <who name="Dan Callaghan">dcallagh</who>
    <bug_when>2016-02-14 17:49:10 -0500</bug_when>
    <thetext>Seems like updating grunt-uglify didn&apos;t help, there is something else going wrong here...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9092807</commentid>
    <comment_count>2</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-02-24 09:12:59 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 24 development cycle.
Changing version to &apos;24&apos;.

More information and reason for this action is here:
https://fedoraproject.org/wiki/Fedora_Program_Management/HouseKeeping/Fedora24#Rawhide_Rebase</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9495041</commentid>
    <comment_count>3</comment_count>
    <who name="Dan Callaghan">dcallagh</who>
    <bug_when>2016-07-11 00:35:46 -0400</bug_when>
    <thetext>This turns out to be a grunt bug, because we are using old grunt (0.4.5) with newer lodash. It has been fixed upstream already in the 1.0.0 release:

https://github.com/gruntjs/grunt/commit/3cc26ba4caf9d673fddf4f4c4c4d3f2446a7d319 lib/grunt/template.js</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9646657</commentid>
    <comment_count>4</comment_count>
    <who name="Piotr Popieluch">piotr1212</who>
    <bug_when>2016-08-24 13:30:13 -0400</bug_when>
    <thetext>Seems to build fine now according to koschei, need to check if the grunt update can be backported to f25 and f24.

https://apps.fedoraproject.org/koschei/package/nodejs-typeahead.js</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9673230</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-01 17:50:19 -0400</bug_when>
    <thetext>nodejs-grunt-legacy-log-utils-1.0.0-2.fc25 nodejs-grunt-legacy-log-1.0.0-1.fc25 nodejs-grunt-legacy-util-1.0.0-2.fc25 nodejs-grunt-cli-1.2.0-1.fc25 nodejs-grunt-1.0.1-2.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-a912335c1e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9673234</commentid>
    <comment_count>6</comment_count>
    <who name="Piotr Popieluch">piotr1212</who>
    <bug_when>2016-09-01 17:56:22 -0400</bug_when>
    <thetext>F25 update created, I&apos;m really too short on time at the moment to build it on F24.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9673249</commentid>
    <comment_count>7</comment_count>
    <who name="Piotr Popieluch">piotr1212</who>
    <bug_when>2016-09-01 18:03:53 -0400</bug_when>
    <thetext>Seems there is another broken dep in F25 causing this build to fail.

DEBUG util.py:421:  Error: nothing provides npm(pretty-bytes) &lt; 0.2 needed by nodejs-maxmin-0.2.0-5.fc24.noarch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9675910</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-02 13:57:52 -0400</bug_when>
    <thetext>nodejs-figures-1.7.0-2.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-a192028863</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9675928</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-02 14:15:12 -0400</bug_when>
    <thetext>nodejs-maxmin-2.1.0-1.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-d6c3bb68a2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9676696</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-02 23:54:15 -0400</bug_when>
    <thetext>nodejs-grunt-1.0.1-2.fc25, nodejs-grunt-cli-1.2.0-1.fc25, nodejs-grunt-legacy-log-1.0.0-1.fc25, nodejs-grunt-legacy-log-utils-1.0.0-2.fc25, nodejs-grunt-legacy-util-1.0.0-2.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-a912335c1e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9677370</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-03 21:24:16 -0400</bug_when>
    <thetext>nodejs-maxmin-2.1.0-1.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-d6c3bb68a2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9677371</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-03 21:24:18 -0400</bug_when>
    <thetext>nodejs-figures-1.7.0-2.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-a192028863</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9695582</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-09 17:49:53 -0400</bug_when>
    <thetext>nodejs-maxmin-2.1.0-1.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9695583</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-09 17:49:55 -0400</bug_when>
    <thetext>nodejs-figures-1.7.0-2.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9695588</commentid>
    <comment_count>15</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-09 17:50:08 -0400</bug_when>
    <thetext>nodejs-grunt-1.0.1-2.fc25, nodejs-grunt-cli-1.2.0-1.fc25, nodejs-grunt-legacy-log-1.0.0-1.fc25, nodejs-grunt-legacy-log-utils-1.0.0-2.fc25, nodejs-grunt-legacy-util-1.0.0-2.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9962357</commentid>
    <comment_count>16</comment_count>
    <who name="Christopher Tubbs">ctubbsii</who>
    <bug_when>2016-12-06 19:14:20 -0500</bug_when>
    <thetext>This needs to be fixed in F24. It&apos;s blocking js-jquery and js-jquery1 builds on that branch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9965970</commentid>
    <comment_count>17</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-07 15:45:37 -0500</bug_when>
    <thetext>nodejs-figures-1.7.0-2.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-90ece6d3a9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9969290</commentid>
    <comment_count>18</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-08 14:23:33 -0500</bug_when>
    <thetext>nodejs-figures-1.7.0-2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-90ece6d3a9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9969860</commentid>
    <comment_count>19</comment_count>
    <who name="Dan Callaghan">dcallagh</who>
    <bug_when>2016-12-08 18:21:02 -0500</bug_when>
    <thetext>Hmm doesn&apos;t seem like an update to nodejs-figures has any chance of fixing this bug in grunt...

Was the updated filed with the wrong bz number perhaps?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9971975</commentid>
    <comment_count>20</comment_count>
    <who name="Piotr Popieluch">piotr1212</who>
    <bug_when>2016-12-09 09:59:36 -0500</bug_when>
    <thetext>Figures is needed as dependency for upgrading grunt. Grunt update is needed to fix this issue. Instead of creating a dozen new &quot;depends on&quot; bugs on all needed dependencies, I just add this bug number to the updates.

I&apos;m leaving for a long holiday, resetting &quot;assigned to&quot; to the package maintainer. You might want to request acl if you need this fixed soon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9972960</commentid>
    <comment_count>21</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-09 16:58:41 -0500</bug_when>
    <thetext>nodejs-figures-1.7.0-2.fc24.1 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-c2029d59f3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9974248</commentid>
    <comment_count>22</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-10 22:57:40 -0500</bug_when>
    <thetext>nodejs-figures-1.7.0-2.fc24.1 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-c2029d59f3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9975024</commentid>
    <comment_count>23</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-11 16:47:46 -0500</bug_when>
    <thetext>nodejs-grunt-legacy-util-1.0.0-1.fc24 nodejs-grunt-legacy-log-utils-1.0.0-1.fc24 nodejs-grunt-legacy-log-1.0.0-1.fc24 nodejs-grunt-cli-1.2.0-1.fc24 nodejs-grunt-init-0.3.2-4.fc24 nodejs-grunt-git-authors-1.2.0-6.fc24 nodejs-grunt-1.0.1-1.fc24 nodejs-grunt-contrib-uglify-0.11.1-4.fc24 nodejs-grunt-contrib-cssmin-0.14.0-4.fc24 nodejs-maxmin-2.1.0-1.fc24 nodejs-gzip-size-3.0.0-1.fc24 nodejs-pretty-bytes-3.0.1-1.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-66eba7d6c7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9975027</commentid>
    <comment_count>24</comment_count>
    <who name="Piotr Popieluch">piotr1212</who>
    <bug_when>2016-12-11 16:49:56 -0500</bug_when>
    <thetext>buildroot overrides are created for all needed packages, js-jquery should build now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9979466</commentid>
    <comment_count>25</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-13 00:28:11 -0500</bug_when>
    <thetext>nodejs-grunt-1.0.1-1.fc24, nodejs-grunt-cli-1.2.0-1.fc24, nodejs-grunt-contrib-cssmin-0.14.0-4.fc24, nodejs-grunt-contrib-uglify-0.11.1-4.fc24, nodejs-grunt-git-authors-1.2.0-6.fc24, nodejs-grunt-init-0.3.2-4.fc24, nodejs-grunt-legacy-log-1.0.0-1.fc24, nodejs-grunt-legacy-log-utils-1.0.0-1.fc24, nodejs-grunt-legacy-util-1.0.0-1.fc24, nodejs-gzip-size-3.0.0-1.fc24, nodejs-maxmin-2.1.0-1.fc24, nodejs-pretty-bytes-3.0.1-1.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-66eba7d6c7</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10000434</commentid>
    <comment_count>26</comment_count>
    <who name="Christopher Tubbs">ctubbsii</who>
    <bug_when>2016-12-19 19:58:06 -0500</bug_when>
    <thetext>+1 Looks like these overrides work. Can&apos;t give karma, because bodhi is borked for me right now and page won&apos;t load.

But got https://koji.fedoraproject.org/koji/taskinfo?taskID=16976698
and https://koji.fedoraproject.org/koji/taskinfo?taskID=16976720 scratch builds passing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10078816</commentid>
    <comment_count>27</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-19 01:19:45 -0500</bug_when>
    <thetext>nodejs-figures-1.7.0-2.fc24.1 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10078817</commentid>
    <comment_count>28</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-19 01:19:48 -0500</bug_when>
    <thetext>nodejs-grunt-1.0.1-1.fc24, nodejs-grunt-cli-1.2.0-1.fc24, nodejs-grunt-contrib-cssmin-0.14.0-4.fc24, nodejs-grunt-contrib-uglify-0.11.1-4.fc24, nodejs-grunt-git-authors-1.2.0-6.fc24, nodejs-grunt-init-0.3.2-4.fc24, nodejs-grunt-legacy-log-1.0.0-1.fc24, nodejs-grunt-legacy-log-utils-1.0.0-1.fc24, nodejs-grunt-legacy-util-1.0.0-1.fc24, nodejs-gzip-size-3.0.0-1.fc24, nodejs-maxmin-2.1.0-1.fc24, nodejs-pretty-bytes-3.0.1-1.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>