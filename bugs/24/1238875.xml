<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1238875</bug_id>
          
          <creation_ts>2015-07-02 17:00:00 -0400</creation_ts>
          <short_desc>destination dir of backups should use root name instead config name</short_desc>
          <delta_ts>2016-06-22 08:03:00 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>mock</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sergio Monteiro Basto">sergio</reporter>
          <assigned_to name="Miroslav Suchý">msuchy</assigned_to>
          <cc>jdisnard</cc>
    
    
    <cc>mebrown</cc>
    
    
    <cc>msimacek</cc>
    
    
    <cc>msuchy</cc>
    
    
    <cc>praiskup</cc>
    
    
    <cc>williams</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>mock-1.2.18-1</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-06-22 08:03:00</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8403075</commentid>
    <comment_count>0</comment_count>
    <who name="Sergio Monteiro Basto">sergio</who>
    <bug_when>2015-07-02 17:00:39 -0400</bug_when>
    <thetext>attachment 1038453 
backup_dstdir_use_root_name_instead_config_name.patch

Hi,

It an minor improve .

I had use: config_opts[&apos;backup_on_clean&apos;] = True and it was very useful thanks, 

But I can use mock -r fedora-21-x86_64 , 
mock -r fedora-21-x86_64-rpmfusion_free or even default buildroot, when mock make the cleanup, backup dir name use config name i.e. fedora-21-x86_64-rpmfusion_free or fedora-21-x86_64 when the root is the same (fedora-21-x86_64). So I prefer the backup directory use root name instead config named.
It is a very simple patch . 

One motivation of open this bug it is fedora-review which backup things on default and, for me, is more logic that backup things in fedora-rawhide-x86_64 
 
Look at my backup dir, which is not the best optimization : 
ls /var/lib/mock/backup/ -1
default
fedora-20-i386
fedora-20-x86_64
fedora-21-x86_64
fedora-21-x86_64-rpmfusion_free
fedora-21-x86_64-rpmfusion_nonfree
fedora-22-x86_64
fedora-22-x86_64-rpmfusion_free
fedora-rawhide-x86_64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8422097</commentid>
    <comment_count>1</comment_count>
    <who name="Sergio Monteiro Basto">sergio</who>
    <bug_when>2015-07-08 19:11:44 -0400</bug_when>
    <thetext>BTW It was also cool be able to automatically run createrepo on backup results  dir. 

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8784353</commentid>
    <comment_count>2</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2015-11-04 06:14:07 -0500</bug_when>
    <thetext>This message is a reminder that Fedora 21 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 21. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;21&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 21 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8912166</commentid>
    <comment_count>3</comment_count>
      <attachid>1104758</attachid>
    <who name="Sergio Monteiro Basto">sergio</who>
    <bug_when>2015-12-11 13:42:52 -0500</bug_when>
    <thetext>Created attachment 1104758
backup_dstdir_use_root_name_instead_config_name.patch

copy patch to this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9091876</commentid>
    <comment_count>4</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-02-24 08:25:11 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 24 development cycle.
Changing version to &apos;24&apos;.

More information and reason for this action is here:
https://fedoraproject.org/wiki/Fedora_Program_Management/HouseKeeping/Fedora24#Rawhide_Rebase</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9225994</commentid>
    <comment_count>5</comment_count>
    <who name="Miroslav Suchý">msuchy</who>
    <bug_when>2016-04-11 10:26:03 -0400</bug_when>
    <thetext>Commited as:
* 9349944 (HEAD -&gt; devel, origin/devel) Use root name instead config name for backups dir.

Thank you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9440605</commentid>
    <comment_count>6</comment_count>
    <who name="Sergio Monteiro Basto">sergio</who>
    <bug_when>2016-06-22 08:03:00 -0400</bug_when>
    <thetext>Many thanks</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1104758</attachid>
            <date>2015-12-11 13:42:00 -0500</date>
            <delta_ts>2015-12-11 13:42:52 -0500</delta_ts>
            <desc>backup_dstdir_use_root_name_instead_config_name.patch</desc>
            <filename>backup_dstdir_use_root_name_instead_config_name.patch</filename>
            <type>text/plain</type>
            <size>569</size>
            <attacher name="Sergio Monteiro Basto">sergio</attacher>
            
              <data encoding="base64">LS0tIC4vcHkvbW9ja2J1aWxkL2JhY2tlbmQucHkub3JpZwkyMDE1LTA2LTExIDAxOjE3OjUyLjM5
MTEzMjE4MyArMDEwMAorKysgLi9weS9tb2NrYnVpbGQvYmFja2VuZC5weQkyMDE1LTA2LTEzIDIz
OjA1OjUyLjM0MjAyOTA1MyArMDEwMApAQCAtNTUsNyArNTUsNyBAQCBjbGFzcyBDb21tYW5kcyhv
YmplY3QpOgogICAgICAgICBzcmNkaXIgPSBvcy5wYXRoLmpvaW4oc2VsZi5idWlsZHJvb3QuYmFz
ZWRpciwgInJlc3VsdCIpCiAgICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhzcmNkaXIpOgog
ICAgICAgICAgICAgcmV0dXJuCi0gICAgICAgIGRzdGRpciA9IG9zLnBhdGguam9pbihzZWxmLmJh
Y2t1cF9iYXNlX2Rpciwgc2VsZi5jb25maWdfbmFtZSkKKyAgICAgICAgZHN0ZGlyID0gb3MucGF0
aC5qb2luKHNlbGYuYmFja3VwX2Jhc2VfZGlyLCBzZWxmLmNvbmZpZ1sncm9vdCddKQogICAgICAg
ICB1dGlsLm1rZGlySWZBYnNlbnQoZHN0ZGlyKQogICAgICAgICBycG1zID0gZ2xvYi5nbG9iKG9z
LnBhdGguam9pbihzcmNkaXIsICIqcnBtIikpCiAgICAgICAgIGlmIGxlbihycG1zKSA9PSAwOgo=
</data>

          </attachment>
      

    </bug>

</bugzilla>