<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1367892</bug_id>
          
          <creation_ts>2016-08-17 13:49:00 -0400</creation_ts>
          <short_desc>appstream vala / vapi bindings not packaged</short_desc>
          <delta_ts>2016-08-29 14:54:47 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>appstream</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Fabio Valentini">decathorpe</reporter>
          <assigned_to name="Rex Dieter">rdieter</assigned_to>
          <cc>rdieter</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>appstream-0.9.8-3.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-08-29 14:54:47</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9623729</commentid>
    <comment_count>0</comment_count>
    <who name="Fabio Valentini">decathorpe</who>
    <bug_when>2016-08-17 13:49:34 -0400</bug_when>
    <thetext>Description of problem:

appstream-vala package should contain the vapi file as per the RPM spec, but that package is not built (perhaps because it is obsoleted by appstream?), so the vapi file is not available on fedora _at all_.



Version-Release number of selected component (if applicable):

0.9.6


$ sudo dnf provides &apos;/usr/share/vala/vapi/appstream.vapi&apos;
  Error: No Matches found</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9623769</commentid>
    <comment_count>1</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-08-17 13:59:55 -0400</bug_when>
    <thetext>I disabled building it because, well, it didn&apos;t build at one point, and nothing in fedora actually used them.   Maybe it works now, I can try and let you know.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9627020</commentid>
    <comment_count>2</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-08-18 11:39:07 -0400</bug_when>
    <thetext>(Still) failing mysteriously on f25/arm,

Scanning dependencies of target as-test-xmldata
make[2]: Leaving directory &apos;/builddir/build/BUILD/AppStream-0.9.8/armv7hl-redhat-linux-gnueabi&apos;
make -f tests/CMakeFiles/as-test-xmldata.dir/build.make tests/CMakeFiles/as-test-xmldata.dir/build
[ 90%] Generating AppStream-1.0.typelib
cd /builddir/build/BUILD/AppStream-0.9.8/src &amp;&amp; /usr/bin/g-ir-compiler --includedir=/builddir/build/BUILD/AppStream-0.9.8/src --includedir=. /builddir/build/BUILD/AppStream-0.9.8/armv7hl-redhat-linux-gnueabi/src/AppStream-1.0.gir -o /builddir/build/BUILD/AppStream-0.9.8/armv7hl-redhat-linux-gnueabi/src/AppStream-1.0.typelib
error parsing file /builddir/build/BUILD/AppStream-0.9.8/armv7hl-redhat-linux-gnueabi/src/AppStream-1.0.gir: Error on line 632 char 64: Document ended unexpectedly with elements still open - &apos;doc&apos; was the last element opened
src/CMakeFiles/gir-typelibs.dir/build.make:63: recipe for target &apos;src/AppStream-1.0.typelib&apos; failed
make[2]: Leaving directory &apos;/builddir/build/BUILD/AppStream-0.9.8/armv7hl-redhat-linux-gnueabi&apos;
CMakeFiles/Makefile2:198: recipe for target &apos;src/CMakeFiles/gir-typelibs.dir/all&apos; failed
make[2]: *** [src/AppStream-1.0.typelib] Error 1
make[1]: *** [src/CMakeFiles/gir-typelibs.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9627023</commentid>
    <comment_count>3</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-08-18 11:39:40 -0400</bug_when>
    <thetext>Full build/logs, etc:
https://koji.fedoraproject.org/koji/taskinfo?taskID=15288380</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9627919</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-08-18 14:27:03 -0400</bug_when>
    <thetext>appstream-0.9.8-3.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-d3de5c7e1e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9628301</commentid>
    <comment_count>5</comment_count>
    <who name="Fabio Valentini">decathorpe</who>
    <bug_when>2016-08-18 16:36:03 -0400</bug_when>
    <thetext>That f25/arm build failure looks weird, yes. Like somehow, the produced XML file is not valid XML ...

Looking at the logs, it seems the g-ir-scanner invocation for generating the .gir file is ran TWICE in parallel (build.log lines 554,555,556,557) with the same output file, maybe that screws the file up?

It may be a race condition in the parallel build (CMake makes g-ir-scanner run twice? why?) that only happens on arm, because even though the exact same g-ir-scanner command is run twice on every platform, e.g. x86_64 the command is executed one after the other - not so on arm, it seems.

But honestly, I&apos;m just guessing there ;-)

But my problem (this bug) seems to be fixed either way, just waiting for the build to hit updates-testing. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9632156</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-08-19 19:21:52 -0400</bug_when>
    <thetext>appstream-0.9.8-3.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-d3de5c7e1e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9660569</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-08-29 14:54:45 -0400</bug_when>
    <thetext>appstream-0.9.8-3.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>