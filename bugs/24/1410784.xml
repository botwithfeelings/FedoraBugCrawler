<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1410784</bug_id>
          
          <creation_ts>2017-01-06 08:45:00 -0500</creation_ts>
          <short_desc>golang-1.6.3-3.fc24 (and newer) is FTBFS due &quot;nosplit stack overflow&quot;</short_desc>
          <delta_ts>2017-01-28 19:49:36 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>golang</component>
          <version>24</version>
          <rep_platform>ppc64</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1071880</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Dan Horák">dan</reporter>
          <assigned_to name="Jakub Čajka">jcajka</assigned_to>
          <cc>admiller</cc>
    
    
    <cc>amurdaca</cc>
    
    
    <cc>golang-updates</cc>
    
    
    <cc>hannsj_uhl</cc>
    
    
    <cc>jcajka</cc>
    
    
    <cc>lemenkov</cc>
    
    
    <cc>renich</cc>
    
    
    <cc>s</cc>
    
    
    <cc>vbatts</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>golang-1.6.4-3.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-01-28 19:49:36</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10040621</commentid>
    <comment_count>0</comment_count>
    <who name="Dan Horák">dan</who>
    <bug_when>2017-01-06 08:45:52 -0500</bug_when>
    <thetext>golang-1.6.3-3.fc24 (and newer) fails to build on both ppc64 and ppc64le due 

...
go/build
cmd/go
runtime.typedslicecopy: nosplit stack overflow
	592	assumed on entry to runtime.typedslicecopy (nosplit)
	432	after runtime.typedslicecopy (nosplit) uses 160
	352	after runtime.cgoCheckSliceCopy (nosplit) uses 80
	144	after runtime.cgoCheckTypedBlock (nosplit) uses 208
	72	after runtime.cgoCheckBits (nosplit) uses 72
	24	after runtime.cgoIsGoPointer (nosplit) uses 48
	-8	after runtime.inHeapOrStack (nosplit) uses 32
go tool dist: FAILED: /builddir/build/BUILD/go/pkg/tool/linux_ppc64le/link -o /builddir/build/BUILD/go/pkg/tool/linux_ppc64le/go_bootstrap /tmp/go-tool-dist-971988281/cmd/go/_go_.a: exit status 2
RPM build errors:
...

for full logs please eg. https://ppc.koji.fedoraproject.org/koji/taskinfo?taskID=3902379

Seems to coincide with http://pkgs.fedoraproject.org/cgit/rpms/golang.git/commit/?h=f24&amp;id=7e3e63c06c2964ddda1a7c801798eeabe1762ac5

Version-Release number of selected component (if applicable):
golang-1.6.3-3.fc24</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10079732</commentid>
    <comment_count>1</comment_count>
    <who name="Jakub Čajka">jcajka</who>
    <bug_when>2017-01-19 06:37:36 -0500</bug_when>
    <thetext>I have looked in to it and as fix I have made the patch(introduced in 	7e3e63c06c2964ddda1a7c801798eeabe1762ac5) not apply(as there are no significant benefits of it) on ppc64(le), as it slightly increases stack usage resulting in nosplit stack overflow there. Build on the way.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10083484</commentid>
    <comment_count>2</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-20 08:26:14 -0500</bug_when>
    <thetext>golang-1.6.4-3.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2017-94fa02d028</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10084771</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-20 14:21:56 -0500</bug_when>
    <thetext>golang-1.6.4-3.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-94fa02d028</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10103897</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-01-28 19:49:36 -0500</bug_when>
    <thetext>golang-1.6.4-3.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>