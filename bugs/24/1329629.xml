<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1329629</bug_id>
          
          <creation_ts>2016-04-22 08:15:00 -0400</creation_ts>
          <short_desc>Missing dependencies: &quot;ImportError: No module named yum&quot;</short_desc>
          <delta_ts>2017-02-22 20:05:07 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>fedora-easy-karma</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1304355</dependson>
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Christian Stadelmann">rhbz2</reporter>
          <assigned_to name="Till Maas">opensource</assigned_to>
          <cc>em3rson</cc>
    
    
    <cc>junk</cc>
    
    
    <cc>opensource</cc>
    
    
    <cc>pavel.raur.pr</cc>
    
    
    <cc>thebigguy.co.uk</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>fedora-easy-karma-0-0.28.20150921gitc932687a.fc23</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-09-21 16:23:24</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9260696</commentid>
    <comment_count>0</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-04-22 08:15:21 -0400</bug_when>
    <thetext>Description of problem:
fedora-easy-karma fails to start by default.

Version-Release number of selected component (if applicable):
fedora-easy-karma-0-0.28.20150921gitc932687a.fc24.noarch
Same on Fedora 23 Build 10 iso and Fedora 24 Alpha Build 7 iso.

How reproducible:
always â€“ packaging issue

Steps to Reproduce:
1. install fedora-easy-karma
2. try to run it

Actual results:
It fails to run. Traceback:

$ fedora-easy-karma 
Traceback (most recent call last):
  File &quot;/usr/bin/fedora-easy-karma&quot;, line 47, in &lt;module&gt;
    import yum
ImportError: No module named yum

Expected results:
Run. This might require some dependencies. Doesn&apos;t RPM provide OR dependencies?

If you don&apos;t want to pull in these dependencies, please add some code handling missing these and suggesting how to fix it. This is not perfect in terms of user experience, but it is doable and better than always crashing.

Additional info:
This is related to bug #1270600 and a duplicate imho, but in https://bugzilla.redhat.com/show_bug.cgi?id=1270600#c21 it was suggested that I open a new issue. It might be a good suggestion to keep this discussion on a technical level though.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9260725</commentid>
    <comment_count>1</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-04-22 08:24:39 -0400</bug_when>
    <thetext>An alternative solution would be to port f-e-k to run on both python2 and python3 and run with python3 by default on Fedora 23+, where python3-dnf is installed but python2-dnf is not. Fedora 23+, dnf is the default and thus f-e-k should depend on python3-dnf.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9262504</commentid>
    <comment_count>2</comment_count>
    <who name="Till Maas">opensource</who>
    <bug_when>2016-04-23 02:59:46 -0400</bug_when>
    <thetext>1) I cannot use rich dependencies (OR dependencies), because the tools used to compose Fedora do not support them right now, but this would be the ideal solution I guess
2) Porting to python3 is not possible as long as python-fedora is not available for python3

How did you install f-e-k? AFAIK in the default setting, dnf should install python2-dnf with the recent update, because it is recommended now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9262548</commentid>
    <comment_count>3</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-04-23 05:55:58 -0400</bug_when>
    <thetext>(In reply to Till Maas from comment #2)
&gt; 1) I cannot use rich dependencies (OR dependencies), because the tools used
&gt; to compose Fedora do not support them right now, but this would be the ideal
&gt; solution I guess

Yeah, that&apos;s bad circumstances.

&gt; 2) Porting to python3 is not possible as long as python-fedora is not
&gt; available for python3

Actually, it is: The package is called `python3-fedora`.

`fedora-cert` isn&apos;t ported to python3 BUT it&apos;s just 74 lines of text (~50 lines of code). And it depends on pyOpenSSL, which is available for python3 (python3-pyOpenSSL) and python-pycurl, which is available for python3 (python3-pycurl). It looks doable as long as one is able to reach the packager of `fedora-cert`.


(In reply to Till Maas from comment #2)
&gt; 
&gt; How did you install f-e-k? AFAIK in the default setting, dnf should install
&gt; python2-dnf with the recent update, because it is recommended now.

I just ran `dnf install fedora-easy-karma` and got a broken installation. As written above I also tested live isos, which also resulted in broken systems.

I don&apos;t see how python2-dnf should be pulled in. The spec file [1] just

Recommends:     python2-dnf

. As the packaging guidelines [2] specify, weak dependencies are ignored by default by dnf. This is why f-e-k doesn&apos;t pull in python2-dnf.

[1] https://pkgs.fedoraproject.org/cgit/rpms/fedora-easy-karma.git/tree/fedora-easy-karma.spec?h=f24
[2] https://fedoraproject.org/wiki/Packaging:WeakDependencies</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9262551</commentid>
    <comment_count>4</comment_count>
    <who name="Till Maas">opensource</who>
    <bug_when>2016-04-23 06:31:18 -0400</bug_when>
    <thetext>(In reply to Christian Stadelmann from comment #3)
&gt; (In reply to Till Maas from comment #2)

&gt; &gt; 2) Porting to python3 is not possible as long as python-fedora is not
&gt; &gt; available for python3
&gt; 
&gt; Actually, it is: The package is called `python3-fedora`.
&gt; 
&gt; `fedora-cert` isn&apos;t ported to python3 BUT it&apos;s just 74 lines of text (~50
&gt; lines of code). And it depends on pyOpenSSL, which is available for python3
&gt; (python3-pyOpenSSL) and python-pycurl, which is available for python3
&gt; (python3-pycurl). It looks doable as long as one is able to reach the
&gt; packager of `fedora-cert`.

Thank your for researching this. Would you able to create a patch to make fedora-cert python3 ready?

&gt; (In reply to Till Maas from comment #2)
&gt; &gt; 
&gt; &gt; How did you install f-e-k? AFAIK in the default setting, dnf should install
&gt; &gt; python2-dnf with the recent update, because it is recommended now.
&gt; 
&gt; I just ran `dnf install fedora-easy-karma` and got a broken installation. As
&gt; written above I also tested live isos, which also resulted in broken systems.
&gt; 
&gt; I don&apos;t see how python2-dnf should be pulled in. The spec file [1] just
&gt; 
&gt; Recommends:     python2-dnf
&gt; 
&gt; . As the packaging guidelines [2] specify, weak dependencies are ignored by
&gt; default by dnf. This is why f-e-k doesn&apos;t pull in python2-dnf.

I understand the guidelines differently:

| Weak dependencies are by default treated similarly to regular Requires:. 
| Matching packages are added to the dnf transaction. If adding the package
| would lead to an error dnf will by default ignore the dependency.

For me this sounds like python2-dnf should be installed by default. If it was a &quot;Hint:&quot; dependency, then it would be ignored. Is there maybe a bug in dnf?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9262560</commentid>
    <comment_count>5</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-04-23 07:25:16 -0400</bug_when>
    <thetext>(In reply to Till Maas from comment #4)
&gt; Thank your for researching this. Would you able to create a patch to
&gt; make fedora-cert python3 ready?

I&apos;ll try.

&gt; (In reply to Christian Stadelmann from comment #3)
&gt; &gt; As the packaging guidelines [2] specify, weak dependencies are ignored by
&gt; &gt; default by dnf. This is why f-e-k doesn&apos;t pull in python2-dnf.
&gt; 
&gt; I understand the guidelines differently:
&gt; 
&gt; | Weak dependencies are by default treated similarly to regular Requires:. 
&gt; | Matching packages are added to the dnf transaction. If adding the package
&gt; | would lead to an error dnf will by default ignore the dependency.
&gt; 
&gt; For me this sounds like python2-dnf should be installed by default. If it
&gt; was a &quot;Hint:&quot; dependency, then it would be ignored. Is there maybe a bug in
&gt; dnf?

Same document:

| Weak dependencies may only be used in a package if the package still functions without the dependency present.

So the packaging of f-e-k is wrong. But that hopefully won&apos;t matter with the python3-dnf stuff.

Yes, looks like a bug in dnf. I&apos;ve reported it as bug #1329805.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9332325</commentid>
    <comment_count>6</comment_count>
    <who name="pavel raur">pavel.raur.pr</who>
    <bug_when>2016-05-17 03:47:44 -0400</bug_when>
    <thetext>Bug is still unsolved.

I&apos;m using the same version of fedora-easy-karma.
fedora-easy-karma-0-0.28.20150921gitc932687a.fc24.noarch

bug:
File &quot;/usr/bin/fedora-easy-karma&quot;, line 47, in &lt;module&gt;
    import yum
ImportError: No module named yum</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9528795</commentid>
    <comment_count>7</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-07-19 16:00:26 -0400</bug_when>
    <thetext>(In reply to Christian Stadelmann from comment #5)
&gt; (In reply to Till Maas from comment #4)
&gt; &gt; Thank your for researching this. Would you able to create a patch to
&gt; &gt; make fedora-cert python3 ready?
&gt; 
&gt; I&apos;ll try.

Sorry, I can&apos;t. I don&apos;t know enough about python to fix this.

Yes, issue is still present on Fedora 24.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9591261</commentid>
    <comment_count>8</comment_count>
    <who name="Till Maas">opensource</who>
    <bug_when>2016-08-07 10:49:00 -0400</bug_when>
    <thetext>*** Bug 1270600 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9591279</commentid>
    <comment_count>9</comment_count>
    <who name="Raphael Groner">projects.rg</who>
    <bug_when>2016-08-07 11:32:41 -0400</bug_when>
    <thetext>Again: It works for me with &apos;dnf install python2-dnf&apos;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9600946</commentid>
    <comment_count>10</comment_count>
    <who name="Emerson Santos">em3rson</who>
    <bug_when>2016-08-09 22:02:50 -0400</bug_when>
    <thetext>(In reply to Raphael Groner from comment #9)
&gt; Again: It works for me with &apos;dnf install python2-dnf&apos;.

For me too</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9721572</commentid>
    <comment_count>11</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-09-19 10:01:58 -0400</bug_when>
    <thetext>(In reply to Emerson Santos from comment #10)
&gt; (In reply to Raphael Groner from comment #9)
&gt; &gt; Again: It works for me with &apos;dnf install python2-dnf&apos;.

That&apos;s not a fix. If f-e-k doesn&apos;t pull in the dependency itself it has a broken .spec file.

Since weak dependencies have landed in F24 repositories now it works fine for me and f-e-k is pulling in python2-dnf correctly. Technically, this solution is still not correct because python2-dnf is just recommended, but not required. But that should be no problem to most users. If you don&apos;t care about correctness but just about &quot;it works&quot;, feel free to close this bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9722720</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-19 16:09:09 -0400</bug_when>
    <thetext>fedora-easy-karma-0-0.28.20150921gitc932687a.fc23 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2016-a1ad1a4378</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9731592</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-21 16:23:24 -0400</bug_when>
    <thetext>fedora-easy-karma-0-0.28.20150921gitc932687a.fc23 has been pushed to the Fedora 23 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10176679</commentid>
    <comment_count>14</comment_count>
    <who name="Guy Taylor">thebigguy.co.uk</who>
    <bug_when>2017-02-22 19:37:59 -0500</bug_when>
    <thetext>*** Bug 1425272 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10176751</commentid>
    <comment_count>15</comment_count>
      <attachid>1256753</attachid>
    <who name="Guy Taylor">thebigguy.co.uk</who>
    <bug_when>2017-02-22 20:05:07 -0500</bug_when>
    <thetext>Created attachment 1256753
Provide a helpful message to install python2-dnf

On Fedora 25 I ran into this issue. Installing the &quot;fedora-easy-karma&quot; package via DNF lead to a broken install until a manual install of python2-dnf.

I would suggest something along the lines of this patch to help aid users.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1256753</attachid>
            <date>2017-02-22 20:05:00 -0500</date>
            <delta_ts>2017-02-22 20:05:07 -0500</delta_ts>
            <desc>Provide a helpful message to install python2-dnf</desc>
            <filename>0001-Show-message-when-neither-dnf-or-yum-can-be-found.patch</filename>
            <type>text/plain</type>
            <size>997</size>
            <attacher name="Guy Taylor">thebigguy.co.uk</attacher>
            
              <data encoding="base64">RnJvbSAyNzg2YWZlY2FiMDNlMjEyZmMyZDNjZDIzOGRhMTU2YjBkM2ZjYTFjIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBHdXkgVGF5bG9yIDx0aGViaWdndXkuY28udWtAZ21haWwuY29t
PgpEYXRlOiBUaHUsIDIzIEZlYiAyMDE3IDEzOjU4OjExICsxMzAwClN1YmplY3Q6IFtQQVRDSF0g
U2hvdyBtZXNzYWdlIHdoZW4gbmVpdGhlciBkbmYgb3IgeXVtIGNhbiBiZSBmb3VuZAoKUHJvdmlk
ZSBhIGhlbHBmdWwgbWVzc2FnZSB0byBpbnN0YWxsIHB5dGhvbjItZG5mLiBUaGlzIGlzIHJlcXVp
cmVkIGFzCnRoZSBSUE0gc3BlYyBjYW4gbm90IGNvcnJlY3RseSBtb2RlbCB0aGUgZGVwZW5kZWNp
ZXMuCi0tLQogZmVkb3JhLWVhc3kta2FybWEucHkgfCA2ICsrKysrLQogMSBmaWxlIGNoYW5nZWQs
IDUgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQoKZGlmZiAtLWdpdCBhL2ZlZG9yYS1lYXN5
LWthcm1hLnB5IGIvZmVkb3JhLWVhc3kta2FybWEucHkKaW5kZXggYjRhMDdiNi4uZjY1Nzk2NCAx
MDA3NTUKLS0tIGEvZmVkb3JhLWVhc3kta2FybWEucHkKKysrIGIvZmVkb3JhLWVhc3kta2FybWEu
cHkKQEAgLTQ1LDcgKzQ1LDExIEBAIHRyeToKICAgICBpbXBvcnQgZG5mCiBleGNlcHQgSW1wb3J0
RXJyb3I6CiAgICAgZG5mID0gTm9uZQotICAgIGltcG9ydCB5dW0KKyAgICB0cnk6CisgICAgICAg
IGltcG9ydCB5dW0KKyAgICBleGNlcHQgSW1wb3J0RXJyb3IgYXMgaW1wb3J0X2Vycm9yOgorICAg
ICAgICBwcmludCA+PiBzeXMuc3RkZXJyLCAiUGxlYXNlIGluc3RhbGwgcHl0aG9uMi1kbmYgKGUu
Zy4gJ2RuZiBpbnN0YWxsIHB5dGhvbjItZG5mJylcblx0U2VlIGh0dHBzOi8vYnVnemlsbGEucmVk
aGF0LmNvbS9zaG93X2J1Zy5jZ2k/aWQ9MTMyOTYyOSBmb3IgbW9yZSBpbmZvcm1hdGlvbiIKKyAg
ICAgICAgcmFpc2UgaW1wb3J0X2Vycm9yCiAKIGZyb20gZmVkb3JhLmNsaWVudC5ib2RoaSBpbXBv
cnQgQm9kaGlDbGllbnQKIAotLSAKMi45LjMKCg==
</data>

          </attachment>
      

    </bug>

</bugzilla>