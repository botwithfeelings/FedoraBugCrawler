<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1375415</bug_id>
          
          <creation_ts>2016-09-12 23:53:00 -0400</creation_ts>
          <short_desc>pmlogger_check failed due to /etc/pcp/pmlogger/control.d/local.rpmsave</short_desc>
          <delta_ts>2016-10-25 20:58:09 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>pcp</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Mark Goodwin">mgoodwin</reporter>
          <assigned_to name="Nathan Scott">nathans</assigned_to>
          <cc>brolley</cc>
    
    
    <cc>fche</cc>
    
    
    <cc>lberk</cc>
    
    
    <cc>mgoodwin</cc>
    
    
    <cc>nathans</cc>
    
    
    <cc>nkshirsa</cc>
    
    
    <cc>pcp</cc>
    
    
    <cc>scox</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>3.11.5-1 pcp-3.11.5-1.el5 pcp-3.11.5-1.fc24 pcp-3.11.5-1.fc23 pcp-3.11.5-1.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-10-25 12:16:53</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9701140</commentid>
    <comment_count>0</comment_count>
    <who name="Mark Goodwin">mgoodwin</who>
    <bug_when>2016-09-12 23:53:33 -0400</bug_when>
    <thetext>Description of problem: &quot;pmlogger_check failed&quot; messages in syslog because there are multiple primary logger control files in /etc/pcp/pmlogger/control.d. Presumably the .rpmsave version was left over after an upgrade because it had been modified (I appended -t 30s some time in the past). These files probably should be marked %config(noreplace) in the spec I guess, but after an upgrade we&apos;d end up with local.rpmnew, which would have the same problem.

Version-Release number of selected component (if applicable): 3.11.5-1 (not yet released)

$ grep LOCALHOSTNAME /etc/pcp/pmlogger/control.d/*
/etc/pcp/pmlogger/control.d/local:LOCALHOSTNAME	y   n	PCP_LOG_DIR/pmlogger/LOCALHOSTNAME	-r -T24h10m -c config.default
/etc/pcp/pmlogger/control.d/local.rpmsave:LOCALHOSTNAME	y   n	PCP_LOG_DIR/pmlogger/LOCALHOSTNAME	-r -T24h10m -c config.default -t 30s</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9701144</commentid>
    <comment_count>1</comment_count>
    <who name="Mark Goodwin">mgoodwin</who>
    <bug_when>2016-09-12 23:58:31 -0400</bug_when>
    <thetext>$ cat /var/log/pcp/pmlogger/pmlogger_check.log
Restarting primary pmlogger for host &quot;local:&quot; ... process exited!
pmlogger_check: Error: failed to restart pmlogger
Current pmlogger processes:
UID        PID  PPID  C STIME TTY          TIME CMD

Contents of pmlogger output file &quot;pmlogger.log&quot; ...
Log for pmlogger on kilcunda started Tue Sep 13 13:55:05 2016
... trimmed ...
Log finished Tue Sep 13 13:55:05 2016
pmlogger_check: [/etc/pcp/pmlogger/control.d/local.rpmsave:3]
Error: Cannot start more than one pmlogger instance for archive directory &quot;/var/log/pcp/pmlogger/kilcunda&quot;
... logging for host &quot;local:&quot; unchanged</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9701155</commentid>
    <comment_count>2</comment_count>
    <who name="Nathan Scott">nathans</who>
    <bug_when>2016-09-13 00:08:55 -0400</bug_when>
    <thetext>Yeah, I think this is mainly just something that has to be watched for during an RPM upgrade ... but, perhaps we could also ignore any files suffixed with .rpmsave or .rpmnew in that subdirectory?

cheers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9701499</commentid>
    <comment_count>3</comment_count>
    <who name="Mark Goodwin">mgoodwin</who>
    <bug_when>2016-09-13 03:07:11 -0400</bug_when>
    <thetext>Ignore them, but also warn. We could also have a %postin script that checks and warns too.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9709852</commentid>
    <comment_count>6</comment_count>
    <who name="Mark Goodwin">mgoodwin</who>
    <bug_when>2016-09-15 02:14:41 -0400</bug_when>
    <thetext>fixed in upstream commit ba1355032bfdc91bfabc39d3a2255015fa92ccb9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9748201</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-27 16:22:00 -0400</bug_when>
    <thetext>pcp-3.11.5-1.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-8d14b648a5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9749145</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-28 01:56:58 -0400</bug_when>
    <thetext>pcp-3.11.5-1.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-ca5c041e73</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9749214</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-28 02:25:26 -0400</bug_when>
    <thetext>pcp-3.11.5-1.fc23 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-b32e6fdc78</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9751867</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-28 21:16:09 -0400</bug_when>
    <thetext>pcp-3.11.5-1.el5 has been pushed to the Fedora EPEL 5 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-EPEL-2016-63742f1d5b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9820325</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-25 12:16:53 -0400</bug_when>
    <thetext>pcp-3.11.5-1.el5 has been pushed to the Fedora EPEL 5 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9820932</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-25 16:21:40 -0400</bug_when>
    <thetext>pcp-3.11.5-1.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9821264</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-25 19:50:48 -0400</bug_when>
    <thetext>pcp-3.11.5-1.fc23 has been pushed to the Fedora 23 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9821379</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-25 20:58:09 -0400</bug_when>
    <thetext>pcp-3.11.5-1.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>