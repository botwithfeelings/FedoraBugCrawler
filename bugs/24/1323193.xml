<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1323193</bug_id>
          
          <creation_ts>2016-04-01 09:40:00 -0400</creation_ts>
          <short_desc>FTBFS on secondary arches due liblfds</short_desc>
          <delta_ts>2016-04-18 13:26:46 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>389-ds-base</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard>AcceptedFreezeException</status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>467765</blocked>
    
    
    <blocked>1071880</blocked>
    
    
    <blocked>1230434</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Dan Hor치k">dan</reporter>
          <assigned_to name="Rich Megginson">rmeggins</assigned_to>
          <cc>dan</cc>
    
    
    <cc>dgilmore</cc>
    
    
    <cc>edewata</cc>
    
    
    <cc>kparal</cc>
    
    
    <cc>mreynolds</cc>
    
    
    <cc>nhosoi</cc>
    
    
    <cc>nkinder</cc>
    
    
    <cc>pbrobinson</cc>
    
    
    <cc>rmeggins</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>389-ds-base-1.3.5.1-3.fc24</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-04-18 13:26:46</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9200069</commentid>
    <comment_count>0</comment_count>
    <who name="Dan Hor치k">dan</who>
    <bug_when>2016-04-01 09:40:54 -0400</bug_when>
    <thetext>389-ds-base fails to build on secondary arches since version 1.3.5 because liblfds is crippled to know only x86 and arm architectures in liblfds.h

The result can be seen eg. in http://s390.koji.fedoraproject.org/koji/taskinfo?taskID=2174346

...
gcc -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -march=z9-109 -mtune=z10  -c -fpic -Wno-unknown-pragmas -std=c99 -I&quot;src&quot; -I&quot;inc&quot;  -o obj/queue_query.o src/queue/queue_query.c
In file included from src/liblfds_internal.h:2:0,
                 from src/queue/queue_internal.h:2,
                 from src/queue/queue_new.c:1:
inc/liblfds.h:124:5: error: unknown type name &apos;atom_t&apos;
     atom_t
     ^~~~~~
inc/liblfds.h:131:37: error: unknown type name &apos;size_t&apos;
   void *abstraction_aligned_malloc( size_t size, size_t align_in_bytes );
                                     ^~~~~~
...



Version-Release number of selected component (if applicable):
389-ds-base-1.3.5.1-2.fc24</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9225018</commentid>
    <comment_count>1</comment_count>
    <who name="Fedora Blocker Bugs Application">blockerbugs</who>
    <bug_when>2016-04-11 07:11:11 -0400</bug_when>
    <thetext>Proposed as a Freeze Exception for 24-beta by Fedora user pbrobinson using the blocker tracking app because:

 389-ds-base is a core dependency of FreeIPA which is part of the Server edition. 3.5.x is FTBFS on secondary architectures which is a regression over previous releases and blocks FreeIPA for all secondary architectures.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9226614</commentid>
    <comment_count>2</comment_count>
    <who name="Rich Megginson">rmeggins</who>
    <bug_when>2016-04-11 13:18:14 -0400</bug_when>
    <thetext>Upstream ticket:
https://fedorahosted.org/389/ticket/48789</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9227140</commentid>
    <comment_count>3</comment_count>
    <who name="Noriko Hosoi">nhosoi</who>
    <bug_when>2016-04-11 16:38:40 -0400</bug_when>
    <thetext>I found a regression in the 1.3.5 389-ds-base spec file.

I fixed it and rebuilt 389-ds-base-1.3.5.1-3.fc24 for i636, x86_64 and armv7hl.

Could you please try the latest spec file?  Or if you could tell me how to build it, e.g, on s390, I will do it myself.  Thank you.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9227172</commentid>
    <comment_count>4</comment_count>
    <who name="Dan Hor치k">dan</who>
    <bug_when>2016-04-11 16:52:08 -0400</bug_when>
    <thetext>Hi, any packager can submit scratch builds to secondary kojis with
${arch}-koji build --scratch f24 389-ds-base.src.rpm
where arch is arm (for aarch64), ppc (for ppc64 and ppc64le), s390 (s390 + s390x).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9227216</commentid>
    <comment_count>5</comment_count>
    <who name="Peter Robinson">pbrobinson</who>
    <bug_when>2016-04-11 17:06:14 -0400</bug_when>
    <thetext>Scratch for all:

http://arm.koji.fedoraproject.org/koji/taskinfo?taskID=3500015
http://ppc.koji.fedoraproject.org/koji/taskinfo?taskID=3294476
http://s390.koji.fedoraproject.org/koji/taskinfo?taskID=2181084</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9227235</commentid>
    <comment_count>6</comment_count>
    <who name="Peter Robinson">pbrobinson</who>
    <bug_when>2016-04-11 17:17:27 -0400</bug_when>
    <thetext>(In reply to Noriko Hosoi from comment #3)
&gt; I found a regression in the 1.3.5 389-ds-base spec file.

So the scratch builds completed. Please submit as a F-24 update. Thanks for the fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9227237</commentid>
    <comment_count>7</comment_count>
    <who name="Noriko Hosoi">nhosoi</who>
    <bug_when>2016-04-11 17:18:47 -0400</bug_when>
    <thetext>Thank YOU for testing so quickly.  (my scratch build on s390 is still running... :)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9230702</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-04-12 15:31:08 -0400</bug_when>
    <thetext>389-ds-base-1.3.5.1-3.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-11b8fcbecb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9234797</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-04-13 17:24:11 -0400</bug_when>
    <thetext>389-ds-base-1.3.5.1-3.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-11b8fcbecb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9247854</commentid>
    <comment_count>10</comment_count>
    <who name="Kamil P치ral">kparal</who>
    <bug_when>2016-04-18 12:48:56 -0400</bug_when>
    <thetext>Discussed at today&apos;s blocker review meeting [1]. Voted as AcceptedFreezeException (Beta) - FreeIPA is a core part of the Server flavor, and this bug prevents its inclusion in secondary-arch images. issues that seriously affect the compose of secondary arch deliverables generally qualify for FE status.

[1] https://meetbot-raw.fedoraproject.org/fedora-blocker-review/2016-04-18</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9247975</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-04-18 13:26:43 -0400</bug_when>
    <thetext>389-ds-base-1.3.5.1-3.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>