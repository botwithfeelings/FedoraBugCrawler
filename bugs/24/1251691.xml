<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1251691</bug_id>
          
          <creation_ts>2015-08-08 15:50:00 -0400</creation_ts>
          <short_desc>ifup-ipsec causes invalid ICMP redirects</short_desc>
          <delta_ts>2016-05-14 23:04:11 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>ipsec-tools</component>
          <version>24</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>low</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kaarle Ritvanen">kaarle.ritvanen</reporter>
          <assigned_to name="Paul Wouters">pwouters</assigned_to>
          <cc>pwouters</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>ipsec-tools-0.8.2-5.fc24 ipsec-tools-0.8.2-5.el7 ipsec-tools-0.8.2-2.el6</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-05-07 07:46:41</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8523077</commentid>
    <comment_count>0</comment_count>
      <attachid>1060657</attachid>
    <who name="Kaarle Ritvanen">kaarle.ritvanen</who>
    <bug_when>2015-08-08 15:50:52 -0400</bug_when>
    <thetext>Created attachment 1060657
Suggested correction

Description of problem:
The ifup-ipsec script creates a routing table entry for tunnel mode interfaces, apparently in order to set the source address for packets originating from the gateway. When a host in the local network sends an IPv4 packet destined to the remote network, the gateway sends an ICMP redirect message instructing the sender to send directly to the destination rather than via the gateway. Some devices, such as Android devices, still update their routing tables upon reception of ICMP redirects.

Version-Release number of selected component (if applicable):
0.8.2-1.fc21

How reproducible:
Configure a tunnel mode IPsec interface and send IPv4 packets from an Android device to the remote network.

Actual results:
After a few packets, the Android device stops routing the packets via the gateway and starts sending ARP requests instead.

Expected results:
All packets get routed via the IPsec gateway and no ICMP redirects are sent for the tunnel-bound packets.

Additional info:
The suggested correction is to disable the sending of ICMP redirects on the local network&apos;s interface.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8783993</commentid>
    <comment_count>1</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2015-11-04 05:55:23 -0500</bug_when>
    <thetext>This message is a reminder that Fedora 21 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 21. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;21&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 21 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9094446</commentid>
    <comment_count>2</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-02-24 10:41:44 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 24 development cycle.
Changing version to &apos;24&apos;.

More information and reason for this action is here:
https://fedoraproject.org/wiki/Fedora_Program_Management/HouseKeeping/Fedora24#Rawhide_Rebase</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9277400</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-04-28 12:05:07 -0400</bug_when>
    <thetext>ipsec-tools-0.8.2-5.el7 has been submitted as an update to Fedora EPEL 7. https://bodhi.fedoraproject.org/updates/FEDORA-EPEL-2016-6228d73c0f</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9277401</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-04-28 12:05:25 -0400</bug_when>
    <thetext>ipsec-tools-0.8.2-5.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-7ac82a71af</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9277404</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-04-28 12:05:43 -0400</bug_when>
    <thetext>ipsec-tools-0.8.2-5.fc23 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2016-fdef5ed672</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9277406</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-04-28 12:06:01 -0400</bug_when>
    <thetext>ipsec-tools-0.8.2-5.fc22 has been submitted as an update to Fedora 22. https://bodhi.fedoraproject.org/updates/FEDORA-2016-77364fcd0c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9277470</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-04-28 12:27:28 -0400</bug_when>
    <thetext>ipsec-tools-0.8.2-2.el6 has been submitted as an update to Fedora EPEL 6. https://bodhi.fedoraproject.org/updates/FEDORA-EPEL-2016-24b869cc40</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9278410</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-04-28 18:20:32 -0400</bug_when>
    <thetext>ipsec-tools-0.8.2-2.el6 has been pushed to the Fedora EPEL 6 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-EPEL-2016-24b869cc40</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9278418</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-04-28 18:22:54 -0400</bug_when>
    <thetext>ipsec-tools-0.8.2-5.el7 has been pushed to the Fedora EPEL 7 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-EPEL-2016-6228d73c0f</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9278455</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-04-28 18:52:58 -0400</bug_when>
    <thetext>ipsec-tools-0.8.2-5.fc22 has been pushed to the Fedora 22 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-77364fcd0c</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9278468</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-04-28 18:54:40 -0400</bug_when>
    <thetext>ipsec-tools-0.8.2-5.fc23 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-fdef5ed672</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9280761</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-04-29 13:22:25 -0400</bug_when>
    <thetext>ipsec-tools-0.8.2-5.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-7ac82a71af</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9301269</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-05-07 07:46:39 -0400</bug_when>
    <thetext>ipsec-tools-0.8.2-5.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9326857</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-05-14 22:40:34 -0400</bug_when>
    <thetext>ipsec-tools-0.8.2-5.el7 has been pushed to the Fedora EPEL 7 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9326882</commentid>
    <comment_count>15</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-05-14 23:04:09 -0400</bug_when>
    <thetext>ipsec-tools-0.8.2-2.el6 has been pushed to the Fedora EPEL 6 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1060657</attachid>
            <date>2015-08-08 15:50:00 -0400</date>
            <delta_ts>2015-08-08 15:50:52 -0400</delta_ts>
            <desc>Suggested correction</desc>
            <filename>disable-icmp-redirects.patch</filename>
            <type>text/plain</type>
            <size>1233</size>
            <attacher name="Kaarle Ritvanen">kaarle.ritvanen</attacher>
            
              <data encoding="base64">ZGlmZiAtcnUgaXBzZWMtdG9vbHMvaWZ1cC1pcHNlYyBpcHNlYy10b29scy5uZXcvaWZ1cC1pcHNl
YwotLS0gaXBzZWMtdG9vbHMvaWZ1cC1pcHNlYwkyMDE1LTA3LTIwIDIyOjQ4OjEwLjQ3NDMyMTIz
OCArMDMwMAorKysgaXBzZWMtdG9vbHMubmV3L2lmdXAtaXBzZWMJMjAxNS0wOC0wOCAyMDo1Njo0
MC45NTYzMDA4MTkgKzAzMDAKQEAgLTI2LDYgKzI2LDE2IEBACiAJJiYgS0VZX0FFU1BfT1VUPVwi
JEtFWV9BRVNQX09VVFwiCiB9CiAKK3F1ZXJ5X3JvdXRlKCkgeworICAgIGxvY2FsIGF0dHI9JDEK
KyAgICBzaGlmdAorICAgIGlwIC1vIHJvdXRlICIkQCIgfCBzZWQgInN8LiokYXR0ciBcKFteIF0q
XCkuKnxcMXwiCit9CisKK2dldF9yb3V0ZSgpIHsKKyAgICBxdWVyeV9yb3V0ZSBzcmMgZ2V0IHRv
ICQxCit9CisKIC4gL2V0Yy9pbml0LmQvZnVuY3Rpb25zCiBjZCAvZXRjL3N5c2NvbmZpZy9uZXR3
b3JrLXNjcmlwdHMKIC4gLi9uZXR3b3JrLWZ1bmN0aW9ucwpAQCAtNjUsNyArNzUsNyBAQAogWyAt
eiAiJEtFWUlORyIgXSAmJiBLRVlJTkc9bWFudWFsCiAKIGlmIFsgLXogIiRTUkMiIF07IHRoZW4K
LSAgICBTUkM9JChpcCAtbyByb3V0ZSBnZXQgdG8gJERTVCB8IHNlZCAic3wuKnNyYyBcKFteIF0q
XCkuKnxcMXwiKQorICAgIFNSQz0kKGdldF9yb3V0ZSAkRFNUKQogZmkKIAogaWYgWyAtbiAiJFNS
Q05FVCIgLW8gLW4gIiREU1RORVQiIF07IHRoZW4KQEAgLTgxLDggKzkxLDEyIEBACiAgICAgICAg
ICAgID0gIk5FVFdPUks9JHtEU1RORVQlJS8qfSIgXTsgdGhlbgogICAgIEVYQ0xVREVfU1JDTkVU
PXllcwogICBmaQotICBbIC16ICIkU1JDR1ciIF0gJiYgU1JDR1c9JChpcCAtbyByb3V0ZSBnZXQg
dG8gJFNSQ05FVCB8IHNlZCAic3wuKnNyYyBcKFteIF0qXCkuKnxcMXwiKQotICBpcCByb3V0ZSBh
ZGQgdG8gJERTVE5FVCB2aWEgJFNSQ0dXIHNyYyAkU1JDR1cKKyAgWyAteiAiJFNSQ0dXIiBdICYm
IFNSQ0dXPSQoZ2V0X3JvdXRlICRTUkNORVQpCisgIFJPVVRFPSJ0byAkRFNUTkVUIHZpYSAkU1JD
R1cgc3JjICRTUkNHVyIKKyAgaXAgcm91dGUgYWRkICRST1VURQorICBmb3IgZGV2IGluIGFsbCAk
KHF1ZXJ5X3JvdXRlIGRldiBsaXN0ICRST1VURSk7IGRvCisgICAgc3lzY3RsIC13IG5ldC5pcHY0
LmNvbmYuJGRldi5zZW5kX3JlZGlyZWN0cz0wID4gL2Rldi9udWxsCisgIGRvbmUKIGVsc2UKICAg
dW5zZXQgVFVOTkVMX01PREUKICAgTU9ERT10cmFuc3BvcnQK
</data>

          </attachment>
      

    </bug>

</bugzilla>