<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1190364</bug_id>
          
          <creation_ts>2015-02-07 11:26:00 -0500</creation_ts>
          <short_desc>SELinux is preventing telinit from using the &apos;setrlimit&apos; accesses on a process.</short_desc>
          <delta_ts>2016-02-25 12:33:24 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>selinux-policy</component>
          <version>24</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard>abrt_hash:1996bacdac375bfd99b0b89bbcc4cac66d201f01005d7957b7db9972716f31cc</status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>high</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Bill Jr">oberaldo</reporter>
          <assigned_to name="Lukas Vrabec">lvrabec</assigned_to>
          <cc>bugzilla_acct_1959</cc>
    
    
    <cc>dominick.grift</cc>
    
    
    <cc>dwalsh</cc>
    
    
    <cc>edosurina</cc>
    
    
    <cc>iamdexpl</cc>
    
    
    <cc>jeharris</cc>
    
    
    <cc>kitgerrits</cc>
    
    
    <cc>lvrabec</cc>
    
    
    <cc>maxim.galamay</cc>
    
    
    <cc>mgrepl</cc>
    
    
    <cc>plautrba</cc>
    
    
    <cc>RafaelRS</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>selinux-policy-3.13.1-171.fc24</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-02-25 12:33:24</cf_last_closed>
          <cf_type>---</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      <flag name="needinfo"
          id="2546087"
          type_id="16"
          status="?"
          setter="lvrabec"
          requestee="dwalsh"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7916323</commentid>
    <comment_count>0</comment_count>
    <who name="Bill Jr">oberaldo</who>
    <bug_when>2015-02-07 11:26:23 -0500</bug_when>
    <thetext>Description of problem:
SELinux is preventing telinit from using the &apos;setrlimit&apos; accesses on a process.

*****  Plugin catchall (100. confidence) suggests   **************************

If você acredita que o telinit deva ser permitido o acesso de setrlimit em processos com rótulo prelink_cron_system_t por default.
Then você precisa reportar este como um erro.
Você pode gerar um módulo de política local para permitir este acesso.
Do
permitir este acesso agora executando:
# grep telinit /var/log/audit/audit.log | audit2allow -M mypol
# semodule -i mypol.pp

Additional Information:
Source Context                system_u:system_r:prelink_cron_system_t:s0-s0:c0.c
                              1023
Target Context                system_u:system_r:prelink_cron_system_t:s0-s0:c0.c
                              1023
Target Objects                Unknown [ process ]
Source                        telinit
Source Path                   telinit
Port                          &lt;Unknown&gt;
Host                          (removed)
Source RPM Packages           
Target RPM Packages           
Policy RPM                    selinux-policy-3.13.1-105.fc21.noarch
Selinux Enabled               True
Policy Type                   targeted
Enforcing Mode                Permissive
Host Name                     (removed)
Platform                      Linux (removed) 3.17.4-301.fc21.x86_64 #1 SMP Thu
                              Nov 27 19:09:10 UTC 2014 x86_64 x86_64
Alert Count                   1
First Seen                    2015-02-07 14:16:56 BRST
Last Seen                     2015-02-07 14:16:56 BRST
Local ID                      2bbb84df-ec41-40b1-a05b-87a51b52af9a

Raw Audit Messages
type=AVC msg=audit(1423325816.452:11489): avc:  denied  { setrlimit } for  pid=22638 comm=&quot;telinit&quot; scontext=system_u:system_r:prelink_cron_system_t:s0-s0:c0.c1023 tcontext=system_u:system_r:prelink_cron_system_t:s0-s0:c0.c1023 tclass=process permissive=1


Hash: telinit,prelink_cron_system_t,prelink_cron_system_t,process,setrlimit

Version-Release number of selected component:
selinux-policy-3.13.1-105.fc21.noarch

Additional info:
reporter:       libreport-2.3.0
hashmarkername: setroubleshoot
kernel:         3.17.4-301.fc21.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7947594</commentid>
    <comment_count>1</comment_count>
    <who name="Jonathan S">bugzilla_acct_1959</who>
    <bug_when>2015-02-17 10:24:26 -0500</bug_when>
    <thetext>Description of problem:
SELinux alert happens immediately at end of cron.daily prelink job.

Version-Release number of selected component:
selinux-policy-3.13.1-105.3.fc21.noarch

Additional info:
reporter:       libreport-2.3.0
hashmarkername: setroubleshoot
kernel:         3.18.6-200.fc21.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8052337</commentid>
    <comment_count>2</comment_count>
    <who name="">RafaelRS</who>
    <bug_when>2015-03-18 00:56:40 -0400</bug_when>
    <thetext>Description of problem:
This happens just time to time

Version-Release number of selected component:
selinux-policy-3.13.1-105.3.fc21.noarch

Additional info:
reporter:       libreport-2.3.0
hashmarkername: setroubleshoot
kernel:         3.18.9-200.fc21.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8077144</commentid>
    <comment_count>4</comment_count>
    <who name="Jeremy Harris">jeharris</who>
    <bug_when>2015-03-24 06:07:14 -0400</bug_when>
    <thetext>Description of problem:
Salesfarce login page, firefox v. 36.0.3

Version-Release number of selected component:
selinux-policy-3.13.1-105.6.fc21.noarch

Additional info:
reporter:       libreport-2.3.0
hashmarkername: setroubleshoot
kernel:         3.19.1-201.fc21.x86_64
type:           libreport</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8080193</commentid>
    <comment_count>5</comment_count>
    <who name="Lukas Vrabec">lvrabec</who>
    <bug_when>2015-03-24 20:32:12 -0400</bug_when>
    <thetext>commit e7739daf2e428f211b0a34e82e38cb4023fa7d76
Author: Lukas Vrabec &lt;lvrabec@redhat.com&gt;
Date:   Fri Mar 20 14:06:34 2015 +0100

    Allow all domains some process flags.


Dan,
I added rules from comment 3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8109345</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2015-04-02 07:53:37 -0400</bug_when>
    <thetext>selinux-policy-3.13.1-105.11.fc21 has been submitted as an update for Fedora 21.
https://admin.fedoraproject.org/updates/selinux-policy-3.13.1-105.11.fc21</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8113688</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2015-04-04 03:22:32 -0400</bug_when>
    <thetext>Package selinux-policy-3.13.1-105.11.fc21:
* should fix your issue,
* was pushed to the Fedora 21 testing repository,
* should be available at your local mirror within two days.
Update it with:
# su -c &apos;yum update --enablerepo=updates-testing selinux-policy-3.13.1-105.11.fc21&apos;
as soon as you are able to.
Please go to the following url:
https://admin.fedoraproject.org/updates/FEDORA-2015-5478/selinux-policy-3.13.1-105.11.fc21
then log in and leave karma (feedback).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8790881</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2015-11-04 11:03:12 -0500</bug_when>
    <thetext>This message is a reminder that Fedora 21 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 21. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;21&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 21 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8879388</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2015-12-02 03:43:57 -0500</bug_when>
    <thetext>Fedora 21 changed to end-of-life (EOL) status on 2015-12-01. Fedora 21 is
no longer maintained, which means that it will not receive any further
security or bug fix updates. As a result we are closing this bug.

If you can reproduce this bug against a currently maintained version of
Fedora please feel free to reopen this bug against that version. If you
are unable to reopen this bug, please file a new report against the
current release. If you experience problems, please add a comment to this
bug.

Thank you for reporting this bug and we are sorry it could not be fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9035863</commentid>
    <comment_count>10</comment_count>
    <who name="Lukas Vrabec">lvrabec</who>
    <bug_when>2016-02-04 08:04:48 -0500</bug_when>
    <thetext>After discussion with Mirek Grepl and Milos Malik, we don&apos;t want to allow every process set resource limits. I&apos;m going to revert this commit and we can discuss here other process flags.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9035874</commentid>
    <comment_count>11</comment_count>
    <who name="Lukas Vrabec">lvrabec</who>
    <bug_when>2016-02-04 08:07:47 -0500</bug_when>
    <thetext>commit 474175050064cc809109442d5c44a3fb08851b5d
Author: Lukas Vrabec &lt;lvrabec@redhat.com&gt;
Date:   Thu Feb 4 14:06:20 2016 +0100

    Revert &quot;Allow all domains some process flags.&quot;BZ(1190364)
    
    This reverts commit 43520feaf9f1db6e59f4817da0a5e73304718ba5.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9035951</commentid>
    <comment_count>12</comment_count>
    <who name="Lukas Vrabec">lvrabec</who>
    <bug_when>2016-02-04 08:38:52 -0500</bug_when>
    <thetext>commit 75e6f95014259a91b24cb5f3f075065f35332689
Author: Lukas Vrabec &lt;lvrabec@redhat.com&gt;
Date:   Thu Feb 4 14:35:09 2016 +0100

    Allow prelink_cron_system_t domain set resource limits. BZ(1190364)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9094543</commentid>
    <comment_count>13</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-02-24 10:47:41 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 24 development cycle.
Changing version to &apos;24&apos;.

More information and reason for this action is here:
https://fedoraproject.org/wiki/Fedora_Program_Management/HouseKeeping/Fedora24#Rawhide_Rebase</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>