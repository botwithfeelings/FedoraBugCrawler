<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1312197</bug_id>
          
          <creation_ts>2016-02-25 23:56:00 -0500</creation_ts>
          <short_desc>fedora-release-24.0-10 update scriptlet failure</short_desc>
          <delta_ts>2016-03-29 08:07:24 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>fedora-release</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Parag Nemade">pnemade</reporter>
          <assigned_to name="Stephen Gallagher">sgallagh</assigned_to>
          <cc>bitlord0xff</cc>
    
    
    <cc>dennis</cc>
    
    
    <cc>hdegoede</cc>
    
    
    <cc>jdisnard</cc>
    
    
    <cc>kevin</cc>
    
    
    <cc>pbrobinson</cc>
    
    
    <cc>sgallagh</cc>
    
    
    <cc>watanabe.yu+redhat.bugzilla</cc>
    
    
    <cc>zbyszek</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>fedora-release-24-0.16</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-03-29 08:07:24</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9099484</commentid>
    <comment_count>0</comment_count>
    <who name="Parag Nemade">pnemade</who>
    <bug_when>2016-02-25 23:56:55 -0500</bug_when>
    <thetext>Description of problem:

I wanted my rawhide vm to stay on Fedora 24 so i downloaded fedora-release and fedora-release-workstation rpms and used dnf to update them as

[parag@localhost ~]$ sudo dnf update ./fedora-release-*
Last metadata expiration check performed 0:28:20 ago on Fri Feb 26 09:53:13 2016.
Dependencies resolved.
======================================================================================
 Package                          Arch         Version       Repository          Size
======================================================================================
Upgrading:
 fedora-release                   noarch       24-0.10       @commandline        17 k
 fedora-release-workstation       noarch       24-0.10       @commandline        12 k

Transaction Summary
======================================================================================
Upgrade  2 Packages

Total size: 29 k
Is this ok [y/N]: y
Downloading Packages:
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Upgrading   : fedora-release-24-0.10.noarch                                     1/4 
  Upgrading   : fedora-release-workstation-24-0.10.noarch                         2/4 
Usage: convert-to-edition [options] -e cloud|non-edition|server|workstation
    Options:
        -e: The edition to install (cloud, non-edition, server or workstation)
        -i: Skip installing additional files and just update symlinks
        -p: Also enable newly-added systemd presets
warning: %post(fedora-release-workstation-24-0.10.noarch) scriptlet failed, exit status 1
Non-fatal POSTIN scriptlet failure in rpm package fedora-release-workstation
Non-fatal POSTIN scriptlet failure in rpm package fedora-release-workstation
  Cleanup     : fedora-release-workstation-24-0.6.noarch                          3/4 
  Cleanup     : fedora-release-24-0.6.noarch                                      4/4 
  Verifying   : fedora-release-24-0.10.noarch                                     1/4 
  Verifying   : fedora-release-workstation-24-0.10.noarch                         2/4 
  Verifying   : fedora-release-24-0.6.noarch                                      3/4 
  Verifying   : fedora-release-workstation-24-0.6.noarch                          4/4 

Upgraded:
  fedora-release.noarch 24-0.10       fedora-release-workstation.noarch 24-0.10      

Complete!

Version-Release number of selected component (if applicable):
fedora-release-24-0.10

How reproducible:
should be always

Steps to Reproduce:
1.On rawhide machine state before pulling F25/rawhide update
2.download fedora-release-24-0.10 package and update it.
3.

Actual results:
scriptlet failed

Expected results:
no  scriptlet failure

Additional info:</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9099580</commentid>
    <comment_count>1</comment_count>
    <who name="Parag Nemade">pnemade</who>
    <bug_when>2016-02-26 01:22:04 -0500</bug_when>
    <thetext>Note I already update fedora-repos manually using dnf with no issues.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9100050</commentid>
    <comment_count>2</comment_count>
    <who name="Hans de Goede">hdegoede</who>
    <bug_when>2016-02-26 04:40:56 -0500</bug_when>
    <thetext>Hi,

I just saw this too, the fix is to change:

        /usr/sbin/convert-to-edition -ip workstation

To:

        /usr/sbin/convert-to-edition -ie workstation

In the &quot;else&quot; case in the %postinstall doing so matches the comment above it, it looks like the &apos;-e&apos; got dropped in the else instead of the &apos;-p&apos; (which is clearly the intent looking at the comment) and not having
a -e makes convert-to-edition unhappy.

Regards,

Hans</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9100063</commentid>
    <comment_count>3</comment_count>
    <who name="Hans de Goede">hdegoede</who>
    <bug_when>2016-02-26 04:46:21 -0500</bug_when>
    <thetext>p.s.

Also the 24.0-10 build still seems to have rawhide enabled and fedora and fedora-updates disabled ?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9100124</commentid>
    <comment_count>4</comment_count>
    <who name="Hans de Goede">hdegoede</who>
    <bug_when>2016-02-26 05:14:50 -0500</bug_when>
    <thetext>(In reply to Hans de Goede from comment #3)
&gt; p.s.
&gt; 
&gt; Also the 24.0-10 build still seems to have rawhide enabled and fedora and
&gt; fedora-updates disabled ?

Never mind, that is in fedora-repos of course, my bad.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9100444</commentid>
    <comment_count>5</comment_count>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-02-26 08:20:53 -0500</bug_when>
    <thetext>Crud... I thought I tested all of the upgrade paths... stupid typos. I&apos;ll get a fix out ASAP.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9100470</commentid>
    <comment_count>6</comment_count>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-02-26 08:37:03 -0500</bug_when>
    <thetext>I&apos;ve submitted a PR with the fix to upstream.

https://pagure.io/fedora-release/pull-request/25


Dennis, please apply this and build it immediately. I made a copy-paste error and then apparently only spot-checked Server and non-product, thus leaving this mistake behind</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9100529</commentid>
    <comment_count>7</comment_count>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-02-26 09:09:09 -0500</bug_when>
    <thetext>I verified with Parag on IRC that the effect of this bug is to leave the os-release and other files exactly where they would have been prior to the upgrade, so it&apos;s not going to cause a broken system, fortunately.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9109207</commentid>
    <comment_count>8</comment_count>
    <who name="Peter Robinson">pbrobinson</who>
    <bug_when>2016-03-01 03:39:30 -0500</bug_when>
    <thetext>*** Bug 1313147 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9185449</commentid>
    <comment_count>9</comment_count>
    <who name="Mike McCune">mmccune</who>
    <bug_when>2016-03-28 19:33:48 -0400</bug_when>
    <thetext>This bug was accidentally moved from POST to MODIFIED via an error in automation, please see mmccune@redhat.com with any questions</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>