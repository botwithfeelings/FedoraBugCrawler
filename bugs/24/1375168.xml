<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1375168</bug_id>
          
          <creation_ts>2016-09-12 07:13:00 -0400</creation_ts>
          <short_desc>Impress crashes when entering a comment in a certain way</short_desc>
          <delta_ts>2016-09-15 18:52:44 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>libreoffice</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Tor Lillqvist">tml</reporter>
          <assigned_to name="Caolan McNamara">caolanm</assigned_to>
          <cc>caolanm</cc>
    
    
    <cc>dtardon</cc>
    
    
    <cc>erack</cc>
    
    
    <cc>mstahl</cc>
    
    
    <cc>sbergman</cc>
    
    
    <cc>tml</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>libreoffice-5.1.5.2-5.fc24 libreoffice-5.1.5.2-6.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-09-15 18:52:44</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9698563</commentid>
    <comment_count>0</comment_count>
    <who name="Tor Lillqvist">tml</who>
    <bug_when>2016-09-12 07:13:43 -0400</bug_when>
    <thetext>Description of problem:

Impress crashes when you enter a comment and click in a certain way.

Version-Release number of selected component (if applicable):
5.1.5

How reproducible:

Easily

Steps to Reproduce:
1. libreoffice --impress
2. click the &quot;Click to add Text&quot;
3. type whatever sdfsdf
4. select Insert&gt;Comment from the menu
5. type whatever sdfsdf into the yellow comment box
6. click the button with the down arrow in the lower-right corner of the yellow comment box
7. ignore the menu that pops up with three entries, and click somewhere else in the slide
8. the &quot;LibreOffice Document Recovery&quot; dialog appears, indicating that the soffice.bin process crashed

Actual results:


Expected results:


Additional info:</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9698615</commentid>
    <comment_count>1</comment_count>
    <who name="Stephan Bergmann">sbergman</who>
    <bug_when>2016-09-12 07:30:15 -0400</bug_when>
    <thetext>Crash is

&gt; Thread 1 &quot;soffice.bin&quot; received signal SIGSEGV, Segmentation fault.
&gt; 0x00007faeb6b279e7 in vcl::Window::ImplGetWindowExtentsRelative(vcl::Window*, bool) const () from /usr/lib64/libreoffice/program/libvcllo.so
&gt; (gdb) bt
&gt; #0  0x00007faeb6b279e7 in vcl::Window::ImplGetWindowExtentsRelative(vcl::Window*, bool) const () at /usr/lib64/libreoffice/program/libvcllo.so
&gt; #1  0x00007faeb6b27aff in vcl::Window::GetWindowExtentsRelative(vcl::Window*) const () at /usr/lib64/libreoffice/program/libvcllo.so
&gt; #2  0x00007faeb6ad72a7 in MenuFloatingWindow::doShutdown() () at /usr/lib64/libreoffice/program/libvcllo.so
&gt; #3  0x00007faeb6ad1aa3 in PopupMenu::ImplExecute(vcl::Window*, Rectangle const&amp;, FloatWinPopupFlags, Menu*, bool) () at /usr/lib64/libreoffice/program/libvcllo.so
&gt; #4  0x00007fae787c9a87 in sd::AnnotationManagerImpl::ExecuteAnnotationContextMenu(com::sun::star::uno::Reference&lt;com::sun::star::office::XAnnotation&gt;, vcl::Window*, Rectangle const&amp;, bool) () at /usr/lib64/libreoffice/program/../program/libsdlo.so
&gt; #5  0x00007fae787cd9e8 in sd::AnnotationWindow::MouseButtonDown(MouseEvent const&amp;) () at /usr/lib64/libreoffice/program/../program/libsdlo.so
&gt; #6  0x00007faeb6b36734 in ImplHandleMouseEvent(vcl::Window*, MouseNotifyEvent, bool, long, long, unsigned long, unsigned short, MouseEventModifiers) () at /usr/lib64/libreoffice/program/libvcllo.so
&gt; #7  0x00007faeb6b38922 in ImplWindowFrameProc(vcl::Window*, SalFrame*, unsigned short, void const*) () at /usr/lib64/libreoffice/program/libvcllo.so
&gt; #8  0x00007fae9a835f2e in GtkSalFrame::signalButton(_GtkWidget*, _GdkEventButton*, void*) () at /usr/lib64/libreoffice/program/libvclplug_gtk3lo.so
&gt; #13 0x00007faeb069243f in &lt;emit signal ??? on instance 0x5591b525ae20 [GtkEventBox]&gt; (instance=instance@entry=0x5591b525ae20, signal_id=&lt;optimized out&gt;, detail=detail@entry=0) at gsignal.c:3441
&gt;     #9  0x00007fae9a10c4ec in _gtk_marshal_BOOLEAN__BOXED (closure=0x5591b545fdf0, return_value=0x7fff91a28c80, n_param_values=&lt;optimized out&gt;, param_values=0x7fff91a28ce0, invocation_hint=&lt;optimized out&gt;, marshal_data=&lt;optimized out&gt;) at gtkmarshalers.c:86
&gt;     #10 0x00007faeb06773e5 in g_closure_invoke (closure=0x5591b545fdf0, return_value=return_value@entry=0x7fff91a28c80, n_param_values=2, param_values=param_values@entry=0x7fff91a28ce0, invocation_hint=invocation_hint@entry=0x7fff91a28c60) at gclosure.c:804
&gt;     #11 0x00007faeb0689432 in signal_emit_unlocked_R (node=node@entry=0x5591b5052830, detail=detail@entry=0, instance=instance@entry=0x5591b525ae20, emission_return=emission_return@entry=0x7fff91a28e00, instance_and_params=instance_and_params@entry=0x7fff91a28ce0) at gsignal.c:3629
&gt;     #12 0x00007faeb0691b8f in g_signal_emit_valist (instance=&lt;optimized out&gt;, signal_id=&lt;optimized out&gt;, detail=&lt;optimized out&gt;, var_args=var_args@entry=0x7fff91a28eb0) at gsignal.c:3395
&gt; #14 0x00007fae9a24e9fc in gtk_widget_event_internal (widget=0x5591b525ae20 [GtkEventBox], event=0x5591b5421ae0) at gtkwidget.c:7731
&gt; #15 0x00007fae9a10975e in propagate_event (topmost=&lt;optimized out&gt;, event=&lt;optimized out&gt;, widget=0x5591b525ae20 [GtkEventBox]) at gtkmain.c:2545
&gt; #16 0x00007fae9a10975e in propagate_event (widget=&lt;optimized out&gt;, event=0x5591b5421ae0, captured=&lt;optimized out&gt;, topmost=0x0) at gtkmain.c:2647
&gt; #17 0x00007fae9a10b692 in gtk_main_do_event (event=0x5591b5421ae0) at gtkmain.c:1878
&gt; #18 0x00007fae99c460c5 in _gdk_event_emit (event=event@entry=0x5591b5421ae0) at gdkevents.c:73
&gt; #19 0x00007fae99c730b2 in gdk_event_source_dispatch (source=&lt;optimized out&gt;, callback=&lt;optimized out&gt;, user_data=&lt;optimized out&gt;) at gdkeventsource.c:367
&gt; #20 0x00007faeb03a36ba in g_main_context_dispatch (context=0x5591b50458e0) at gmain.c:3154
&gt; #21 0x00007faeb03a36ba in g_main_context_dispatch (context=context@entry=0x5591b50458e0) at gmain.c:3769
&gt; #22 0x00007faeb03a3a70 in g_main_context_iterate (context=context@entry=0x5591b50458e0, block=block@entry=1, dispatch=dispatch@entry=1, self=&lt;optimized out&gt;) at gmain.c:3840
&gt; #23 0x00007faeb03a3b1c in g_main_context_iteration (context=0x5591b50458e0, may_block=1) at gmain.c:3901
&gt; #24 0x00007fae9a8088b3 in GtkData::Yield(bool, bool) () at /usr/lib64/libreoffice/program/libvclplug_gtk3lo.so
&gt; #25 0x00007faeb6d3c811 in Application::Yield() () at /usr/lib64/libreoffice/program/libvcllo.so
&gt; #26 0x00007faeb6d3ed95 in Application::Execute() () at /usr/lib64/libreoffice/program/libvcllo.so
&gt; #27 0x00007faebcb99a65 in desktop::Desktop::Main() () at /usr/lib64/libreoffice/program/libsofficeapp.so
&gt; #28 0x00007faeb6d42671 in ImplSVMain() () at /usr/lib64/libreoffice/program/libvcllo.so
&gt; #29 0x00007faeb6d426c2 in SVMain() () at /usr/lib64/libreoffice/program/libvcllo.so
&gt; #30 0x00007faebcbc1d42 in soffice_main () at /usr/lib64/libreoffice/program/libsofficeapp.so
&gt; #31 0x00005591b21f07db in main ()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9698835</commentid>
    <comment_count>2</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2016-09-12 08:46:18 -0400</bug_when>
    <thetext>This appears to get fixed in master by..

26333736f103342344b9b0fa20a3a04d426fac4f
and
ed42a984099b8847aedbdd638c7e20e0b68a9290
which rework this menu interation</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9698857</commentid>
    <comment_count>3</comment_count>
    <who name="Tor Lillqvist">tml</who>
    <bug_when>2016-09-12 08:52:46 -0400</bug_when>
    <thetext>Thanks, impressed by the response time. Maybe I should have filed this more incognito;)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9699008</commentid>
    <comment_count>4</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2016-09-12 09:22:45 -0400</bug_when>
    <thetext>Incognito would have saved the &quot;why doesn&apos;t he fix it himself&quot; time</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9699070</commentid>
    <comment_count>5</comment_count>
    <who name="Tor Lillqvist">tml</who>
    <bug_when>2016-09-12 09:37:34 -0400</bug_when>
    <thetext>I would, but I could not reproduce in my own 5.1 build (on the same machine), go figure.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9706150</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-14 03:58:30 -0400</bug_when>
    <thetext>libreoffice-5.1.5.2-6.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-752a909d3b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9708780</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-14 16:56:20 -0400</bug_when>
    <thetext>libreoffice-5.1.5.2-6.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-752a909d3b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9712649</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-15 18:52:37 -0400</bug_when>
    <thetext>libreoffice-5.1.5.2-6.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>