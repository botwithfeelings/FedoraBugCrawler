<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1154526</bug_id>
          
          <creation_ts>2014-10-20 01:42:00 -0400</creation_ts>
          <short_desc>fi_FI compose keys not working after installation</short_desc>
          <delta_ts>2016-06-01 22:37:43 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>gnome-shell</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>NEXTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Marko Myllynen">myllynen</reporter>
          <assigned_to name="Owen Taylor">otaylor</assigned_to>
          <cc>fmuellner</cc>
    
    
    <cc>i18n-bugs</cc>
    
    
    <cc>mfabian</cc>
    
    
    <cc>myllynen</cc>
    
    
    <cc>otaylor</cc>
    
    
    <cc>samkraju</cc>
    
    
    <cc>shawn.p.huang</cc>
    
    
    <cc>tfujiwar</cc>
    
    
    <cc>tiagomatos</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-06-01 22:37:43</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>7590148</commentid>
    <comment_count>0</comment_count>
    <who name="Marko Myllynen">myllynen</who>
    <bug_when>2014-10-20 01:42:21 -0400</bug_when>
    <thetext>Description of problem:
After installing F21 Alpha using Finnish for language and keyboard, fi_FI compose keys are not in use although LC_CTYPE=fi_FI.utf8.

Earlier related bug about this was https://bugzilla.redhat.com/show_bug.cgi?id=1013651. See especially https://bugzilla.redhat.com/show_bug.cgi?id=1013651#c13.

The highly unintuitive step mentioned in bug 1013651#c13 is still needed to make this work, so the question is do we want to enable this by default or make enabling it a bit more intuitive or at least document this?

Additional info:
The quick test to see whether fi_FI compose keys work is that with LC_CTYPE=fi_FI.UTF-8 dead_acute + space should produce acute (not apostrophe as with en_US.UTF-8).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7590374</commentid>
    <comment_count>1</comment_count>
    <who name="fujiwara">tfujiwar</who>
    <bug_when>2014-10-20 03:18:32 -0400</bug_when>
    <thetext>Because only ibus side is fixed but gtk+ is not fixed yet.
https://bugzilla.gnome.org/show_bug.cgi?id=721120

Personally I also like gnome-shell always use ibus for XKB sources but currently ibus is enabled when an IME source is enabled.

Transferring to gnome-shell or gtk3.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7673598</commentid>
    <comment_count>2</comment_count>
    <who name="fujiwara">tfujiwar</who>
    <bug_when>2014-11-14 05:34:37 -0500</bug_when>
    <thetext>Fedora 21 gnome-shell always uses ibus so I think your problem is fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7795224</commentid>
    <comment_count>3</comment_count>
    <who name="Marko Myllynen">myllynen</who>
    <bug_when>2014-12-30 05:57:01 -0500</bug_when>
    <thetext>I&apos;m sorry but I think it&apos;s a bit premature to close this one at this point given the upstream patch is not yet accepted and this does not yet work on Fedora. I&apos;d like to see this kept open (assigned to another component if needed) until this is works as expected.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7805274</commentid>
    <comment_count>4</comment_count>
    <who name="fujiwara">tfujiwar</who>
    <bug_when>2015-01-05 00:58:46 -0500</bug_when>
    <thetext>(In reply to Marko Myllynen from comment #3)
&gt; and this does not yet work on Fedora.

Did you check GNOME in the stable Fedora 21?
Now GNOME always uses ibus and I think the gtk+ patch is not required for this bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7806028</commentid>
    <comment_count>5</comment_count>
    <who name="Marko Myllynen">myllynen</who>
    <bug_when>2015-01-05 05:15:30 -0500</bug_when>
    <thetext>(In reply to fujiwara from comment #4)
&gt; (In reply to Marko Myllynen from comment #3)
&gt; &gt; and this does not yet work on Fedora.
&gt; 
&gt; Did you check GNOME in the stable Fedora 21?
&gt; Now GNOME always uses ibus and I think the gtk+ patch is not required for
&gt; this bug.

I retested this and noticed that with up-to-date F21 this works as expected under xterm but not under gnome-terminal. So perhaps the GTK+ patch is still needed?

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7809234</commentid>
    <comment_count>6</comment_count>
    <who name="fujiwara">tfujiwar</who>
    <bug_when>2015-01-05 21:38:01 -0500</bug_when>
    <thetext>Probably I think it&apos;s a problem in the first session and your dbus-daemon runs before ibus-daemon runs at the first session.
You need to set LANG=fi_FI.UTF-8 (suomi) with gnome-control-center and log into the gnome session again so that ibus-daemon runs on fi_FI.UTF-8.

or run /usr/libexec/gnome-terminal-server before run gnome-terminal.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7812225</commentid>
    <comment_count>7</comment_count>
    <who name="Marko Myllynen">myllynen</who>
    <bug_when>2015-01-06 13:37:35 -0500</bug_when>
    <thetext>(In reply to fujiwara from comment #6)
&gt; Probably I think it&apos;s a problem in the first session and your dbus-daemon
&gt; runs before ibus-daemon runs at the first session.
&gt; You need to set LANG=fi_FI.UTF-8 (suomi) with gnome-control-center and log
&gt; into the gnome session again so that ibus-daemon runs on fi_FI.UTF-8.

No, I had LC_CTYPE=fi_FI.UTF-8 in use already. I now tried even rebooting after setting LANG=fi_FI.UTF-8 in /etc/locale.conf, then after logging into GNOME &quot;locale&quot; shows fi_FI.UTF-8 to be in use for all the locale categories but gnome-terminal vs xterm are still different.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7814097</commentid>
    <comment_count>8</comment_count>
    <who name="fujiwara">tfujiwar</who>
    <bug_when>2015-01-07 05:06:09 -0500</bug_when>
    <thetext>I cannot reproduce your problem.
Do you install ibus packages?
If you run /usr/libexec/gnome-terminal-server firstly and gnome-terminal secondary and gnome-terminal could work fine, your locale setting would be wrong.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7814335</commentid>
    <comment_count>9</comment_count>
    <who name="Marko Myllynen">myllynen</who>
    <bug_when>2015-01-07 06:16:18 -0500</bug_when>
    <thetext>(In reply to fujiwara from comment #8)
&gt; I cannot reproduce your problem.
&gt; Do you install ibus packages?

I installed Fedora Workstation using Fedora-Server-netinst-x86_64-21.iso, rpm -qa | grep -c ibus says 17.

&gt; If you run /usr/libexec/gnome-terminal-server firstly and gnome-terminal
&gt; secondary and gnome-terminal could work fine, your locale setting would be
&gt; wrong.

This doesn&apos;t make any difference. Since I get the expected behaviour with xterm using en_US.UTF-8 or fi_FI.UTF-8 I think my locale settings are ok.

After installation (where I used English for language and Finnish for keyboard) I logged into console as root to apply updates and rebooted, then logging into GNOME and testing xterm gives en_US behaviour (as expected). After adding LC_CTYPE=fi_FI.UTF-8 line to /etc/locale.conf and rebooting I get fi_FI behaviour with xterm (as expected) but nothing changes for gnome-terminal.

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7818153</commentid>
    <comment_count>10</comment_count>
    <who name="fujiwara">tfujiwar</who>
    <bug_when>2015-01-08 05:55:24 -0500</bug_when>
    <thetext>(In reply to Marko Myllynen from comment #9)

Sorry, you&apos;re right.
gnome-settings-daemon still checks if the input sources include ibus engines while gnome-shell always runs ibus-daemon and it tracks the value of gsettings org.gnome.desktop.interface gtk-im-module.

The workaround is still needed or export GTK_IM_MODULE=ibus in .profile.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8790553</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2015-11-04 10:46:22 -0500</bug_when>
    <thetext>This message is a reminder that Fedora 21 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 21. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;21&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 21 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8793480</commentid>
    <comment_count>12</comment_count>
    <who name="fujiwara">tfujiwar</who>
    <bug_when>2015-11-04 21:14:07 -0500</bug_when>
    <thetext>Will be fixed in f24.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9091711</commentid>
    <comment_count>13</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-02-24 08:16:48 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 24 development cycle.
Changing version to &apos;24&apos;.

More information and reason for this action is here:
https://fedoraproject.org/wiki/Fedora_Program_Management/HouseKeeping/Fedora24#Rawhide_Rebase</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9376933</commentid>
    <comment_count>14</comment_count>
    <who name="Marko Myllynen">myllynen</who>
    <bug_when>2016-06-01 08:12:42 -0400</bug_when>
    <thetext>I&apos;m happy to confirm this now works ok on Fedora 24.

On a fresh system I booted with LANG=fi_FI.UTF-8 in /etc/locale.conf and after logging in and starting gnome-terminal, dead_acute + space now produce acute (Â´) and not apostrophe (&apos;) as expected. On a system with LANG=en_US.UTF-8 dead_acute + space still produces apostrophe.

(It is not possible to open two gnome-terminal under different locale and have different behaviour for them but that&apos;s expected.)

Thanks for your help, please feel free to close this (unless automation won&apos;t close this later).</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>