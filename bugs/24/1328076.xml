<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1328076</bug_id>
          
          <creation_ts>2016-04-18 07:44:00 -0400</creation_ts>
          <short_desc>Build libhdfs for all architectures</short_desc>
          <delta_ts>2016-11-19 16:03:54 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>hadoop</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>238953</blocked>
    
    
    <blocked>245418</blocked>
    
    
    <blocked>485231</blocked>
    
    
    <blocked>922257</blocked>
    
    
    <blocked>1242747</blocked>
    
    
    <blocked>1051573</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Mattias Ellert">mattias.ellert</reporter>
          <assigned_to name="Christopher Tubbs">ctubbsii</assigned_to>
          <cc>besser82</cc>
    
    
    <cc>dan</cc>
    
    
    <cc>fweimer</cc>
    
    
    <cc>jdisnard</cc>
    
    
    <cc>jwakely</cc>
    
    
    <cc>me</cc>
    
    
    <cc>moceap</cc>
    
    
    <cc>pbrobinson</cc>
    
    
    <cc>rrati</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>hadoop-2.4.1-24.fc25 hadoop-2.4.1-24.fc24</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-11-07 18:24:46</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9246684</commentid>
    <comment_count>0</comment_count>
      <attachid>1148179</attachid>
    <who name="Mattias Ellert">mattias.ellert</who>
    <bug_when>2016-04-18 07:44:00 -0400</bug_when>
    <thetext>Created attachment 1148179
Patch against the Fedora git enabling libhdfs for all architectures.

Description of problem:

The libhdfs package is currently only built for ix86 and x86_64. Please consider providing this package for all architectures.

A proposed patch is attached.

Version-Release number of selected component (if applicable):

hadoop-2.4.1-14.fc24

How reproducible:

Always

Additional info:

In order to build hadoop I had to modify the spec file slightly.

1) The /etc/tomcat/log4j.properties file no longer exists, so the build failed at the point where it tried to copy this file into the build tree. I have removed this copy command in the patch.

2) Patch 11 in the spec file (hadoop-2.4.1-cmake-java-ppc64le.patch) for some reason changed the _java_libarch variable on the ppc64le architecture from the correct ppc64le to the incorrect ppc64, causing the package build to fail on this architecture. Dropping this patch made the build succeed.

Scratch builds:

ix86, x86_64, arm:
https://koji.fedoraproject.org/koji/taskinfo?taskID=13696851

ppc64, ppc64le:
https://ppc.koji.fedoraproject.org/koji/taskinfo?taskID=3307525

s390, s390x:
https://s390.koji.fedoraproject.org/koji/taskinfo?taskID=2188109</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9246688</commentid>
    <comment_count>1</comment_count>
      <attachid>1148180</attachid>
    <who name="Mattias Ellert">mattias.ellert</who>
    <bug_when>2016-04-18 07:46:18 -0400</bug_when>
    <thetext>Created attachment 1148180
This is the new version of the hadoop-dlopen-libjvm.patch if you prefer it this way.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9250718</commentid>
    <comment_count>2</comment_count>
    <who name="Mattias Ellert">mattias.ellert</who>
    <bug_when>2016-04-19 08:19:21 -0400</bug_when>
    <thetext>Scratch build aarch64:
https://arm.koji.fedoraproject.org/koji/taskinfo?taskID=3508590</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9378470</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Admin XMLRPC Client">fedora-admin-xmlrpc</who>
    <bug_when>2016-06-01 15:42:17 -0400</bug_when>
    <thetext>This package has changed ownership in the Fedora Package Database.  Reassigning to the new owner of this component.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9399421</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Admin XMLRPC Client">fedora-admin-xmlrpc</who>
    <bug_when>2016-06-08 17:26:57 -0400</bug_when>
    <thetext>This package has changed ownership in the Fedora Package Database.  Reassigning to the new owner of this component.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9447667</commentid>
    <comment_count>5</comment_count>
    <who name="Christopher Tubbs">ctubbsii</who>
    <bug_when>2016-06-23 13:43:43 -0400</bug_when>
    <thetext>I&apos;m not familiar enough with JNI development to properly vet this code. I&apos;ll apply the change if somebody can file a JIRA with the upstream community proposing the patch, and getting them to sign off on it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9452115</commentid>
    <comment_count>6</comment_count>
    <who name="Mattias Ellert">mattias.ellert</who>
    <bug_when>2016-06-25 02:08:55 -0400</bug_when>
    <thetext>You do realize that this is a proposed change to the patch that was added during review to make the package comply to the packaging guidelines. Hence the upstream is the Fedora package itself and the package maintainers, not the hadoop developers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9452127</commentid>
    <comment_count>7</comment_count>
    <who name="Christopher Tubbs">ctubbsii</who>
    <bug_when>2016-06-25 02:26:26 -0400</bug_when>
    <thetext>(In reply to Mattias Ellert from comment #6)
&gt; You do realize that this is a proposed change to the patch that was added
&gt; during review to make the package comply to the packaging guidelines. Hence
&gt; the upstream is the Fedora package itself and the package maintainers, not
&gt; the hadoop developers.

Yes, but, I do not feel comfortable about applying a patch when I don&apos;t understand what it does. I&apos;d personally feel more comfortable about applying it if somebody in upstream Hadoop can verify it&apos;s an appropriate modification to the build of their native libraries to support an additional architecture.

Further, if it&apos;s suitable for extending support for an additional architecture within Fedora, I&apos;d think that the Hadoop developers would be willing to apply it upstream, to reduce the number of Fedora-specific patches we need to support.

If a proven packager wishes to apply it, that&apos;s fine... but without Apache Hadoop developer backing, I just don&apos;t have enough expertise to feel comfortable applying it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9467468</commentid>
    <comment_count>8</comment_count>
    <who name="Florian Weimer">fweimer</who>
    <bug_when>2016-06-30 04:21:58 -0400</bug_when>
    <thetext>(In reply to Mattias Ellert from comment #1)
&gt; Created attachment 1148180 [details]
&gt; This is the new version of the hadoop-dlopen-libjvm.patch if you prefer it
&gt; this way.

These lines from the patch

    *(void **)(&amp;getCreatedJavaJVMsPtr) = dlsym(jvmHandle, &quot;JNI_GetCreatedJavaVMs&quot;);

        *(void **)(&amp;createJavaVMPtr) = dlsym(jvmHandle, &quot;JNI_CreateJavaVM&quot;);

introduce an aliasing violations.  Please use a function pointer cast instead.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9467473</commentid>
    <comment_count>9</comment_count>
    <who name="Jonathan Wakely">jwakely</who>
    <bug_when>2016-06-30 04:22:31 -0400</bug_when>
    <thetext>The patch has:

     char libjvmPath[strlen(javaHome)+35];
-    snprintf(libjvmPath, sizeof(libjvmPath), &quot;%s/jre/lib/amd64/server/libjvm.so&quot;, javaHome);
+    snprintf(libjvmPath, sizeof(libjvmPath), &quot;%s/jre/lib/%s/server/libjvm.so&quot;, javaHome, arch);

This will overflow the buffer when strlen(arch) &gt; strlen(&quot;amd64&quot;) which is true for several arches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9469218</commentid>
    <comment_count>10</comment_count>
    <who name="Mattias Ellert">mattias.ellert</who>
    <bug_when>2016-06-30 11:35:43 -0400</bug_when>
    <thetext>(In reply to Florian Weimer from comment #8)
&gt; These lines from the patch
&gt; 
&gt;     *(void **)(&amp;getCreatedJavaJVMsPtr) = dlsym(jvmHandle,
&gt; &quot;JNI_GetCreatedJavaVMs&quot;);
&gt; 
&gt;         *(void **)(&amp;createJavaVMPtr) = dlsym(jvmHandle, &quot;JNI_CreateJavaVM&quot;);
&gt; 
&gt; introduce an aliasing violations.  Please use a function pointer cast
&gt; instead.

The way the cast of the return value of dlsym is done is unchanged from the existing patch, and not part of my proposed change. As far as I can tell the code as is has not caused problems - it has been in use since the hadoop package was first introduced in Fedora (though only for ix86 and x86_64), and there are no warnings about aliasing violations in the koji build logs.

(In reply to Jonathan Wakely from comment #9)
&gt; The patch has:
&gt; 
&gt;      char libjvmPath[strlen(javaHome)+35];
&gt; -    snprintf(libjvmPath, sizeof(libjvmPath),
&gt; &quot;%s/jre/lib/amd64/server/libjvm.so&quot;, javaHome);
&gt; +    snprintf(libjvmPath, sizeof(libjvmPath),
&gt; &quot;%s/jre/lib/%s/server/libjvm.so&quot;, javaHome, arch);
&gt; 
&gt; This will overflow the buffer when strlen(arch) &gt; strlen(&quot;amd64&quot;) which is
&gt; true for several arches.

The longest name is &quot;mips64el&quot;. The length of the string for this architecture is:

printf &apos;/jre/lib/mips64el/server/libjvm.so&apos; | wc -c
34

So 35 should be enough for the string + the final &apos;\0&apos; at the end for all architectures.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9471713</commentid>
    <comment_count>11</comment_count>
    <who name="Jonathan Wakely">jwakely</who>
    <bug_when>2016-07-01 06:11:49 -0400</bug_when>
    <thetext>(In reply to Mattias Ellert from comment #10)
&gt; (In reply to Florian Weimer from comment #8)
&gt; &gt; These lines from the patch
&gt; &gt; 
&gt; &gt;     *(void **)(&amp;getCreatedJavaJVMsPtr) = dlsym(jvmHandle,
&gt; &gt; &quot;JNI_GetCreatedJavaVMs&quot;);
&gt; &gt; 
&gt; &gt;         *(void **)(&amp;createJavaVMPtr) = dlsym(jvmHandle, &quot;JNI_CreateJavaVM&quot;);
&gt; &gt; 
&gt; &gt; introduce an aliasing violations.  Please use a function pointer cast
&gt; &gt; instead.
&gt; 
&gt; The way the cast of the return value of dlsym is done is unchanged from the
&gt; existing patch, and not part of my proposed change. As far as I can tell the
&gt; code as is has not caused problems - it has been in use since the hadoop
&gt; package was first introduced in Fedora (though only for ix86 and x86_64),
&gt; and there are no warnings about aliasing violations in the koji build logs.

It&apos;s still a bug.

&gt; (In reply to Jonathan Wakely from comment #9)
&gt; &gt; The patch has:
&gt; &gt; 
&gt; &gt;      char libjvmPath[strlen(javaHome)+35];
&gt; &gt; -    snprintf(libjvmPath, sizeof(libjvmPath),
&gt; &gt; &quot;%s/jre/lib/amd64/server/libjvm.so&quot;, javaHome);
&gt; &gt; +    snprintf(libjvmPath, sizeof(libjvmPath),
&gt; &gt; &quot;%s/jre/lib/%s/server/libjvm.so&quot;, javaHome, arch);
&gt; &gt; 
&gt; &gt; This will overflow the buffer when strlen(arch) &gt; strlen(&quot;amd64&quot;) which is
&gt; &gt; true for several arches.
&gt; 
&gt; The longest name is &quot;mips64el&quot;. The length of the string for this
&gt; architecture is:
&gt; 
&gt; printf &apos;/jre/lib/mips64el/server/libjvm.so&apos; | wc -c
&gt; 34
&gt; 
&gt; So 35 should be enough for the string + the final &apos;\0&apos; at the end for all
&gt; architectures.

I miscounted, sorry.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9480766</commentid>
    <comment_count>12</comment_count>
    <who name="Mattias Ellert">mattias.ellert</who>
    <bug_when>2016-07-05 05:39:55 -0400</bug_when>
    <thetext>(In reply to Jonathan Wakely from comment #11)
&gt; (In reply to Mattias Ellert from comment #10)
&gt; &gt; (In reply to Florian Weimer from comment #8)
&gt; &gt; &gt; These lines from the patch
&gt; &gt; &gt; 
&gt; &gt; &gt;     *(void **)(&amp;getCreatedJavaJVMsPtr) = dlsym(jvmHandle,
&gt; &gt; &gt; &quot;JNI_GetCreatedJavaVMs&quot;);
&gt; &gt; &gt; 
&gt; &gt; &gt;         *(void **)(&amp;createJavaVMPtr) = dlsym(jvmHandle, &quot;JNI_CreateJavaVM&quot;);
&gt; &gt; &gt; 
&gt; &gt; &gt; introduce an aliasing violations.  Please use a function pointer cast
&gt; &gt; &gt; instead.
&gt; &gt; 
&gt; &gt; The way the cast of the return value of dlsym is done is unchanged from the
&gt; &gt; existing patch, and not part of my proposed change. As far as I can tell the
&gt; &gt; code as is has not caused problems - it has been in use since the hadoop
&gt; &gt; package was first introduced in Fedora (though only for ix86 and x86_64),
&gt; &gt; and there are no warnings about aliasing violations in the koji build logs.
&gt; 
&gt; It&apos;s still a bug.

Possibly, but it is completely orthogonal to the current issue. The cast you complain about is not introduced by the proposed change, and the proposed change does not claim that it is trying to address the issue of the cast - so it is irrelevant to the question whether or not the proposed change should be accepted or not.

If you believe the cast issue is important you should file a new bug report about it, not hijack this one.

This is like when you get a -1 karma on an update because it doesn&apos;t address a preexisting bug it was not claiming to fix. A -1 is valid if a new bug is introduced or if a bug it claims it is fixing is not fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9531178</commentid>
    <comment_count>13</comment_count>
      <attachid>1181965</attachid>
    <who name="Mattias Ellert">mattias.ellert</who>
    <bug_when>2016-07-20 04:48:38 -0400</bug_when>
    <thetext>Created attachment 1181965
New version with function type cast instead of (**void) defreference</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9825655</commentid>
    <comment_count>14</comment_count>
    <who name="Mattias Ellert">mattias.ellert</who>
    <bug_when>2016-10-27 03:51:56 -0400</bug_when>
    <thetext>Hi!

I would like to return to this issue.

In my opinion not supporting all architectures is a bad thing.

I agree that getting a package to work on all architectures is not necessarily a task the package maintainer must perform, even though I think he should at least try. If he deems the task too complicated or time consuming, falling back to ExcludeArch or not building some subpackages on some architectures can be warranted.

However, if someone offers to help and provides a patch to fix the issues, refusing to accept the help is bad maintainership.

Supporting only i686 and x86_64 might have been not too bad at the time these were the only primary architectures. Today this is no longer the case, and arm is primary too. Also aarch64 has recently been moved into to the main koji instance. So it really is a pity the libhdfs is only there for i686 and x86_64.

The patch in the attachment still works as a drop in replacement for the existing patch, and the package builds fine for F24, F25 and rawhide (F26):

Recent scratch builds:
F24: http://koji.fedoraproject.org/koji/taskinfo?taskID=16194154
F25: http://koji.fedoraproject.org/koji/taskinfo?taskID=16194150
F26: http://koji.fedoraproject.org/koji/taskinfo?taskID=16194145</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9828057</commentid>
    <comment_count>15</comment_count>
    <who name="Christopher Tubbs">ctubbsii</who>
    <bug_when>2016-10-27 18:14:53 -0400</bug_when>
    <thetext>Mattias Ellert:

1. I agree that not supporting all arches is bad.
2. I really don&apos;t like maintaining the conditionals in the spec file and would love to get rid of them.
3. I am not refusing the help. I welcome the help.

All I&apos;ve said is that I lack the expertise to review the contribution, and would feel more comfortable with somebody from the upstream community, or a proven packager, having reviewed it first.

I will try to reach out to the upstream community to get their take on the patch, but if you wish to do that, please feel free to link the mailing list or JIRA discussion here.

Do you know if upstream is willing to accept the patch to support more architectures? Has any attempt been made to try to contribute the patch to upstream Hadoop first?

In the absence of external review, I may be able to get to the patch, but it&apos;s going to take me a bit of time. I&apos;ve recently solicited help from a colleague, who may have more expertise than myself. I will document here if I make progress.

I apologize if it seems I&apos;m being unwelcoming to a contributor. I really *want* to apply the patch. I just don&apos;t have sufficient expertise with the native code stuffs. Please be patient, or solicit review from upstream Hadoop to accelerate things.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9828615</commentid>
    <comment_count>16</comment_count>
    <who name="Christopher Tubbs">ctubbsii</who>
    <bug_when>2016-10-27 23:25:26 -0400</bug_when>
    <thetext>Okay, I spent a few hours trying to grok this patch, and I think I understand it sufficiently to have some confidence in applying it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9831941</commentid>
    <comment_count>17</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-30 16:21:29 -0400</bug_when>
    <thetext>hadoop-2.4.1-24.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-362f86628d</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9833107</commentid>
    <comment_count>18</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-31 06:21:49 -0400</bug_when>
    <thetext>hadoop-2.4.1-24.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-93287ad2de</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9854139</commentid>
    <comment_count>19</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-03 14:22:30 -0400</bug_when>
    <thetext>hadoop-2.4.1-24.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9869285</commentid>
    <comment_count>20</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-07 18:24:46 -0500</bug_when>
    <thetext>hadoop-2.4.1-24.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9905694</commentid>
    <comment_count>21</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-19 16:03:54 -0500</bug_when>
    <thetext>hadoop-2.4.1-24.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1148179</attachid>
            <date>2016-04-18 07:44:00 -0400</date>
            <delta_ts>2016-07-20 04:48:38 -0400</delta_ts>
            <desc>Patch against the Fedora git enabling libhdfs for all architectures.</desc>
            <filename>hadoop-native.patch</filename>
            <type>text/plain</type>
            <size>6324</size>
            <attacher name="Mattias Ellert">mattias.ellert</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL2hhZG9vcC0yLjQuMS1jbWFrZS1qYXZhLXBwYzY0bGUucGF0Y2ggYi9oYWRv
b3AtMi40LjEtY21ha2UtamF2YS1wcGM2NGxlLnBhdGNoCmRlbGV0ZWQgZmlsZSBtb2RlIDEwMDY0
NAppbmRleCAwZjNiM2ExLi4wMDAwMDAwCi0tLSBhL2hhZG9vcC0yLjQuMS1jbWFrZS1qYXZhLXBw
YzY0bGUucGF0Y2gKKysrIC9kZXYvbnVsbApAQCAtMSwxMiArMCwwIEBACi1kaWZmIC11cCBoYWRv
b3AtY29tbW9uLTllMmVmNDNhMjQwZmIwZjYwM2Q4YzM4NGU1MDFkYWVjMTE1MjQ1MTAvaGFkb29w
LWNvbW1vbi1wcm9qZWN0L2hhZG9vcC1jb21tb24vc3JjL0pOSUZsYWdzLmNtYWtlLnBwYyBoYWRv
b3AtY29tbW9uLTllMmVmNDNhMjQwZmIwZjYwM2Q4YzM4NGU1MDFkYWVjMTE1MjQ1MTAvaGFkb29w
LWNvbW1vbi1wcm9qZWN0L2hhZG9vcC1jb21tb24vc3JjL0pOSUZsYWdzLmNtYWtlCi0tLS0gaGFk
b29wLWNvbW1vbi05ZTJlZjQzYTI0MGZiMGY2MDNkOGMzODRlNTAxZGFlYzExNTI0NTEwL2hhZG9v
cC1jb21tb24tcHJvamVjdC9oYWRvb3AtY29tbW9uL3NyYy9KTklGbGFncy5jbWFrZS5wcGMJMjAx
NC0wNi0zMCAwOTowNDo1Ny4wMDAwMDAwMDAgKzAyMDAKLSsrKyBoYWRvb3AtY29tbW9uLTllMmVm
NDNhMjQwZmIwZjYwM2Q4YzM4NGU1MDFkYWVjMTE1MjQ1MTAvaGFkb29wLWNvbW1vbi1wcm9qZWN0
L2hhZG9vcC1jb21tb24vc3JjL0pOSUZsYWdzLmNtYWtlCTIwMTQtMTAtMTAgMTA6Mzc6MzkuMDAw
MDAwMDAwICswMjAwCi1AQCAtNzgsNiArNzgsOCBAQCBJRigiJHtDTUFLRV9TWVNURU19IiBNQVRD
SEVTICJMaW51eCIpCi0gICAgICAgICBTRVQoX2phdmFfbGliYXJjaCAiYW1kNjQiKQotICAgICBF
TFNFSUYgKENNQUtFX1NZU1RFTV9QUk9DRVNTT1IgTUFUQ0hFUyAiXmFybSIpCi0gICAgICAgICBT
RVQoX2phdmFfbGliYXJjaCAiYXJtIikKLSsgICAgRUxTRUlGIChDTUFLRV9TWVNURU1fUFJPQ0VT
U09SIE1BVENIRVMgIl4ocG93ZXJwY3xwcGMpNjRsZSIpCi0rICAgICAgU0VUKF9qYXZhX2xpYmFy
Y2ggInBwYzY0IikKLSAgICAgRUxTRSgpCi0gICAgICAgICBTRVQoX2phdmFfbGliYXJjaCAke0NN
QUtFX1NZU1RFTV9QUk9DRVNTT1J9KQotICAgICBFTkRJRigpCmRpZmYgLS1naXQgYS9oYWRvb3At
ZGxvcGVuLWxpYmp2bS5wYXRjaCBiL2hhZG9vcC1kbG9wZW4tbGlianZtLnBhdGNoCmluZGV4IDE3
YWQ4MTMuLjIyZGYwODggMTAwNjQ0Ci0tLSBhL2hhZG9vcC1kbG9wZW4tbGlianZtLnBhdGNoCisr
KyBiL2hhZG9vcC1kbG9wZW4tbGlianZtLnBhdGNoCkBAIC00Niw3ICs0Niw3IEBAIGluZGV4IDg3
ODI4OWYuLjYyNjg2YjMgMTAwNjQ0CiAgI2luY2x1ZGUgPHN0ZGlvLmg+IAogICNpbmNsdWRlIDxz
dHJpbmcuaD4gCiAgCi1AQCAtNDQyLDEwICs0NDMsNDQgQEAgc3RhdGljIEpOSUVudiogZ2V0R2xv
YmFsSk5JRW52KHZvaWQpCitAQCAtNDQyLDEwICs0NDMsODIgQEAgc3RhdGljIEpOSUVudiogZ2V0
R2xvYmFsSk5JRW52KHZvaWQpCiAgICAgIGppbnQgcnYgPSAwOyAKICAgICAgamludCBub1ZNcyA9
IDA7CiAgICAgIGp0aHJvd2FibGUganRocjsKQEAgLTYzLDE3ICs2Myw1NSBAQCBpbmRleCA4Nzgy
ODlmLi42MjY4NmIzIDEwMDY0NAogKyAgICAgICAgamF2YUhvbWUgPSAiL3Vzci9saWIvanZtIjsK
ICsgICAgfQogKworKyNpZiAgIGRlZmluZWQoX194ODZfNjRfXykgJiYgZGVmaW5lZCAoX19MUDY0
X18pCisrICAgIGNvbnN0IGNoYXIgKmFyY2g9ImFtZDY0IjsKKysjZWxpZiBkZWZpbmVkKF9feDg2
XzY0X18pICYmIGRlZmluZWQgKF9fSUxQMzJfXykKKysgICAgY29uc3QgY2hhciAqYXJjaD0ieDMy
IjsKKysjZWxpZiBkZWZpbmVkKF9fcG93ZXJwYzY0X18pICYmIGRlZmluZWQoX19MSVRUTEVfRU5E
SUFOX18pCisrICAgIGNvbnN0IGNoYXIgKmFyY2g9InBwYzY0bGUiOworKyNlbGlmIGRlZmluZWQo
X19wb3dlcnBjNjRfXykKKysgICAgY29uc3QgY2hhciAqYXJjaD0icHBjNjQiOworKyNlbGlmIGRl
ZmluZWQoX19wb3dlcnBjX18pCisrICAgIGNvbnN0IGNoYXIgKmFyY2g9InBwYyI7CisrI2VsaWYg
ZGVmaW5lZChfX2kzODZfXykKKysgICAgY29uc3QgY2hhciAqYXJjaD0iaTM4NiI7CisrI2VsaWYg
ZGVmaW5lZChfX2lhNjRfXykKKysgICAgY29uc3QgY2hhciAqYXJjaD0iaWE2NCI7CisrI2VsaWYg
ZGVmaW5lZChfX3MzOTB4X18pCisrICAgIGNvbnN0IGNoYXIgKmFyY2g9InMzOTB4IjsKKysjZWxp
ZiBkZWZpbmVkKF9fczM5MF9fKQorKyAgICBjb25zdCBjaGFyICphcmNoPSJzMzkwIjsKKysjZWxp
ZiBkZWZpbmVkKF9fYXJtZWxfXykKKysgICAgY29uc3QgY2hhciAqYXJjaD0iYXJtIjsKKysjZWxp
ZiBkZWZpbmVkKF9fYXJtX18pCisrICAgIGNvbnN0IGNoYXIgKmFyY2g9ImFybSI7CisrI2VsaWYg
ZGVmaW5lZChfX2FhcmNoNjRfXykKKysgICAgY29uc3QgY2hhciAqYXJjaD0iYWFyY2g2NCI7Cisr
I2VsaWYgZGVmaW5lZChfX3NwYXJjX18pICYmIGRlZmluZWQoX19hcmNoNjRfXykKKysgICAgY29u
c3QgY2hhciAqYXJjaD0ic3BhcmN2OSI7CisrI2VsaWYgZGVmaW5lZChfX3NwYXJjX18pCisrICAg
IGNvbnN0IGNoYXIgKmFyY2g9InNwYXJjIjsKKysjZWxpZiBkZWZpbmVkKF9fYWxwaGFfXykKKysg
ICAgY29uc3QgY2hhciAqYXJjaD0iYWxwaGEiOworKyNlbGlmIGRlZmluZWQoX19taXBzX18pICYm
IGRlZmluZWQoX19NSVBTRUxfXykgJiYgX01JUFNfU0lNPT1fQUJJTzMyCisrICAgIGNvbnN0IGNo
YXIgKmFyY2g9Im1pcHNlbCI7CisrI2VsaWYgZGVmaW5lZChfX21pcHNfXykgJiYgZGVmaW5lZChf
X01JUFNFTF9fKQorKyAgICBjb25zdCBjaGFyICphcmNoPSJtaXBzNjRlbCI7CisrI2VsaWYgZGVm
aW5lZChfX21pcHNfXykgJiYgX01JUFNfU0lNPT1fQUJJTzMyCisrICAgIGNvbnN0IGNoYXIgKmFy
Y2g9Im1pcHMiOworKyNlbGlmIGRlZmluZWQoX19taXBzX18pCisrICAgIGNvbnN0IGNoYXIgKmFy
Y2g9Im1pcHM2NCI7CisrI2Vsc2UKKysjZXJyb3IgVW5rbm93biBKVk0gYXJjaGl0ZWN0dXJlCisr
I2VuZGlmCisrCiArICAgIC8vTG9hZCB0aGUgYXBwcm9wcmlhdGUgbGlianZtCiArICAgIGNoYXIg
bGlianZtUGF0aFtzdHJsZW4oamF2YUhvbWUpKzM1XTsKLSsgICAgc25wcmludGYobGlianZtUGF0
aCwgc2l6ZW9mKGxpYmp2bVBhdGgpLCAiJXMvanJlL2xpYi9hbWQ2NC9zZXJ2ZXIvbGlianZtLnNv
IiwgamF2YUhvbWUpOworKyAgICBzbnByaW50ZihsaWJqdm1QYXRoLCBzaXplb2YobGlianZtUGF0
aCksICIlcy9qcmUvbGliLyVzL3NlcnZlci9saWJqdm0uc28iLCBqYXZhSG9tZSwgYXJjaCk7CiAr
ICAgIGp2bUhhbmRsZSA9IGRsb3BlbihsaWJqdm1QYXRoLCBSVExEX05PV3xSVExEX0xPQ0FMKTsK
ICsgICAgaWYgKGp2bUhhbmRsZSA9PSBOVUxMKSB7Ci0rICAgICAgICBzbnByaW50ZihsaWJqdm1Q
YXRoLCBzaXplb2YobGlianZtUGF0aCksICIlcy9qcmUvbGliL2kzODYvc2VydmVyL2xpYmp2bS5z
byIsIGphdmFIb21lKTsKLSsgICAgICAgIGp2bUhhbmRsZSA9IGRsb3BlbihsaWJqdm1QYXRoLCBS
VExEX05PV3xSVExEX0xPQ0FMKTsKLSsgICAgICAgIGlmIChqdm1IYW5kbGUgPT0gTlVMTCkgewot
KyAgICAgICAgICAgIGZwcmludGYoc3RkZXJyLCAiRmFpbGVkIHRvIGxvYWQgbGlianZtLnNvIVxu
Iik7Ci0rICAgICAgICAgICAgcmV0dXJuIE5VTEw7Ci0rICAgICAgICB9CisrICAgICAgICBmcHJp
bnRmKHN0ZGVyciwgIkZhaWxlZCB0byBsb2FkIGxpYmp2bS5zbyFcbiIpOworKyAgICAgICAgcmV0
dXJuIE5VTEw7CiArICAgIH0KICAKIC0gICAgcnYgPSBKTklfR2V0Q3JlYXRlZEphdmFWTXMoJih2
bUJ1ZlswXSksIHZtQnVmTGVuZ3RoLCAmbm9WTXMpOwpAQCAtOTIsNyArMTMwLDcgQEAgaW5kZXgg
ODc4Mjg5Zi4uNjI2ODZiMyAxMDA2NDQKICAgICAgICAgIHJldHVybiBOVUxMOwogICAgICB9CiAg
Ci1AQCAtNDU0LDYgKzQ4OSw3IEBAIHN0YXRpYyBKTklFbnYqIGdldEdsb2JhbEpOSUVudih2b2lk
KQorQEAgLTQ1NCw2ICs1MjcsNyBAQCBzdGF0aWMgSk5JRW52KiBnZXRHbG9iYWxKTklFbnYodm9p
ZCkKICAgICAgICAgIGNoYXIgKmhhZG9vcENsYXNzUGF0aCA9IGdldGVudigiQ0xBU1NQQVRIIik7
CiAgICAgICAgICBpZiAoaGFkb29wQ2xhc3NQYXRoID09IE5VTEwpIHsKICAgICAgICAgICAgICBm
cHJpbnRmKHN0ZGVyciwgIkVudmlyb25tZW50IHZhcmlhYmxlIENMQVNTUEFUSCBub3Qgc2V0IVxu
Iik7CkBAIC0xMDAsNyArMTM4LDcgQEAgaW5kZXggODc4Mjg5Zi4uNjI2ODZiMyAxMDA2NDQKICAg
ICAgICAgICAgICByZXR1cm4gTlVMTDsKICAgICAgICAgIH0gCiAgICAgICAgICBjaGFyICpoYWRv
b3BDbGFzc1BhdGhWTUFyZyA9ICItRGphdmEuY2xhc3MucGF0aD0iOwotQEAgLTUwMiw3ICs1Mzgs
MTUgQEAgc3RhdGljIEpOSUVudiogZ2V0R2xvYmFsSk5JRW52KHZvaWQpCitAQCAtNTAyLDcgKzU3
NiwxNSBAQCBzdGF0aWMgSk5JRW52KiBnZXRHbG9iYWxKTklFbnYodm9pZCkKICAgICAgICAgIHZt
X2FyZ3Mubk9wdGlvbnMgPSBub0FyZ3M7IAogICAgICAgICAgdm1fYXJncy5pZ25vcmVVbnJlY29n
bml6ZWQgPSAxOwogIApAQCAtMTE3LDcgKzE1NSw3IEBAIGluZGV4IDg3ODI4OWYuLjYyNjg2YjMg
MTAwNjQ0CiAgCiAgICAgICAgICBpZiAoaGFkb29wSnZtQXJncyAhPSBOVUxMKSAgewogICAgICAg
ICAgICBmcmVlKGhhZG9vcEp2bUFyZ3MpOwotQEAgLTUxMiw2ICs1NTYsNyBAQCBzdGF0aWMgSk5J
RW52KiBnZXRHbG9iYWxKTklFbnYodm9pZCkKK0BAIC01MTIsNiArNTk0LDcgQEAgc3RhdGljIEpO
SUVudiogZ2V0R2xvYmFsSk5JRW52KHZvaWQpCiAgICAgICAgICBpZiAocnYgIT0gMCkgewogICAg
ICAgICAgICAgIGZwcmludGYoc3RkZXJyLCAiQ2FsbCB0byBKTklfQ3JlYXRlSmF2YVZNIGZhaWxl
ZCAiCiAgICAgICAgICAgICAgICAgICAgICAid2l0aCBlcnJvcjogJWRcbiIsIHJ2KTsKZGlmZiAt
LWdpdCBhL2hhZG9vcC5zcGVjIGIvaGFkb29wLnNwZWMKaW5kZXggYjY2MWRiZi4uYWVkZmVjZSAx
MDA2NDQKLS0tIGEvaGFkb29wLnNwZWMKKysrIGIvaGFkb29wLnNwZWMKQEAgLTEsMTEgKzEsNiBA
QAogJWdsb2JhbCBfaGFyZGVuZWRfYnVpbGQgMQogCi0jIGxpYmhkZnMgaXMgb25seSBzdXBwb3J0
ZWQgb24gaW50ZWwgYXJjaGl0ZWN0dXJlcyBhdG0uCi0laWZhcmNoICVpeDg2IHg4Nl82NAogJWds
b2JhbCBwYWNrYWdlX2xpYmhkZnMgMQotJWVsc2UKLSVnbG9iYWwgcGFja2FnZV9saWJoZGZzIDAK
LSVlbmRpZgogCiAlZ2xvYmFsIGNvbW1pdCA5ZTJlZjQzYTI0MGZiMGY2MDNkOGMzODRlNTAxZGFl
YzExNTI0NTEwCiAlZ2xvYmFsIHNob3J0Y29tbWl0ICUoYz0le2NvbW1pdH07IGVjaG8gJHtjOjA6
N30pCkBAIC02NSw4ICs2MCw2IEBAIFBhdGNoODogJXtuYW1lfS1uZXR0eS0zLUZpbmFsLnBhdGNo
CiBQYXRjaDk6ICV7bmFtZX0tdG9vbHMuamFyLnBhdGNoCiAjIFdvcmthcm91bmQgZm9yIGJ6MTAx
MjA1OQogUGF0Y2gxMDogJXtuYW1lfS1idWlsZC5wYXRjaAotIyBGaXggSmF2YSBkZXRlY3Rpb24g
b24gcHBjNjRsZQotUGF0Y2gxMTogJXtuYW1lfS0yLjQuMS1jbWFrZS1qYXZhLXBwYzY0bGUucGF0
Y2gKICMgQnVpbGQgd2l0aCBoYXJkLWZsb2F0IG9uIEFSTXY3CiBQYXRjaDEyOiAle25hbWV9LWFy
bWhmcC5wYXRjaAogCkBAIC00NjYsNyArNDU5LDYgQEAgVGhpcyBwYWNrYWdlIGNvbnRhaW5zIGZp
bGVzIG5lZWRlZCB0byBydW4gQXBhY2hlIEhhZG9vcCBZQVJOIGluIHNlY3VyZSBtb2RlLgogJWVu
ZGlmCiAlcGF0Y2g5IC1wMQogJXBhdGNoMTAgLXAxCi0lcGF0Y2gxMSAtcDEKICVwYXRjaDEyIC1w
MQogJXBhdGNoMTMgLXAxCiAlcGF0Y2gxNCAtcDEKQEAgLTc2NSw3ICs3NTcsNyBAQCBwb3BkCiAj
IENvcHkgdGhlIHRvbWNhdCBjb25maWd1cmF0aW9uIGFuZCBvdmVybGF5IHdpdGggc3BlY2lmaWMg
Y29uZmlndXJhdGlvbiBiaXRzLgogIyBUaGlzIGlzIG5lZWRlZCBzbyB0aGUgaHR0cGZzIGluc3Rh
bmNlIHdvbid0IGNvbGxpZGUgd2l0aCBhIHN5c3RlbSBydW5uaW5nCiAjIHRvbWNhdAotZm9yIGNm
Z2ZpbGUgaW4gY2F0YWxpbmEucG9saWN5IGNhdGFsaW5hLnByb3BlcnRpZXMgY29udGV4dC54bWwg
bG9nNGoucHJvcGVydGllcyBcCitmb3IgY2ZnZmlsZSBpbiBjYXRhbGluYS5wb2xpY3kgY2F0YWxp
bmEucHJvcGVydGllcyBjb250ZXh0LnhtbCBcCiAJdG9tY2F0LmNvbmYgd2ViLnhtbCBzZXJ2ZXIu
eG1sIGxvZ2dpbmcucHJvcGVydGllczsKIGRvCiAgIGNwIC1hICV7X3N5c2NvbmZkaXJ9L3RvbWNh
dC8kY2ZnZmlsZSAle2J1aWxkcm9vdH0vJXtfc3lzY29uZmRpcn0vJXtuYW1lfS90b21jYXQK
</data>

          </attachment>
          <attachment
              isobsolete="1"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1148180</attachid>
            <date>2016-04-18 07:46:00 -0400</date>
            <delta_ts>2016-07-20 04:48:38 -0400</delta_ts>
            <desc>This is the new version of the hadoop-dlopen-libjvm.patch if you prefer it this way.</desc>
            <filename>hadoop-dlopen-libjvm.patch</filename>
            <type>text/plain</type>
            <size>6106</size>
            <attacher name="Mattias Ellert">mattias.ellert</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL2hhZG9vcC1jb21tb24tcHJvamVjdC9oYWRvb3AtY29tbW9uL3NyYy9DTWFr
ZUxpc3RzLnR4dCBiL2hhZG9vcC1jb21tb24tcHJvamVjdC9oYWRvb3AtY29tbW9uL3NyYy9DTWFr
ZUxpc3RzLnR4dAppbmRleCBkZWM2M2M0Li5kZTIxYmFiIDEwMDY0NAotLS0gYS9oYWRvb3AtY29t
bW9uLXByb2plY3QvaGFkb29wLWNvbW1vbi9zcmMvQ01ha2VMaXN0cy50eHQKKysrIGIvaGFkb29w
LWNvbW1vbi1wcm9qZWN0L2hhZG9vcC1jb21tb24vc3JjL0NNYWtlTGlzdHMudHh0CkBAIC0yMDUs
NyArMjA1LDYgQEAgRU5ESUYoKQogCiB0YXJnZXRfbGlua19kdWFsX2xpYnJhcmllcyhoYWRvb3AK
ICAgICAke0xJQl9ETH0KLSAgICAke0pBVkFfSlZNX0xJQlJBUll9CiApCiBTRVQoTElCSEFET09Q
X1ZFUlNJT04gIjEuMC4wIikKIFNFVF9UQVJHRVRfUFJPUEVSVElFUyhoYWRvb3AgUFJPUEVSVElF
UwpkaWZmIC0tZ2l0IGEvaGFkb29wLWhkZnMtcHJvamVjdC9oYWRvb3AtaGRmcy9zcmMvQ01ha2VM
aXN0cy50eHQgYi9oYWRvb3AtaGRmcy1wcm9qZWN0L2hhZG9vcC1oZGZzL3NyYy9DTWFrZUxpc3Rz
LnR4dAppbmRleCA4MmQxYTMyLi4yMTUxYmI4IDEwMDY0NAotLS0gYS9oYWRvb3AtaGRmcy1wcm9q
ZWN0L2hhZG9vcC1oZGZzL3NyYy9DTWFrZUxpc3RzLnR4dAorKysgYi9oYWRvb3AtaGRmcy1wcm9q
ZWN0L2hhZG9vcC1oZGZzL3NyYy9DTWFrZUxpc3RzLnR4dApAQCAtOTksNyArOTksNiBAQCBpZiAo
TkVFRF9MSU5LX0RMKQogZW5kaWYoTkVFRF9MSU5LX0RMKQogCiB0YXJnZXRfbGlua19kdWFsX2xp
YnJhcmllcyhoZGZzCi0gICAgJHtKQVZBX0pWTV9MSUJSQVJZfQogICAgICR7TElCX0RMfQogICAg
IHB0aHJlYWQKICkKZGlmZiAtLWdpdCBhL2hhZG9vcC1oZGZzLXByb2plY3QvaGFkb29wLWhkZnMv
c3JjL21haW4vbmF0aXZlL2Z1c2UtZGZzL0NNYWtlTGlzdHMudHh0IGIvaGFkb29wLWhkZnMtcHJv
amVjdC9oYWRvb3AtaGRmcy9zcmMvbWFpbi9uYXRpdmUvZnVzZS1kZnMvQ01ha2VMaXN0cy50eHQK
aW5kZXggZGQzZjFlNi4uNjhiYTQyMiAxMDA2NDQKLS0tIGEvaGFkb29wLWhkZnMtcHJvamVjdC9o
YWRvb3AtaGRmcy9zcmMvbWFpbi9uYXRpdmUvZnVzZS1kZnMvQ01ha2VMaXN0cy50eHQKKysrIGIv
aGFkb29wLWhkZnMtcHJvamVjdC9oYWRvb3AtaGRmcy9zcmMvbWFpbi9uYXRpdmUvZnVzZS1kZnMv
Q01ha2VMaXN0cy50eHQKQEAgLTY4LDcgKzY4LDYgQEAgSUYoRlVTRV9GT1VORCkKICAgICApCiAg
ICAgdGFyZ2V0X2xpbmtfbGlicmFyaWVzKGZ1c2VfZGZzCiAgICAgICAgICR7RlVTRV9MSUJSQVJJ
RVN9Ci0gICAgICAgICR7SkFWQV9KVk1fTElCUkFSWX0KICAgICAgICAgaGRmcwogICAgICAgICBt
CiAgICAgICAgIHB0aHJlYWQKZGlmZiAtLWdpdCBhL2hhZG9vcC1oZGZzLXByb2plY3QvaGFkb29w
LWhkZnMvc3JjL21haW4vbmF0aXZlL2xpYmhkZnMvam5pX2hlbHBlci5jIGIvaGFkb29wLWhkZnMt
cHJvamVjdC9oYWRvb3AtaGRmcy9zcmMvbWFpbi9uYXRpdmUvbGliaGRmcy9qbmlfaGVscGVyLmMK
aW5kZXggODc4Mjg5Zi4uNjI2ODZiMyAxMDA2NDQKLS0tIGEvaGFkb29wLWhkZnMtcHJvamVjdC9o
YWRvb3AtaGRmcy9zcmMvbWFpbi9uYXRpdmUvbGliaGRmcy9qbmlfaGVscGVyLmMKKysrIGIvaGFk
b29wLWhkZnMtcHJvamVjdC9oYWRvb3AtaGRmcy9zcmMvbWFpbi9uYXRpdmUvbGliaGRmcy9qbmlf
aGVscGVyLmMKQEAgLTIwLDYgKzIwLDcgQEAKICNpbmNsdWRlICJleGNlcHRpb24uaCIKICNpbmNs
dWRlICJqbmlfaGVscGVyLmgiCiAKKyNpbmNsdWRlIDxkbGZjbi5oPgogI2luY2x1ZGUgPHN0ZGlv
Lmg+IAogI2luY2x1ZGUgPHN0cmluZy5oPiAKIApAQCAtNDQyLDEwICs0NDMsODIgQEAgc3RhdGlj
IEpOSUVudiogZ2V0R2xvYmFsSk5JRW52KHZvaWQpCiAgICAgamludCBydiA9IDA7IAogICAgIGpp
bnQgbm9WTXMgPSAwOwogICAgIGp0aHJvd2FibGUganRocjsKKyAgICB2b2lkICpqdm1IYW5kbGUg
PSBOVUxMOworICAgIGppbnQgSk5JQ0FMTCAoKmdldENyZWF0ZWRKYXZhSlZNc1B0cikoSmF2YVZN
ICoqLCBqc2l6ZSwganNpemUgKik7CisgICAgZ2V0Q3JlYXRlZEphdmFKVk1zUHRyID0gTlVMTDsg
CisgICAgamludCBKTklDQUxMICgqY3JlYXRlSmF2YVZNUHRyKShKYXZhVk0gKiosIHZvaWQgKios
IHZvaWQgKik7CisgICAgY3JlYXRlSmF2YVZNUHRyID0gTlVMTDsKKyAgICBjaGFyICpkbHN5bV9l
cnJvciA9IE5VTEw7CisKKyAgICAvL0dldCBKQVZBX0hPTUUgdG8gdXNlIGFwcHJvcHJpYXRlIGxp
Ymp2bQorICAgIGNoYXIgKmphdmFIb21lID0gZ2V0ZW52KCJKQVZBX0hPTUUiKTsKKyAgICBpZiAo
amF2YUhvbWUgPT0gTlVMTCkgeworICAgICAgICBqYXZhSG9tZSA9ICIvdXNyL2xpYi9qdm0iOwor
ICAgIH0KKworI2lmICAgZGVmaW5lZChfX3g4Nl82NF9fKSAmJiBkZWZpbmVkIChfX0xQNjRfXykK
KyAgICBjb25zdCBjaGFyICphcmNoPSJhbWQ2NCI7CisjZWxpZiBkZWZpbmVkKF9feDg2XzY0X18p
ICYmIGRlZmluZWQgKF9fSUxQMzJfXykKKyAgICBjb25zdCBjaGFyICphcmNoPSJ4MzIiOworI2Vs
aWYgZGVmaW5lZChfX3Bvd2VycGM2NF9fKSAmJiBkZWZpbmVkKF9fTElUVExFX0VORElBTl9fKQor
ICAgIGNvbnN0IGNoYXIgKmFyY2g9InBwYzY0bGUiOworI2VsaWYgZGVmaW5lZChfX3Bvd2VycGM2
NF9fKQorICAgIGNvbnN0IGNoYXIgKmFyY2g9InBwYzY0IjsKKyNlbGlmIGRlZmluZWQoX19wb3dl
cnBjX18pCisgICAgY29uc3QgY2hhciAqYXJjaD0icHBjIjsKKyNlbGlmIGRlZmluZWQoX19pMzg2
X18pCisgICAgY29uc3QgY2hhciAqYXJjaD0iaTM4NiI7CisjZWxpZiBkZWZpbmVkKF9faWE2NF9f
KQorICAgIGNvbnN0IGNoYXIgKmFyY2g9ImlhNjQiOworI2VsaWYgZGVmaW5lZChfX3MzOTB4X18p
CisgICAgY29uc3QgY2hhciAqYXJjaD0iczM5MHgiOworI2VsaWYgZGVmaW5lZChfX3MzOTBfXykK
KyAgICBjb25zdCBjaGFyICphcmNoPSJzMzkwIjsKKyNlbGlmIGRlZmluZWQoX19hcm1lbF9fKQor
ICAgIGNvbnN0IGNoYXIgKmFyY2g9ImFybSI7CisjZWxpZiBkZWZpbmVkKF9fYXJtX18pCisgICAg
Y29uc3QgY2hhciAqYXJjaD0iYXJtIjsKKyNlbGlmIGRlZmluZWQoX19hYXJjaDY0X18pCisgICAg
Y29uc3QgY2hhciAqYXJjaD0iYWFyY2g2NCI7CisjZWxpZiBkZWZpbmVkKF9fc3BhcmNfXykgJiYg
ZGVmaW5lZChfX2FyY2g2NF9fKQorICAgIGNvbnN0IGNoYXIgKmFyY2g9InNwYXJjdjkiOworI2Vs
aWYgZGVmaW5lZChfX3NwYXJjX18pCisgICAgY29uc3QgY2hhciAqYXJjaD0ic3BhcmMiOworI2Vs
aWYgZGVmaW5lZChfX2FscGhhX18pCisgICAgY29uc3QgY2hhciAqYXJjaD0iYWxwaGEiOworI2Vs
aWYgZGVmaW5lZChfX21pcHNfXykgJiYgZGVmaW5lZChfX01JUFNFTF9fKSAmJiBfTUlQU19TSU09
PV9BQklPMzIKKyAgICBjb25zdCBjaGFyICphcmNoPSJtaXBzZWwiOworI2VsaWYgZGVmaW5lZChf
X21pcHNfXykgJiYgZGVmaW5lZChfX01JUFNFTF9fKQorICAgIGNvbnN0IGNoYXIgKmFyY2g9Im1p
cHM2NGVsIjsKKyNlbGlmIGRlZmluZWQoX19taXBzX18pICYmIF9NSVBTX1NJTT09X0FCSU8zMgor
ICAgIGNvbnN0IGNoYXIgKmFyY2g9Im1pcHMiOworI2VsaWYgZGVmaW5lZChfX21pcHNfXykKKyAg
ICBjb25zdCBjaGFyICphcmNoPSJtaXBzNjQiOworI2Vsc2UKKyNlcnJvciBVbmtub3duIEpWTSBh
cmNoaXRlY3R1cmUKKyNlbmRpZgorCisgICAgLy9Mb2FkIHRoZSBhcHByb3ByaWF0ZSBsaWJqdm0K
KyAgICBjaGFyIGxpYmp2bVBhdGhbc3RybGVuKGphdmFIb21lKSszNV07CisgICAgc25wcmludGYo
bGlianZtUGF0aCwgc2l6ZW9mKGxpYmp2bVBhdGgpLCAiJXMvanJlL2xpYi8lcy9zZXJ2ZXIvbGli
anZtLnNvIiwgamF2YUhvbWUsIGFyY2gpOworICAgIGp2bUhhbmRsZSA9IGRsb3BlbihsaWJqdm1Q
YXRoLCBSVExEX05PV3xSVExEX0xPQ0FMKTsKKyAgICBpZiAoanZtSGFuZGxlID09IE5VTEwpIHsK
KyAgICAgICAgZnByaW50ZihzdGRlcnIsICJGYWlsZWQgdG8gbG9hZCBsaWJqdm0uc28hXG4iKTsK
KyAgICAgICAgcmV0dXJuIE5VTEw7CisgICAgfQogCi0gICAgcnYgPSBKTklfR2V0Q3JlYXRlZEph
dmFWTXMoJih2bUJ1ZlswXSksIHZtQnVmTGVuZ3RoLCAmbm9WTXMpOworICAgIC8vTG9hZCB0aGUg
Sk5JX0dldENyZWF0ZWRKYXZhVk1zIGZ1bmN0aW9uIGZyb20gdGhlIGxpYmp2bSBsaWJyYXJ5Cisg
ICAgKih2b2lkICoqKSgmZ2V0Q3JlYXRlZEphdmFKVk1zUHRyKSA9IGRsc3ltKGp2bUhhbmRsZSwg
IkpOSV9HZXRDcmVhdGVkSmF2YVZNcyIpOworICAgIGRsc3ltX2Vycm9yID0gZGxlcnJvcigpOwor
ICAgIGlmIChkbHN5bV9lcnJvcikgeworICAgICAgICBmcHJpbnRmKHN0ZGVyciwgIkNhbiBub3Qg
bG9hZCBzeW1ib2wgSk5JX0dldENyZWF0ZWRKYXZhVk1zOiAlc1xuIiwgZGxzeW1fZXJyb3IpOwor
ICAgICAgICBkbGNsb3NlKGp2bUhhbmRsZSk7CisgICAgICAgIHJldHVybiBOVUxMOworICAgIH0K
KyAgICBydiA9ICgqZ2V0Q3JlYXRlZEphdmFKVk1zUHRyKSgmKHZtQnVmWzBdKSwgdm1CdWZMZW5n
dGgsICZub1ZNcyk7CiAgICAgaWYgKHJ2ICE9IDApIHsKICAgICAgICAgZnByaW50ZihzdGRlcnIs
ICJKTklfR2V0Q3JlYXRlZEphdmFWTXMgZmFpbGVkIHdpdGggZXJyb3I6ICVkXG4iLCBydik7Cisg
ICAgICAgIGRsY2xvc2UoanZtSGFuZGxlKTsKICAgICAgICAgcmV0dXJuIE5VTEw7CiAgICAgfQog
CkBAIC00NTQsNiArNTI3LDcgQEAgc3RhdGljIEpOSUVudiogZ2V0R2xvYmFsSk5JRW52KHZvaWQp
CiAgICAgICAgIGNoYXIgKmhhZG9vcENsYXNzUGF0aCA9IGdldGVudigiQ0xBU1NQQVRIIik7CiAg
ICAgICAgIGlmIChoYWRvb3BDbGFzc1BhdGggPT0gTlVMTCkgewogICAgICAgICAgICAgZnByaW50
ZihzdGRlcnIsICJFbnZpcm9ubWVudCB2YXJpYWJsZSBDTEFTU1BBVEggbm90IHNldCFcbiIpOwor
ICAgICAgICAgICAgZGxjbG9zZShqdm1IYW5kbGUpOwogICAgICAgICAgICAgcmV0dXJuIE5VTEw7
CiAgICAgICAgIH0gCiAgICAgICAgIGNoYXIgKmhhZG9vcENsYXNzUGF0aFZNQXJnID0gIi1EamF2
YS5jbGFzcy5wYXRoPSI7CkBAIC01MDIsNyArNTc2LDE1IEBAIHN0YXRpYyBKTklFbnYqIGdldEds
b2JhbEpOSUVudih2b2lkKQogICAgICAgICB2bV9hcmdzLm5PcHRpb25zID0gbm9BcmdzOyAKICAg
ICAgICAgdm1fYXJncy5pZ25vcmVVbnJlY29nbml6ZWQgPSAxOwogCi0gICAgICAgIHJ2ID0gSk5J
X0NyZWF0ZUphdmFWTSgmdm0sICh2b2lkKikmZW52LCAmdm1fYXJncyk7CisgICAgICAgIC8vTG9h
ZCB0aGUgSk5JX0NyZWF0ZUphdmFWTSBmdW5jdGlvbiBmcm9tIHRoZSBsaWJqdm0gbGlicmFyeQor
ICAgICAgICAqKHZvaWQgKiopKCZjcmVhdGVKYXZhVk1QdHIpID0gZGxzeW0oanZtSGFuZGxlLCAi
Sk5JX0NyZWF0ZUphdmFWTSIpOworICAgICAgICBkbHN5bV9lcnJvciA9IGRsZXJyb3IoKTsKKyAg
ICAgICAgaWYgKGRsc3ltX2Vycm9yKSB7CisgICAgICAgICAgICBmcHJpbnRmKHN0ZGVyciwgIkNh
biBub3QgbG9hZCBzeW1ib2wgSk5JX0NyZWF0ZUphdmFWTTogJXNcbiIsIGRsc3ltX2Vycm9yKTsK
KyAgICAgICAgICAgIGRsY2xvc2UoanZtSGFuZGxlKTsKKyAgICAgICAgICAgIHJldHVybiBOVUxM
OworICAgICAgICB9CisgICAgICAgIHJ2ID0gKCpjcmVhdGVKYXZhVk1QdHIpKCZ2bSwgKHZvaWQq
KSZlbnYsICZ2bV9hcmdzKTsKIAogICAgICAgICBpZiAoaGFkb29wSnZtQXJncyAhPSBOVUxMKSAg
ewogICAgICAgICAgIGZyZWUoaGFkb29wSnZtQXJncyk7CkBAIC01MTIsNiArNTk0LDcgQEAgc3Rh
dGljIEpOSUVudiogZ2V0R2xvYmFsSk5JRW52KHZvaWQpCiAgICAgICAgIGlmIChydiAhPSAwKSB7
CiAgICAgICAgICAgICBmcHJpbnRmKHN0ZGVyciwgIkNhbGwgdG8gSk5JX0NyZWF0ZUphdmFWTSBm
YWlsZWQgIgogICAgICAgICAgICAgICAgICAgICAid2l0aCBlcnJvcjogJWRcbiIsIHJ2KTsKKyAg
ICAgICAgICAgIGRsY2xvc2UoanZtSGFuZGxlKTsKICAgICAgICAgICAgIHJldHVybiBOVUxMOwog
ICAgICAgICB9CiAgICAgICAgIGp0aHIgPSBpbnZva2VNZXRob2QoZW52LCBOVUxMLCBTVEFUSUMs
IE5VTEwsCg==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1181965</attachid>
            <date>2016-07-20 04:48:00 -0400</date>
            <delta_ts>2016-07-20 04:48:38 -0400</delta_ts>
            <desc>New version with function type cast instead of (**void) defreference</desc>
            <filename>hadoop-dlopen-libjvm.patch</filename>
            <type>text/plain</type>
            <size>6173</size>
            <attacher name="Mattias Ellert">mattias.ellert</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL2hhZG9vcC1jb21tb24tcHJvamVjdC9oYWRvb3AtY29tbW9uL3NyYy9DTWFr
ZUxpc3RzLnR4dCBiL2hhZG9vcC1jb21tb24tcHJvamVjdC9oYWRvb3AtY29tbW9uL3NyYy9DTWFr
ZUxpc3RzLnR4dAppbmRleCBkZWM2M2M0Li5kZTIxYmFiIDEwMDY0NAotLS0gYS9oYWRvb3AtY29t
bW9uLXByb2plY3QvaGFkb29wLWNvbW1vbi9zcmMvQ01ha2VMaXN0cy50eHQKKysrIGIvaGFkb29w
LWNvbW1vbi1wcm9qZWN0L2hhZG9vcC1jb21tb24vc3JjL0NNYWtlTGlzdHMudHh0CkBAIC0yMDUs
NyArMjA1LDYgQEAgRU5ESUYoKQogCiB0YXJnZXRfbGlua19kdWFsX2xpYnJhcmllcyhoYWRvb3AK
ICAgICAke0xJQl9ETH0KLSAgICAke0pBVkFfSlZNX0xJQlJBUll9CiApCiBTRVQoTElCSEFET09Q
X1ZFUlNJT04gIjEuMC4wIikKIFNFVF9UQVJHRVRfUFJPUEVSVElFUyhoYWRvb3AgUFJPUEVSVElF
UwpkaWZmIC0tZ2l0IGEvaGFkb29wLWhkZnMtcHJvamVjdC9oYWRvb3AtaGRmcy9zcmMvQ01ha2VM
aXN0cy50eHQgYi9oYWRvb3AtaGRmcy1wcm9qZWN0L2hhZG9vcC1oZGZzL3NyYy9DTWFrZUxpc3Rz
LnR4dAppbmRleCA4MmQxYTMyLi4yMTUxYmI4IDEwMDY0NAotLS0gYS9oYWRvb3AtaGRmcy1wcm9q
ZWN0L2hhZG9vcC1oZGZzL3NyYy9DTWFrZUxpc3RzLnR4dAorKysgYi9oYWRvb3AtaGRmcy1wcm9q
ZWN0L2hhZG9vcC1oZGZzL3NyYy9DTWFrZUxpc3RzLnR4dApAQCAtOTksNyArOTksNiBAQCBpZiAo
TkVFRF9MSU5LX0RMKQogZW5kaWYoTkVFRF9MSU5LX0RMKQogCiB0YXJnZXRfbGlua19kdWFsX2xp
YnJhcmllcyhoZGZzCi0gICAgJHtKQVZBX0pWTV9MSUJSQVJZfQogICAgICR7TElCX0RMfQogICAg
IHB0aHJlYWQKICkKZGlmZiAtLWdpdCBhL2hhZG9vcC1oZGZzLXByb2plY3QvaGFkb29wLWhkZnMv
c3JjL21haW4vbmF0aXZlL2Z1c2UtZGZzL0NNYWtlTGlzdHMudHh0IGIvaGFkb29wLWhkZnMtcHJv
amVjdC9oYWRvb3AtaGRmcy9zcmMvbWFpbi9uYXRpdmUvZnVzZS1kZnMvQ01ha2VMaXN0cy50eHQK
aW5kZXggZGQzZjFlNi4uNjhiYTQyMiAxMDA2NDQKLS0tIGEvaGFkb29wLWhkZnMtcHJvamVjdC9o
YWRvb3AtaGRmcy9zcmMvbWFpbi9uYXRpdmUvZnVzZS1kZnMvQ01ha2VMaXN0cy50eHQKKysrIGIv
aGFkb29wLWhkZnMtcHJvamVjdC9oYWRvb3AtaGRmcy9zcmMvbWFpbi9uYXRpdmUvZnVzZS1kZnMv
Q01ha2VMaXN0cy50eHQKQEAgLTY4LDcgKzY4LDYgQEAgSUYoRlVTRV9GT1VORCkKICAgICApCiAg
ICAgdGFyZ2V0X2xpbmtfbGlicmFyaWVzKGZ1c2VfZGZzCiAgICAgICAgICR7RlVTRV9MSUJSQVJJ
RVN9Ci0gICAgICAgICR7SkFWQV9KVk1fTElCUkFSWX0KICAgICAgICAgaGRmcwogICAgICAgICBt
CiAgICAgICAgIHB0aHJlYWQKZGlmZiAtLWdpdCBhL2hhZG9vcC1oZGZzLXByb2plY3QvaGFkb29w
LWhkZnMvc3JjL21haW4vbmF0aXZlL2xpYmhkZnMvam5pX2hlbHBlci5jIGIvaGFkb29wLWhkZnMt
cHJvamVjdC9oYWRvb3AtaGRmcy9zcmMvbWFpbi9uYXRpdmUvbGliaGRmcy9qbmlfaGVscGVyLmMK
aW5kZXggODc4Mjg5Zi4uNjI2ODZiMyAxMDA2NDQKLS0tIGEvaGFkb29wLWhkZnMtcHJvamVjdC9o
YWRvb3AtaGRmcy9zcmMvbWFpbi9uYXRpdmUvbGliaGRmcy9qbmlfaGVscGVyLmMKKysrIGIvaGFk
b29wLWhkZnMtcHJvamVjdC9oYWRvb3AtaGRmcy9zcmMvbWFpbi9uYXRpdmUvbGliaGRmcy9qbmlf
aGVscGVyLmMKQEAgLTIwLDYgKzIwLDcgQEAKICNpbmNsdWRlICJleGNlcHRpb24uaCIKICNpbmNs
dWRlICJqbmlfaGVscGVyLmgiCiAKKyNpbmNsdWRlIDxkbGZjbi5oPgogI2luY2x1ZGUgPHN0ZGlv
Lmg+IAogI2luY2x1ZGUgPHN0cmluZy5oPiAKIApAQCAtNDQyLDEwICs0NDMsODIgQEAgc3RhdGlj
IEpOSUVudiogZ2V0R2xvYmFsSk5JRW52KHZvaWQpCiAgICAgamludCBydiA9IDA7IAogICAgIGpp
bnQgbm9WTXMgPSAwOwogICAgIGp0aHJvd2FibGUganRocjsKKyAgICB2b2lkICpqdm1IYW5kbGUg
PSBOVUxMOworICAgIGppbnQgSk5JQ0FMTCAoKmdldENyZWF0ZWRKYXZhSlZNc1B0cikoSmF2YVZN
ICoqLCBqc2l6ZSwganNpemUgKik7CisgICAgZ2V0Q3JlYXRlZEphdmFKVk1zUHRyID0gTlVMTDsg
CisgICAgamludCBKTklDQUxMICgqY3JlYXRlSmF2YVZNUHRyKShKYXZhVk0gKiosIHZvaWQgKios
IHZvaWQgKik7CisgICAgY3JlYXRlSmF2YVZNUHRyID0gTlVMTDsKKyAgICBjaGFyICpkbHN5bV9l
cnJvciA9IE5VTEw7CisKKyAgICAvL0dldCBKQVZBX0hPTUUgdG8gdXNlIGFwcHJvcHJpYXRlIGxp
Ymp2bQorICAgIGNoYXIgKmphdmFIb21lID0gZ2V0ZW52KCJKQVZBX0hPTUUiKTsKKyAgICBpZiAo
amF2YUhvbWUgPT0gTlVMTCkgeworICAgICAgICBqYXZhSG9tZSA9ICIvdXNyL2xpYi9qdm0iOwor
ICAgIH0KKworI2lmICAgZGVmaW5lZChfX3g4Nl82NF9fKSAmJiBkZWZpbmVkIChfX0xQNjRfXykK
KyAgICBjb25zdCBjaGFyICphcmNoPSJhbWQ2NCI7CisjZWxpZiBkZWZpbmVkKF9feDg2XzY0X18p
ICYmIGRlZmluZWQgKF9fSUxQMzJfXykKKyAgICBjb25zdCBjaGFyICphcmNoPSJ4MzIiOworI2Vs
aWYgZGVmaW5lZChfX3Bvd2VycGM2NF9fKSAmJiBkZWZpbmVkKF9fTElUVExFX0VORElBTl9fKQor
ICAgIGNvbnN0IGNoYXIgKmFyY2g9InBwYzY0bGUiOworI2VsaWYgZGVmaW5lZChfX3Bvd2VycGM2
NF9fKQorICAgIGNvbnN0IGNoYXIgKmFyY2g9InBwYzY0IjsKKyNlbGlmIGRlZmluZWQoX19wb3dl
cnBjX18pCisgICAgY29uc3QgY2hhciAqYXJjaD0icHBjIjsKKyNlbGlmIGRlZmluZWQoX19pMzg2
X18pCisgICAgY29uc3QgY2hhciAqYXJjaD0iaTM4NiI7CisjZWxpZiBkZWZpbmVkKF9faWE2NF9f
KQorICAgIGNvbnN0IGNoYXIgKmFyY2g9ImlhNjQiOworI2VsaWYgZGVmaW5lZChfX3MzOTB4X18p
CisgICAgY29uc3QgY2hhciAqYXJjaD0iczM5MHgiOworI2VsaWYgZGVmaW5lZChfX3MzOTBfXykK
KyAgICBjb25zdCBjaGFyICphcmNoPSJzMzkwIjsKKyNlbGlmIGRlZmluZWQoX19hcm1lbF9fKQor
ICAgIGNvbnN0IGNoYXIgKmFyY2g9ImFybSI7CisjZWxpZiBkZWZpbmVkKF9fYXJtX18pCisgICAg
Y29uc3QgY2hhciAqYXJjaD0iYXJtIjsKKyNlbGlmIGRlZmluZWQoX19hYXJjaDY0X18pCisgICAg
Y29uc3QgY2hhciAqYXJjaD0iYWFyY2g2NCI7CisjZWxpZiBkZWZpbmVkKF9fc3BhcmNfXykgJiYg
ZGVmaW5lZChfX2FyY2g2NF9fKQorICAgIGNvbnN0IGNoYXIgKmFyY2g9InNwYXJjdjkiOworI2Vs
aWYgZGVmaW5lZChfX3NwYXJjX18pCisgICAgY29uc3QgY2hhciAqYXJjaD0ic3BhcmMiOworI2Vs
aWYgZGVmaW5lZChfX2FscGhhX18pCisgICAgY29uc3QgY2hhciAqYXJjaD0iYWxwaGEiOworI2Vs
aWYgZGVmaW5lZChfX21pcHNfXykgJiYgZGVmaW5lZChfX01JUFNFTF9fKSAmJiBfTUlQU19TSU09
PV9BQklPMzIKKyAgICBjb25zdCBjaGFyICphcmNoPSJtaXBzZWwiOworI2VsaWYgZGVmaW5lZChf
X21pcHNfXykgJiYgZGVmaW5lZChfX01JUFNFTF9fKQorICAgIGNvbnN0IGNoYXIgKmFyY2g9Im1p
cHM2NGVsIjsKKyNlbGlmIGRlZmluZWQoX19taXBzX18pICYmIF9NSVBTX1NJTT09X0FCSU8zMgor
ICAgIGNvbnN0IGNoYXIgKmFyY2g9Im1pcHMiOworI2VsaWYgZGVmaW5lZChfX21pcHNfXykKKyAg
ICBjb25zdCBjaGFyICphcmNoPSJtaXBzNjQiOworI2Vsc2UKKyNlcnJvciBVbmtub3duIEpWTSBh
cmNoaXRlY3R1cmUKKyNlbmRpZgorCisgICAgLy9Mb2FkIHRoZSBhcHByb3ByaWF0ZSBsaWJqdm0K
KyAgICBjaGFyIGxpYmp2bVBhdGhbc3RybGVuKGphdmFIb21lKSszNV07CisgICAgc25wcmludGYo
bGlianZtUGF0aCwgc2l6ZW9mKGxpYmp2bVBhdGgpLCAiJXMvanJlL2xpYi8lcy9zZXJ2ZXIvbGli
anZtLnNvIiwgamF2YUhvbWUsIGFyY2gpOworICAgIGp2bUhhbmRsZSA9IGRsb3BlbihsaWJqdm1Q
YXRoLCBSVExEX05PV3xSVExEX0xPQ0FMKTsKKyAgICBpZiAoanZtSGFuZGxlID09IE5VTEwpIHsK
KyAgICAgICAgZnByaW50ZihzdGRlcnIsICJGYWlsZWQgdG8gbG9hZCBsaWJqdm0uc28hXG4iKTsK
KyAgICAgICAgcmV0dXJuIE5VTEw7CisgICAgfQogCi0gICAgcnYgPSBKTklfR2V0Q3JlYXRlZEph
dmFWTXMoJih2bUJ1ZlswXSksIHZtQnVmTGVuZ3RoLCAmbm9WTXMpOworICAgIC8vTG9hZCB0aGUg
Sk5JX0dldENyZWF0ZWRKYXZhVk1zIGZ1bmN0aW9uIGZyb20gdGhlIGxpYmp2bSBsaWJyYXJ5Cisg
ICAgZ2V0Q3JlYXRlZEphdmFKVk1zUHRyID0gKGppbnQgSk5JQ0FMTCAoKikoSmF2YVZNICoqLCBq
c2l6ZSwganNpemUgKikpIGRsc3ltKGp2bUhhbmRsZSwgIkpOSV9HZXRDcmVhdGVkSmF2YVZNcyIp
OworICAgIGRsc3ltX2Vycm9yID0gZGxlcnJvcigpOworICAgIGlmIChkbHN5bV9lcnJvcikgewor
ICAgICAgICBmcHJpbnRmKHN0ZGVyciwgIkNhbiBub3QgbG9hZCBzeW1ib2wgSk5JX0dldENyZWF0
ZWRKYXZhVk1zOiAlc1xuIiwgZGxzeW1fZXJyb3IpOworICAgICAgICBkbGNsb3NlKGp2bUhhbmRs
ZSk7CisgICAgICAgIHJldHVybiBOVUxMOworICAgIH0KKyAgICBydiA9ICgqZ2V0Q3JlYXRlZEph
dmFKVk1zUHRyKSgmKHZtQnVmWzBdKSwgdm1CdWZMZW5ndGgsICZub1ZNcyk7CiAgICAgaWYgKHJ2
ICE9IDApIHsKICAgICAgICAgZnByaW50ZihzdGRlcnIsICJKTklfR2V0Q3JlYXRlZEphdmFWTXMg
ZmFpbGVkIHdpdGggZXJyb3I6ICVkXG4iLCBydik7CisgICAgICAgIGRsY2xvc2UoanZtSGFuZGxl
KTsKICAgICAgICAgcmV0dXJuIE5VTEw7CiAgICAgfQogCkBAIC00NTQsNiArNTI3LDcgQEAgc3Rh
dGljIEpOSUVudiogZ2V0R2xvYmFsSk5JRW52KHZvaWQpCiAgICAgICAgIGNoYXIgKmhhZG9vcENs
YXNzUGF0aCA9IGdldGVudigiQ0xBU1NQQVRIIik7CiAgICAgICAgIGlmIChoYWRvb3BDbGFzc1Bh
dGggPT0gTlVMTCkgewogICAgICAgICAgICAgZnByaW50ZihzdGRlcnIsICJFbnZpcm9ubWVudCB2
YXJpYWJsZSBDTEFTU1BBVEggbm90IHNldCFcbiIpOworICAgICAgICAgICAgZGxjbG9zZShqdm1I
YW5kbGUpOwogICAgICAgICAgICAgcmV0dXJuIE5VTEw7CiAgICAgICAgIH0gCiAgICAgICAgIGNo
YXIgKmhhZG9vcENsYXNzUGF0aFZNQXJnID0gIi1EamF2YS5jbGFzcy5wYXRoPSI7CkBAIC01MDIs
NyArNTc2LDE1IEBAIHN0YXRpYyBKTklFbnYqIGdldEdsb2JhbEpOSUVudih2b2lkKQogICAgICAg
ICB2bV9hcmdzLm5PcHRpb25zID0gbm9BcmdzOyAKICAgICAgICAgdm1fYXJncy5pZ25vcmVVbnJl
Y29nbml6ZWQgPSAxOwogCi0gICAgICAgIHJ2ID0gSk5JX0NyZWF0ZUphdmFWTSgmdm0sICh2b2lk
KikmZW52LCAmdm1fYXJncyk7CisgICAgICAgIC8vTG9hZCB0aGUgSk5JX0NyZWF0ZUphdmFWTSBm
dW5jdGlvbiBmcm9tIHRoZSBsaWJqdm0gbGlicmFyeQorICAgICAgICBjcmVhdGVKYXZhVk1QdHIg
PSAoamludCBKTklDQUxMICgqKShKYXZhVk0gKiosIHZvaWQgKiosIHZvaWQgKikpIGRsc3ltKGp2
bUhhbmRsZSwgIkpOSV9DcmVhdGVKYXZhVk0iKTsKKyAgICAgICAgZGxzeW1fZXJyb3IgPSBkbGVy
cm9yKCk7CisgICAgICAgIGlmIChkbHN5bV9lcnJvcikgeworICAgICAgICAgICAgZnByaW50Zihz
dGRlcnIsICJDYW4gbm90IGxvYWQgc3ltYm9sIEpOSV9DcmVhdGVKYXZhVk06ICVzXG4iLCBkbHN5
bV9lcnJvcik7CisgICAgICAgICAgICBkbGNsb3NlKGp2bUhhbmRsZSk7CisgICAgICAgICAgICBy
ZXR1cm4gTlVMTDsKKyAgICAgICAgfQorICAgICAgICBydiA9ICgqY3JlYXRlSmF2YVZNUHRyKSgm
dm0sICh2b2lkKikmZW52LCAmdm1fYXJncyk7CiAKICAgICAgICAgaWYgKGhhZG9vcEp2bUFyZ3Mg
IT0gTlVMTCkgIHsKICAgICAgICAgICBmcmVlKGhhZG9vcEp2bUFyZ3MpOwpAQCAtNTEyLDYgKzU5
NCw3IEBAIHN0YXRpYyBKTklFbnYqIGdldEdsb2JhbEpOSUVudih2b2lkKQogICAgICAgICBpZiAo
cnYgIT0gMCkgewogICAgICAgICAgICAgZnByaW50ZihzdGRlcnIsICJDYWxsIHRvIEpOSV9DcmVh
dGVKYXZhVk0gZmFpbGVkICIKICAgICAgICAgICAgICAgICAgICAgIndpdGggZXJyb3I6ICVkXG4i
LCBydik7CisgICAgICAgICAgICBkbGNsb3NlKGp2bUhhbmRsZSk7CiAgICAgICAgICAgICByZXR1
cm4gTlVMTDsKICAgICAgICAgfQogICAgICAgICBqdGhyID0gaW52b2tlTWV0aG9kKGVudiwgTlVM
TCwgU1RBVElDLCBOVUxMLAo=
</data>

          </attachment>
      

    </bug>

</bugzilla>