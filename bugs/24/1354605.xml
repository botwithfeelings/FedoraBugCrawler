<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1354605</bug_id>
          
          <creation_ts>2016-07-11 12:54:00 -0400</creation_ts>
          <short_desc>sna acceleration causes improper rendering</short_desc>
          <delta_ts>2016-07-27 14:56:03 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>xorg-x11-drv-intel</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Artom Lifshitz">alifshit</reporter>
          <assigned_to name="Adam Jackson">ajax</assigned_to>
          <cc>ajax</cc>
    
    
    <cc>hdegoede</cc>
    
    
    <cc>xgl-maint</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>xorg-x11-drv-intel-2.99.917-24.20160712.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-07-27 14:56:03</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9497410</commentid>
    <comment_count>0</comment_count>
    <who name="Artom Lifshitz">alifshit</who>
    <bug_when>2016-07-11 12:54:06 -0400</bug_when>
    <thetext>Description of problem:

The default sna acceleration causes improper rendering. For example, when typing away in a mate-terminal, the typed text will only appear after a certain line width has been reached, tab completion triggered, or Enter pressed.

Version-Release number of selected component (if applicable):

2.99.917

How reproducible:

100% in a MATE+xmonad environment

Steps to Reproduce:
1. Login to a xmonad-mate session, as provided by the xmonad-mate package.
2. Open a mate-terminal window
3. Type anything

Actual results:

The typed text only appears after a certain line width has been reached, tab completion triggered, or Enter pressed.

Expected results:

The typed text appears immediately.

Additional info:

This seems to be related to BZ1093282.

Relevant lspci -vv output:

00:02.0 VGA compatible controller: Intel Corporation 4th Gen Core Processor Integrated Graphics Controller (rev 06) (prog-if 00 [VGA controller])
	Subsystem: Lenovo Device 221e
	Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx+
	Status: Cap+ 66MHz- UDF- FastB2B+ ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort- &lt;MAbort- &gt;SERR- &lt;PERR- INTx-
	Latency: 0
	Interrupt: pin A routed to IRQ 29
	Region 0: Memory at b1400000 (64-bit, non-prefetchable) [size=4M]
	Region 2: Memory at a0000000 (64-bit, prefetchable) [size=256M]
	Region 4: I/O ports at 5000 [size=64]
	[virtual] Expansion ROM at 000c0000 [disabled] [size=128K]
	Capabilities: &lt;access denied&gt;
	Kernel driver in use: i915
	Kernel modules: i915

Also note that switching to uxa acceleration fixes the issue. Specifically, the workaround is to create a /etc/X11/xorg.conf.d/20-intel.conf file with the following contents:

Section &quot;Device&quot;                                                                                                    
        Identifier  &quot;card0&quot;
        Driver      &quot;intel&quot;
        Option      &quot;AccelMethod&quot;  &quot;uxa&quot;
EndSection</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9500824</commentid>
    <comment_count>1</comment_count>
    <who name="Hans de Goede">hdegoede</who>
    <bug_when>2016-07-12 05:53:11 -0400</bug_when>
    <thetext>I&apos;ve just build a new version of the intel driver which hopefully fixes this, can you please test:

http://koji.fedoraproject.org/koji/buildinfo?buildID=779664</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9501005</commentid>
    <comment_count>2</comment_count>
    <who name="Artom Lifshitz">alifshit</who>
    <bug_when>2016-07-12 07:05:53 -0400</bug_when>
    <thetext>Can confirm 2.99.917-24.20160712.fc24.x86_64 fixes this issue for me. No more weird rendering with sna enabled.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9502141</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-07-12 11:47:03 -0400</bug_when>
    <thetext>xorg-x11-drv-intel-2.99.917-24.20160712.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-8aabc73dbf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9503185</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-07-12 21:24:47 -0400</bug_when>
    <thetext>xorg-x11-drv-intel-2.99.917-24.20160712.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-8aabc73dbf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9560233</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-07-27 14:55:59 -0400</bug_when>
    <thetext>xorg-x11-drv-intel-2.99.917-24.20160712.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>