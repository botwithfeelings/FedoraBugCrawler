<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>998638</bug_id>
          
          <creation_ts>2013-08-19 12:26:00 -0400</creation_ts>
          <short_desc>please build and package EFI Shell</short_desc>
          <delta_ts>2016-05-21 08:47:32 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>edk2</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kay Sievers">kay</reporter>
          <assigned_to name="Paolo Bonzini">pbonzini</assigned_to>
          <cc>crobinso</cc>
    
    
    <cc>kraxel</cc>
    
    
    <cc>lersek</cc>
    
    
    <cc>pbonzini</cc>
    
    
    <cc>the.ridikulus.rat</cc>
    
    
    <cc>virt-maint</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-05-21 08:47:32</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6225327</commentid>
    <comment_count>0</comment_count>
      <attachid>788152</attachid>
    <who name="Kay Sievers">kay</who>
    <bug_when>2013-08-19 12:26:57 -0400</bug_when>
    <thetext>Created attachment 788152
build and sub-package EFI Shell

Attached is a patch to the spec file that does that. Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6229841</commentid>
    <comment_count>1</comment_count>
    <who name="Cole Robinson">crobinso</who>
    <bug_when>2013-08-20 14:33:05 -0400</bug_when>
    <thetext>Thanks for the patch, pushed to git now. Currently blocked from rawhide until we fix https://bugzilla.redhat.com/show_bug.cgi?id=992180 though.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6230090</commentid>
    <comment_count>2</comment_count>
    <who name="Kay Sievers">kay</who>
    <bug_when>2013-08-20 15:34:19 -0400</bug_when>
    <thetext>Oh, damn, this needs to build on the stone-age 32bit arch? This is still
useful and used?

If that is really needed, we should try to fix up the build, at the
moment, only 64bit builds are supported. Please let me know, I can take
a look ...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6233047</commentid>
    <comment_count>3</comment_count>
    <who name="Laszlo Ersek">lersek</who>
    <bug_when>2013-08-21 09:08:46 -0400</bug_when>
    <thetext>I don&apos;t know why ARM was added at all to the target arches. In dist-git, it appeared in commit

commit 1516367bfab219109804409e5300ecdd1bcb4254
Author: Dan Horák &lt;dan@danny.cz&gt;
Date:   Thu May 23 08:16:31 2013 +0200

    set ExclusiveArch

without any explanation at all.

+ExclusiveArch: %{ix86} x86_64 %{arm}</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6233126</commentid>
    <comment_count>4</comment_count>
    <who name="Cole Robinson">crobinso</who>
    <bug_when>2013-08-21 09:28:01 -0400</bug_when>
    <thetext>(In reply to Laszlo Ersek from comment #3)
&gt; I don&apos;t know why ARM was added at all to the target arches. In dist-git, it
&gt; appeared in commit
&gt; 
&gt; commit 1516367bfab219109804409e5300ecdd1bcb4254
&gt; Author: Dan Horák &lt;dan@danny.cz&gt;
&gt; Date:   Thu May 23 08:16:31 2013 +0200
&gt; 
&gt;     set ExclusiveArch
&gt; 
&gt; without any explanation at all.
&gt; 
&gt; +ExclusiveArch: %{ix86} x86_64 %{arm}

Dan works on fedora s390. edk2 likely didn&apos;t build there, so he added the ExclusiveArch, but just included every other architecture. So the package may not make sense for arm.

Long term, if we build OVMF, edk2 needs to only be compiled for x86, but the package needs to be available on all architectures (so qemu-system-x86 is available on all architectures). To do that we need to cross-compile, and that makes the package noarch which means we can drop the ExclusiveArch handling.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6257511</commentid>
    <comment_count>5</comment_count>
    <who name="Paolo Bonzini">pbonzini</who>
    <bug_when>2013-08-29 09:40:02 -0400</bug_when>
    <thetext>The EFI shell should be in a noarch subpackage.  If Kay wants both 32-bit and 64-bit shell binaries, he should build the ShellPkg twice.  So in fact I suggest reverting both of Kay&apos;s patches.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6258279</commentid>
    <comment_count>6</comment_count>
    <who name="Cole Robinson">crobinso</who>
    <bug_when>2013-08-29 13:22:39 -0400</bug_when>
    <thetext>(In reply to Paolo Bonzini from comment #5)
&gt; The EFI shell should be in a noarch subpackage.  If Kay wants both 32-bit
&gt; and 64-bit shell binaries, he should build the ShellPkg twice.  So in fact I
&gt; suggest reverting both of Kay&apos;s patches.

I&apos;m trying to understand. Why should efi-shell be inside a noarch package? is it an external tool, or something run inside the guest? My understanding is that we only do &apos;compile for x86 and stuff in a noarch package&apos; for things that we pass into a guest from the qemu command line or similar (maybe that covers efi-shell but I&apos;m ignorant here and googling didn&apos;t explain things).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6269217</commentid>
    <comment_count>7</comment_count>
    <who name="Paolo Bonzini">pbonzini</who>
    <bug_when>2013-09-03 08:58:19 -0400</bug_when>
    <thetext>The EFI shell is not needed inside the guest, since the OVMF ROM already includes it.  My guest is that Kay wants an easy way to get an EFI shell for his computer.

It has to be noarch because it doesn&apos;t include any Linux binaries.  You could even use a 64-bit shell on a 32-bit installation, that would make sense.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>6312201</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2013-09-16 12:36:23 -0400</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 20 development cycle.
Changing version to &apos;20&apos;.

More information and reason for this action is here:
https://fedoraproject.org/wiki/BugZappers/HouseKeeping/Fedora20</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8278328</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2015-05-29 05:20:09 -0400</bug_when>
    <thetext>This message is a reminder that Fedora 20 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 20. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;20&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 20 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8290588</commentid>
    <comment_count>10</comment_count>
    <who name="Cole Robinson">crobinso</who>
    <bug_when>2015-05-31 14:45:27 -0400</bug_when>
    <thetext>Still relevant with latest packages</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9345606</commentid>
    <comment_count>11</comment_count>
    <who name="Cole Robinson">crobinso</who>
    <bug_when>2016-05-20 15:08:58 -0400</bug_when>
    <thetext>Gerd, I see edk2-ovmf has /usr/share/edk2/ovmf/Shell.efi , does that cover this request?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9346352</commentid>
    <comment_count>12</comment_count>
    <who name="Gerd Hoffmann">kraxel</who>
    <bug_when>2016-05-21 02:20:35 -0400</bug_when>
    <thetext>(In reply to Cole Robinson from comment #11)
&gt; Gerd, I see edk2-ovmf has /usr/share/edk2/ovmf/Shell.efi , does that cover
&gt; this request?

Yes.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9346515</commentid>
    <comment_count>13</comment_count>
    <who name="Cole Robinson">crobinso</who>
    <bug_when>2016-05-21 08:47:32 -0400</bug_when>
    <thetext>Thanks. This is in f24/rawhide then. Will probably push to f23 eventually</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>788152</attachid>
            <date>2013-08-19 12:26:00 -0400</date>
            <delta_ts>2013-08-19 12:26:57 -0400</delta_ts>
            <desc>build and sub-package EFI Shell</desc>
            <filename>0001-build-and-sub-package-EFI-shell.patch</filename>
            <type>text/plain</type>
            <size>2435</size>
            <attacher name="Kay Sievers">kay</attacher>
            
              <data encoding="base64">RnJvbSBlYWVkZTVmY2QwNmVkODNiN2E0YWZiZTJlMmUyZjFhODc3MzNlNjRjIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBLYXkgU2lldmVycyA8a2F5QHZyZnkub3JnPgpEYXRlOiBNb24s
IDE5IEF1ZyAyMDEzIDE4OjI0OjAyICswMjAwClN1YmplY3Q6IFtQQVRDSF0gYnVpbGQgYW5kIHN1
Yi1wYWNrYWdlIEVGSSBzaGVsbAoKLS0tCiBlZGsyLnNwZWMgfCAyNCArKysrKysrKysrKysrKysr
KysrKysrLS0KIDEgZmlsZSBjaGFuZ2VkLCAyMiBpbnNlcnRpb25zKCspLCAyIGRlbGV0aW9ucygt
KQoKZGlmZiAtLWdpdCBhL2VkazIuc3BlYyBiL2VkazIuc3BlYwppbmRleCBhYjc0MjU0Li4xMWMw
N2M0IDEwMDY0NAotLS0gYS9lZGsyLnNwZWMKKysrIGIvZWRrMi5zcGVjCkBAIC00LDcgKzQsNyBA
QAogIyBNb3JlIHN1YnBhY2thZ2VzIHRvIGNvbWUgb25jZSBsaWNlbnNpbmcgaXNzdWVzIGFyZSBm
aXhlZAogTmFtZToJCWVkazIKIFZlcnNpb246CSV7U1ZOREFURX1zdm4le1NWTlJFVn0KLVJlbGVh
c2U6CTQlez9kaXN0fQorUmVsZWFzZToJNSV7P2Rpc3R9CiBTdW1tYXJ5OglFRkkgRGV2ZWxvcG1l
bnQgS2l0IElJCiAKICMgVGhlcmUgYXJlIG5vIGZvcm1hbCByZWxlYXNlcyBmcm9tIHVwc3RyZWFt
LgpAQCAtMzMsNyArMzMsNiBAQCBSZXF1aXJlczoJZWRrMi10b29scyV7P19pc2F9ID0gJXt2ZXJz
aW9ufS0le3JlbGVhc2V9CiBUaGlzIHBhY2thZ2UgcHJvdmlkZXMgdG9vbHMgdGhhdCBhcmUgbmVl
ZGVkIHRvIGJ1aWxkIEVGSSBleGVjdXRhYmxlcwogYW5kIFJPTXMgdXNpbmcgdGhlIEdOVSB0b29s
cy4KIAotCiAlcGFja2FnZSB0b29scwogU3VtbWFyeToJRUZJIERldmVsb3BtZW50IEtpdCBJSSBU
b29scwogR3JvdXA6CQlEZXZlbG9wbWVudC9Ub29scwpAQCAtNjIsMTEgKzYxLDIyIEBAIEdyb3Vw
OgkJRGV2ZWxvcG1lbnQvVG9vbHMKIFRoaXMgcGFja2FnZSBkb2N1bWVudHMgdGhlIHRvb2xzIHRo
YXQgYXJlIG5lZWRlZCB0bwogYnVpbGQgRUZJIGV4ZWN1dGFibGVzIGFuZCBST01zIHVzaW5nIHRo
ZSBHTlUgdG9vbHMuCiAKKyVwYWNrYWdlIHNoZWxsCitTdW1tYXJ5OiBVRUZJIDIuMCBTaGVsbAor
CislZGVzY3JpcHRpb24gc2hlbGwKK1RoZSBzaGVsbCBwcm92aWRlcyBhIHN0YW5kYXJkIHByZS1i
b290IGNvbW1hbmQgbGluZQorcHJvY2Vzc29yIHRvIHJ1biBvbiB0b3Agb2YgYSBVRUZJIDIuMCBm
aXJtd2FyZS4KKwogJXByZXAKICVzZXR1cCAtcSAtbiAle25hbWV9LXIle1NWTlJFVn0KKyMgcmVt
b3ZlIG5vbi13b3JraW5nIGNvbXBpbGVyIG9wdGlvbgorc2VkIC1pICdzLyAtbSAqZWxmX3g4Nl82
NC8vJyBCYXNlVG9vbHMvQ29uZi90b29sc19kZWYudGVtcGxhdGUKIAogJWJ1aWxkCittYWtlIC1D
IEJhc2VUb29scwogc291cmNlIC4vZWRrc2V0dXAuc2gKK2J1aWxkIC1hIFg2NCAtYiBSRUxFQVNF
IC1wIFNoZWxsUGtnL1NoZWxsUGtnLmRzYyAtdCBHQ0M0NgogCiAjIEJ1aWxkIGlzIGJyb2tlbiBp
ZiBNQUtFRkxBR1MgY29udGFpbnMgLWogb3B0aW9uLgogdW5zZXQgTUFLRUZMQUdTCkBAIC0xMDgs
NiArMTE4LDkgQEAgZXhlYyBweXRob24gJyV7X2RhdGFkaXJ9LyV7bmFtZX0vUHl0aG9uLyRpLyRp
LnB5JyAiJEAiJyA+ICV7YnVpbGRyb290fSV7X2JpbmRpcn0KICAgY2htb2QgK3ggJXtidWlsZHJv
b3R9JXtfYmluZGlyfS8kaQogZG9uZQogCitta2RpciAtcCAle2J1aWxkcm9vdH0le19wcmVmaXh9
L2xpYi9lZmktc2hlbGwKK2luc3RhbGwgLW0gMDc1NSAtRCBCdWlsZC9TaGVsbC9SRUxFQVNFX0dD
QzQ2L1g2NC9TaGVsbC5lZmkgJXtidWlsZHJvb3R9JXtfcHJlZml4fS9saWIvZWZpLXNoZWxsL3No
ZWxseDY0LmVmaQorCiAlZmlsZXMgdG9vbHMKICV7X2JpbmRpcn0vQm9vdFNlY3RJbWFnZQogJXtf
YmluZGlyfS9FZmlMZHJJbWFnZQpAQCAtMTYwLDcgKzE3MywxNCBAQCBkb25lCiAlZG9jIEJhc2VU
b29scy9Vc2VyTWFudWFscy9WZnJDb21waWxlcl9VdGlsaXR5X01hbl9QYWdlLnJ0ZgogJWRvYyBC
YXNlVG9vbHMvVXNlck1hbnVhbHMvVm9sSW5mb19VdGlsaXR5X01hbl9QYWdlLnJ0ZgogCislZmls
ZXMgc2hlbGwKKyVkaXIgJXtfcHJlZml4fS9saWIvZWZpLXNoZWxsCisle19wcmVmaXh9L2xpYi9l
Zmktc2hlbGwvc2hlbGx4NjQuZWZpCisKICVjaGFuZ2Vsb2cKKyogTW9uIEF1ZyAxOSAyMDEzIEth
eSBTaWV2ZXJzIDxrYXlAcmVkaGF0LmNvbT4gLSAyMDEzMDUxNXN2bjE0MzY1LTUKKy0gQWRkIHN1
Yi1wYWNrYWdlIHdpdGggRUZJIHNoZWxsCisKICogU2F0IEF1ZyAwMyAyMDEzIEZlZG9yYSBSZWxl
YXNlIEVuZ2luZWVyaW5nIDxyZWwtZW5nQGxpc3RzLmZlZG9yYXByb2plY3Qub3JnPiAtIDIwMTMw
NTE1c3ZuMTQzNjUtNAogLSBSZWJ1aWx0IGZvciBodHRwczovL2ZlZG9yYXByb2plY3Qub3JnL3dp
a2kvRmVkb3JhXzIwX01hc3NfUmVidWlsZAogCi0tIAoxLjguMy4xCgo=
</data>

          </attachment>
      

    </bug>

</bugzilla>