<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1048548</bug_id>
          
          <creation_ts>2014-01-04 21:30:00 -0500</creation_ts>
          <short_desc>dump spits out &quot;DUMP: mount: bad UUID&quot; when dumping a ext4 filesystem</short_desc>
          <delta_ts>2016-08-10 19:23:53 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>dump</component>
          <version>24</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>low</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Michael Carney">mwc-250sav</reporter>
          <assigned_to name="Josef Ridky">jridky</assigned_to>
          <cc>phracek</cc>
    
    
    <cc>tibbs</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>dump-0.4-0.28.b45.fc24</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-08-10 19:23:53</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>6673689</commentid>
    <comment_count>0</comment_count>
    <who name="Michael Carney">mwc-250sav</who>
    <bug_when>2014-01-04 21:30:20 -0500</bug_when>
    <thetext>Description of problem: See summary


Version-Release number of selected component (if applicable):
Version     : 0.4
Release     : 0.21.b44.fc20

How reproducible: Every time


Steps to Reproduce:
1. Run dump
2. observe message

Doesn&apos;t appear to cause any harm.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>7766536</commentid>
    <comment_count>1</comment_count>
    <who name="Michael Carney">mwc-250sav</who>
    <bug_when>2014-12-15 14:09:57 -0500</bug_when>
    <thetext>Still happens in F21.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8280154</commentid>
    <comment_count>2</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2015-05-29 06:20:23 -0400</bug_when>
    <thetext>This message is a reminder that Fedora 20 is nearing its end of life.
Approximately 4 (four) weeks from now Fedora will stop maintaining
and issuing updates for Fedora 20. It is Fedora&apos;s policy to close all
bug reports from releases that are no longer maintained. At that time
this bug will be closed as EOL if it remains open with a Fedora  &apos;version&apos;
of &apos;20&apos;.

Package Maintainer: If you wish for this bug to remain open because you
plan to fix it in a currently maintained version, simply change the &apos;version&apos; 
to a later Fedora version.

Thank you for reporting this issue and we are sorry that we were not 
able to fix it before Fedora 20 is end of life. If you would still like 
to see this bug fixed and are able to reproduce it against a later version 
of Fedora, you are encouraged  change the &apos;version&apos; to a later Fedora 
version prior this bug is closed as described in the policy above.

Although we aim to fix as many bugs as possible during every release&apos;s 
lifetime, sometimes those efforts are overtaken by events. Often a 
more recent Fedora release includes newer upstream software that fixes 
bugs or makes them obsolete.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8320623</commentid>
    <comment_count>3</comment_count>
    <who name="Michael Carney">mwc-250sav</who>
    <bug_when>2015-06-10 00:18:37 -0400</bug_when>
    <thetext>Still happens in F22.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8382474</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2015-06-29 10:11:14 -0400</bug_when>
    <thetext>Fedora 20 changed to end-of-life (EOL) status on 2015-06-23. Fedora 20 is
no longer maintained, which means that it will not receive any further
security or bug fix updates. As a result we are closing this bug.

If you can reproduce this bug against a currently maintained version of
Fedora please feel free to reopen this bug against that version. If you
are unable to reopen this bug, please file a new report against the
current release. If you experience problems, please add a comment to this
bug.

Thank you for reporting this bug and we are sorry it could not be fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8386334</commentid>
    <comment_count>5</comment_count>
    <who name="Michael Carney">mwc-250sav</who>
    <bug_when>2015-06-29 17:12:11 -0400</bug_when>
    <thetext>Again, still happens in F22.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8390855</commentid>
    <comment_count>6</comment_count>
    <who name="Petr Hracek">phracek</who>
    <bug_when>2015-06-30 02:58:55 -0400</bug_when>
    <thetext>Would you be able to send me a step for reproducing?

I will contact upstream with a patch If I am able to solve it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8421343</commentid>
    <comment_count>7</comment_count>
    <who name="Michael Carney">mwc-250sav</who>
    <bug_when>2015-07-08 13:32:58 -0400</bug_when>
    <thetext>I took a look at the code -- here&apos;s the problem:

dump parses /etc/fstab, and if it encounters a UUID spec for block device, it validates this by checking that the UUID spec is 36 chars long, and made up of &apos;-&apos; and hexidecimal chars.

The problem occurs because /boot/efi is a vfat filesystem, so its UUID is limited to 9 chars:

378&gt; grep UUID /etc/fstab 
UUID=744e55f6-6e46-41f4-8940-4941061bb76b /boot                   ext4    defaults        1 2
UUID=7F88-54FB          /boot/efi               vfat    umask=0077,shortname=winnt 0 0
379&gt;

or

523# lsblk -af /dev/sda1
NAME FSTYPE LABEL       UUID                                 MOUNTPOINT
sda1 vfat   F22-bootefi 7F88-54FB                            /boot/efi
524#

Thus the sda1 UUID spec fails dump&apos;s UUID validation, (bylabel.c in compat/lib)
it spits out the &apos;bad UUID&apos; message.

The real *BUG* is:
dump should be ignoring all FS in /etc/fstab that do not have a FStype of ext{2,3,4}. It can&apos;t dump those other FS anyway.

Workaround: change /boot/efi block device spec from UUID to LABEL. Note that anaconda produces the fstab originally.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8422027</commentid>
    <comment_count>8</comment_count>
    <who name="Michael Carney">mwc-250sav</who>
    <bug_when>2015-07-08 18:16:05 -0400</bug_when>
    <thetext>After some further dump code review, a surprising discovery: dump never validates the fstype (mnt_type). It just drives on to ext2fs_open() and fails there. Validating the mntent produced from command line and/or fstab and tossing non-ext2/3/4 entries early on would be nicer, I&apos;d think.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8505108</commentid>
    <comment_count>9</comment_count>
    <who name="Petr Hracek">phracek</who>
    <bug_when>2015-08-03 07:32:10 -0400</bug_when>
    <thetext>Sorry wrong Bugzilla switching back to NEW.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9495951</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Admin XMLRPC Client">fedora-admin-xmlrpc</who>
    <bug_when>2016-07-11 06:14:54 -0400</bug_when>
    <thetext>This package has changed ownership in the Fedora Package Database.  Reassigning to the new owner of this component.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9528875</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora End Of Life">jkurik</who>
    <bug_when>2016-07-19 16:04:30 -0400</bug_when>
    <thetext>Fedora 22 changed to end-of-life (EOL) status on 2016-07-19. Fedora 22 is
no longer maintained, which means that it will not receive any further
security or bug fix updates. As a result we are closing this bug.

If you can reproduce this bug against a currently maintained version of
Fedora please feel free to reopen this bug against that version. If you
are unable to reopen this bug, please file a new report against the
current release. If you experience problems, please add a comment to this
bug.

Thank you for reporting this bug and we are sorry it could not be fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9529674</commentid>
    <comment_count>12</comment_count>
    <who name="Michael Carney">mwc-250sav</who>
    <bug_when>2016-07-19 18:18:44 -0400</bug_when>
    <thetext>Oh come on. I&apos;ve already fixed the bug for you -- a year ago. Just implement the changes I suggested. Jeez.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9551212</commentid>
    <comment_count>13</comment_count>
    <who name="Josef Ridky">jridky</who>
    <bug_when>2016-07-26 06:10:30 -0400</bug_when>
    <thetext>Hi,

I discussed with upstream, how to solve this issue. 
Result of the discussion is, that dump support only ext2/3/4 file systems, so FAT/VFAT file systems are unsupported. That is the reason, why is error message shown. Upstream is not going to correct this behaviour of dump.

And from dump&apos;s man page:
  &quot;It might be considered a bug that this version of dump can only handle ext2/3/4 file systems.  Specifically, it does not work with FAT file systems.&quot;

Because of this fact, I am closing this bug as NOTABUG.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9554001</commentid>
    <comment_count>14</comment_count>
    <who name="Michael Carney">mwc-250sav</who>
    <bug_when>2016-07-26 14:11:31 -0400</bug_when>
    <thetext>You don&apos;t understand what&apos;s happening with this bug. *NO ONE* is trying to dump a FAT filesystem using dump(8). dump(8) processes *EVERY* entry in /etc/fstab whenever it is invoked, thus will *ALWAYS* spit out this message anytime a UUID FAT entry is encountered -- which is going to be all the time if anaconda creates the fstab. Here&apos;s my fstab with the anaconda entry commented out and a LABEL entry added to avoid this bug.

#UUID=769B-5090          /boot/efi               vfat    umask=0077,shortname=winnt 0 2
LABEL=F24-bootefi        /boot/efi               vfat    umask=0077,shortname=winnt 0 2

I already root-caused and suggested fixes for this bug. Do you want me to submit the patch too?? Sigh..</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9554770</commentid>
    <comment_count>15</comment_count>
      <attachid>1184397</attachid>
    <who name="Michael Carney">mwc-250sav</who>
    <bug_when>2016-07-26 17:32:28 -0400</bug_when>
    <thetext>Created attachment 1184397
Patch for this bug

This patch fixes this problem, and also fixes a latent I noticed while fixing this bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9556560</commentid>
    <comment_count>16</comment_count>
    <who name="Josef Ridky">jridky</who>
    <bug_when>2016-07-27 04:15:33 -0400</bug_when>
    <thetext>Your patch has been forwarded to upstream.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9564648</commentid>
    <comment_count>17</comment_count>
    <who name="Michael Carney">mwc-250sav</who>
    <bug_when>2016-07-28 15:07:58 -0400</bug_when>
    <thetext>Thank you, Josef. Just curious -- what&apos;s the upstream for dump(8)? Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9566522</commentid>
    <comment_count>18</comment_count>
    <who name="Josef Ridky">jridky</who>
    <bug_when>2016-07-29 06:42:24 -0400</bug_when>
    <thetext>Hi Michael,

the upstream website is https://sourceforge.net/projects/dump/.

I&apos;ve just uploaded new release of dump into Fedora rawhide (#1361495) now is needed to wait for enough karma points in Bodhi service, before it will be published in Fedora 24. 

This update contains patch you attached in this bugzilla.

I will close this bug when the update will be public for Fedora 24 users.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9566588</commentid>
    <comment_count>19</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-07-29 07:06:40 -0400</bug_when>
    <thetext>dump-0.4-0.1.b45.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-d154617aae</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9569136</commentid>
    <comment_count>20</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-07-30 15:27:39 -0400</bug_when>
    <thetext>dump-0.4-0.1.b45.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-d154617aae</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9577875</commentid>
    <comment_count>21</comment_count>
    <who name="Michael Carney">mwc-250sav</who>
    <bug_when>2016-08-02 13:48:07 -0400</bug_when>
    <thetext>I downloaded and built the upstream version (dump-0.4b45) and ran it on my Fedora 24 system. It immediately crashes. I submitted a bug with the upstream project for this problem: https://sourceforge.net/p/dump/bugs/167/</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9604861</commentid>
    <comment_count>22</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-08-10 19:23:48 -0400</bug_when>
    <thetext>dump-0.4-0.28.b45.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1184397</attachid>
            <date>2016-07-26 17:32:00 -0400</date>
            <delta_ts>2016-07-26 17:32:28 -0400</delta_ts>
            <desc>Patch for this bug</desc>
            <filename>patch</filename>
            <type>text/plain</type>
            <size>1099</size>
            <attacher name="Michael Carney">mwc-250sav</attacher>
            
              <data encoding="base64">LS0tIG9sZC9vcHRyLmMJMjAxMC0xMi0wNiAxNDoxMzo1OS4wMDAwMDAwMDAgKzAwMDAKKysrIG5l
dy9vcHRyLmMJMjAxNi0wNy0yNiAyMToxODozNS40MTc0MjU1OTIgKzAwMDAKQEAgLTQzNiw2ICs0
MzYsMTcgQEAKIAlzdHJ1Y3Qgc3RhdCBidWYsIHRhYmJ1ZjsKIAlzdHJ1Y3QgcGZzdGFiICp0YWJw
ZjsKIAlzdHJ1Y3QgbW50ZW50ICp0YWJmczsKKwljaGFyICoqdHlwZTsKKwlpbnQgaGFuZGxlLCBs
ZW47CisKKwkvKiBEaXNjYXJkIGZzdHlwZXMgd2UgZG9uJ3QgaGFuZGxlICovCisJaWYgKGZzLT5t
bnRfdHlwZSA9PSBOVUxMKQorCQlyZXR1cm4gTlVMTDsKKwlsZW4gPSBzdHJsZW4oZnMtPm1udF90
eXBlKTsKKwlmb3IgKHR5cGUgPSBmc3R5cGVzLCBoYW5kbGUgPSAwOyAqdHlwZSAhPSBOVUxMICYm
IGhhbmRsZSA9PSAwOyB0eXBlKyspCisJCWhhbmRsZSA9IChzdHJuY21wKGZzLT5tbnRfdHlwZSwg
KnR5cGUsIGxlbikgPT0gMCk7CisJaWYgKCFoYW5kbGUpCisJCXJldHVybiBOVUxMOwogCiAJbmV3
ID0gKHN0cnVjdCBtbnRlbnQgKiltYWxsb2Moc2l6ZW9mICgqZnMpKTsKIAlpZiAobmV3ID09IE5V
TEwpCkBAIC03MDYsMTAgKzcxNywxMyBAQAogCWZvciAocGYgPSB0YWJsZTsgcGYgIT0gTlVMTDsg
cGYgPSBwZi0+cGZfbmV4dCkgewogCQlzdHJ1Y3QgbW50ZW50ICpkdCA9IHBmLT5wZl9tbnRlbnQ7
CiAJCWNoYXIgKip0eXBlOworCQlpbnQgbGVuOwogCisJCWlmIChkdC0+bW50X3R5cGUgPT0gTlVM
TCkKKwkJCWNvbnRpbnVlOworCQlsZW4gPSBzdHJsZW4oZHQtPm1udF90eXBlKTsKIAkJZm9yICh0
eXBlID0gZnN0eXBlczsgKnR5cGUgIT0gTlVMTDsgdHlwZSsrKSB7Ci0JCQlpZiAoc3RybmNtcChk
dC0+bW50X3R5cGUsICp0eXBlLAotCQkJCSAgICBzaXplb2YoZHQtPm1udF90eXBlKSkgPT0gMCkg
eworCQkJaWYgKHN0cm5jbXAoZHQtPm1udF90eXBlLCAqdHlwZSwgbGVuKSA9PSAwKSB7CiAJCQkJ
Y29uc3QgY2hhciAqZGlzayA9IGdldF9kZXZpY2VfbmFtZShkdC0+bW50X2ZzbmFtZSk7CiAJCQkJ
cHJpbnRfd21zZyhhcmcsIGR0LT5tbnRfZnJlcSA+IDAsCiAJCQkJCSAgIGRpc2sgPyBkaXNrIDog
ZHQtPm1udF9mc25hbWUsCg==
</data>

          </attachment>
      

    </bug>

</bugzilla>