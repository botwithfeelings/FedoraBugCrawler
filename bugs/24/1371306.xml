<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1371306</bug_id>
          
          <creation_ts>2016-08-29 16:41:00 -0400</creation_ts>
          <short_desc>libreoffice 5.1.5.2 on-screen draw errors and lockups</short_desc>
          <delta_ts>2016-11-11 10:18:47 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>libreoffice</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="bob">redzilla.coralnut</reporter>
          <assigned_to name="Caolan McNamara">caolanm</assigned_to>
          <cc>caolanm</cc>
    
    
    <cc>dtardon</cc>
    
    
    <cc>erack</cc>
    
    
    <cc>giaaan</cc>
    
    
    <cc>mstahl</cc>
    
    
    <cc>sbergman</cc>
    
    
    <cc>tim+bugs</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>libreoffice-5.1.6.2-1.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-11-11 10:18:47</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          <external_bugs name="Document Foundation">101213</external_bugs>
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9660903</commentid>
    <comment_count>0</comment_count>
    <who name="bob">redzilla.coralnut</who>
    <bug_when>2016-08-29 16:41:04 -0400</bug_when>
    <thetext>Description of problem:

I have just performed a bare metal install of F24.  I had no problems with libreoffice on F23.  This bug is unique to the F24 installation which uses LO 5.1.5.2.

Several situations will cause the Calc application to lock up, requiring the process to be killed at the command line level.

1. When selecting several cells of text to copy by dragging the highlighted cells at the lower right corner, the display does not update the contents of the cells until after the mouse cursor is released.  In previous versions of Calc the changes to the cells would be populated with data while the drag was taking place.  In this version, the cells are highlighted during the drag but the data is never populated during the drag.  The data will not be populated until the mouse is released.

2.  When performing operation (1), the application will frequently lock up.  Calc becomes unresponsive during the drag with the mouse, and the display will not update when the mouse is released.  At this point the Calc window is frozen and the mouse becomes unresponsive.  The whole system becomes unresponsive for several seconds, then after a few seconds the mouse can be used to select other desktop items.  Although the remainder of the system can be used, the window relating to Calc remains unresponsive.  

To wit: 
a) the window will not update.  It cannot be overwritten by any other window; 

b) the Calc program will not respond to any control inputs; 

c) the Calc program cannot be closed by clicking on the window close button in the top right corner of the header; 

d) Calc cannot be closed by right clicking on the taskbar and selecting &quot;Close.&quot;  When this is performed a pop-up dialgog box appears for Calc which contains a blacked-out box.  Clicking anywhere in the blacked-out dialog box will not close the application.

e) the application can only be closed with the &quot;kill&quot; command.

f) no other application on the system is similarly effected.

None of these problems existed in the previous version of LO that I was using in F23.  This is a new problem with F24 and LO 5.1.5.2.

Version-Release number of selected component (if applicable):

Libre Office 5.1.5.2


How reproducible:

Intermittent occurrence, but happens very frequently.

Steps to Reproduce:
1. Try to use calc&apos;s highlight several cells, and drag to copy
2. Experience lockup
3. Kill application

Actual results:

GUI window drawing errors occur with application lockup

Expected results:

No lockup.

Additional info:

Using Nvidia Quadro 400 video card with the Nouveau driver in F24.  Please note that the video card is not behaving with any other apps, only with LO, which suggests that LO&apos;s video writing routines are the root of the problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9660933</commentid>
    <comment_count>1</comment_count>
    <who name="bob">redzilla.coralnut</who>
    <bug_when>2016-08-29 16:45:18 -0400</bug_when>
    <thetext>Another situation that causes lockup:

3) Clicking on the Bold/UnBold button often causes the application to lock up.
Sometimes a task that is as simple as changing the text attribute of a cell from Bold to Non-Bold, or from Non-Bold to Bold is sufficient to lock up the application.  Just clicking on the &quot;B&quot; button in the application menu will cause the application to lock up, with all screen activity related to it&apos;s window, to lock up.  During these occurrences the window cannot be overwritten by another window.

As mentioned previously, this only happens in LO Calc, not in any other application.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9661917</commentid>
    <comment_count>2</comment_count>
    <who name="David Tardon">dtardon</who>
    <bug_when>2016-08-30 02:18:52 -0400</bug_when>
    <thetext>Indeed, with the gtk3 VCL plugin, the tooltip showing the latest value in the sequence is missing. But I haven&apos;t experienced any lockup.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9662239</commentid>
    <comment_count>3</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2016-08-30 03:55:36 -0400</bug_when>
    <thetext>I have on F24 box with a nouveau driver, the &quot;locking up&quot; problem isn&apos;t seen there though.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9662287</commentid>
    <comment_count>4</comment_count>
    <who name="bob">redzilla.coralnut</who>
    <bug_when>2016-08-30 04:04:30 -0400</bug_when>
    <thetext>FYI this is happening with .xls format spreadsheets, if that helps at all.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9665512</commentid>
    <comment_count>5</comment_count>
    <who name="bob">redzilla.coralnut</who>
    <bug_when>2016-08-30 22:18:23 -0400</bug_when>
    <thetext>(In reply to Caolan McNamara from comment #3)
&gt; I have on F24 box with a nouveau driver, the &quot;locking up&quot; problem isn&apos;t seen
&gt; there though.

It&apos;s probably because you&apos;re using a different video card than the card referenced in this bug report.  This would suggest that the video driver supports your card better than it does the Quadro 400.  But insofar as the driver problem only seems to exist in LO and not in other applications, I think this is an LO-related bug.

To clarify my earlier point -- I experience this problem when using .XLS spreadsheets, only because that&apos;s the only file format that I use.  I don&apos;t know if it&apos;s a problem with ODS or not.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9670388</commentid>
    <comment_count>6</comment_count>
    <who name="Eike Rathke">erack</who>
    <bug_when>2016-09-01 04:53:53 -0400</bug_when>
    <thetext>UI operations like selecting with mouse, filling cells, clicking Bold/non-Bold are independent of the file format used. This rather sounds like a graphics card driver problem. Try with disabling &quot;Use hardware acceleration&quot; under Tools - Options - LibreOffice - View &quot;Graphics Output&quot;. If that helps, then not experiencing the problem with other applications is likely because they don&apos;t use hardware acceleration.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9672573</commentid>
    <comment_count>7</comment_count>
    <who name="bob">redzilla.coralnut</who>
    <bug_when>2016-09-01 13:12:27 -0400</bug_when>
    <thetext>Disabling &quot;Use hardware acceleration&quot; under Tools - Options - LibreOffice - View &quot;Graphics Output&quot; provided no help.

I continue to experience the problem with Calc but not with other applications.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9674353</commentid>
    <comment_count>8</comment_count>
    <who name="bob">redzilla.coralnut</who>
    <bug_when>2016-09-02 04:21:34 -0400</bug_when>
    <thetext>libreoffice-5.1.5.2-3.fc24 has this problem for me.
libreoffice-5.2.1.2-1.fc25 seems to work fine on my F25-a2 test install.

Any chance that 5.2.1.2-1 could be put into F24 testing?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9676898</commentid>
    <comment_count>9</comment_count>
    <who name="mobybit">tim+bugs</who>
    <bug_when>2016-09-03 06:41:10 -0400</bug_when>
    <thetext>Same here: Fedora 24, LO 5.1.5.2, Thinkpad X230, Intel Ivybridge. Disabling hardware acceleration does&apos;t solve the problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9677994</commentid>
    <comment_count>10</comment_count>
    <who name="bob">redzilla.coralnut</who>
    <bug_when>2016-09-04 19:06:00 -0400</bug_when>
    <thetext>I had to fall back and punt.  I just can&apos;t be productive when Calc locks up every time I try to use it.  I got rid of the Fedora builds using &quot;dnf remove libreoffice*&quot;.

I went to The Document Foundation and downloaded their .rpm for version 5.2.0.4.  the TDF build fixes the problems.

This is not an issue with my nvidia card and the nouveau driver; this is a build problem with F24 and LO 5.1.5.2.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9678631</commentid>
    <comment_count>11</comment_count>
    <who name="David Tardon">dtardon</who>
    <bug_when>2016-09-05 03:11:47 -0400</bug_when>
    <thetext>(In reply to bob from comment #8)
&gt; Any chance that 5.2.1.2-1 could be put into F24 testing?

No. We don&apos;t do rebases in released Fedora versions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9690851</commentid>
    <comment_count>12</comment_count>
    <who name="giaaan">giaaan</who>
    <bug_when>2016-09-08 09:44:48 -0400</bug_when>
    <thetext>Identical problem here as bob&apos;s
Fedora 24, kernel 4.7.2-201 x86_64
Window Manager: KDE (KDE Frameworks: 5.25.0, Qt: 5.6.1)
Videocard: ATI radeon RS780, driver radeon (default)
Libreoffice 5.1.5.2 hangs with calc exactly as described by bob
Problem disappears downgrading to LO 5.1.3.2</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9716926</commentid>
    <comment_count>13</comment_count>
    <who name="bob">redzilla.coralnut</who>
    <bug_when>2016-09-17 09:01:51 -0400</bug_when>
    <thetext>(In reply to David Tardon from comment #11)
&gt; (In reply to bob from comment #8)
&gt; &gt; Any chance that 5.2.1.2-1 could be put into F24 testing?
&gt; 
&gt; No. We don&apos;t do rebases in released Fedora versions.

Too bad, as it would be nice to have a solution available that is known to work.

Are there any plans to add a 5.1.x build to the testing branch?  When I filedd this bug the version effected was marked stable and no other builds were available in the testing branch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9883689</commentid>
    <comment_count>14</comment_count>
    <who name="Caolan McNamara">caolanm</who>
    <bug_when>2016-11-11 10:18:47 -0500</bug_when>
    <thetext>Its quite probable that this is the same problem as https://bugs.documentfoundation.org/show_bug.cgi?id=101213 (where the use of CAIRO_OPERATOR_DIFFERENCE causes some drivers to bog down and become super slow. That definitely fits with the version numbers mentioned here. So I feel that this is probably resolved with the current 5.1.6 update (5.1.6.2-1.fc24) given the version its reported to appear in and the upstream commentary.

If I&apos;m wrong and the problem persists, then the only direction to go in I feel is to try and bibisect libreoffice (can google for details) to find the commit range which made things go wrong on your hardware combination</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>