<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1376870</bug_id>
          
          <creation_ts>2016-09-16 13:14:00 -0400</creation_ts>
          <short_desc>feature request: enable EFI linking in binutils</short_desc>
          <delta_ts>2016-09-26 04:48:52 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>binutils</component>
          <version>24</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>RAWHIDE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>low</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Mark Pryor">pryorm09</reporter>
          <assigned_to name="Nick Clifton">nickc</assigned_to>
          <cc>jakub</cc>
    
    
    <cc>ketuzsezr</cc>
    
    
    <cc>m.a.young</cc>
    
    
    <cc>nickc</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-09-26 04:48:52</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9715105</commentid>
    <comment_count>0</comment_count>
    <who name="Mark Pryor">pryorm09</who>
    <bug_when>2016-09-16 13:14:16 -0400</bug_when>
    <thetext>Description of problem:
Feature request
Discussion of issues:
https://lists.xen.org/archives/html/xen-devel/2016-02/msg01847.html

Version-Release number of selected component (if applicable):
all versions

How reproducible:


Steps to Reproduce:
1.
2.
3.

Actual results:


Expected results:


Additional info:

cat f24-binutils-add-386pep-emul.patch 
diff -r -Nup binutils-2.26.1-1.fc24.src/binutils.spec binutils-2.26.1-1.fc24.1.src/binutils.spec
--- binutils-2.26.1-1.fc24.src/binutils.spec	2016-06-29 04:00:10.000000000 -0700
+++ binutils-2.26.1-1.fc24.1.src/binutils.spec	2016-09-15 15:29:38.000000000 -0700
@@ -20,7 +20,7 @@
 Summary: A GNU collection of binary utilities
 Name: %{?cross}binutils%{?_with_debug:-debug}
 Version: 2.26.1
-Release: 1%{?dist}
+Release: 1%{?dist}.1
 License: GPLv3+
 Group: Development/Tools
 URL: http://sources.redhat.com/binutils
@@ -248,6 +248,11 @@ export CFLAGS=&quot;$RPM_OPT_FLAGS&quot;
 %endif
 CARGS=
 
+case %{binutils_target} in x86_64*|i?86*|arm*|aarch64*)
+  CARGS=&quot;$CARGS --enable-targets=x86_64-pep,x86_64-*-pep&quot;
+  ;;
+esac
+
 case %{binutils_target} in i?86*|sparc*|ppc*|s390*|sh*|arm*|aarch64*)
   CARGS=&quot;$CARGS --enable-64-bit-bfd&quot;
   ;;
@@ -525,6 +530,11 @@ exit 0
 %endif # %{isnative}
 
 %changelog
+* Fri Jul 22 2016 Mark Pryor  &lt;pryorm09@gmail.com&gt; 2.26.1-1.1
+- minor release of binutils-2.26.1
+- added i386pep emulation for all EFI capable CPU type
+- binary rebuild for 5th week of release
+
 * Wed Jun 29 2016 Nick Clifton &lt;nickc@redhat.com&gt; 2.26.1-1
 - Rebase on FSF binutils 2.26.1 release.
 - Retire: binutils-2.26-Bsymbolic_PIE.patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9715135</commentid>
    <comment_count>1</comment_count>
    <who name="Mark Pryor">pryorm09</who>
    <bug_when>2016-09-16 13:23:38 -0400</bug_when>
    <thetext>After patching, this is the emulation list on x86_64
&gt; ld -V
GNU ld version 2.26.1-1.fc24.1
  Supported emulations:
   elf_x86_64
   elf32_x86_64
   elf_i386
   elf_iamcu
   i386linux
   elf_l1om
   elf_k1om
   i386pep
   i386pe</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9733819</commentid>
    <comment_count>2</comment_count>
    <who name="Nick Clifton">nickc</who>
    <bug_when>2016-09-22 07:57:52 -0400</bug_when>
    <thetext>Hi Mark,

I have checked in a small variant of your patch to the Fedora repository.  Please try out: binutils-2.27-8.fc26 which you should be able to find by following this link:

  http://koji.fedoraproject.org/koji/taskinfo?taskID=15749020

Cheers
  Nick</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9739676</commentid>
    <comment_count>3</comment_count>
    <who name="Mark Pryor">pryorm09</who>
    <bug_when>2016-09-23 18:13:35 -0400</bug_when>
    <thetext>I installed the patched binutils in f24 mock chroot. There are 2 new emulations as desired.

 http://paste.fedoraproject.org/433673/47466864/raw/
&lt;PryMar56&gt; patched binutils, installed in f24 chroot, then query the emulations &amp; found 2 new</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>