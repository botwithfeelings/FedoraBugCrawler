<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1274909</bug_id>
          
          <creation_ts>2015-10-23 15:55:00 -0400</creation_ts>
          <short_desc>docker ftbfs in boltdb on s390x</short_desc>
          <delta_ts>2017-05-16 13:13:38 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>docker</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>467765</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Marcin Juszkiewicz">mjuszkie</reporter>
          <assigned_to name="Daniel Walsh">dwalsh</assigned_to>
          <cc>adimania</cc>
    
    
    <cc>admiller</cc>
    
    
    <cc>dwalsh</cc>
    
    
    <cc>ichavero</cc>
    
    
    <cc>jcajka</cc>
    
    
    <cc>jchaloup</cc>
    
    
    <cc>lsm5</cc>
    
    
    <cc>miminar</cc>
    
    
    <cc>pbrobinson</cc>
    
    
    <cc>vbatts</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-05-16 13:13:38</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8750717</commentid>
    <comment_count>0</comment_count>
    <who name="Marcin Juszkiewicz">mjuszkie</who>
    <bug_when>2015-10-23 15:55:39 -0400</bug_when>
    <thetext>Description of problem:

Docker fails to build on aarch64. Took a look and code snapshot used lacks some aarch64 patches.

Upstream revision 503413c0153839f5f316579d99c4bf1f09fa023f (from boltdb/bolt) adds aarch64 definitions. But they need 349dacfd44d5dbe9119075391751c0bcb62fff75 (same repo) revision (with several other to get them in line probably - I hand edited this one to get further with build).

Then it fails:

# github.com/docker/docker/api/server
_build/src/github.com/docker/docker/api/server/credentials_linux.go:71:17: error: reference to undefined identifier &apos;syscall.GetsockoptUcred&apos;
  return syscall.GetsockoptUcred(fd, syscall.SOL_SOCKET, syscall.SO_PEERCRED)
                 ^
_build/src/github.com/docker/docker/api/server/credentials_linux.go:71:2: error: not enough arguments to return
  return syscall.GetsockoptUcred(fd, syscall.SOL_SOCKET, syscall.SO_PEERCRED)
  ^


Version-Release number of selected component (if applicable):

docker-1.9.0-9.gitc743657.fc24.src.rpm

How reproducible:

always

Steps to Reproduce:
1. do build on aarch64 (arm-koji)

Actual results:

fails

Expected results:

builds
Additional info:</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8750720</commentid>
    <comment_count>1</comment_count>
      <attachid>1085926</attachid>
    <who name="Marcin Juszkiewicz">mjuszkie</who>
    <bug_when>2015-10-23 15:57:08 -0400</bug_when>
    <thetext>Created attachment 1085926
boltdb/bolt patch adding aarch64 definitions</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8750722</commentid>
    <comment_count>2</comment_count>
      <attachid>1085927</attachid>
    <who name="Marcin Juszkiewicz">mjuszkie</who>
    <bug_when>2015-10-23 15:57:52 -0400</bug_when>
    <thetext>Created attachment 1085927
boltdb/bolt patch moving maxAllocSize to architecture files</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8750724</commentid>
    <comment_count>3</comment_count>
      <attachid>1085928</attachid>
    <who name="Marcin Juszkiewicz">mjuszkie</who>
    <bug_when>2015-10-23 15:58:40 -0400</bug_when>
    <thetext>Created attachment 1085928
local version of &quot;moving maxAllocSize&quot; patch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8751238</commentid>
    <comment_count>4</comment_count>
    <who name="Daniel Walsh">dwalsh</who>
    <bug_when>2015-10-24 06:06:07 -0400</bug_when>
    <thetext>Are these patches getting merged upstream?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8751565</commentid>
    <comment_count>5</comment_count>
    <who name="Marcin Juszkiewicz">mjuszkie</who>
    <bug_when>2015-10-24 14:51:38 -0400</bug_when>
    <thetext>Daniel: those patches are taken from upstream repo of boltdb/bolt.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8755229</commentid>
    <comment_count>6</comment_count>
    <who name="Daniel Walsh">dwalsh</who>
    <bug_when>2015-10-26 10:22:52 -0400</bug_when>
    <thetext>I am looking for those to get merged into docker.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8858741</commentid>
    <comment_count>7</comment_count>
    <who name="Jakub ÄŒajka">jcajka</who>
    <bug_when>2015-11-25 03:58:54 -0500</bug_when>
    <thetext>Still affects Fedora23 branch on s390x and aarch64. Seems fixed in rawhide.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8875082</commentid>
    <comment_count>8</comment_count>
    <who name="Daniel Walsh">dwalsh</who>
    <bug_when>2015-12-01 16:50:18 -0500</bug_when>
    <thetext>We are building docker-1.10-devel in rawhide.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9085620</commentid>
    <comment_count>9</comment_count>
    <who name="Daniel Walsh">dwalsh</who>
    <bug_when>2016-02-22 14:26:46 -0500</bug_when>
    <thetext>Fixed in docker-1.10.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9092398</commentid>
    <comment_count>10</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-02-24 08:52:04 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 24 development cycle.
Changing version to &apos;24&apos;.

More information and reason for this action is here:
https://fedoraproject.org/wiki/Fedora_Program_Management/HouseKeeping/Fedora24#Rawhide_Rebase</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9398306</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Admin XMLRPC Client">fedora-admin-xmlrpc</who>
    <bug_when>2016-06-08 10:10:48 -0400</bug_when>
    <thetext>This package has changed ownership in the Fedora Package Database.  Reassigning to the new owner of this component.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1085926</attachid>
            <date>2015-10-23 15:57:00 -0400</date>
            <delta_ts>2015-10-23 15:57:08 -0400</delta_ts>
            <desc>boltdb/bolt patch adding aarch64 definitions</desc>
            <filename>503413c0153839f5f316579d99c4bf1f09fa023f.patch</filename>
            <type>text/plain</type>
            <size>817</size>
            <attacher name="Marcin Juszkiewicz">mjuszkie</attacher>
            
              <data encoding="base64">RnJvbSA1MDM0MTNjMDE1MzgzOWY1ZjMxNjU3OWQ5OWM0YmYxZjA5ZmEwMjNmIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBRaWFuZyBIdWFuZyA8aC5odWFuZ3FpYW5nQGh1YXdlaS5jb20+
CkRhdGU6IEZyaSwgOSBPY3QgMjAxNSAxMDoyOToyMiArMDgwMApTdWJqZWN0OiBbUEFUQ0hdIEFk
ZCBzdXBwb3J0IGZvciBhcm02NAoKQWRkZWQgYnVpbGQgdGFnIGZvciBhcm02NCwgc28gd2Ugd29u
J3QgZ2V0IGFueSBlcnJvcnMgb24gb3RoZXIKcGxhdGZvcm1zIHdpdGggZ28gMS40LnguCgpTaWdu
ZWQtb2ZmLWJ5OiBRaWFuZyBIdWFuZyA8aC5odWFuZ3FpYW5nQGh1YXdlaS5jb20+Ci0tLQogYm9s
dF9hcm02NC5nbyB8IDkgKysrKysrKysrCiAxIGZpbGUgY2hhbmdlZCwgOSBpbnNlcnRpb25zKCsp
CiBjcmVhdGUgbW9kZSAxMDA2NDQgYm9sdF9hcm02NC5nbwoKZGlmZiAtLWdpdCBhL2JvbHRfYXJt
NjQuZ28gYi9ib2x0X2FybTY0LmdvCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAu
LjZkMjMwOTMKLS0tIC9kZXYvbnVsbAorKysgYi9ib2x0X2FybTY0LmdvCkBAIC0wLDAgKzEsOSBA
QAorLy8gK2J1aWxkIGFybTY0CisKK3BhY2thZ2UgYm9sdAorCisvLyBtYXhNYXBTaXplIHJlcHJl
c2VudHMgdGhlIGxhcmdlc3QgbW1hcCBzaXplIHN1cHBvcnRlZCBieSBCb2x0LgorY29uc3QgbWF4
TWFwU2l6ZSA9IDB4RkZGRkZGRkZGRkZGIC8vIDI1NlRCCisKKy8vIG1heEFsbG9jU2l6ZSBpcyB0
aGUgc2l6ZSB1c2VkIHdoZW4gY3JlYXRpbmcgYXJyYXkgcG9pbnRlcnMuCitjb25zdCBtYXhBbGxv
Y1NpemUgPSAweDdGRkZGRkZGCg==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1085927</attachid>
            <date>2015-10-23 15:57:00 -0400</date>
            <delta_ts>2015-10-23 15:57:52 -0400</delta_ts>
            <desc>boltdb/bolt patch moving maxAllocSize to architecture files</desc>
            <filename>349dacfd44d5dbe9119075391751c0bcb62fff75.patch</filename>
            <type>text/plain</type>
            <size>1333</size>
            <attacher name="Marcin Juszkiewicz">mjuszkie</attacher>
            
              <data encoding="base64">RnJvbSAzNDlkYWNmZDQ0ZDVkYmU5MTE5MDc1MzkxNzUxYzBiY2I2MmZmZjc1IE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiBCZW4gSm9obnNvbiA8YmVuYmpvaG5zb25AeWFob28uY29tPgpE
YXRlOiBGcmksIDI3IEZlYiAyMDE1IDA4OjQ1OjA1IC0wNzAwClN1YmplY3Q6IFtQQVRDSF0gVXBk
YXRlIG1heCBhbGxvYyBzaXplIG9uIDM4NiBhcmNoLgoKLS0tCiBib2x0XzM4Ni5nbyAgIHwgMyAr
KysKIGJvbHRfYW1kNjQuZ28gfCAzICsrKwogcGFnZS5nbyAgICAgICB8IDEgLQogMyBmaWxlcyBj
aGFuZ2VkLCA2IGluc2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkKCmRpZmYgLS1naXQgYS9ib2x0
XzM4Ni5nbyBiL2JvbHRfMzg2LmdvCmluZGV4IGNjMjE4OTQuLmU2NTliZmIgMTAwNjQ0Ci0tLSBh
L2JvbHRfMzg2LmdvCisrKyBiL2JvbHRfMzg2LmdvCkBAIC0yLDMgKzIsNiBAQCBwYWNrYWdlIGJv
bHQKIAogLy8gbWF4TWFwU2l6ZSByZXByZXNlbnRzIHRoZSBsYXJnZXN0IG1tYXAgc2l6ZSBzdXBw
b3J0ZWQgYnkgQm9sdC4KIGNvbnN0IG1heE1hcFNpemUgPSAweDdGRkZGRkZGIC8vIDJHQgorCisv
LyBtYXhBbGxvY1NpemUgaXMgdGhlIHNpemUgdXNlZCB3aGVuIGNyZWF0aW5nIGFycmF5IHBvaW50
ZXJzLgorY29uc3QgbWF4QWxsb2NTaXplID0gMHhGRkZGRkZGCmRpZmYgLS1naXQgYS9ib2x0X2Ft
ZDY0LmdvIGIvYm9sdF9hbWQ2NC5nbwppbmRleCA0MjYyOTMyLi5jY2E2YjdlIDEwMDY0NAotLS0g
YS9ib2x0X2FtZDY0LmdvCisrKyBiL2JvbHRfYW1kNjQuZ28KQEAgLTIsMyArMiw2IEBAIHBhY2th
Z2UgYm9sdAogCiAvLyBtYXhNYXBTaXplIHJlcHJlc2VudHMgdGhlIGxhcmdlc3QgbW1hcCBzaXpl
IHN1cHBvcnRlZCBieSBCb2x0LgogY29uc3QgbWF4TWFwU2l6ZSA9IDB4RkZGRkZGRkZGRkZGIC8v
IDI1NlRCCisKKy8vIG1heEFsbG9jU2l6ZSBpcyB0aGUgc2l6ZSB1c2VkIHdoZW4gY3JlYXRpbmcg
YXJyYXkgcG9pbnRlcnMuCitjb25zdCBtYXhBbGxvY1NpemUgPSAweDdGRkZGRkZGCmRpZmYgLS1n
aXQgYS9wYWdlLmdvIGIvcGFnZS5nbwppbmRleCBkZTJlNjIzLi41OGU0M2M0IDEwMDY0NAotLS0g
YS9wYWdlLmdvCisrKyBiL3BhZ2UuZ28KQEAgLTgsNyArOCw2IEBAIGltcG9ydCAoCiAKIGNvbnN0
IHBhZ2VIZWFkZXJTaXplID0gaW50KHVuc2FmZS5PZmZzZXRvZigoKCpwYWdlKShuaWwpKS5wdHIp
KQogCi1jb25zdCBtYXhBbGxvY1NpemUgPSAweDdGRkZGRkZGCiBjb25zdCBtaW5LZXlzUGVyUGFn
ZSA9IDIKIAogY29uc3QgYnJhbmNoUGFnZUVsZW1lbnRTaXplID0gaW50KHVuc2FmZS5TaXplb2Yo
YnJhbmNoUGFnZUVsZW1lbnR7fSkpCg==
</data>

          </attachment>
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1085928</attachid>
            <date>2015-10-23 15:58:00 -0400</date>
            <delta_ts>2015-10-23 15:58:40 -0400</delta_ts>
            <desc>local version of &quot;moving maxAllocSize&quot; patch</desc>
            <filename>hrw.diff</filename>
            <type>text/plain</type>
            <size>2017</size>
            <attacher name="Marcin Juszkiewicz">mjuszkie</attacher>
            
              <data encoding="base64">ZGlmZiAtLWdpdCBhL3ZlbmRvci9zcmMvZ2l0aHViLmNvbS9ib2x0ZGIvYm9sdC9ib2x0XzM4Ni5n
byBiL3ZlbmRvci9zcmMvZ2l0aHViLmNvbS9ib2x0ZGIvYm9sdC9ib2x0XzM4Ni5nbwppbmRleCA4
NTZmNDAxLi5kMmUwNGEwIDEwMDY0NAotLS0gYS92ZW5kb3Ivc3JjL2dpdGh1Yi5jb20vYm9sdGRi
L2JvbHQvYm9sdF8zODYuZ28KKysrIGIvdmVuZG9yL3NyYy9naXRodWIuY29tL2JvbHRkYi9ib2x0
L2JvbHRfMzg2LmdvCkBAIC0yLDMgKzIsNiBAQCBwYWNrYWdlIGJvbHQKIAogLy8gbWF4TWFwU2l6
ZSByZXByZXNlbnRzIHRoZSBsYXJnZXN0IG1tYXAgc2l6ZSBzdXBwb3J0ZWQgYnkgQm9sdC4KIGNv
bnN0IG1heE1hcFNpemUgPSAweEZGRkZGRkYgLy8gMjU2TUIKKworLy8gbWF4QWxsb2NTaXplIGlz
IHRoZSBzaXplIHVzZWQgd2hlbiBjcmVhdGluZyBhcnJheSBwb2ludGVycy4KK2NvbnN0IG1heEFs
bG9jU2l6ZSA9IDB4RkZGRkZGRgpkaWZmIC0tZ2l0IGEvdmVuZG9yL3NyYy9naXRodWIuY29tL2Jv
bHRkYi9ib2x0L2JvbHRfYW1kNjQuZ28gYi92ZW5kb3Ivc3JjL2dpdGh1Yi5jb20vYm9sdGRiL2Jv
bHQvYm9sdF9hbWQ2NC5nbwppbmRleCA0MjYyOTMyLi5jY2E2YjdlIDEwMDY0NAotLS0gYS92ZW5k
b3Ivc3JjL2dpdGh1Yi5jb20vYm9sdGRiL2JvbHQvYm9sdF9hbWQ2NC5nbworKysgYi92ZW5kb3Iv
c3JjL2dpdGh1Yi5jb20vYm9sdGRiL2JvbHQvYm9sdF9hbWQ2NC5nbwpAQCAtMiwzICsyLDYgQEAg
cGFja2FnZSBib2x0CiAKIC8vIG1heE1hcFNpemUgcmVwcmVzZW50cyB0aGUgbGFyZ2VzdCBtbWFw
IHNpemUgc3VwcG9ydGVkIGJ5IEJvbHQuCiBjb25zdCBtYXhNYXBTaXplID0gMHhGRkZGRkZGRkZG
RkYgLy8gMjU2VEIKKworLy8gbWF4QWxsb2NTaXplIGlzIHRoZSBzaXplIHVzZWQgd2hlbiBjcmVh
dGluZyBhcnJheSBwb2ludGVycy4KK2NvbnN0IG1heEFsbG9jU2l6ZSA9IDB4N0ZGRkZGRkYKZGlm
ZiAtLWdpdCBhL3ZlbmRvci9zcmMvZ2l0aHViLmNvbS9ib2x0ZGIvYm9sdC9wYWdlLmdvIGIvdmVu
ZG9yL3NyYy9naXRodWIuY29tL2JvbHRkYi9ib2x0L3BhZ2UuZ28KaW5kZXggYjNkYzQ3My4uNThl
NDNjNCAxMDA2NDQKLS0tIGEvdmVuZG9yL3NyYy9naXRodWIuY29tL2JvbHRkYi9ib2x0L3BhZ2Uu
Z28KKysrIGIvdmVuZG9yL3NyYy9naXRodWIuY29tL2JvbHRkYi9ib2x0L3BhZ2UuZ28KQEAgLTgs
NyArOCw2IEBAIGltcG9ydCAoCiAKIGNvbnN0IHBhZ2VIZWFkZXJTaXplID0gaW50KHVuc2FmZS5P
ZmZzZXRvZigoKCpwYWdlKShuaWwpKS5wdHIpKQogCi1jb25zdCBtYXhBbGxvY1NpemUgPSAweEZG
RkZGRkYKIGNvbnN0IG1pbktleXNQZXJQYWdlID0gMgogCiBjb25zdCBicmFuY2hQYWdlRWxlbWVu
dFNpemUgPSBpbnQodW5zYWZlLlNpemVvZihicmFuY2hQYWdlRWxlbWVudHt9KSkKZGlmZiAtLWdp
dCBhL3ZlbmRvci9zcmMvZ2l0aHViLmNvbS9vcGVuY29udGFpbmVycy9ydW5jL2xpYmNvbnRhaW5l
ci9zeXN0ZW0vc3lzY2FsbF9saW51eF82NC5nbyBiL3ZlbmRvci9zcmMvZ2l0aHViLmNvbS9vcGVu
Y29udGFpbmVycy9ydW5jL2xpYmNvbnRhaW5lci9zeXN0ZW0vc3lzY2FsbF9saW51eF82NC5nbwpp
bmRleCAwODE2YmY4Li5mZDdhYTAzIDEwMDY0NAotLS0gYS92ZW5kb3Ivc3JjL2dpdGh1Yi5jb20v
b3BlbmNvbnRhaW5lcnMvcnVuYy9saWJjb250YWluZXIvc3lzdGVtL3N5c2NhbGxfbGludXhfNjQu
Z28KKysrIGIvdmVuZG9yL3NyYy9naXRodWIuY29tL29wZW5jb250YWluZXJzL3J1bmMvbGliY29u
dGFpbmVyL3N5c3RlbS9zeXNjYWxsX2xpbnV4XzY0LmdvCkBAIC0xLDQgKzEsNCBAQAotLy8gK2J1
aWxkIGxpbnV4LGFybTY0IGxpbnV4LGFtZDY0IGxpbnV4LHBwYyBsaW51eCxwcGM2NCBsaW51eCxw
cGM2NGxlIGxpbnV4LHMzOTB4CisvLyArYnVpbGQgbGludXgsYXJtNjQgbGludXgsYW1kNjQgbGlu
dXgscHBjIGxpbnV4LHBwYzY0IGxpbnV4LHBwYzY0bGUgbGludXgsczM5MHggbGludXgsYWFyY2g2
NAogCiBwYWNrYWdlIHN5c3RlbQogCg==
</data>

          </attachment>
      

    </bug>

</bugzilla>