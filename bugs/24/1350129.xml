<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1350129</bug_id>
          
          <creation_ts>2016-06-25 16:43:00 -0400</creation_ts>
          <short_desc>assertion failed: store.cc:1890: &quot;isEmpty()&quot;</short_desc>
          <delta_ts>2016-08-05 11:45:34 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>squid</component>
          <version>24</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jan Kratochvil">jan.kratochvil</reporter>
          <assigned_to name="LuboÅ¡ Uhliarik">luhliari</assigned_to>
          <cc>henrik</cc>
    
    
    <cc>jan.kratochvil</cc>
    
    
    <cc>jonathansteffan</cc>
    
    
    <cc>luhliari</cc>
    
    
    <cc>psimerda</cc>
    
    
    <cc>thozza</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-08-05 11:45:34</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9452582</commentid>
    <comment_count>0</comment_count>
      <attachid>1172381</attachid>
    <who name="Jan Kratochvil">jan.kratochvil</who>
    <bug_when>2016-06-25 16:43:57 -0400</bug_when>
    <thetext>Created attachment 1172381
cache.log

Description of problem:
After upgrade F23-&gt;F24 squid started crashing each few minutes during dnf distro-sync.

Version-Release number of selected component (if applicable):
squid-3.5.15-1.fc24.x86_64

How reproducible:
In 10 minutes.

Steps to Reproduce:
mock --shell
dnf distro-sync

Actual results:
2016/06/25 22:14:02 kid1| assertion failed: store.cc:1890: &quot;isEmpty()&quot;
2016/06/25 22:22:55 kid1| assertion failed: store.cc:1890: &quot;isEmpty()&quot;
2016/06/25 22:34:57 kid1| assertion failed: store.cc:1890: &quot;isEmpty()&quot;

Expected results:
No crashes.

Additional info:
I have somehow customized squid.conf, relevant changes should be:

coredump_dir /var/spool/squid
cache_dir ufs /var/spool/squid 10000 16 32 max-size=1073741824
maximum_object_size 1 GB</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9452586</commentid>
    <comment_count>1</comment_count>
    <who name="Jan Kratochvil">jan.kratochvil</who>
    <bug_when>2016-06-25 16:51:20 -0400</bug_when>
    <thetext>http://bugs.squid-cache.org/show_bug.cgi?id=3483#c26
which is about &quot;isEmpty()&quot; - says:
  After patching with the patches for http://bugs.squid-cache.org/show_bug.cgi?id=4447 the issue seems to have disappeared. 
I have not tried that.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9589333</commentid>
    <comment_count>3</comment_count>
    <who name="Jan Kratochvil">jan.kratochvil</who>
    <bug_when>2016-08-05 11:45:34 -0400</bug_when>
    <thetext>In fact I did not face this problem recently.  I have now checked:

The last crash on my box:
2016/07/03 10:15:09 kid1| assertion failed: store.cc:1890: &quot;isEmpty()&quot;

DNF log:
Jul 13 02:09:41 INFO Upgraded: squid-7:3.5.19-2.fc24.x86_64
Jul 13 02:11:26 INFO Cleanup: squid-7:3.5.15-1.fc24.x86_64

Therefore it got fixed already by the previous update, thanks for the support.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1172381</attachid>
            <date>2016-06-25 16:43:00 -0400</date>
            <delta_ts>2016-06-25 16:43:57 -0400</delta_ts>
            <desc>cache.log</desc>
            <filename>cache.log</filename>
            <type>text/plain</type>
            <size>3176</size>
            <attacher name="Jan Kratochvil">jan.kratochvil</attacher>
            
              <data encoding="base64">Wy4uLl0KMjAxNi8wNi8yNSAyMjoyMjo1OSBraWQxfCBzdG9yZUxhdGVSZWxlYXNlOiByZWxlYXNl
ZCAwIG9iamVjdHMKMjAxNi8wNi8yNSAyMjozNDo1NyBraWQxfCBhc3NlcnRpb24gZmFpbGVkOiBz
dG9yZS5jYzoxODkwOiAiaXNFbXB0eSgpIgoyMDE2LzA2LzI1IDIyOjM1OjAwIGtpZDF8IFNldCBD
dXJyZW50IERpcmVjdG9yeSB0byAvdmFyL3Nwb29sL3NxdWlkCjIwMTYvMDYvMjUgMjI6MzU6MDAg
a2lkMXwgU3RhcnRpbmcgU3F1aWQgQ2FjaGUgdmVyc2lvbiAzLjUuMTUgZm9yIHg4Nl82NC1yZWRo
YXQtbGludXgtZ251Li4uCjIwMTYvMDYvMjUgMjI6MzU6MDAga2lkMXwgU2VydmljZSBOYW1lOiBz
cXVpZAoyMDE2LzA2LzI1IDIyOjM1OjAwIGtpZDF8IFByb2Nlc3MgSUQgODg1NgoyMDE2LzA2LzI1
IDIyOjM1OjAwIGtpZDF8IFByb2Nlc3MgUm9sZXM6IHdvcmtlcgoyMDE2LzA2LzI1IDIyOjM1OjAw
IGtpZDF8IFdpdGggMTYzODQgZmlsZSBkZXNjcmlwdG9ycyBhdmFpbGFibGUKMjAxNi8wNi8yNSAy
MjozNTowMCBraWQxfCBJbml0aWFsaXppbmcgSVAgQ2FjaGUuLi4KMjAxNi8wNi8yNSAyMjozNTow
MCBraWQxfCBETlMgU29ja2V0IGNyZWF0ZWQgYXQgWzo6XSwgRkQgNgoyMDE2LzA2LzI1IDIyOjM1
OjAwIGtpZDF8IEROUyBTb2NrZXQgY3JlYXRlZCBhdCAwLjAuMC4wLCBGRCA4CjIwMTYvMDYvMjUg
MjI6MzU6MDAga2lkMXwgQWRkaW5nIG5hbWVzZXJ2ZXIgMTI3LjAuMC4xIGZyb20gL2V0Yy9yZXNv
bHYuY29uZgoyMDE2LzA2LzI1IDIyOjM1OjAwIGtpZDF8IExvZ2ZpbGU6IG9wZW5pbmcgbG9nIC92
YXIvbG9nL3NxdWlkL2FjY2Vzcy5sb2cKMjAxNi8wNi8yNSAyMjozNTowMCBraWQxfCBXQVJOSU5H
OiBsb2cgbmFtZSBub3cgc3RhcnRzIHdpdGggYSBtb2R1bGUgbmFtZS4gVXNlICdzdGRpbzovdmFy
L2xvZy9zcXVpZC9hY2Nlc3MubG9nJwoyMDE2LzA2LzI1IDIyOjM1OjAwIGtpZDF8IFVubGlua2Qg
cGlwZSBvcGVuZWQgb24gRkQgMTMKMjAxNi8wNi8yNSAyMjozNTowMCBraWQxfCBMb2NhbCBjYWNo
ZSBkaWdlc3QgZW5hYmxlZDsgcmVidWlsZC9yZXdyaXRlIGV2ZXJ5IDM2MDAvMzYwMCBzZWMKMjAx
Ni8wNi8yNSAyMjozNTowMCBraWQxfCBTdG9yZSBsb2dnaW5nIGRpc2FibGVkCjIwMTYvMDYvMjUg
MjI6MzU6MDAga2lkMXwgU3dhcCBtYXhTaXplIDEwMjQwMDAwICsgMjYyMTQ0IEtCLCBlc3RpbWF0
ZWQgODA3ODU3IG9iamVjdHMKMjAxNi8wNi8yNSAyMjozNTowMCBraWQxfCBUYXJnZXQgbnVtYmVy
IG9mIGJ1Y2tldHM6IDQwMzkyCjIwMTYvMDYvMjUgMjI6MzU6MDAga2lkMXwgVXNpbmcgNjU1MzYg
U3RvcmUgYnVja2V0cwoyMDE2LzA2LzI1IDIyOjM1OjAwIGtpZDF8IE1heCBNZW0gIHNpemU6IDI2
MjE0NCBLQgoyMDE2LzA2LzI1IDIyOjM1OjAwIGtpZDF8IE1heCBTd2FwIHNpemU6IDEwMjQwMDAw
IEtCCjIwMTYvMDYvMjUgMjI6MzU6MDAga2lkMXwgUmVidWlsZGluZyBzdG9yYWdlIGluIC92YXIv
c3Bvb2wvc3F1aWQgKGRpcnR5IGxvZykKMjAxNi8wNi8yNSAyMjozNTowMCBraWQxfCBVc2luZyBM
ZWFzdCBMb2FkIHN0b3JlIGRpciBzZWxlY3Rpb24KMjAxNi8wNi8yNSAyMjozNTowMCBraWQxfCBT
ZXQgQ3VycmVudCBEaXJlY3RvcnkgdG8gL3Zhci9zcG9vbC9zcXVpZAoyMDE2LzA2LzI1IDIyOjM1
OjAwIGtpZDF8IEZpbmlzaGVkIGxvYWRpbmcgTUlNRSB0eXBlcyBhbmQgaWNvbnMuCjIwMTYvMDYv
MjUgMjI6MzU6MDAga2lkMXwgQ29uZmlndXJpbmcgUGFyZW50IDEwLjExLjUuNy8zMTI4LzcKMjAx
Ni8wNi8yNSAyMjozNTowMCBraWQxfCBTcXVpZCBwbHVnaW4gbW9kdWxlcyBsb2FkZWQ6IDAKMjAx
Ni8wNi8yNSAyMjozNTowMCBraWQxfCBBZGFwdGF0aW9uIHN1cHBvcnQgaXMgb2ZmLgoyMDE2LzA2
LzI1IDIyOjM1OjAwIGtpZDF8IEFjY2VwdGluZyBIVFRQIFNvY2tldCBjb25uZWN0aW9ucyBhdCBs
b2NhbD1bOjpdOjMxMjggcmVtb3RlPVs6Ol0gRkQgMTYgZmxhZ3M9OQoyMDE2LzA2LzI1IDIyOjM1
OjAwIGtpZDF8IEFjY2VwdGluZyBJQ1AgbWVzc2FnZXMgb24gWzo6XTozMTMwCjIwMTYvMDYvMjUg
MjI6MzU6MDAga2lkMXwgU2VuZGluZyBJQ1AgbWVzc2FnZXMgZnJvbSBbOjpdOjMxMzAKMjAxNi8w
Ni8yNSAyMjozNTowMCBraWQxfCBBY2NlcHRpbmcgSFRDUCBtZXNzYWdlcyBvbiBbOjpdOjQ4MjcK
MjAxNi8wNi8yNSAyMjozNTowMCBraWQxfCBTZW5kaW5nIEhUQ1AgbWVzc2FnZXMgZnJvbSBbOjpd
OjQ4MjcKMjAxNi8wNi8yNSAyMjozNTowMCBraWQxfCBEb25lIHJlYWRpbmcgL3Zhci9zcG9vbC9z
cXVpZCBzd2FwbG9nICgzODAyIGVudHJpZXMpCjIwMTYvMDYvMjUgMjI6MzU6MDAga2lkMXwgRmlu
aXNoZWQgcmVidWlsZGluZyBzdG9yYWdlIGZyb20gZGlzay4KMjAxNi8wNi8yNSAyMjozNTowMCBr
aWQxfCAgICAgIDM0NTEgRW50cmllcyBzY2FubmVkCjIwMTYvMDYvMjUgMjI6MzU6MDAga2lkMXwg
ICAgICAgICAwIEludmFsaWQgZW50cmllcy4KMjAxNi8wNi8yNSAyMjozNTowMCBraWQxfCAgICAg
ICAgIDAgV2l0aCBpbnZhbGlkIGZsYWdzLgoyMDE2LzA2LzI1IDIyOjM1OjAwIGtpZDF8ICAgICAg
MzM1NSBPYmplY3RzIGxvYWRlZC4KMjAxNi8wNi8yNSAyMjozNTowMCBraWQxfCAgICAgICAgIDAg
T2JqZWN0cyBleHBpcmVkLgoyMDE2LzA2LzI1IDIyOjM1OjAwIGtpZDF8ICAgICAgICAgMCBPYmpl
Y3RzIGNhbmNlbGxlZC4KMjAxNi8wNi8yNSAyMjozNTowMCBraWQxfCAgICAgICAgIDAgRHVwbGlj
YXRlIFVSTHMgcHVyZ2VkLgoyMDE2LzA2LzI1IDIyOjM1OjAwIGtpZDF8ICAgICAgICA5NiBTd2Fw
ZmlsZSBjbGFzaGVzIGF2b2lkZWQuCjIwMTYvMDYvMjUgMjI6MzU6MDAga2lkMXwgICBUb29rIDAu
MDYgc2Vjb25kcyAoNTk3MDguMTMgb2JqZWN0cy9zZWMpLgoyMDE2LzA2LzI1IDIyOjM1OjAwIGtp
ZDF8IEJlZ2lubmluZyBWYWxpZGF0aW9uIFByb2NlZHVyZQoyMDE2LzA2LzI1IDIyOjM1OjAwIGtp
ZDF8ICAgQ29tcGxldGVkIFZhbGlkYXRpb24gUHJvY2VkdXJlCjIwMTYvMDYvMjUgMjI6MzU6MDAg
a2lkMXwgICBWYWxpZGF0ZWQgMzM1NSBFbnRyaWVzCjIwMTYvMDYvMjUgMjI6MzU6MDAga2lkMXwg
ICBzdG9yZV9zd2FwX3NpemUgPSAxOTk1MDc4OC4wMCBLQgoyMDE2LzA2LzI1IDIyOjM1OjAxIGtp
ZDF8IHN0b3JlTGF0ZVJlbGVhc2U6IHJlbGVhc2VkIDAgb2JqZWN0cwo=
</data>

          </attachment>
      

    </bug>

</bugzilla>