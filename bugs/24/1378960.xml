<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1378960</bug_id>
          
          <creation_ts>2016-09-23 12:38:00 -0400</creation_ts>
          <short_desc>golang in fedora 24 fails to build openshift origin 1.3 for i686 but golang in fedora 25 does not</short_desc>
          <delta_ts>2016-10-22 03:55:32 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>golang</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Adam Miller">admiller</reporter>
          <assigned_to name="Jakub ÄŒajka">jcajka</assigned_to>
          <cc>admiller</cc>
    
    
    <cc>amurdaca</cc>
    
    
    <cc>golang-updates</cc>
    
    
    <cc>jcajka</cc>
    
    
    <cc>lemenkov</cc>
    
    
    <cc>renich</cc>
    
    
    <cc>s</cc>
    
    
    <cc>vbatts</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>golang-1.6.3-3.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-10-22 03:55:32</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9738412</commentid>
    <comment_count>0</comment_count>
    <who name="Adam Miller">admiller</who>
    <bug_when>2016-09-23 12:38:58 -0400</bug_when>
    <thetext>Description of problem:
Mock Version: 1.2.21
Mock Version: 1.2.21
ENTER [&apos;do&apos;]([&apos;bash&apos;, &apos;--login&apos;, &apos;-c&apos;, &apos;/usr/bin/rpmbuild -bs --target i686 --nodeps /builddir/build/SPECS/origin.spec&apos;], logger=&lt;mockbuild.trace_decorator.getLog object at 0x7f07925a0dd8&gt;uid=1000printOutput=Falseenv={&apos;SHELL&apos;: &apos;/bin/bash&apos;, &apos;PS1&apos;: &apos;&lt;mock-chroot&gt; \\s-\\v\\$ &apos;, &apos;HOME&apos;: &apos;/builddir&apos;, &apos;PROMPT_COMMAND&apos;: &apos;printf &quot;\\033]0;&lt;mock-chroot&gt;\\007&quot;&apos;, &apos;HOSTNAME&apos;: &apos;mock&apos;, &apos;PATH&apos;: &apos;/usr/bin:/bin:/usr/sbin:/sbin&apos;, &apos;LANG&apos;: &apos;en_US.UTF-8&apos;, &apos;TERM&apos;: &apos;vt100&apos;}user=&apos;mockbuild&apos;chrootPath=&apos;/var/lib/mock/f24-build-6491473-642118/root&apos;timeout=172800gid=425shell=False)
Executing command: [&apos;bash&apos;, &apos;--login&apos;, &apos;-c&apos;, &apos;/usr/bin/rpmbuild -bs --target i686 --nodeps /builddir/build/SPECS/origin.spec&apos;] with env {&apos;SHELL&apos;: &apos;/bin/bash&apos;, &apos;PS1&apos;: &apos;&lt;mock-chroot&gt; \\s-\\v\\$ &apos;, &apos;HOME&apos;: &apos;/builddir&apos;, &apos;PROMPT_COMMAND&apos;: &apos;printf &quot;\\033]0;&lt;mock-chroot&gt;\\007&quot;&apos;, &apos;HOSTNAME&apos;: &apos;mock&apos;, &apos;PATH&apos;: &apos;/usr/bin:/bin:/usr/sbin:/sbin&apos;, &apos;LANG&apos;: &apos;en_US.UTF-8&apos;, &apos;TERM&apos;: &apos;vt100&apos;} and shell False
warning: Could not canonicalize hostname: buildvm-02.phx2.fedoraproject.org
Building target platforms: i686
Building for target i686
Wrote: /builddir/build/SRPMS/origin-1.3.0-1.fc24.src.rpm
Child return code was: 0
ENTER [&apos;do&apos;]([&apos;bash&apos;, &apos;--login&apos;, &apos;-c&apos;, &apos;/usr/bin/rpmbuild -bb --target i686 --nodeps /builddir/build/SPECS/origin.spec&apos;], logger=&lt;mockbuild.trace_decorator.getLog object at 0x7f07925a0dd8&gt;uid=1000printOutput=Falseprivate_network=Trueenv={&apos;SHELL&apos;: &apos;/bin/bash&apos;, &apos;PS1&apos;: &apos;&lt;mock-chroot&gt; \\s-\\v\\$ &apos;, &apos;HOME&apos;: &apos;/builddir&apos;, &apos;PROMPT_COMMAND&apos;: &apos;printf &quot;\\033]0;&lt;mock-chroot&gt;\\007&quot;&apos;, &apos;HOSTNAME&apos;: &apos;mock&apos;, &apos;PATH&apos;: &apos;/usr/bin:/bin:/usr/sbin:/sbin&apos;, &apos;LANG&apos;: &apos;en_US.UTF-8&apos;, &apos;TERM&apos;: &apos;vt100&apos;}user=&apos;mockbuild&apos;chrootPath=&apos;/var/lib/mock/f24-build-6491473-642118/root&apos;timeout=172800gid=425shell=False)
Executing command: [&apos;bash&apos;, &apos;--login&apos;, &apos;-c&apos;, &apos;/usr/bin/rpmbuild -bb --target i686 --nodeps /builddir/build/SPECS/origin.spec&apos;] with env {&apos;SHELL&apos;: &apos;/bin/bash&apos;, &apos;PS1&apos;: &apos;&lt;mock-chroot&gt; \\s-\\v\\$ &apos;, &apos;HOME&apos;: &apos;/builddir&apos;, &apos;PROMPT_COMMAND&apos;: &apos;printf &quot;\\033]0;&lt;mock-chroot&gt;\\007&quot;&apos;, &apos;HOSTNAME&apos;: &apos;mock&apos;, &apos;PATH&apos;: &apos;/usr/bin:/bin:/usr/sbin:/sbin&apos;, &apos;LANG&apos;: &apos;en_US.UTF-8&apos;, &apos;TERM&apos;: &apos;vt100&apos;} and shell False
Building target platforms: i686
Building for target i686
Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.tAmPHx
+ umask 022
+ cd /builddir/build/BUILD
+ cd /builddir/build/BUILD
+ rm -rf origin-d45151824821195c9d3db7e5d2da0a1c982a614c
+ /usr/bin/gzip -dc /builddir/build/SOURCES/origin-1.3.0.tar.gz
+ /usr/bin/tar -xof -
+ STATUS=0
+ &apos;[&apos; 0 -ne 0 &apos;]&apos;
+ cd origin-d45151824821195c9d3db7e5d2da0a1c982a614c
+ /usr/bin/chmod -Rf a+rX,u+w,g-w,o-w .
Patch #0 (origin-1.3.0-build-platform.patch):
+ echo &apos;Patch #0 (origin-1.3.0-build-platform.patch):&apos;
+ /usr/bin/patch -p1 --fuzz=0
patching file Makefile
patching file hack/build-platform.sh
patching file origin.spec
+ chmod +x hack/build-platform.sh
+ exit 0
Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.nXSVQC
+ umask 022
+ cd /builddir/build/BUILD
+ cd origin-d45151824821195c9d3db7e5d2da0a1c982a614c
+ OS_GIT_TREE_STATE=clean
+ OS_GIT_VERSION=v1.3.0
+ OS_GIT_COMMIT=d451518
+ OS_GIT_MAJOR=1
+ OS_GIT_MINOR=3
+ hack/build-platform.sh
++ Building go targets for linux/386: cmd/openshift cmd/oc
# github.com/openshift/origin/cmd/openshift
runtime: memory allocated by OS (0xf667e000) not in usable range [0x18500000,0x98500000)
fatal error: out of memory
runtime stack:
runtime.throw(0x8263710, 0xd)
	/usr/lib/golang/src/runtime/panic.go:547 +0x7f
runtime.(*mcache).refill(0xf77b4708, 0x17, 0xf67a58c0)
	/usr/lib/golang/src/runtime/mcache.go:121 +0xce
runtime.mallocgc.func2()
	/usr/lib/golang/src/runtime/malloc.go:642 +0x2b
runtime.systemstack(0x1894e0f0)
	/usr/lib/golang/src/runtime/asm_386.s:313 +0x5e
runtime.mstart()
	/usr/lib/golang/src/runtime/proc.go:1051
goroutine 1 [running]:
runtime.systemstack_switch()
	/usr/lib/golang/src/runtime/asm_386.s:267 fp=0x6c7317f4 sp=0x6c7317f0
runtime.mallocgc(0x1c0, 0x81f5f20, 0x0, 0x5)
	/usr/lib/golang/src/runtime/malloc.go:643 +0x6ca fp=0x6c731860 sp=0x6c7317f4
runtime.newobject(0x81f5f20, 0x0)
	/usr/lib/golang/src/runtime/malloc.go:781 +0x41 fp=0x6c731874 sp=0x6c731860
cmd/link/internal/ld.writelines()
	/usr/lib/golang/src/cmd/link/internal/ld/dwarf.go:1651 +0xe77 fp=0x6c731aac sp=0x6c731874
cmd/link/internal/ld.Dwarfemitdebugsections()
	/usr/lib/golang/src/cmd/link/internal/ld/dwarf.go:2108 +0x94a fp=0x6c731bc0 sp=0x6c731aac
cmd/link/internal/x86.asmb()
	/usr/lib/golang/src/cmd/link/internal/x86/asm.go:704 +0x1179 fp=0x6c731cdc sp=0x6c731bc0
cmd/link/internal/ld.Ldmain()
	/usr/lib/golang/src/cmd/link/internal/ld/pobj.go:248 +0x1ac6 fp=0x6c731f28 sp=0x6c731cdc
cmd/link/internal/x86.Main()
	/usr/lib/golang/src/cmd/link/internal/x86/obj.go:44 +0x1c fp=0x6c731f2c sp=0x6c731f28
main.main()
	/usr/lib/golang/src/cmd/link/main.go:25 +0xf6 fp=0x6c731f98 sp=0x6c731f2c
runtime.main()
	/usr/lib/golang/src/runtime/proc.go:188 +0x276 fp=0x6c731fc0 sp=0x6c731f98
runtime.goexit()
	/usr/lib/golang/src/runtime/asm_386.s:1585 +0x1 fp=0x6c731fc4 sp=0x6c731fc0
[ERROR] PID 12424: hack/common.sh:308: `GOOS=${platform%/*} GOARCH=${platform##*/} go install -pkgdir &quot;${OS_OUTPUT_PKGDIR}&quot; &quot;${goflags[@]:+${goflags[@]}}&quot; &quot;${platform_goflags[@]:+${platform_goflags[@]}}&quot; -ldflags &quot;${version_ldflags}&quot; &quot;${nonstatics[@]}&quot;` exited with status 2.
[INFO] 		Stack Trace: 
[INFO] 		  1: hack/common.sh:308: `GOOS=${platform%/*} GOARCH=${platform##*/} go install -pkgdir &quot;${OS_OUTPUT_PKGDIR}&quot; &quot;${goflags[@]:+${goflags[@]}}&quot; &quot;${platform_goflags[@]:+${platform_goflags[@]}}&quot; -ldflags &quot;${version_ldflags}&quot; &quot;${nonstatics[@]}&quot;`
[INFO] 		  2: hack/common.sh:247: os::build::internal::build_binaries
[INFO] 		  3: hack/build-platform.sh:23: os::build::build_binaries
[INFO]   Exiting with code 2.
[ERROR] PID 12405: hack/common.sh:244: `( os::build::internal::build_binaries &quot;${binaries[@]+&quot;${binaries[@]}&quot;}&quot; )` exited with status 2.
[INFO] 		Stack Trace: 
[INFO] 		  1: hack/common.sh:244: `( os::build::internal::build_binaries &quot;${binaries[@]+&quot;${binaries[@]}&quot;}&quot; )`
[INFO] 		  2: hack/build-platform.sh:23: os::build::build_binaries
[INFO]   Exiting with code 2.
error: Bad exit status from /var/tmp/rpm-tmp.nXSVQC (%build)
RPM build errors:
    Bad exit status from /var/tmp/rpm-tmp.nXSVQC (%build)
Child return code was: 1
EXCEPTION: [Error()]
Traceback (most recent call last):
  File &quot;/usr/lib/python3.5/site-packages/mockbuild/trace_decorator.py&quot;, line 88, in trace
    result = func(*args, **kw)
  File &quot;/usr/lib/python3.5/site-packages/mockbuild/util.py&quot;, line 562, in do
    raise exception.Error(&quot;Command failed. See logs for output.\n # %s&quot; % (command,), child.returncode)
mockbuild.exception.Error: Command failed. See logs for output.
 # bash --login -c /usr/bin/rpmbuild -bb --target i686 --nodeps /builddir/build/SPECS/origin.spec

Version-Release number of selected component (if applicable):
golang.i686 1.6.3-2.fc24

How reproducible:
Always

Steps to Reproduce:
1. Build this package in mock with fedora-24-i386 profile http://koji.fedoraproject.org/koji/taskinfo?taskID=15768410</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9782973</commentid>
    <comment_count>1</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-11 20:56:00 -0400</bug_when>
    <thetext>golang-1.6.3-3.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-227caed405</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9812884</commentid>
    <comment_count>2</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-10-22 03:55:32 -0400</bug_when>
    <thetext>golang-1.6.3-3.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>