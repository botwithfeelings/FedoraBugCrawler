<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1350948</bug_id>
          
          <creation_ts>2016-06-28 15:47:00 -0400</creation_ts>
          <short_desc>odb compiler fails to load libodbc with undefined symbol: _Z21lookup_qualified_nameP9tree_nodeS0_bbb</short_desc>
          <delta_ts>2016-07-12 11:01:06 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>odb</component>
          <version>24</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>high</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Serge Robyns">serge.robyns</reporter>
          <assigned_to name="Dave Johansen">davejohansen</assigned_to>
          <cc>davejohansen</cc>
    
    
    <cc>lemenkov</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>odb-2.4.0-14.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-07-12 11:01:06</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9460640</commentid>
    <comment_count>0</comment_count>
    <who name="Serge Robyns">serge.robyns</who>
    <bug_when>2016-06-28 15:47:16 -0400</bug_when>
    <thetext>Description of problem:
When invoking the odb compiler fails while trying to load &quot;/usr/lib/gcc/x86_64-redhat-linux/6.1.1/plugin/odb.so&quot;.

Version-Release number of selected component (if applicable):
libodb.x86_64                        2.4.0-5.fc24


How reproducible:

Steps to Reproduce:
1. invoke odb with the following command &quot;$ odb --std c++11 --profile boost/date-time --database sqlite --generate-query --generate-schema --schema-format sql --hxx-prologue &apos;#include &quot;My-traits.hxx&quot;&apos; some-class.h
&quot;

Actual results:
cc1plus: error: cannot load plugin /usr/lib/gcc/x86_64-redhat-linux/6.1.1/plugin/odb.so
   /usr/lib/gcc/x86_64-redhat-linux/6.1.1/plugin/odb.so: undefined symbol: _Z21lookup_qualified_nameP9tree_nodeS0_bbb



Expected results:
odb compiles the some-class.h and generates the resulting c++ files.

Additional info:
n/a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9460645</commentid>
    <comment_count>1</comment_count>
    <who name="Serge Robyns">serge.robyns</who>
    <bug_when>2016-06-28 15:49:22 -0400</bug_when>
    <thetext>This is a regression maybe induced with the lastest c++ and co updates.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9461341</commentid>
    <comment_count>2</comment_count>
    <who name="Dave Johansen">davejohansen</who>
    <bug_when>2016-06-29 00:20:35 -0400</bug_when>
    <thetext>2.4.0-13 is the current version in Fedora 24, so can you update and make sure you&apos;re still having this problem?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9462794</commentid>
    <comment_count>3</comment_count>
    <who name="Serge Robyns">serge.robyns</who>
    <bug_when>2016-06-29 04:59:34 -0400</bug_when>
    <thetext>There are no updates available in the update respos (non testing).
Are you sure this version has been &quot;promoted&quot;?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9464642</commentid>
    <comment_count>4</comment_count>
    <who name="Dave Johansen">davejohansen</who>
    <bug_when>2016-06-29 11:13:14 -0400</bug_when>
    <thetext>https://bodhi.fedoraproject.org/updates/FEDORA-2016-85e61f227e
http://dl.fedoraproject.org/pub/fedora/linux/releases/24/Everything/x86_64/os/Packages/o/odb-2.4.0-13.fc24.x86_64.rpm</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9466066</commentid>
    <comment_count>5</comment_count>
    <who name="Serge Robyns">serge.robyns</who>
    <bug_when>2016-06-29 15:44:06 -0400</bug_when>
    <thetext>Seems not to solve the issue.  the ODB package was already in the right version.

Below my latest attempt and DNF output.  FYI, I updated from F24 Beta when F24 went official a week or so ago.  The issue appeared this week after I&apos;ve seen udaptes on gcc and libs.


[XXXX@fedora odb]$ dnf repolist
Last metadata expiration check: 7 days, 11:58:01 ago on Wed Jun 22 09:40:03 2016.
repo id                    repo name                                      status
*fedora                    Fedora 24 - x86_64                             49,709
fedora-cisco-openh264      Fedora 24 openh264 (From Cisco) - x86_64            7
*updates                   Fedora 24 - x86_64 - Updates                        0

[XXXXX@fedora odb]$ dnf list install odb
Last metadata expiration check: 7 days, 11:51:14 ago on Wed Jun 22 09:40:03 2016.
Installed Packages
odb.x86_64                         2.4.0-13.fc24                         @fedora

[XXXXX@fedora odb]$ odb --version
ODB object-relational mapping (ORM) compiler for C++ 2.4.0
Copyright (c) 2009-2015 Code Synthesis Tools CC
This is free software; see the source for copying conditions. There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

[XXXX@fedora odb]$ odb --std c++11 --profile boost/date-time --database sqlite --generate-query --generate-schema --schema-format sql --hxx-prologue &apos;#include &quot;My-traits.hxx&quot;&apos; some-class.h
cc1plus: error: cannot load plugin /usr/lib/gcc/x86_64-redhat-linux/6.1.1/plugin/odb.so
   /usr/lib/gcc/x86_64-redhat-linux/6.1.1/plugin/odb.so: undefined symbol: _Z21lookup_qualified_nameP9tree_nodeS0_bbb</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9481082</commentid>
    <comment_count>6</comment_count>
    <who name="Serge Robyns">serge.robyns</who>
    <bug_when>2016-07-05 08:16:02 -0400</bug_when>
    <thetext>Is there any update?
This issue is a blocker as I cannot generate new odb classes anymore.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9481966</commentid>
    <comment_count>7</comment_count>
    <who name="Serge Robyns">serge.robyns</who>
    <bug_when>2016-07-05 12:47:46 -0400</bug_when>
    <thetext>As I believed this &quot;regression&quot; was introduced after a gcc and set of libraries I gave rebuilding the RPM from the SRPM a chance.

And it did solve the issue.  Below the steps I used.

sudo dnf install rpmdevtools
dnf download --source odb
rpmdev-setuptree 
sudo dnf builddep odb
rpmbuild --rebuild odb-2.4.0-13.fc24.src.rpm 
sudo dnf reinstall ./odb-2.4.0-13.fc24.x86_64.rpm 
odb --std c++11 --profile boost/date-time --database sqlite --generate-query some-class.h</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9481971</commentid>
    <comment_count>8</comment_count>
    <who name="Dave Johansen">davejohansen</who>
    <bug_when>2016-07-05 12:50:24 -0400</bug_when>
    <thetext>Sorry for the delay. We&apos;re in the middle of a move and I&apos;ve had very limited time for doing this sort of thing. I&apos;ll kick of a rebuild tonight.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9483858</commentid>
    <comment_count>9</comment_count>
    <who name="Serge Robyns">serge.robyns</who>
    <bug_when>2016-07-06 06:31:46 -0400</bug_when>
    <thetext>No worries, I&apos;ve found my workaround.
Wondering how this one &quot;escaped&quot; from QA.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9491545</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-07-08 12:12:22 -0400</bug_when>
    <thetext>odb-2.4.0-14.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-327e7d71a3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9494503</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-07-10 11:57:46 -0400</bug_when>
    <thetext>odb-2.4.0-14.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-327e7d71a3</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9495683</commentid>
    <comment_count>12</comment_count>
    <who name="Serge Robyns">serge.robyns</who>
    <bug_when>2016-07-11 04:52:03 -0400</bug_when>
    <thetext>Package (in testing) works fine.
Bug can be closed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9497240</commentid>
    <comment_count>13</comment_count>
    <who name="Dave Johansen">davejohansen</who>
    <bug_when>2016-07-11 11:59:15 -0400</bug_when>
    <thetext>The karma threshold has been reached and the update has been submitted to stable, so the bug will close automatically when that happens. Thanks for reporting this and helping to get it fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9501899</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-07-12 11:01:04 -0400</bug_when>
    <thetext>odb-2.4.0-14.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>