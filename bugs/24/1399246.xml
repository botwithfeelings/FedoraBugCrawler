<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1399246</bug_id>
          
          <creation_ts>2016-11-28 11:08:00 -0500</creation_ts>
          <short_desc>Ship /usr/share/doc/perl-Mail-SPF/bin/spfquery as /usr/bin/spfquery</short_desc>
          <delta_ts>2017-06-09 15:15:40 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>perl-Mail-SPF</component>
          <version>24</version>
          <rep_platform>i686</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter>customercare</reporter>
          <assigned_to name="Jan Pazdziora">jpazdziora</assigned_to>
          <cc>jpazdziora</cc>
    
    
    <cc>nb</cc>
    
    
    <cc>paul</cc>
    
    
    <cc>perl-devel</cc>
    
    
    <cc>steve</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>perl-Mail-SPF-2.9.0-12.fc26</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-06-09 15:15:40</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      <flag name="needinfo"
          id="2879564"
          type_id="16"
          status="?"
          setter="jpazdziora"
          requestee="steve"
    />

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9935496</commentid>
    <comment_count>0</comment_count>
    <who name="">customercare</who>
    <bug_when>2016-11-28 11:08:03 -0500</bug_when>
    <thetext>Description of problem:

/usr/share/doc/perl-Mail-SPF/bin/spfquery comes with root executeable permissions.
If it shall be used by exim or any other non-root mailserver, it needs o+x or g+x and a new group with exim etc.

Eitherway those &quot;temporary&quot; Solutions by admins get deleted with an update/upgrade of the package.

Suggested Solution:

chmod o+x /usr/share/doc/perl-Mail-SPF/bin/spfquery


Version-Release number of selected component (if applicable):

perl-Mail-SPF-2.9.0-7.fc23.noarch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9937588</commentid>
    <comment_count>1</comment_count>
    <who name="Jan Pazdziora">jpazdziora</who>
    <bug_when>2016-11-29 02:22:26 -0500</bug_when>
    <thetext>The script is included as an example of using the module, in the documentation directory, not in /usr/bin as fully supported tool. That&apos;s why the executable bit is explicitly disabled. Closing as NOTABUG, please reopen if you disagree.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9937871</commentid>
    <comment_count>2</comment_count>
    <who name="">customercare</who>
    <bug_when>2016-11-29 03:43:02 -0500</bug_when>
    <thetext>If you use google to search for solutions to check SPF with mailservers, this script is mentioned on so many pages and examples, as the final solution to the problem. Not one page suggests, that it is an example, and neither does the programm itself look like an example.

The commentsection of the script does not mention it too, so ..

yes, i disgree and this script should be useable systemwide.


# 
# spfquery: Command-line tool for performing SPF queries
#
# (C) 2005-2012 Julian Mehnle &lt;julian@mehnle.net&gt;
#     2004      Wayne Schlitt &lt;wayne@schlitt.net&gt;
# $Id: spfquery 138 2006-01-22 18:00:34Z julian $
#</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9937953</commentid>
    <comment_count>3</comment_count>
    <who name="Jan Pazdziora">jpazdziora</who>
    <bug_when>2016-11-29 04:00:30 -0500</bug_when>
    <thetext>Various web pages are independent from how things are packaged in Fedora and why, so they cannot really comment on perl-Mail-SPF package layout.

So it looks like you are really asking for something else -- you ask to have the script shipped in location where executable commands typically live, and supported as such in Fedora.

Let us see what Steven who initially packaged the module thinks. Steven, would you remember the reason behind packaging spfquery and spfd as documentation in the initial packaging of perl-Mail-SPF?

   http://pkgs.fedoraproject.org/cgit/rpms/perl-Mail-SPF.git/tree/perl-Mail-SPF.spec#n163</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9938003</commentid>
    <comment_count>4</comment_count>
    <who name="">customercare</who>
    <bug_when>2016-11-29 04:07:32 -0500</bug_when>
    <thetext>I wasn&apos;t aware of this package logic. Yes, please move it to ..sbin/ and change the filemods to 755. 

As it does not need to have SUID rights to be used, should not be a problem. I also suggest to set a symlink at the old spot, so that existing serversetups are not broken by this change.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9938059</commentid>
    <comment_count>5</comment_count>
    <who name="Jan Pazdziora">jpazdziora</who>
    <bug_when>2016-11-29 04:24:00 -0500</bug_when>
    <thetext>I don&apos;t think it belongs to /usr/sbin, it&apos;s a normal user-space, so it should go to /usr/bin. And here we have a problem because /usr/sbin/spfquery is already implemented by python-pyspf.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9938093</commentid>
    <comment_count>6</comment_count>
    <who name="">customercare</who>
    <bug_when>2016-11-29 04:33:41 -0500</bug_when>
    <thetext>I don&apos;t have this installed, so in my case this would not be problem.

But as many packages have this situation, like exim and postfix emulating sendmail, we could use the /etc/alternatives/.. Symlink schema to decide which gets used in the end.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9938610</commentid>
    <comment_count>7</comment_count>
    <who name="Paul Howarth">paul</who>
    <bug_when>2016-11-29 06:56:15 -0500</bug_when>
    <thetext>It&apos;s also provided by libspf2, and *that* already uses alternatives.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9971657</commentid>
    <comment_count>8</comment_count>
    <who name="Jan Pazdziora">jpazdziora</who>
    <bug_when>2016-12-09 09:03:29 -0500</bug_when>
    <thetext>(In reply to Paul Howarth from comment #7)
&gt; It&apos;s also provided by libspf2, and *that* already uses alternatives.

I took a look at libspf2-1.2.10-8.20150405gitd57d79fd.fc25.x86_64 but that does not seem to ship any binary (program), just library:

# rpm -ql libspf2
/usr/lib64/libspf2.so.2
/usr/lib64/libspf2.so.2.1.0
/usr/share/doc/libspf2
/usr/share/doc/libspf2/INSTALL
/usr/share/doc/libspf2/README
/usr/share/doc/libspf2/TODO
/usr/share/licenses/libspf2
/usr/share/licenses/libspf2/LICENSES</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9971925</commentid>
    <comment_count>9</comment_count>
    <who name="Paul Howarth">paul</who>
    <bug_when>2016-12-09 09:53:20 -0500</bug_when>
    <thetext>It&apos;s in the libspf2-progs sub-package.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10457717</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-30 05:11:22 -0400</bug_when>
    <thetext>perl-Mail-SPF-2.9.0-12.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-b7b0662978</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10457719</commentid>
    <comment_count>11</comment_count>
    <who name="Jan Pazdziora">jpazdziora</who>
    <bug_when>2017-05-30 05:12:46 -0400</bug_when>
    <thetext>The new build contains spfquery and spfd as alternatives. I&apos;d appreciate your feedback.

Sorry it took me so long to get into packaging it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10460431</commentid>
    <comment_count>12</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-05-30 17:47:07 -0400</bug_when>
    <thetext>perl-Mail-SPF-2.9.0-12.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-b7b0662978</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10494273</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2017-06-09 15:15:40 -0400</bug_when>
    <thetext>perl-Mail-SPF-2.9.0-12.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>