<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1376981</bug_id>
          
          <creation_ts>2016-09-17 03:19:00 -0400</creation_ts>
          <short_desc>Launching program/script in terminal via kde gui broken with konsole5-16.08.1</short_desc>
          <delta_ts>2016-09-21 20:21:55 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>kf5-kio</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Regression</keywords>
          <priority>unspecified</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="samoht0">samoht0-bugzilla</reporter>
          <assigned_to name="Daniel VrÃ¡til">me</assigned_to>
          <cc>germano.massullo</cc>
    
    
    <cc>jgrulich</cc>
    
    
    <cc>kde-sig</cc>
    
    
    <cc>kevin</cc>
    
    
    <cc>me</cc>
    
    
    <cc>praiskup</cc>
    
    
    <cc>rdieter</cc>
    
    
    <cc>than</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>kf5-kio-5.26.0-2.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-09-21 20:21:55</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          <external_bugs name="KDE Software Compilation">366793</external_bugs>
    
    
    
    <external_bugs name="KDE Software Compilation">368949</external_bugs>
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9716002</commentid>
    <comment_count>0</comment_count>
    <who name="samoht0">samoht0-bugzilla</who>
    <bug_when>2016-09-17 03:19:23 -0400</bug_when>
    <thetext>Version-Release number of selected component (if applicable):

konsole5-16.08.1-1.fc24

How reproducible:

Setup a shortcut in KDE app launcher with checked Option &quot;Start in Terminal&quot;.

OR

Use as desktop shortcut with terminal option true:

[Desktop Entry]
Comment=
Exec=/path/to/bash/script
GenericName=
Icon=
MimeType=
Name=
Path=
StartupNotify=true
Terminal=true &lt;============ !!!
TerminalOptions=
Type=Application
X-DBUS-ServiceName=
X-DBUS-StartupType=
X-KDE-SubstituteUID=false
X-KDE-Username=

Actual results:

Start notification is shown, but terminal never comes up. Program/script doesn&apos;t run.

Expected results:

Program/script running and showing output in terminal.

Additional info:

Downgrade to konsole5-16.04.3-1.fc24 + konsole5-part-16.04.3-1.fc24 fixes the issue.

Maybe a side effect of this bug:
https://bugs.kde.org/show_bug.cgi?id=368596</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9717085</commentid>
    <comment_count>1</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-09-17 10:00:14 -0400</bug_when>
    <thetext>Thanks, confirmed, reported upstream,
https://bugs.kde.org/show_bug.cgi?id=368949</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9717208</commentid>
    <comment_count>2</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-09-17 10:37:27 -0400</bug_when>
    <thetext>Also related,
Regression in Konsole&apos;s handling of command line parameters
https://bugs.kde.org/show_bug.cgi?id=366793</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9717403</commentid>
    <comment_count>3</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-09-17 10:55:03 -0400</bug_when>
    <thetext>Per my comment upstream:

So, kio contains this code:

    if (d-&gt;service.terminal()) {
        KConfigGroup cg(KSharedConfig::openConfig(), &quot;General&quot;);
        QString terminal = cg.readPathEntry(&quot;TerminalApplication&quot;, QStringLiteral(&quot;konsole&quot;));
        if (terminal == QLatin1String(&quot;konsole&quot;)) {
            if (!d-&gt;service.path().isEmpty()) {
                terminal += &quot; --workdir &quot; + KShell::quoteArg(d-&gt;service.path());
            }
            terminal += QLatin1String(&quot; -caption=%c %i %m&quot;);
        }


And konsole seems to no longer support the -caption command line option,
$ konsole  -caption=&quot;foo&quot;
Unknown options: c, a.


One workaround we could implement (and probably upstreamable) is to patch kio to longer use the (deprecated) -caption commandline option.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9717448</commentid>
    <comment_count>4</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-09-17 11:04:56 -0400</bug_when>
    <thetext>Yay, upstream already implemented the fix to kio as I surmised, backporting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9717831</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-17 12:05:34 -0400</bug_when>
    <thetext>kf5-kio-5.26.0-2.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-4bfcb7b83a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9718216</commentid>
    <comment_count>6</comment_count>
    <who name="samoht0">samoht0-bugzilla</who>
    <bug_when>2016-09-17 18:33:53 -0400</bug_when>
    <thetext>(In reply to Rex Dieter from comment #4)
&gt; Yay, upstream already implemented the fix to kio as I surmised, backporting.

Thanks. Will pickup patched kf5-kio and test when pushed testing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9718718</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-18 02:51:05 -0400</bug_when>
    <thetext>kf5-kio-5.26.0-2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-4bfcb7b83a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9719153</commentid>
    <comment_count>8</comment_count>
    <who name="samoht0">samoht0-bugzilla</who>
    <bug_when>2016-09-18 08:50:24 -0400</bug_when>
    <thetext>Sadly, the patch doesn&apos;t work for me with konsole5-16.08.1-1.fc24.

I additionally recognized it causing a regression, as it breaks launching program/script in terminal with konsole5-16.04.3-1.fc24.

Downgrade to kf5-kio-5.26.0-1.fc2 + konsole5-16.04.3-1.fc24 brings behavior back to normal.

Any ideas?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9719213</commentid>
    <comment_count>9</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-09-18 11:19:23 -0400</bug_when>
    <thetext>It fixed it for me, but I had to restart my session after installing kf5-kio-5.26.0-2 (*probably* stale kdeinit5).  Did you try testing after logout/login again?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9719307</commentid>
    <comment_count>10</comment_count>
    <who name="samoht0">samoht0-bugzilla</who>
    <bug_when>2016-09-18 14:05:54 -0400</bug_when>
    <thetext>Yes, I did logout/login, but as your feedback was positive, I did some extra testing with new shortcuts. This brought following conclusions:

Yes, it&apos;s generally fixed. But there are new restrictions about command line:

* $HOME/remaining/path don&apos;t work anymore. /home/UN must be used.
  Had $HOME in all my shortcuts.
* Command line options require now use of quotation marks &quot;/path/to/script -opt&quot;
  Don&apos;t know how to deal with this, when path needs quotation marks itself.

This is somewhat a regression, but I can live with this state.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9719383</commentid>
    <comment_count>11</comment_count>
    <who name="samoht0">samoht0-bugzilla</who>
    <bug_when>2016-09-18 16:30:55 -0400</bug_when>
    <thetext>Remaining regressions are likely because of KDE #366793.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9720992</commentid>
    <comment_count>12</comment_count>
    <who name="Kevin Kofler">kevin</who>
    <bug_when>2016-09-19 07:53:09 -0400</bug_when>
    <thetext>&gt; * Command line options require now use of quotation marks &quot;/path/to/script -opt&quot;
&gt;   Don&apos;t know how to deal with this, when path needs quotation marks itself.

This is indeed bug #1377017 = kde#366793.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9732033</commentid>
    <comment_count>13</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-21 20:21:55 -0400</bug_when>
    <thetext>kf5-kio-5.26.0-2.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>