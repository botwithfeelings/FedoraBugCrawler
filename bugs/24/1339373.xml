<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1339373</bug_id>
          
          <creation_ts>2016-05-24 16:19:00 -0400</creation_ts>
          <short_desc>/bin/crash reports &quot;invalid structure member offset: module_num_symtab&quot; despite correct debuginfo</short_desc>
          <delta_ts>2016-05-24 16:58:03 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>crash</component>
          <version>24</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>high</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jeff Gehlbach">jeffg</reporter>
          <assigned_to name="Dave Anderson">anderson</assigned_to>
          <cc>anderson</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-05-24 16:58:03</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9355582</commentid>
    <comment_count>0</comment_count>
    <who name="Jeff Gehlbach">jeffg</who>
    <bug_when>2016-05-24 16:19:04 -0400</bug_when>
    <thetext>Description of problem:

Running /bin/crash against a crash dump and a matching set of debuginfo produces an error, complaining:

crash: invalid structure member offset: module_num_symtab

Version-Release number of selected component (if applicable):

7.1.4 (crash-7.1.4-1.fc24.x86_64)

How reproducible:

Always

Steps to Reproduce:
1. Trigger a crash dump via the SysRq facility. Running kernel is 4.5.5-300.fc24.x86_64
2. Boot into an interactive session with same kernel from step 1 (4.5.5-300.fc24.x86_64)
3. Run crash against the resulting crash dump, using the debuginfo matching the kernel from steps 1 and 2 (4.5.5-300.fc24.x86_64)

Actual results:

[root@monkeyfaced ~]# crash /var/crash/127.0.0.1-2016-05-24-16\:02\:41/vmcore /usr/lib/debug/lib/modules/4.5.5-300.fc24.x86_64/vmlinux 

crash 7.1.4-1.fc24
Copyright (C) 2002-2015  Red Hat, Inc.
Copyright (C) 2004, 2005, 2006, 2010  IBM Corporation
Copyright (C) 1999-2006  Hewlett-Packard Co
Copyright (C) 2005, 2006, 2011, 2012  Fujitsu Limited
Copyright (C) 2006, 2007  VA Linux Systems Japan K.K.
Copyright (C) 2005, 2011  NEC Corporation
Copyright (C) 1999, 2002, 2007  Silicon Graphics, Inc.
Copyright (C) 1999, 2000, 2001, 2002  Mission Critical Linux, Inc.
This program is free software, covered by the GNU General Public License,
and you are welcome to change it and/or distribute copies of it under
certain conditions.  Enter &quot;help copying&quot; to see the conditions.
This program has absolutely no warranty.  Enter &quot;help warranty&quot; for details.
 
GNU gdb (GDB) 7.6
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;x86_64-unknown-linux-gnu&quot;...

please wait... (gathering module symbol data)   
crash: invalid structure member offset: module_num_symtab
       FILE: kernel.c  LINE: 3421  FUNCTION: module_init()

[/bin/crash] error trace: 6b1bc3 =&gt; 46416d =&gt; 4df60e =&gt; 5317f2

  5317f2: OFFSET_verify+146
  4df60e: module_init+1406
  46416d: main_loop+653
  6b1bc3: (undetermined)



Expected results:

A useful crash dump report :)

Additional info:

My impetus for installing kdump et al is to help chase down freezes with F24-beta running on a new Thinkpad X1 Carbon, 4th generation. The freezes often time-correlate with plugging in an external monitor via the system&apos;s built-in HDMI or Mini DisplayPort interfaces. I&apos;m new to kdump and definitely not a kernel hacker, but comfortable enough and plenty willing to trash the installation or install rawhide, if it will help get this hardware working well.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9355595</commentid>
    <comment_count>1</comment_count>
    <who name="Dave Anderson">anderson</who>
    <bug_when>2016-05-24 16:22:05 -0400</bug_when>
    <thetext>Try crash-7.1.5:

  Information for build crash-7.1.5-2.fc25
  http://koji.fedoraproject.org/koji/buildinfo?buildID=760294</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9355619</commentid>
    <comment_count>2</comment_count>
    <who name="Jeff Gehlbach">jeffg</who>
    <bug_when>2016-05-24 16:28:00 -0400</bug_when>
    <thetext>That did it. Thanks, Dave.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>