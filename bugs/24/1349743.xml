<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1349743</bug_id>
          
          <creation_ts>2016-06-24 03:02:00 -0400</creation_ts>
          <short_desc>&apos;dnf install @kde-desktop-environment&apos; on Fedora 24 installs cinnamon (due to unfortunate imsettings deps / dnf behaviour)</short_desc>
          <delta_ts>2016-11-21 09:00:27 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>comps</component>
          <version>24</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          <see_also>https://bugzilla.redhat.com/show_bug.cgi?id=1336879</see_also>
          <bug_file_loc></bug_file_loc>
          <status_whiteboard>https://fedoraproject.org/wiki/Common_F25_bugs#kde-bonus-cinnamon https://fedoraproject.org/wiki/Common_F24_bugs#kde-bonus-cinnamon</status_whiteboard>
          <keywords>CommonBugs, Reopened</keywords>
          <priority>urgent</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1192182</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Adam Williamson">awilliam</reporter>
          <assigned_to name="Stephen Gallagher">sgallagh</assigned_to>
          <cc>atigro</cc>
    
    
    <cc>bsg075</cc>
    
    
    <cc>dennis</cc>
    
    
    <cc>desintegr</cc>
    
    
    <cc>emarci1993</cc>
    
    
    <cc>heldwin_</cc>
    
    
    <cc>ignatenko</cc>
    
    
    <cc>jsilhan</cc>
    
    
    <cc>kevin</cc>
    
    
    <cc>kparal</cc>
    
    
    <cc>lupinix</cc>
    
    
    <cc>mls</cc>
    
    
    <cc>mluscon</cc>
    
    
    <cc>packaging-team-maint</cc>
    
    
    <cc>pfrields</cc>
    
    
    <cc>pnemade</cc>
    
    
    <cc>randy</cc>
    
    
    <cc>rdieter</cc>
    
    
    <cc>rgm</cc>
    
    
    <cc>rpm-software-management</cc>
    
    
    <cc>samoht0-bugzilla</cc>
    
    
    <cc>satellitgo</cc>
    
    
    <cc>sgallagh</cc>
    
    
    <cc>vmukhame</cc>
    
    
    <cc>vpavlin</cc>
          
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-11-21 09:00:27</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9449278</commentid>
    <comment_count>0</comment_count>
    <who name="Adam Williamson">awilliam</who>
    <bug_when>2016-06-24 03:02:18 -0400</bug_when>
    <thetext>If you do a minimal install of Fedora 24 and then do &apos;dnf install @kde-desktop-environment&apos;, you get Plasma...and Cinnamon. (and somehow, Cinnamon becomes the default session).

This is, I think, ultimately due to imsettings&apos; dependencies, and dnf&apos;s ambiguous dependency resolution behaviour (and possibly also https://bugzilla.redhat.com/show_bug.cgi?id=1336879 , about dnf ignoring &apos;conditional&apos; entries in comps).

The kde-desktop-environment env group pulls in the &apos;input-methods&apos; group. That group includes these &apos;default&apos; entries:

      &lt;packagereq type=&quot;default&quot;&gt;ibus-libzhuyin&lt;/packagereq&gt;
      &lt;packagereq type=&quot;default&quot;&gt;ibus-hangul&lt;/packagereq&gt;
      &lt;packagereq type=&quot;default&quot;&gt;ibus-kkc&lt;/packagereq&gt;
      &lt;packagereq type=&quot;default&quot;&gt;ibus-libpinyin&lt;/packagereq&gt;
      &lt;packagereq type=&quot;default&quot;&gt;ibus-m17n&lt;/packagereq&gt;
      &lt;packagereq type=&quot;default&quot;&gt;ibus-rawcode&lt;/packagereq&gt;
      &lt;packagereq type=&quot;default&quot;&gt;ibus-typing-booster&lt;/packagereq&gt;
      &lt;packagereq type=&quot;default&quot;&gt;im-chooser&lt;/packagereq&gt;
      &lt;packagereq type=&quot;default&quot;&gt;imsettings&lt;/packagereq&gt;

imsettings has a virtual dependency, imsettings-desktop-module(arch) , which is provided by various desktop / toolkit-specific packages:

imsettings-cinnamon-0:1.7.1-1.fc25.x86_64
imsettings-gsettings-0:1.7.1-1.fc25.x86_64
imsettings-lxde-0:1.7.1-1.fc25.x86_64
imsettings-mate-0:1.7.1-1.fc25.x86_64
imsettings-qt-0:1.7.1-1.fc25.x86_64
imsettings-xfce-0:1.7.1-1.fc25.x86_64

I think what&apos;s happening is that dnf is deciding to pull in imsettings-cinnamon to satisfy this dependency - even though it would surely be a smaller dep chain to install imsettings-qt when installing kde-desktop-environment. That&apos;s probably a case of #1192182 (the tracker for dnf making poor decisions about ambiguous dependencies like this).

It&apos;s also noteworthy that there are a bunch of &apos;conditional&apos; entries in the input-methods group, including:

      &lt;packagereq type=&quot;conditional&quot; requires=&quot;qt&quot;&gt;imsettings-qt&lt;/packagereq&gt;

which might break the tie for imsettings-qt, if it was considered...but because of #1336879, it probably isn&apos;t.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9449280</commentid>
    <comment_count>1</comment_count>
    <who name="Adam Williamson">awilliam</who>
    <bug_when>2016-06-24 03:03:17 -0400</bug_when>
    <thetext>This is affecting openQA (by making Cinnamon the default session on the disk image which is supposed to be used for KDE upgrade testing).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9449305</commentid>
    <comment_count>2</comment_count>
    <who name="Adam Williamson">awilliam</who>
    <bug_when>2016-06-24 03:10:49 -0400</bug_when>
    <thetext>This actually affects network installs too: if you do a network install of Plasma, your default session will be Cinnamon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9449316</commentid>
    <comment_count>3</comment_count>
    <who name="Adam Williamson">awilliam</who>
    <bug_when>2016-06-24 03:18:37 -0400</bug_when>
    <thetext>confirmed that if you do &apos;dnf install @kde-desktop-environment imsettings-qt&apos; , you don&apos;t get Cinnamon installed, so it&apos;s definitely the imsettings dep that&apos;s the proximate cause here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9450961</commentid>
    <comment_count>4</comment_count>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-06-24 11:35:44 -0400</bug_when>
    <thetext>Simple fix here would be to add &quot;Suggests: imsettings-qt&quot; to the `kf5-plasma` package. That would be enough to tell DNF to pull that one in, everything else being equal.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9450968</commentid>
    <comment_count>5</comment_count>
    <who name="Adam Williamson">awilliam</who>
    <bug_when>2016-06-24 11:37:35 -0400</bug_when>
    <thetext>Some other desktop environments that include the &apos;input-methods&apos; group have gone with putting the correct provider in their &apos;foo-desktop&apos; group to act as a clue, but the Suggests: sounds like a better idea (and easier to put in an F24 update)...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9450971</commentid>
    <comment_count>6</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-06-24 11:38:21 -0400</bug_when>
    <thetext>I can implement comment #4 sure, though I think probably a better fit would be in plasma-workspace (rather than a kf5-plasma runtime pkg that could get pulled in elsewhere).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9450978</commentid>
    <comment_count>7</comment_count>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-06-24 11:40:01 -0400</bug_when>
    <thetext>(In reply to Rex Dieter from comment #6)
&gt; I can implement comment #4 sure, though I think probably a better fit would
&gt; be in plasma-workspace (rather than a kf5-plasma runtime pkg that could get
&gt; pulled in elsewhere).

Ah, for some reason I thought kf5-plasma had Obsoleted plasma-workspace. So sure, wherever you think would be the best fit.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9451008</commentid>
    <comment_count>8</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-06-24 11:51:31 -0400</bug_when>
    <thetext>Fwiw, comps also has a conditional in input-methods group:

      &lt;packagereq type=&quot;conditional&quot; requires=&quot;qt&quot;&gt;imsettings-qt&lt;/packagereq&gt;

but that may or may not matter here.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9451319</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-06-24 14:00:14 -0400</bug_when>
    <thetext>plasma-workspace-5.6.5-2.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-87de75ef6b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9451385</commentid>
    <comment_count>10</comment_count>
    <who name="Adam Williamson">awilliam</who>
    <bug_when>2016-06-24 14:17:49 -0400</bug_when>
    <thetext>Rex: I mentioned that, and the reason why it doesn&apos;t help, in the original description.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9451625</commentid>
    <comment_count>11</comment_count>
    <who name="MattK">bsg075</who>
    <bug_when>2016-06-24 15:56:59 -0400</bug_when>
    <thetext>Similar problem when installing Xfce via &quot;dnf install @xfce-desktop-environment&quot;

http://forums.fedoraforum.org/showthread.php?t=310363</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9451670</commentid>
    <comment_count>12</comment_count>
    <who name="Kevin Fenzi">kevin</who>
    <bug_when>2016-06-24 16:11:14 -0400</bug_when>
    <thetext>Well, I could add a similar Suggests to an Xfce package... but I am not at all sure which one. 

And then do we need to do this for each of the other desktops too? :(</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9452025</commentid>
    <comment_count>13</comment_count>
    <who name="Adam Williamson">awilliam</who>
    <bug_when>2016-06-24 20:57:20 -0400</bug_when>
    <thetext>Well, not all of them include input-methods , and some include the appropriate imsettings-(whatever) package in their desktop group, I presume to deal with this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9452500</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-06-25 13:44:13 -0400</bug_when>
    <thetext>xfce4-session-4.12.1-9.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-3ddc57115a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9452687</commentid>
    <comment_count>15</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-06-25 20:26:20 -0400</bug_when>
    <thetext>xfce4-session-4.12.1-9.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-3ddc57115a</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9452701</commentid>
    <comment_count>16</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-06-25 20:27:10 -0400</bug_when>
    <thetext>plasma-workspace-5.6.5-2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-87de75ef6b</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9453475</commentid>
    <comment_count>17</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-06-26 16:53:55 -0400</bug_when>
    <thetext>xfce4-session-4.12.1-9.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9455743</commentid>
    <comment_count>18</comment_count>
    <who name="Adam Williamson">awilliam</who>
    <bug_when>2016-06-27 10:59:20 -0400</bug_when>
    <thetext>This bug is for KDE, not Xfce.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9466453</commentid>
    <comment_count>19</comment_count>
    <who name="Wolfgang Ulbrich">fedora</who>
    <bug_when>2016-06-29 19:19:19 -0400</bug_when>
    <thetext>Looks like MATE is also affected.
Adding
Suggests: imsettings-mate
to mate-desktop package is sufficient?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9466467</commentid>
    <comment_count>20</comment_count>
    <who name="Adam Williamson">awilliam</who>
    <bug_when>2016-06-29 19:20:42 -0400</bug_when>
    <thetext>the plasma update is in testing, so setting ON_QA...

wolfgang: yup, the Suggests: seems to be the agreed-upon solution for now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9466564</commentid>
    <comment_count>21</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-06-29 20:28:16 -0400</bug_when>
    <thetext>mate-desktop-1.14.1-3.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-30c87948ea</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9466637</commentid>
    <comment_count>22</comment_count>
    <who name="Adam Williamson">awilliam</who>
    <bug_when>2016-06-29 21:27:46 -0400</bug_when>
    <thetext>Can people ****PLEASE**** stop setting updates for other desktops as fixing this bug?! This bug is for *KDE*. Not for *ANY OTHER DESKTOP*. If you want to track fixing a similar issue for another desktop, please file another bug.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9467283</commentid>
    <comment_count>23</comment_count>
    <who name="Wolfgang Ulbrich">fedora</who>
    <bug_when>2016-06-30 03:27:14 -0400</bug_when>
    <thetext>sorry, i removed the report at bodhi</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9473980</commentid>
    <comment_count>24</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-07-02 11:26:04 -0400</bug_when>
    <thetext>plasma-workspace-5.6.5-2.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9475093</commentid>
    <comment_count>25</comment_count>
    <who name="samoht0">samoht0-bugzilla</who>
    <bug_when>2016-07-03 13:22:36 -0400</bug_when>
    <thetext>Not fixed for me with KDE netinstall including stable updates. Cinnamon came up as default DE. &apos;rpm -qa | grep -i &quot;plasma-workspace&quot;&apos; showed that plasma-workspace-5.6.5-2.fc24 was present.

So I had no choice and used netinstall with release packages and updated later with dnf.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9483963</commentid>
    <comment_count>26</comment_count>
    <who name="Marcel">emarci1993</who>
    <bug_when>2016-07-06 07:49:36 -0400</bug_when>
    <thetext>Confirming #25. This bug is not fixed yet.
I installed Fedora 24 with netinstall an hour ago and selected KDE as desktop environment. But it installed cinnamon as default desktop.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9483980</commentid>
    <comment_count>27</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-07-06 08:01:27 -0400</bug_when>
    <thetext>Re: comment #25 and comment #26

So you can confirm that imsettings-cinnamon is still getting installed (instead of imsettings-qt) ?

If so, means that adding the
Suggests:       imsettings-qt
didn&apos;t help, a dnf issue?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9484892</commentid>
    <comment_count>28</comment_count>
    <who name="samoht0">samoht0-bugzilla</who>
    <bug_when>2016-07-06 13:34:08 -0400</bug_when>
    <thetext>(In reply to Rex Dieter from comment #27)
&gt; Re: comment #25 and comment #26
&gt; 
&gt; So you can confirm that imsettings-cinnamon is still getting installed
&gt; (instead of imsettings-qt) ?
&gt; 
&gt; If so, means that adding the
&gt; Suggests:       imsettings-qt
&gt; didn&apos;t help, a dnf issue?

Sadly, I can&apos;t. Did only check for plasma-workspace-5.6.5-2.fc24. Since the machine is now already setup and running nicely with proper package set, redoing the install is no adequate option. Sorry.

I used Fedora-Everything-netinst-x86_64-24-1.2.iso with applying updates at install.  

I also have to say, that in my opinion, this is not a package issue in the first place, but a DNF weakness. See:

https://bugzilla.redhat.com/show_bug.cgi?id=1192189</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9485217</commentid>
    <comment_count>29</comment_count>
    <who name="Marcel">emarci1993</who>
    <bug_when>2016-07-06 15:20:35 -0400</bug_when>
    <thetext>(In reply to Rex Dieter from comment #27)
&gt; So you can confirm that imsettings-cinnamon is still getting installed
&gt; (instead of imsettings-qt) ?

Confirming. The package imsettings-cinnamon did get installed, not imsettings-qt.

I&apos;ve waited until today to make sure getting plasma-workspace-5.6.5-2.fc24 installed (it was pushed 4 days ago into stable repo).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9515413</commentid>
    <comment_count>30</comment_count>
    <who name="Christian Dersch">lupinix</who>
    <bug_when>2016-07-17 09:39:27 -0400</bug_when>
    <thetext>Also hit this issue with netinst and selected plasma today.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9542323</commentid>
    <comment_count>31</comment_count>
    <who name="Marcel">emarci1993</who>
    <bug_when>2016-07-22 14:54:20 -0400</bug_when>
    <thetext>I currently tried again installing KDE without any &quot;additional packages&quot; (the ones you can select before the installation starts). This time it worked, F24 was installed without the Cinnamon desktop.
I&apos;ll further investigate by installing F24 with different configurations. Currently i believe the bug is caused either by another package that gets installed when selecting additional software, or the bug got fixed (unlikely, but possible)

(In reply to Christian Dersch from comment #30)
&gt; Also hit this issue with netinst and selected plasma today.

Which additional software did you select when when installing Fedora 24?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9542940</commentid>
    <comment_count>32</comment_count>
    <who name="samoht0">samoht0-bugzilla</who>
    <bug_when>2016-07-23 04:49:01 -0400</bug_when>
    <thetext>@Marcel, FYI:
The bug is triggered when only KDE Apps + Admin-Tools are selected. So I guess: KDE Apps.

As I already told, install (including KDE Apps + Admin-Tools) works fine when using the release package set without updates.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9594509</commentid>
    <comment_count>33</comment_count>
    <who name="Kevin Fenzi">kevin</who>
    <bug_when>2016-08-08 12:11:25 -0400</bug_when>
    <thetext>So, where are we here?

Suggests didn&apos;t actually work. :( 

Should we move this bug over to dnf and see if they have any recommendations?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9594583</commentid>
    <comment_count>34</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-08-08 12:31:17 -0400</bug_when>
    <thetext>+1 =&gt; dnf</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9594596</commentid>
    <comment_count>35</comment_count>
    <who name="Robert Moskowitz">rgm</who>
    <bug_when>2016-08-08 12:33:43 -0400</bug_when>
    <thetext>See bug 1365222 for my Xfce desktop environment experience.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9594967</commentid>
    <comment_count>36</comment_count>
    <who name="samoht0">samoht0-bugzilla</who>
    <bug_when>2016-08-08 13:47:28 -0400</bug_when>
    <thetext>Yes, dnf.

Would be really interesting, *how* DNF does currently choose what packages to install, when some packages provide a dependency. Considering imsettings-xxx and kernel-debug-modules-extra/kernel-modules-extra (#1192189), I have some sense of foreboding, it&apos;s alphabetical order. Hope, I&apos;m wrong.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9594978</commentid>
    <comment_count>37</comment_count>
    <who name="Kevin Fenzi">kevin</who>
    <bug_when>2016-08-08 13:50:05 -0400</bug_when>
    <thetext>Moving to dnf maintainers for comment.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9594997</commentid>
    <comment_count>38</comment_count>
    <who name="Adam Williamson">awilliam</who>
    <bug_when>2016-08-08 13:59:39 -0400</bug_when>
    <thetext>https://fedoraproject.org/w/index.php?title=PackagingDrafts/ProvidesPreferences explicitly recommends Suggests/Enhances, it seems, so if that doesn&apos;t work it sounds like a libsolv bug...

I think the code is in https://github.com/openSUSE/libsolv/blob/master/src/rules.c somewhere, so, you know, good luck!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9604902</commentid>
    <comment_count>39</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-08-10 20:00:44 -0400</bug_when>
    <thetext>*** Bug 1365222 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9604906</commentid>
    <comment_count>40</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-08-10 20:07:22 -0400</bug_when>
    <thetext>&gt; reason imsettings-1.7.0-1.fc24.x86_64@fedora unit 208406134848ee1c45138e239e8e4191
&gt; reason imsettings-1.7.1-1.fc24.x86_64@updates unit 9e8d083da747ffe9617c68ce94c41699
&gt; reason imsettings-cinnamon-1.7.0-1.fc24.x86_64@fedora unit cbd5ebf8ab2709e5d1abab2dfda627ec
&gt; reason imsettings-cinnamon-1.7.1-1.fc24.x86_64@updates resolve 4127a5d4e414af36538545e42d489ebe
&gt; reason imsettings-gsettings-1.7.0-1.fc24.x86_64@fedora unit 311c5a8db6198eb81db075df75fe0967
&gt; reason imsettings-libs-1.7.0-1.fc24.i686@fedora unit df0cffa5dd56b12f8f3c5e5a4c27048a
&gt; reason imsettings-libs-1.7.0-1.fc24.x86_64@fedora unit 725ecc4641bccb2484c257facbd16c3f
&gt; reason imsettings-libs-1.7.1-1.fc24.x86_64@updates unit 8b1ab7a740f1fc53310e0f149717914f
&gt; reason imsettings-lxde-1.7.0-1.fc24.x86_64@fedora unit cb7cec519dae88b86cef9144561c9832
&gt; reason imsettings-mate-1.7.0-1.fc24.x86_64@fedora unit fa76d159339a38d29a424fb225ba57e5
&gt; reason imsettings-qt-1.7.0-1.fc24.x86_64@fedora unit cc88cbf5a064300d8ad34a86e0b883fa
&gt; reason imsettings-xfce-1.7.0-1.fc24.x86_64@fedora unit 7f26d634fc143d2d8a6ecab1b812471b

weird, why it doesn&apos;t see 1.7.1 version for all others except imsettings-cinnamon.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9604966</commentid>
    <comment_count>41</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-08-10 20:22:12 -0400</bug_when>
    <thetext>looks like libsolv found:
  - imsettings-cinnamon-1.7.1-1.fc24.x86_64
  - imsettings-gsettings-1.7.1-1.fc24.x86_64
  - imsettings-lxde-1.7.1-1.fc24.x86_64
  - imsettings-mate-1.7.1-1.fc24.x86_64
  - imsettings-qt-1.7.1-1.fc24.x86_64
  - imsettings-xfce-1.7.1-1.fc24.x86_64

so it tried to solve imsettings-cinnamon and it worked, so it didn&apos;t try to solve any other.

Michael, does it make sense for libsolv to check all branches and by default choose with minimal dependencies?

Kevin, Adam, others: this is easily solvable with suggests. Though not sure how it will work with comps ( we should really get rid out of it).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9604988</commentid>
    <comment_count>42</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-08-10 20:25:24 -0400</bug_when>
    <thetext>(In reply to Rex Dieter from comment #27)
&gt; Re: comment #25 and comment #26
&gt; 
&gt; So you can confirm that imsettings-cinnamon is still getting installed
&gt; (instead of imsettings-qt) ?
&gt; 
&gt; If so, means that adding the
&gt; Suggests:       imsettings-qt
&gt; didn&apos;t help, a dnf issue?
those tags are not pulling into updates/updates-testing due to https://github.com/fedora-infra/bodhi/issues/875</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9606531</commentid>
    <comment_count>43</comment_count>
    <who name="Michael Schröder">mls</who>
    <bug_when>2016-08-11 07:08:36 -0400</bug_when>
    <thetext>IMHO checking all branches does not make sense. I don&apos;t know of any good metric to compare branches, the number of packages doesn&apos;t seem very sensible. A package being split into many subpackages is not something bad per se. Installation size also doesn&apos;t make sense, more features mean a bigger size. But why go with the solution with the least features?

Note that libsolv *does* choose a different branch if it finds that it needs to install one of the other packages later.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9614875</commentid>
    <comment_count>44</comment_count>
    <who name="Honza Silhan">jsilhan</who>
    <bug_when>2016-08-15 08:25:18 -0400</bug_when>
    <thetext>IMO It should be not be defined on package level by weak dependencies but rather in comps. &quot;default&quot; value of type is actually like Recommends, it gets pulled in if there&apos;s no conflict [1].

Is it possible to add into comps &lt;packagereq type=&quot;default&quot;&gt;... for each such package that should be pulled into transaction for specific group? If that package should be there anyway then it does not matter whether it is Recommended or Suggested.

[1] http://dnf.readthedocs.io/en/latest/command_ref.html?highlight=default#group-command-label</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9614902</commentid>
    <comment_count>45</comment_count>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-08-15 08:37:53 -0400</bug_when>
    <thetext>(In reply to Jan Silhan from comment #44)
&gt; IMO It should be not be defined on package level by weak dependencies but
&gt; rather in comps. &quot;default&quot; value of type is actually like Recommends, it
&gt; gets pulled in if there&apos;s no conflict [1].
&gt; 
&gt; Is it possible to add into comps &lt;packagereq type=&quot;default&quot;&gt;... for each
&gt; such package that should be pulled into transaction for specific group? If
&gt; that package should be there anyway then it does not matter whether it is
&gt; Recommended or Suggested.
&gt; 
&gt; [1]
&gt; http://dnf.readthedocs.io/en/latest/command_ref.html?highlight=default#group-
&gt; command-label


Jan, as noted above: the real problem here is that libsolv is not behaving as explicitly documented. There is an explicit &quot;Suggests: imsettings-qt&quot; that is supposed to tell the depsolver that it should use this package to satisfy &quot;imsettings-desktop-module(arch)&quot;. This is clearly written out in https://fedoraproject.org/w/index.php?title=PackagingDrafts/ProvidesPreferences that it should work this way. The fact that it does not /is a bug in libsolv/ that must be fixed.

Making changes to comps to work around libsolv bugs is a hack, not a solution. Please figure out why it&apos;s not behaving properly, since this will likely be an issue under other circumstances too.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9670371</commentid>
    <comment_count>46</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-09-01 04:50:22 -0400</bug_when>
    <thetext>Stephen, this is bug in bodhi as it doesn&apos;t put weak deps into metadata.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9670377</commentid>
    <comment_count>47</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-09-01 04:51:20 -0400</bug_when>
    <thetext>Anyway I think proper fix is anyway to put conditional requires to comps.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9672453</commentid>
    <comment_count>48</comment_count>
    <who name="Randy Barlow">randy</who>
    <bug_when>2016-09-01 12:29:28 -0400</bug_when>
    <thetext>There is an upstream Bodhi issue about weak deps missing:

https://github.com/fedora-infra/bodhi/issues/875</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9673116</commentid>
    <comment_count>49</comment_count>
    <who name="Kevin Fenzi">kevin</who>
    <bug_when>2016-09-01 16:35:12 -0400</bug_when>
    <thetext>Note that we will have weak deps in repodata when/if releng switches to using the fedora based bodhi-backend03 to push updates instead of 01 (rhel7). I can bring this up at our next meeting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9678364</commentid>
    <comment_count>50</comment_count>
    <who name="Kevin Fenzi">kevin</who>
    <bug_when>2016-09-04 23:49:08 -0400</bug_when>
    <thetext>ok, updates are now created on a Fedora-24 instance so they have weak deps. 

If someone could test the orig bug here and confirm it&apos;s fixed or not that would be great.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9908472</commentid>
    <comment_count>51</comment_count>
    <who name="Kamil Páral">kparal</who>
    <bug_when>2016-11-21 09:00:27 -0500</bug_when>
    <thetext>I performed a netinstall of KDE (both pure KDE, and also KDE + KDE Apps + Admin Tools) for F24 and F25. In all cases I don&apos;t have imsettings-qt installed, but imsettings-cinnamon neither:

$ rpm -qa | grep imsett
imsettings-libs-1.7.2-1.fc25.x86_64
imsettings-gsettings-1.7.2-1.fc25.x86_64
imsettings-1.7.2-1.fc25.x86_64

However, in all cases I ended up with a KDE desktop, an no Cinnamon. So I think this is fixed.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>