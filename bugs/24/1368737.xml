<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1368737</bug_id>
          
          <creation_ts>2016-08-20 15:05:00 -0400</creation_ts>
          <short_desc>hp-setup is missing dependencies</short_desc>
          <delta_ts>2016-08-26 06:21:54 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>hplip</component>
          <version>24</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Randy Barlow">randy</reporter>
          <assigned_to name="Zdenek Dohnal">zdohnal</assigned_to>
          <cc>jpopelka</cc>
    
    
    <cc>randy</cc>
    
    
    <cc>twaugh</cc>
    
    
    <cc>zdohnal</cc>
          <qa_contact name="Randy Barlow">randy</qa_contact>
          
          <cf_fixed_in>hplip-3.16.7-2.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-08-26 06:21:54</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9632968</commentid>
    <comment_count>0</comment_count>
    <who name="Randy Barlow">randy</who>
    <bug_when>2016-08-20 15:05:59 -0400</bug_when>
    <thetext>Description of problem:
Hello! I just installed hplip to get the hp-setup utility. When I run hp-setup, it complains about missing dependencies and exits with code 1.


Version-Release number of selected component (if applicable):
hplip-3.16.7-1.fc24.x86_64


How reproducible:
Every time


Steps to Reproduce:
1. $ dnf install hplip
2. $ hp-setup


Actual results:
[rbarlow@ohm ~]$ hp-setup 

HP Linux Imaging and Printing System (ver. 3.16.7)
Printer/Fax Setup Utility ver. 9.0

Copyright (c) 2001-15 HP Development Company, LP
This software comes with ABSOLUTELY NO WARRANTY.
This is free software, and you are welcome to distribute it
under certain conditions. See COPYING file for more details.

warning: GUI Modules PyQt4 and PyQt5 are not installed
error: hp-setup requires GUI support (try running with --qt3). Also, try using interactive (-i) mode.
[rbarlow@ohm ~]$ echo $?
1


Expected results:
The utility should have all the dependencies it needs to run and run successfully.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9632972</commentid>
    <comment_count>1</comment_count>
    <who name="Randy Barlow">randy</who>
    <bug_when>2016-08-20 15:10:33 -0400</bug_when>
    <thetext>I just noticed that I do in fact have the python-qt4 and python-qt5 packages installed, so something is wrong with hp-setup finding those packages.

[rbarlow@ohm ~]$ rpm -q python-qt5
python-qt5-5.6-4.fc24.x86_64
[rbarlow@ohm ~]$ rpm -q PyQt4
PyQt4-4.11.4-14.fc24.x86_64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9632978</commentid>
    <comment_count>2</comment_count>
    <who name="Randy Barlow">randy</who>
    <bug_when>2016-08-20 15:32:41 -0400</bug_when>
    <thetext>It later occurred to me to check the hp-setup script, and I noticed that it has #!/usr/bin/python3 at the top (nice!). And I didn&apos;t have python3-qt5 installed, so that was the problem. Please add python3-qt5 as a dependency of hp-setup to resolve this problem.

However, there still seem to be missing dependencies:

[rbarlow@ohm ~]$ hp-setup 

HP Linux Imaging and Printing System (ver. 3.16.7)
Printer/Fax Setup Utility ver. 9.0

Copyright (c) 2001-15 HP Development Company, LP
This software comes with ABSOLUTELY NO WARRANTY.
This is free software, and you are welcome to distribute it
under certain conditions. See COPYING file for more details.

Traceback (most recent call last):
  File &quot;/usr/bin/hp-setup&quot;, line 313, in &lt;module&gt;
    ui = import_module(ui_package + &quot;.setupdialog&quot;)
  File &quot;/usr/lib64/python3.5/importlib/__init__.py&quot;, line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 986, in _gcd_import
  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 969, in _find_and_load
  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 944, in _find_and_load_unlocked
  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 222, in _call_with_frames_removed
  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 986, in _gcd_import
  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 969, in _find_and_load
  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 956, in _find_and_load_unlocked
ImportError: No module named &apos;ui5&apos;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9632979</commentid>
    <comment_count>3</comment_count>
    <who name="Randy Barlow">randy</who>
    <bug_when>2016-08-20 15:38:26 -0400</bug_when>
    <thetext>It seems that nothing in Fedora provides the ui5 Python package:

$ dnf provides /usr/lib/python3.5/site-packages/ui5/__init__.py
Last metadata expiration check: 2 days, 23:10:44 ago on Wed Aug 17 16:27:10 2016.
Error: No Matches found</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9634779</commentid>
    <comment_count>4</comment_count>
    <who name="Zdenek Dohnal">zdohnal</who>
    <bug_when>2016-08-22 03:36:41 -0400</bug_when>
    <thetext>Hello Randy,

thank you for contacting us. I think problem lies in usage &apos;hp-setup&apos; without hplip-gui package installed (it is not installed by default, because package isn&apos;t mandatory for running hp-setup - you can use CLI interface by &apos;hp-setup -i&apos;). Do you have this package installed? If not, would you mind installing it and tell me if it works?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9636107</commentid>
    <comment_count>5</comment_count>
    <who name="Randy Barlow">randy</who>
    <bug_when>2016-08-22 10:00:14 -0400</bug_when>
    <thetext>Hello Zdenek!

I did not have that gui installed, and after installing it I was able to use the hp-setup utility. Thanks for the tip!

Perhaps there is a way to help users to avoid this confusion in the future. Perhaps hp-setup could be patched to suggest that users install the gui package when it is not found instead of the tracebacks about ui5 and python3-qt5?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9636533</commentid>
    <comment_count>6</comment_count>
    <who name="Zdenek Dohnal">zdohnal</who>
    <bug_when>2016-08-22 11:39:21 -0400</bug_when>
    <thetext>Yeah, we have similar patch in f25, I will build it for f24.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9636627</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-08-22 12:04:59 -0400</bug_when>
    <thetext>hplip-3.16.7-2.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-b41164b985</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9637479</commentid>
    <comment_count>8</comment_count>
    <who name="Randy Barlow">randy</who>
    <bug_when>2016-08-22 16:32:32 -0400</bug_when>
    <thetext>Thanks so much Zdenek, I&apos;ll test it out for you!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9641331</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-08-23 12:22:08 -0400</bug_when>
    <thetext>hplip-3.16.7-2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-b41164b985</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9652425</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-08-26 06:21:51 -0400</bug_when>
    <thetext>hplip-3.16.7-2.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>