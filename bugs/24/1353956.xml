<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1353956</bug_id>
          
          <creation_ts>2016-07-08 09:56:00 -0400</creation_ts>
          <short_desc>Upgrade from FreeIPA Fedora 23 container to Fedora 24 fails with syntax error at /usr/share/dirsrv/updates/91reindex.pl line 17, near &quot;)</short_desc>
          <delta_ts>2016-09-12 10:31:15 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>389-ds-base</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jan Pazdziora">jpazdziora</reporter>
          <assigned_to name="Noriko Hosoi">nhosoi</assigned_to>
          <cc>cmordant1</cc>
    
    
    <cc>edewata</cc>
    
    
    <cc>jpazdziora</cc>
    
    
    <cc>mreynolds</cc>
    
    
    <cc>nhosoi</cc>
    
    
    <cc>nkinder</cc>
    
    
    <cc>rmeggins</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>389-ds-base-1.3.5.11-1.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-09-05 18:43:29</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9491133</commentid>
    <comment_count>0</comment_count>
    <who name="Jan Pazdziora">jpazdziora</who>
    <bug_when>2016-07-08 09:56:11 -0400</bug_when>
    <thetext>Description of problem:

When data of existing Fedora 23-based FreeIPA server container is given to Fedora 24-based one, triggering upgrade, the upgrade fails.

Version-Release number of selected component (if applicable):

389-ds-base-1.3.5.10-1.fc24

How reproducible:

Deterministic.

Steps to Reproduce:
1. Build and run FreeIPA in container using Dockerfile.fedora-23 from https://github.com/adelton/docker-freeipa.
2. Build another container using Dockerfile.fedora-24, run it by bind-mounting volume populated by the original container.

Actual results:

Fri Jul  8 13:39:04 UTC 2016 /usr/sbin/ipa-server-configure-first upgrade
/data/build-id /data-template/build-id differ: char 1, line 1
FreeIPA server is already configured but with different version, starting upgrade.
Error: not applying update /usr/share/dirsrv/updates/91reindex.pl. Error: syntax error at /usr/share/dirsrv/updates/91reindex.pl line 17, near &quot;)

    my &quot;
Compilation failed in require at (eval 29) line 1.

Error: not applying update &apos;/usr/share/dirsrv/updates/91reindex.pl&apos;.  Error: syntax error at /usr/share/dirsrv/updates/91reindex.pl line 17, near &quot;)

    my &quot;
Compilation failed in require at (eval 29) line 1.

Error: could not update the directory server.
Exiting . . .
Log file is &apos;/tmp/setupfKiTvf.log&apos;

Expected results:

No error, upgrade passes, FreeIPA in container runs.

Additional info:</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9491139</commentid>
    <comment_count>2</comment_count>
    <who name="Jan Pazdziora">jpazdziora</who>
    <bug_when>2016-07-08 09:57:18 -0400</bug_when>
    <thetext>This is Fedora equivalent to bug 1353592.

Please consider respinning the packages in Fedora 24.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9491801</commentid>
    <comment_count>3</comment_count>
    <who name="Noriko Hosoi">nhosoi</who>
    <bug_when>2016-07-08 14:04:19 -0400</bug_when>
    <thetext>(In reply to Jan Pazdziora from comment #2)
&gt; This is Fedora equivalent to bug 1353592.
&gt; 
&gt; Please consider respinning the packages in Fedora 24.

Sorry about introducing the broken update.  I&apos;m working on it now...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9656586</commentid>
    <comment_count>4</comment_count>
    <who name="Charlie Mordant">cmordant1</who>
    <bug_when>2016-08-27 18:33:20 -0400</bug_when>
    <thetext>Idem for me without docker:

Package installed:
389-ds.noarch                                                                            1.2.2-8.fc24                                                                   @@commandline
389-ds-base.x86_64                                                                       1.3.5.10-1.fc24                                                                @updates     
389-ds-base-libs.x86_64                                                                  1.3.5.10-1.fc24                                                                @updates     
389-ds-console.noarch                                                                    1.2.12-3.fc24                                                                  @@commandline
389-ds-console-doc.noarch                                                                1.2.12-3.fc24                                                                  @@commandline
389-dsgw.x86_64                                                                          1.1.11-9.fc24                                                                  @@commandline

Regards, and good luck!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9660452</commentid>
    <comment_count>5</comment_count>
    <who name="Noriko Hosoi">nhosoi</who>
    <bug_when>2016-08-29 14:14:06 -0400</bug_when>
    <thetext>Could you please retry the upgrade?

The issue should be fixed by the version 389-ds-base-1.3.5.13-1, which I&apos;ve pushed to the stable.

http://www.port389.org/docs/389ds/releases/release-1-3-5-13.html

Thanks.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9668626</commentid>
    <comment_count>6</comment_count>
    <who name="Charlie Mordant">cmordant1</who>
    <bug_when>2016-08-31 14:31:10 -0400</bug_when>
    <thetext>Not yet

[charlie@osgiliath ~]$ sudo dnf list 389-*
Vérification de l&apos;expiration des métadonnées effectuée il y a 0:01:04 sur Wed Aug 31 20:27:59 2016.
Paquets installés
389-admin.x86_64                                                                          1.1.42-1.fc24.3                                                               @@commandline
389-admin-console.noarch                                                                  1.1.10-3.fc24                                                                 @@commandline
389-admin-console-doc.noarch                                                              1.1.10-3.fc24                                                                 @@commandline
389-adminutil.x86_64                                                                      1.1.22-4.fc24                                                                 @@commandline
389-console.noarch                                                                        1.1.9-4.fc24                                                                  @@commandline
389-ds.noarch                                                                             1.2.2-8.fc24                                                                  @@commandline
389-ds-base.x86_64                                                                        1.3.5.10-1.fc24                                                               @updates     
389-ds-base-libs.x86_64                                                                   1.3.5.10-1.fc24                                                               @updates     
389-ds-console.noarch                                                                     1.2.12-3.fc24                                                                 @@commandline
389-ds-console-doc.noarch                                                                 1.2.12-3.fc24                                                                 @@commandline
389-dsgw.x86_64                                                                           1.1.11-9.fc24                                                                 @@commandline
Paquets disponibles
389-admin.i686                                                                            1.1.42-1.fc24.3                                                               fedora       
389-adminutil.i686                                                                        1.1.22-4.fc24                                                                 fedora       
389-adminutil-devel.i686                                                                  1.1.22-4.fc24                                                                 fedora       
389-adminutil-devel.x86_64                                                                1.1.22-4.fc24                                                                 fedora       
389-ds-base-devel.i686                                                                    1.3.5.10-1.fc24                                                               updates      
389-ds-base-devel.x86_64                                                                  1.3.5.10-1.fc24                                                               updates      
389-ds-base-libs.i686                                                                     1.3.5.10-1.fc24                                                               updates      
389-ds-base-snmp.x86_64                                                                   1.3.5.10-1.fc24                                                               updates      
389-ds-base-tests.noarch                                                                  1.3.5.10-1.fc24                                                               updates   


Will try it every day!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9675125</commentid>
    <comment_count>7</comment_count>
    <who name="Charlie Mordant">cmordant1</who>
    <bug_when>2016-09-02 08:37:31 -0400</bug_when>
    <thetext>Update done, no problem on setup-ds-admin.pl.

Thank you very much and congrats!

Charlie</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9679426</commentid>
    <comment_count>8</comment_count>
    <who name="Jan Pazdziora">jpazdziora</who>
    <bug_when>2016-09-05 08:12:28 -0400</bug_when>
    <thetext>Can you set the Fixed In Version to the expected version?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9680490</commentid>
    <comment_count>9</comment_count>
    <who name="Noriko Hosoi">nhosoi</who>
    <bug_when>2016-09-05 18:43:29 -0400</bug_when>
    <thetext>(In reply to Jan Pazdziora from comment #8)
&gt; Can you set the Fixed In Version to the expected version?

The bug was fixed in 389-ds-base-1.3.5.11-1.fc24 and newer.

Here&apos;s the latest 1.3.5 info:
2016-08-11: Released 389 Directory Server 1.3.5.13
http://www.port389.org/docs/389ds/releases/release-1-3-5-13.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9699368</commentid>
    <comment_count>10</comment_count>
    <who name="Jan Pazdziora">jpazdziora</who>
    <bug_when>2016-09-12 10:31:15 -0400</bug_when>
    <thetext>Thank you.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>