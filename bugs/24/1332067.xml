<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1332067</bug_id>
          
          <creation_ts>2016-05-01 22:09:00 -0400</creation_ts>
          <short_desc>triggering the assertion during base.reset()</short_desc>
          <delta_ts>2016-10-02 08:53:04 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>hawkey</component>
          <version>24</version>
          <rep_platform>x86_64</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened, Triaged</keywords>
          <priority>low</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1371994</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Bill">thetaeridanus</reporter>
          <assigned_to name="Igor Gnatenko">ignatenko</assigned_to>
          <cc>jmracek</cc>
    
    
    <cc>jsilhan</cc>
    
    
    <cc>mluscon</cc>
    
    
    <cc>packaging-team-maint</cc>
    
    
    <cc>RadekHolyPublic</cc>
    
    
    <cc>rhbz2</cc>
    
    
    <cc>thetaeridanus</cc>
    
    
    <cc>tla</cc>
    
    
    <cc>vmukhame</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>hawkey-0.6.3-6.fc25 hawkey-0.6.3-6.fc24</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-09-03 13:36:40</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9283402</commentid>
    <comment_count>0</comment_count>
    <who name="Bill">thetaeridanus</who>
    <bug_when>2016-05-01 22:09:25 -0400</bug_when>
    <thetext>Description of problem: Yumex-DNF Exits with error: &quot;DNF Dbus backend is not repsonding&quot;


Version-Release number of selected component (if applicable): yumex-dnf 4.1.6


How reproducible: Launch Yum Extender DNF from Gnome Shell


Steps to Reproduce:
1.
2.
3.

Actual results: The window opens up and displays: Refreshing Repository Metadata, Then stops with the DNF Dbus beackend not responding message. 


Expected results: No error message and program continues.


I think DNF and RPM updated last week but I can&apos;t downgrade to previous version to see if those package updates are related to the problem.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9297063</commentid>
    <comment_count>1</comment_count>
    <who name="Colin J Thomson">colin.thomson</who>
    <bug_when>2016-05-05 18:20:25 -0400</bug_when>
    <thetext>Also seeing this on F24 using yumex-dnf from copr timlau/ 
Doubt it will help but here is a snip of the output when run from a shell:

EXCEPTION : g-dbus-error-quark: GDBus.Error:org.freedesktop.DBus.Error.NoReply: Message recipient disconnected from message bus without replying (4) 

(yumex-dnf:3301): Gtk-CRITICAL **: gtk_main_quit: assertion &apos;main_loops != NULL&apos; failed</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9301815</commentid>
    <comment_count>2</comment_count>
    <who name="Wolfgang Ulbrich">fedora</who>
    <bug_when>2016-05-07 15:25:12 -0400</bug_when>
    <thetext>Any chance to fix that now after beta freeze is finally over.
Several spins use yumex-dnf and i really don&apos;t want include packagekit as working alternative.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9302295</commentid>
    <comment_count>3</comment_count>
    <who name="eddy02">eddy.pilon</who>
    <bug_when>2016-05-08 08:48:00 -0400</bug_when>
    <thetext>Seems to be because of hawkey-6.0.3  changes.

Output of dnfdaemon :

python3: /builddir/build/BUILD/hawkey-0.6.3/src/sack.c:568: load_yum_repo: Assertion `hrepo-&gt;state_main == _HY_NEW&apos; failed.
Aborted</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9303211</commentid>
    <comment_count>4</comment_count>
    <who name="Tim Lauridsen">tla</who>
    <bug_when>2016-05-09 03:36:29 -0400</bug_when>
    <thetext>Think this is a problem in hawkey, dont think I can fix that in dnf-daemon
as far as I can find there is no documented API change, I dont use hawkey directly, look like this is triggered indirectly by using the DNF API.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9303218</commentid>
    <comment_count>5</comment_count>
    <who name="Tim Lauridsen">tla</who>
    <bug_when>2016-05-09 03:37:52 -0400</bug_when>
    <thetext>Hi Hawkey devs.

Do you have any idea, what is changes in hawkey 6.0.3 there is triggering this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9303226</commentid>
    <comment_count>6</comment_count>
    <who name="Tim Lauridsen">tla</who>
    <bug_when>2016-05-09 03:42:22 -0400</bug_when>
    <thetext>*** Bug 1332244 has been marked as a duplicate of this bug. ***</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9303229</commentid>
    <comment_count>7</comment_count>
    <who name="Tim Lauridsen">tla</who>
    <bug_when>2016-05-09 03:43:17 -0400</bug_when>
    <thetext>arbt infomation is located in 1332067</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9303234</commentid>
    <comment_count>8</comment_count>
    <who name="Tim Lauridsen">tla</who>
    <bug_when>2016-05-09 03:44:39 -0400</bug_when>
    <thetext>Ups, wrong bug num.

abrt info is in 

https://bugzilla.redhat.com/show_bug.cgi?id=1332244</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9304324</commentid>
    <comment_count>9</comment_count>
    <who name="Honza Silhan">jsilhan</who>
    <bug_when>2016-05-09 07:37:07 -0400</bug_when>
    <thetext>Do you see in `/var/cache/dnf/rpmfusion-free-updates-testing*` primary.xml? Can you please disable rpmfusion-free-updates-testing repo and try it again and report if it works, please?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9304689</commentid>
    <comment_count>10</comment_count>
    <who name="Wolfgang Ulbrich">fedora</who>
    <bug_when>2016-05-09 08:36:26 -0400</bug_when>
    <thetext>In my case rpmfusion repo config is linked to f23 + skip_if_unavailable=True.

[rpmfusion-free-updates-testing]
name=RPM Fusion for Fedora 23 - Free - Test Updates
#baseurl=http://download1.rpmfusion.org/free/fedora/updates/testing/23/$basearch/
mirrorlist=http://mirrors.rpmfusion.org/mirrorlist?repo=free-fedora-updates-testing-23&amp;arch=$basearch
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-rpmfusion-free-fedora-$releasever
skip_if_unavailable=True

...but after a &apos;dnf clean metadata&apos; yumex-dnf is working again.

Normal i use yum-deprecated or good old yumex, so it is possible that i never cleaned dnf metadata since several months, and the cache was created with older hawkey versions.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9304702</commentid>
    <comment_count>11</comment_count>
    <who name="Wolfgang Ulbrich">fedora</who>
    <bug_when>2016-05-09 08:38:53 -0400</bug_when>
    <thetext>btw. the error message is very misleading.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9305371</commentid>
    <comment_count>12</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-05-09 11:23:49 -0400</bug_when>
    <thetext>I am seeing this issue too, see my duplicate (abrt reported) bug #1332244.

I can confirm that after
1. disabling rpmfusion-free-updates-testing
2. `dnf clean expire-cache`
3. start yumex-dnf and press &quot;Refresh metadata&quot;
this crash is gone.

After following these steps
4. enable rpmfusion-free-updates-testing
5. `dnf clean expire-cache`
6. start yumex-dnf and press &quot;Refresh metadata&quot;
this crash appears again.

As a workaround one could simply disable rpmfusion-free-updates-testing.

Still it is unclear: is this a bug in hawkey or is the rpmfusion-free-updates-testing repodata xml file broken?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9307202</commentid>
    <comment_count>13</comment_count>
    <who name="Wolfgang Ulbrich">fedora</who>
    <bug_when>2016-05-09 13:44:46 -0400</bug_when>
    <thetext>Well, it depends on fedora version.
For f24 you need to edit the repo file for rpmfusion, otherwise dnf can&apos;t find the repodata xml file.
See my post about.
I tested it again in f24, after deleting the dnf cache and rpmfusion-free-updates-testing is enabled, yumex-dnf have no probs to download the data agin.
I will test it later with f23.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9309837</commentid>
    <comment_count>14</comment_count>
      <attachid>1155625</attachid>
    <who name="Tim Lauridsen">tla</who>
    <bug_when>2016-05-10 04:55:03 -0400</bug_when>
    <thetext>Created attachment 1155625
script to reproduce</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9309840</commentid>
    <comment_count>15</comment_count>
    <who name="Tim Lauridsen">tla</who>
    <bug_when>2016-05-10 04:56:53 -0400</bug_when>
    <thetext>Digged in a little deeper.

Looks like the issue is releated to when you reset the DNF sack and set it up
again.

See the attached python script.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9309856</commentid>
    <comment_count>16</comment_count>
    <who name="Tim Lauridsen">tla</who>
    <bug_when>2016-05-10 05:03:54 -0400</bug_when>
    <thetext>looks like i can work around it by doing

base.read_all_repos()
base.fill_sack()
base.reset(sack=True, repos=True)
base.read_all_repos()
base.fill_sack()

but before 6.0.3, it was possible to just reset the sack without reloading the repository configuration</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9310064</commentid>
    <comment_count>17</comment_count>
    <who name="Tim Lauridsen">tla</who>
    <bug_when>2016-05-10 06:09:38 -0400</bug_when>
    <thetext>I have added the tempory workaround to dnfdaemon in copr (timlau/yumex-dnf)

So you can run

sudo dnf update dnfdaemon --refresh

To get yumex-dnf up and running again.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9311754</commentid>
    <comment_count>18</comment_count>
    <who name="eddy02">eddy.pilon</who>
    <bug_when>2016-05-10 13:21:43 -0400</bug_when>
    <thetext>Thanks very much.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9313573</commentid>
    <comment_count>19</comment_count>
    <who name="Colin J Thomson">colin.thomson</who>
    <bug_when>2016-05-10 17:29:02 -0400</bug_when>
    <thetext>Your temporary fix works here, thanks very much</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9316494</commentid>
    <comment_count>20</comment_count>
    <who name="Wolfgang Ulbrich">fedora</who>
    <bug_when>2016-05-11 07:17:51 -0400</bug_when>
    <thetext>I ran again in this issue today and may repo files are fine.
It looks like the yumex-dnf exists also on local repos.
From my point of view (fedora spin maintainer) adding a temporary fix to corps isn&apos;t really a solution.
Why not adding yumex back for f24?
Which works great and yum itself isn&apos;t removed from f24.
I&apos;m willing to help out as co-maintainer.
It isn&apos;t nice that Mate and Cinnamon spins shipping a broken package-manager GUI for f24.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9316495</commentid>
    <comment_count>21</comment_count>
    <who name="Wolfgang Ulbrich">fedora</who>
    <bug_when>2016-05-11 07:18:45 -0400</bug_when>
    <thetext>err......and my repo files are fine.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9490132</commentid>
    <comment_count>22</comment_count>
    <who name="Fedora Admin XMLRPC Client">fedora-admin-xmlrpc</who>
    <bug_when>2016-07-08 05:25:00 -0400</bug_when>
    <thetext>This package has changed ownership in the Fedora Package Database.  Reassigning to the new owner of this component.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9663301</commentid>
    <comment_count>23</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2016-08-30 08:24:26 -0400</bug_when>
    <thetext>I try to test it with yumex-dnf-4.3.3-1 and python3-hawkey-0.6.3-5 on F24 and I was unable to reproduce the bug. I am closing the bug report as the issue was fixed in released version. Please if the problem again appear, don&apos;t hesitate to open the bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9663312</commentid>
    <comment_count>24</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-08-30 08:27:35 -0400</bug_when>
    <thetext>In [2]: import dnf

In [3]: base = dnf.Base()

In [4]: base.read_all_repos()

In [5]: base.fill_sack()
Out[5]: &lt;dnf.sack.Sack at 0x7fb7977efb88&gt;

In [6]: base.read_all_repos()
Repository ignatenkobrain-homu is listed more than once in the configuration
Repository ignatenkobrain-pycryptodome is listed more than once in the configuration
Repository ignatenkobrain-taiga is listed more than once in the configuration
Repository fedora-cisco-openh264 is listed more than once in the configuration
Repository fedora-cisco-openh264-debuginfo is listed more than once in the configuration
Repository rawhide is listed more than once in the configuration
Repository rawhide-debuginfo is listed more than once in the configuration
Repository rawhide-source is listed more than once in the configuration
Repository updates-testing is listed more than once in the configuration
Repository updates-testing-debuginfo is listed more than once in the configuration
Repository updates-testing-source is listed more than once in the configuration
Repository updates is listed more than once in the configuration
Repository updates-debuginfo is listed more than once in the configuration
Repository updates-source is listed more than once in the configuration
Repository fedora is listed more than once in the configuration
Repository fedora-debuginfo is listed more than once in the configuration
Repository fedora-source is listed more than once in the configuration
Repository google-talkplugin is listed more than once in the configuration
Repository koji-rawhide is listed more than once in the configuration
Repository rpm-gitoverlay is listed more than once in the configuration
Repository rpmfusion-free-rawhide is listed more than once in the configuration
Repository rpmfusion-free-rawhide-debuginfo is listed more than once in the configuration
Repository rpmfusion-free-rawhide-source is listed more than once in the configuration
Repository rpmfusion-free-updates-testing is listed more than once in the configuration
Repository rpmfusion-free-updates-testing-debuginfo is listed more than once in the configuration
Repository rpmfusion-free-updates-testing-source is listed more than once in the configuration
Repository rpmfusion-free-updates is listed more than once in the configuration
Repository rpmfusion-free-updates-debuginfo is listed more than once in the configuration
Repository rpmfusion-free-updates-source is listed more than once in the configuration
Repository rpmfusion-free is listed more than once in the configuration
Repository rpmfusion-free-debuginfo is listed more than once in the configuration
Repository rpmfusion-free-source is listed more than once in the configuration

In [7]: base.fill_sack()
python3: /builddir/build/BUILD/hawkey-0.6.3/src/sack.c:571: load_yum_repo: Assertion `hrepo-&gt;state_main == _HY_NEW&apos; failed.
Aborted (core dumped)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9663336</commentid>
    <comment_count>25</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2016-08-30 08:34:03 -0400</bug_when>
    <thetext>Not a bug, you cannot load twice sack!!! You have to call base.reset() with proper flag.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9663350</commentid>
    <comment_count>26</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-08-30 08:37:06 -0400</bug_when>
    <thetext>$ curl --silent https://bugzilla.redhat.com/attachment.cgi?id=1155625 | python3 -
python3: /builddir/build/BUILD/hawkey-0.6.3/src/sack.c:571: load_yum_repo: Assertion `hrepo-&gt;state_main == _HY_NEW&apos; failed.
Aborted (core dumped)


$ curl --silent https://bugzilla.redhat.com/attachment.cgi?id=1155625 
import dnf

base = dnf.Base()
conf = base.conf

RELEASEVER = dnf.rpm.detect_releasever(conf.installroot)
conf.substitutions[&apos;releasever&apos;] = RELEASEVER
conf.read()  # read the dnf.conf
base.read_all_repos()
base.fill_sack()
base.reset(sack=True)
base.fill_sack()</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9666076</commentid>
    <comment_count>27</comment_count>
    <who name="Christian Stadelmann">rhbz2</who>
    <bug_when>2016-08-31 03:02:33 -0400</bug_when>
    <thetext>(In reply to Jaroslav Mracek from comment #23)
&gt; I try to test it with yumex-dnf-4.3.3-1 and python3-hawkey-0.6.3-5 on F24
&gt; and I was unable to reproduce the bug. I am closing the bug report as the
&gt; issue was fixed in released version. Please if the problem again appear,
&gt; don&apos;t hesitate to open the bug report.

Is it possible that you just used a version after [this commit] which includes a workaround?

[this commit] https://github.com/timlau/dnf-daemon/commit/f20ce9c9566b00308af73bb3d0bfb3cc50e666ae</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9667021</commentid>
    <comment_count>28</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2016-08-31 07:43:57 -0400</bug_when>
    <thetext>Ok I found dad guy. It is commit ff529e3af66098e5997d86b0152419710aa1d18c that change the spec file. Igor Gnatenko, Please as a expert on spec, can you please provide a patch for your commit?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9667031</commentid>
    <comment_count>29</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-08-31 07:48:05 -0400</bug_when>
    <thetext>I don&apos;t see how it&apos;s related.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9667074</commentid>
    <comment_count>30</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2016-08-31 08:00:57 -0400</bug_when>
    <thetext>Just test build it commit before and then with the commit and you will see the difference (working 2x fill_sack and not working). Please can you solve the problem as spec specialist? First version where it fails 0.6.3-1.git.1.ff529e3.fc23. The last version where it works hawkey-0.6.3-1.git.0.08f4354.fc23.x86_64.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9667108</commentid>
    <comment_count>31</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2016-08-31 08:12:42 -0400</bug_when>
    <thetext>After discussion with mluscon it looks like that before your commit, assertions where included only for devel-packages, but it is not true anymore. Again, please can you provide a spec file patch for hawkey and libdnf?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9667439</commentid>
    <comment_count>32</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-08-31 09:10:27 -0400</bug_when>
    <thetext>(In reply to Jaroslav Mracek from comment #31)
&gt; After discussion with mluscon it looks like that before your commit,
&gt; assertions where included only for devel-packages, but it is not true
&gt; anymore. Again, please can you provide a spec file patch for hawkey and
&gt; libdnf?
I don&apos;t see which patch do you want.

Though I did bisect and this bug in hawkey since:
commit 1f6b41fcb318d2262583aa0cec3b586e39b9f903
Author: Jan Silhan &lt;jsilhan@redhat.com&gt;
Date:   Mon Apr 27 15:34:17 2015 +0200

    get rid of yum references

All code before is not possible to test with current DNF.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9667559</commentid>
    <comment_count>33</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2016-08-31 09:38:26 -0400</bug_when>
    <thetext>
Investigation:
On f23 VM. RPMs were built with tito.

Test script: 
import dnf

base = dnf.Base()
base.read_all_repos()
base.fill_sack()
print(&apos;base.fill_sack()&apos;)
base.fill_sack()
print(&apos;base.fill_sack()&apos;)
base.close()

Test1 condition:
dnf-1.1.10-1.fc23.noarch
python3-hawkey-0.6.3-1.git.0.08f4354.fc23.x86_64
hawkey-0.6.3-1.git.0.08f4354.fc23.x86_64
rpm-4.13.0-0.rc1.13.fc23.x86_64
librepo-1.7.16-2.fc23.x86_64
libsolv-0.6.20-2.fc23.x86_64

Test1: Result
[hrom@localhost ~]$ python2 test.py 
base.fill_sack()
base.fill_sack()

[hrom@localhost ~]$ python3 test.py 
base.fill_sack()
base.fill_sack()

Test2 conditions:
dnf-1.1.10-1.fc23.noarch
python3-hawkey-0.6.3-1.git.1.ff529e3.fc23.x86_64
hawkey-0.6.3-1.git.1.ff529e3.fc23.x86_64
rpm-4.13.0-0.rc1.13.fc23.x86_64
librepo-1.7.16-2.fc23.x86_64
libsolv-0.6.20-2.fc23.x86_64


Test2 result:
[hrom@localhost ~]$ python2 test.py 
base.fill_sack()
python2: /tmp/tito/rpmbuild-hawkeyv95l7v6c/BUILD/hawkey-git-1.ff529e3/src/sack.c:568: load_yum_repo: Assertion `hrepo-&gt;state_main == _HY_NEW&apos; failed.
Aborted (core dumped)

[hrom@localhost ~]$ python3 test.py 
base.fill_sack()
python3: /tmp/tito/rpmbuild-hawkeyv95l7v6c/BUILD/hawkey-git-1.ff529e3/src/sack.c:568: load_yum_repo: Assertion `hrepo-&gt;state_main == _HY_NEW&apos; failed.
Aborted (core dumped)

Output from result:
The commit ff529e3af66098e5997d86b0152419710aa1d18c is responsible for the bug. Author Igor Gnatenko &lt;ignatenko@redhat.com&gt;, pushed to master by Igor Gnatenko &lt;ignatenko@redhat.com&gt;. Please can you fix it!!!!!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9667568</commentid>
    <comment_count>34</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-08-31 09:39:41 -0400</bug_when>
    <thetext>[brain@brain hawkey]$ cat test.sh 
#!/bin/bash
set -xeuo pipefail

rm -rf build
mkdir build
pushd build
  cmake .. -DPYTHON_DESIRED=3
popd
make -j8 -C build

PYTHONPATH=`pwd`/build/src/python/ python3 test.py
[brain@brain hawkey]$ cat test.py 
import dnf

base = dnf.Base()
conf = base.conf

RELEASEVER = dnf.rpm.detect_releasever(conf.installroot)
conf.substitutions[&apos;releasever&apos;] = RELEASEVER
conf.read()  # read the dnf.conf
base.read_all_repos()
base.fill_sack()
base.reset(sack=True)
base.fill_sack()




Now you use git-bisect(1). And for each commit you run ./test.sh.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9667696</commentid>
    <comment_count>35</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2016-08-31 09:57:03 -0400</bug_when>
    <thetext>Thanks that you will take a care of the bug</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9668155</commentid>
    <comment_count>36</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-08-31 11:53:05 -0400</bug_when>
    <thetext>Workaround is here: https://github.com/rpm-software-management/hawkey/pull/118

But bug itself is not fixed: https://github.com/rpm-software-management/libhif/issues/186</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9672348</commentid>
    <comment_count>37</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-01 11:57:33 -0400</bug_when>
    <thetext>hawkey-0.6.3-6.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-175432a09e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9672351</commentid>
    <comment_count>38</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-01 11:57:47 -0400</bug_when>
    <thetext>hawkey-0.6.3-6.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-355b0013d5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9676636</commentid>
    <comment_count>39</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-02 23:24:28 -0400</bug_when>
    <thetext>hawkey-0.6.3-6.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-355b0013d5</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9676706</commentid>
    <comment_count>40</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-02 23:54:44 -0400</bug_when>
    <thetext>hawkey-0.6.3-6.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-175432a09e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9677096</commentid>
    <comment_count>41</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-03 13:36:34 -0400</bug_when>
    <thetext>hawkey-0.6.3-6.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9680497</commentid>
    <comment_count>42</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-05 18:52:06 -0400</bug_when>
    <thetext>hawkey-0.6.3-6.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1155625</attachid>
            <date>2016-05-10 04:55:00 -0400</date>
            <delta_ts>2016-05-10 04:55:03 -0400</delta_ts>
            <desc>script to reproduce</desc>
            <filename>testdnf.py</filename>
            <type>text/plain</type>
            <size>262</size>
            <attacher name="Tim Lauridsen">tla</attacher>
            
              <data encoding="base64">aW1wb3J0IGRuZgoKYmFzZSA9IGRuZi5CYXNlKCkKY29uZiA9IGJhc2UuY29uZgoKUkVMRUFTRVZF
UiA9IGRuZi5ycG0uZGV0ZWN0X3JlbGVhc2V2ZXIoY29uZi5pbnN0YWxscm9vdCkKY29uZi5zdWJz
dGl0dXRpb25zWydyZWxlYXNldmVyJ10gPSBSRUxFQVNFVkVSCmNvbmYucmVhZCgpICAjIHJlYWQg
dGhlIGRuZi5jb25mCmJhc2UucmVhZF9hbGxfcmVwb3MoKQpiYXNlLmZpbGxfc2FjaygpCmJhc2Uu
cmVzZXQoc2Fjaz1UcnVlKQpiYXNlLmZpbGxfc2FjaygpCg==
</data>

          </attachment>
      

    </bug>

</bugzilla>