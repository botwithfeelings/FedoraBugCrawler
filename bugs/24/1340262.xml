<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1340262</bug_id>
          
          <creation_ts>2016-05-26 17:34:00 -0400</creation_ts>
          <short_desc>python-gofer depends on gofer, but does not declare the dependency</short_desc>
          <delta_ts>2016-06-18 14:56:04 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>gofer</component>
          <version>24</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Randy Barlow">rbarlow</reporter>
          <assigned_to name="Jeff Ortel">jortel</assigned_to>
          <cc>ipanova</cc>
    
    
    <cc>jeremy</cc>
    
    
    <cc>jortel</cc>
    
    
    <cc>pcreech</cc>
    
    
    <cc>rbarlow</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>gofer-2.8.1-1.fc23 gofer-2.8.1-1.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-06-10 22:54:15</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9363768</commentid>
    <comment_count>0</comment_count>
    <who name="Randy Barlow">rbarlow</who>
    <bug_when>2016-05-26 17:34:18 -0400</bug_when>
    <thetext>If a user installs pulp-server and then runs pulp-manage-db, it will fail:


$ sudo dnf install pulp-rpm-plugins pulp-docker-plugins pulp-ostree-plugins pulp-puppet-plugins pulp-python-plugins python-gofer-qpid

    $ sudo -u apache pulp-manage-db    
    Attempting to connect to localhost:27017
    Attempting to connect to localhost:27017
    Write concern for Mongo connection: {}
    Loading content types.
    Loading type descriptors []
    Parsing type descriptors
    Validating type descriptor syntactic integrity
    Validating type descriptor semantic integrity
    Loading unit model: python_package = pulp_python.plugins.models:Package
    Loading unit model: puppet_module = pulp_puppet.plugins.db.models:Module
    Loading unit model: erratum = pulp_rpm.plugins.db.models:Errata
    Loading unit model: yum_repo_metadata_file = pulp_rpm.plugins.db.models:YumMetadataFile
    Loading unit model: package_group = pulp_rpm.plugins.db.models:PackageGroup
    Loading unit model: package_category = pulp_rpm.plugins.db.models:PackageCategory
    Loading unit model: iso = pulp_rpm.plugins.db.models:ISO
    Loading unit model: package_environment = pulp_rpm.plugins.db.models:PackageEnvironment
    Loading unit model: drpm = pulp_rpm.plugins.db.models:DRPM
    Loading unit model: distribution = pulp_rpm.plugins.db.models:Distribution
    Loading unit model: rpm = pulp_rpm.plugins.db.models:RPM
    Loading unit model: srpm = pulp_rpm.plugins.db.models:SRPM
    Loading unit model: ostree = pulp_ostree.plugins.db.model:Branch
    Loading unit model: docker_blob = pulp_docker.plugins.models:Blob
    Loading unit model: docker_tag = pulp_docker.plugins.models:Tag
    Loading unit model: docker_image = pulp_docker.plugins.models:Image
    Loading unit model: docker_manifest = pulp_docker.plugins.models:Manifest
    Updating the database with types []
    Found the following type definitions that were not present in the update collection [puppet_module, ostree, erratum, python_package, docker_tag, distribution, package_group, docker_blob, package_category, iso, package_environment, drpm, srpm, rpm, yum_repo_metadata_file, docker_image, docker_manifest]
    Updating the database with types [puppet_module, ostree, erratum, python_package, docker_tag, srpm, package_group, docker_blob, package_category, iso, package_environment, drpm, distribution, rpm, yum_repo_metadata_file, docker_image, docker_manifest]
    Content types loaded.
    Ensuring the admin role and user are in place.
    No module named agent.rmi
    Traceback (most recent call last):
      File &quot;/usr/lib/python2.7/site-packages/pulp/server/db/manage.py&quot;, line 193, in main
        return _auto_manage_db(options)
      File &quot;/usr/lib/python2.7/site-packages/pulp/server/db/manage.py&quot;, line 233, in _auto_manage_db
        factory.initialize()
      File &quot;/usr/lib/python2.7/site-packages/pulp/server/managers/factory.py&quot;, line 349, in initialize
        from pulp.server.managers.consumer.agent import AgentManager
      File &quot;/usr/lib/python2.7/site-packages/pulp/server/managers/consumer/agent.py&quot;, line 18, in &lt;module&gt;
        from pulp.server.agent.context import Context
      File &quot;/usr/lib/python2.7/site-packages/pulp/server/agent/context.py&quot;, line 18, in &lt;module&gt;
        from pulp.server.agent.direct.services import ReplyHandler
      File &quot;/usr/lib/python2.7/site-packages/pulp/server/agent/direct/services.py&quot;, line 6, in &lt;module&gt;
        from gofer.rmi.async import ReplyConsumer, Listener
      File &quot;/usr/lib/python2.7/site-packages/gofer/rmi/async.py&quot;, line 24, in &lt;module&gt;
        from gofer.rmi.dispatcher import Reply, Return, RemoteException
      File &quot;/usr/lib/python2.7/site-packages/gofer/rmi/dispatcher.py&quot;, line 28, in &lt;module&gt;
        from gofer.rmi.model import ALL
      File &quot;/usr/lib/python2.7/site-packages/gofer/rmi/model/__init__.py&quot;, line 20, in &lt;module&gt;
        from gofer.rmi.model import direct, fork
      File &quot;/usr/lib/python2.7/site-packages/gofer/rmi/model/fork.py&quot;, line 16, in &lt;module&gt;
        from gofer.rmi.model import parent
      File &quot;/usr/lib/python2.7/site-packages/gofer/rmi/model/parent.py&quot;, line 21, in &lt;module&gt;
        from gofer.agent.rmi import Context
    ImportError: No module named agent.rmi


This issue was also present in the upstream spec file, so I&apos;ve filed an issue there as well: https://pulp.plan.io/issues/1951</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9363804</commentid>
    <comment_count>1</comment_count>
    <who name="Randy Barlow">rbarlow</who>
    <bug_when>2016-05-26 17:45:12 -0400</bug_when>
    <thetext>jortel and I discussed this in #pulp and he determined that this is a bug in gofer. I&apos;ve got this version:

python-gofer-2.8.0-1.fc24.noarch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9365947</commentid>
    <comment_count>2</comment_count>
    <who name="Jeff Ortel">jortel</who>
    <bug_when>2016-05-27 12:11:51 -0400</bug_when>
    <thetext>New feature in 2.8.0 has code in gofer.rmi referencing code in gofer.agent.  The referenced code needed to be moved to gofer.rmi.  The RPM packaging is correct. 

Fixed in gofer-2.8.1.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9365976</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-05-27 12:27:39 -0400</bug_when>
    <thetext>gofer-2.8.1-1.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-84697a9973</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9365978</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-05-27 12:27:46 -0400</bug_when>
    <thetext>gofer-2.8.1-1.fc23 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2016-5d814a5dcc</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9366684</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-05-27 23:24:01 -0400</bug_when>
    <thetext>gofer-2.8.1-1.fc23 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-5d814a5dcc</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9366720</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-05-27 23:25:23 -0400</bug_when>
    <thetext>gofer-2.8.1-1.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-84697a9973</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9405189</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-06-10 22:54:12 -0400</bug_when>
    <thetext>gofer-2.8.1-1.fc23 has been pushed to the Fedora 23 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9430281</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-06-18 14:56:01 -0400</bug_when>
    <thetext>gofer-2.8.1-1.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>