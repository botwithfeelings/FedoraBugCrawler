<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1272394</bug_id>
          
          <creation_ts>2015-10-16 06:24:00 -0400</creation_ts>
          <short_desc>llvm.spec configures build with -O3: needs explanation comment or removal</short_desc>
          <delta_ts>2016-06-05 08:38:55 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>llvm</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Jens Petersen">petersen</reporter>
          <assigned_to name="Adam Jackson">ajax</assigned_to>
          <cc>ajax</cc>
    
    
    <cc>bos</cc>
    
    
    <cc>dmalcolm</cc>
    
    
    <cc>jv+fedora</cc>
    
    
    <cc>nalimilan</cc>
    
    
    <cc>petersen</cc>
    
    
    <cc>scottt.tw</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-06-05 08:38:55</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>8727027</commentid>
    <comment_count>0</comment_count>
    <who name="Jens Petersen">petersen</who>
    <bug_when>2015-10-16 06:24:22 -0400</bug_when>
    <thetext>Description of problem:
The llvm.spec file configures the Fedora llvm build with -O3.
This is probably not a problem as such but there should really
be some explanation of why this is done, or if it is not really
needed it might be better just to drop it?

It seems to have been introduced in this commit:

```
commit be655c46e5d3707531fb8bef5430a9c064653197
Author: Jan Vcelak &lt;jvcelak@fedoraproject.org&gt;
Date:   Tue Nov 12 21:48:50 2013 +0100

    update to 3.3, add compiler-rt and lldb
```

This was noticed while reviewing the llvm35 package.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8730385</commentid>
    <comment_count>1</comment_count>
    <who name="Jan Včelák">jv+fedora</who>
    <bug_when>2015-10-18 16:27:13 -0400</bug_when>
    <thetext>Jens, my comment I sent you on 13 November 2014 in an e-mail:

&gt; I vaguelly remember that the option was mentioned in somewhere in LLVM
&gt; or Clang installation documentation, including some recommended
&gt; values. I don&apos;t think this was my invention as Fedora uses -O2 by
&gt; default and I think that&apos;s reasonable. However I didn&apos;t manage to find
&gt; the documentation now. I think you can safely drop the option.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8730768</commentid>
    <comment_count>2</comment_count>
    <who name="Jens Petersen">petersen</who>
    <bug_when>2015-10-18 23:19:06 -0400</bug_when>
    <thetext>Thank you, Jan, sorry I had forgotten I asked you this before:
appreciate the follow up. :)

Then if no options I propose we drop the -O2 for Fedora 24.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8730771</commentid>
    <comment_count>3</comment_count>
    <who name="Jens Petersen">petersen</who>
    <bug_when>2015-10-18 23:19:44 -0400</bug_when>
    <thetext>(In reply to Jens Petersen from comment #2)
&gt; Then if no options I propose we drop the -O2 for Fedora 24.

Ugh, oops I meant &quot;drop -O3&quot; of course.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8730795</commentid>
    <comment_count>4</comment_count>
    <who name="Jens Petersen">petersen</who>
    <bug_when>2015-10-18 23:35:11 -0400</bug_when>
    <thetext>(I had also forgotten that I did actually drop -O3 from the llvm34 package
at that time - I will probably do the same for llvm35 and maybe nalimilan wants to also for llvm33.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8730796</commentid>
    <comment_count>5</comment_count>
    <who name="Jens Petersen">petersen</who>
    <bug_when>2015-10-18 23:37:08 -0400</bug_when>
    <thetext>(In reply to Jens Petersen from comment #2)
&gt; Then if no options I propose we drop the -O2 for Fedora 24.

Oh dear (I really must check my comments more carefully before posting sorry)

-&gt; &quot;if no objections I propose ...&quot;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8731314</commentid>
    <comment_count>6</comment_count>
    <who name="Milan Bouchet-Valat">nalimilan</who>
    <bug_when>2015-10-19 03:49:07 -0400</bug_when>
    <thetext>I also agree that dropping the -03 option in rawhide is a good idea. For existing releases, better leave things as they are.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8752578</commentid>
    <comment_count>7</comment_count>
    <who name="Milan Bouchet-Valat">nalimilan</who>
    <bug_when>2015-10-25 16:44:06 -0400</bug_when>
    <thetext>I&apos;ve just discovered that LLVM is using -O2 by default, so maybe that&apos;s justified after all. Maybe only an explanatory comment is needed.
See:
https://llvm.org/svn/llvm-project/support/trunk/make/Makefile.common</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8753173</commentid>
    <comment_count>8</comment_count>
    <who name="Jens Petersen">petersen</who>
    <bug_when>2015-10-26 02:49:24 -0400</bug_when>
    <thetext>Milan, sorry, I didn&apos;t get your point?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>8754244</commentid>
    <comment_count>9</comment_count>
    <who name="Milan Bouchet-Valat">nalimilan</who>
    <bug_when>2015-10-26 08:05:25 -0400</bug_when>
    <thetext>Damn, I meant &quot;LLVM is using -O3 by default&quot;.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9092375</commentid>
    <comment_count>10</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-02-24 08:51:01 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 24 development cycle.
Changing version to &apos;24&apos;.

More information and reason for this action is here:
https://fedoraproject.org/wiki/Fedora_Program_Management/HouseKeeping/Fedora24#Rawhide_Rebase</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>