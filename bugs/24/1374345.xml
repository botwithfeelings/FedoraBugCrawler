<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1374345</bug_id>
          
          <creation_ts>2016-09-08 09:16:00 -0400</creation_ts>
          <short_desc>Mate-terminal crashes if I try to detach tab, but then cancel the action</short_desc>
          <delta_ts>2016-11-15 18:22:22 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>mate-terminal</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>low</priority>
          <bug_severity>low</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Sergey Kolosov">skolosov</reporter>
          <assigned_to name="Wolfgang Ulbrich">fedora</assigned_to>
          <cc>fedora</cc>
    
    
    <cc>skolosov</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>mate-terminal-1.16.1-2.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-11-15 18:22:22</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9690730</commentid>
    <comment_count>0</comment_count>
    <who name="Sergey Kolosov">skolosov</who>
    <bug_when>2016-09-08 09:16:40 -0400</bug_when>
    <thetext>Description of problem:
Mate-terminal crashes if I try to detach tab, but then cancel an operation. The terminal crashes only if new tab does not leaving current terminal window.

Version-Release number of selected component (if applicable):
mate-terminal-1.14.1-1.fc24.x86_64

How reproducible:
Run mate-terminal, create new tab, try to detach tab by moving tab, but don&apos;t bringing it out of the current terminal window.

Steps to Reproduce:
1. Run mate-terminal.
2. Create new tab.
3. Try to detach tab by moving it(by pressing and holding mouse button), but don&apos;t bringing it out of the current terminal window, and then release mouse button.
The bug is reproducible only if you don&apos;t moving tab out of current terminal window. If tab was moved out of terminal windows, the tab is detaching, and didn&apos;t crash.

Actual results:
Terminal is crashed.

Expected results:
After mouse button releasing tab must be in initial place.


Additional info:

[user@host ~]$ gdb /usr/bin/mate-terminal
GNU gdb (GDB) Fedora 7.11.1-75.fc24
Copyright (C) 2016 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;x86_64-redhat-linux-gnu&quot;.
Type &quot;show configuration&quot; for configuration details.
For bug reporting instructions, please see:
&lt;http://www.gnu.org/software/gdb/bugs/&gt;.
Find the GDB manual and other documentation resources online at:
&lt;http://www.gnu.org/software/gdb/documentation/&gt;.
For help, type &quot;help&quot;.
Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;...
Reading symbols from /usr/bin/mate-terminal...Reading symbols from /usr/bin/mate-terminal...(no debugging symbols found)...done.
(no debugging symbols found)...done.
Missing separate debuginfos, use: dnf debuginfo-install mate-terminal-1.14.1-1.fc24.x86_64
(gdb) r
Starting program: /usr/bin/mate-terminal 
[Thread debugging using libthread_db enabled]
Using host libthread_db library &quot;/lib64/libthread_db.so.1&quot;.
[New Thread 0x7fffe3c00700 (LWP 12006)]
[New Thread 0x7fffe33ff700 (LWP 12007)]
[New Thread 0x7fffe29ec700 (LWP 12008)]
[New Thread 0x7fffe1fde700 (LWP 12009)]
[New Thread 0x7fffd3fff700 (LWP 12010)]
Detaching after fork from child process 12011.
[Thread 0x7fffe33ff700 (LWP 12007) exited]
[New Thread 0x7fffe33ff700 (LWP 12049)]
Detaching after fork from child process 12050.

(mate-terminal:12002): Gtk-WARNING **: Allocating size to GtkVScrollbar 0x555555b6c3d0 without calling gtk_widget_get_preferred_width/height(). How does the code know the size to allocate?
[Thread 0x7fffe33ff700 (LWP 12049) exited]

(mate-terminal:12002): GLib-GObject-CRITICAL **: g_object_ref: assertion &apos;G_IS_OBJECT (object)&apos; failed

(mate-terminal:12002): Gtk-CRITICAL **: gtk_container_get_focus_child: assertion &apos;GTK_IS_CONTAINER (container)&apos; failed

(mate-terminal:12002): GLib-GObject-CRITICAL **: g_object_unref: assertion &apos;G_IS_OBJECT (object)&apos; failed

(mate-terminal:12002): Gtk-CRITICAL **: gtk_container_get_focus_child: assertion &apos;GTK_IS_CONTAINER (container)&apos; failed
**
Gtk:ERROR:gtkwidget.c:5830:gtk_widget_get_frame_clock: assertion failed: (window != NULL)

Thread 1 &quot;mate-terminal&quot; received signal SIGABRT, Aborted.
0x00007ffff42b16f5 in raise () from /lib64/libc.so.6
(gdb) backtrace 
#0  0x00007ffff42b16f5 in raise () at /lib64/libc.so.6
#1  0x00007ffff42b32fa in abort () at /lib64/libc.so.6
#2  0x00007ffff4e11ec5 in g_assertion_message () at /lib64/libglib-2.0.so.0
#3  0x00007ffff4e11f5a in g_assertion_message_expr () at /lib64/libglib-2.0.so.0
#4  0x00007ffff6ca36ce in  () at /lib64/libgtk-3.so.0
#5  0x00007ffff6ca9017 in gtk_widget_unrealize () at /lib64/libgtk-3.so.0
#6  0x00007ffff6cb49dd in gtk_widget_unparent () at /lib64/libgtk-3.so.0
#7  0x00007ffff6b8e1e7 in gtk_notebook_remove_tab_label.isra () at /lib64/libgtk-3.so.0
#8  0x00007ffff6b8e394 in gtk_notebook_remove () at /lib64/libgtk-3.so.0
#9  0x00007ffff50c3470 in g_cclosure_marshal_VOID__OBJECTv () at /lib64/libgobject-2.0.so.0
#10 0x00007ffff50c0614 in _g_closure_invoke_va () at /lib64/libgobject-2.0.so.0
#11 0x00007ffff50dadd9 in g_signal_emit_valist () at /lib64/libgobject-2.0.so.0
#12 0x00007ffff50db43f in g_signal_emit () at /lib64/libgobject-2.0.so.0
#13 0x00007ffff6a9de75 in gtk_container_remove () at /lib64/libgtk-3.so.0
#14 0x0000555555583a63 in terminal_window_move_screen ()
#15 0x00005555555785d6 in terminal_screen_drag_data_received ()
#16 0x00007ffff6b67004 in _gtk_marshal_VOID__OBJECT_INT_INT_BOXED_UINT_UINT () at /lib64/libgtk-3.so.0
#17 0x00007ffff50c03e5 in g_closure_invoke () at /lib64/libgobject-2.0.so.0
#18 0x00007ffff50d282d in signal_emit_unlocked_R () at /lib64/libgobject-2.0.so.0
#19 0x00007ffff50db05f in g_signal_emit_valist () at /lib64/libgobject-2.0.so.0
#20 0x00007ffff50db8eb in g_signal_emit_by_name () at /lib64/libgobject-2.0.so.0
#21 0x00007ffff6cce4ed in gtk_drag_selection_received () at /lib64/libgtk-3.so.0
#22 0x00007ffff50c03e5 in g_closure_invoke () at /lib64/libgobject-2.0.so.0
#23 0x00007ffff50d2432 in signal_emit_unlocked_R () at /lib64/libgobject-2.0.so.0
#24 0x00007ffff50db05f in g_signal_emit_valist () at /lib64/libgobject-2.0.so.0
#25 0x00007ffff50db8eb in g_signal_emit_by_name () at /lib64/libgobject-2.0.so.0
#26 0x00007ffff6be7c93 in gtk_selection_retrieval_report () at /lib64/libgtk-3.so.0
#27 0x00007ffff6be994d in gtk_selection_convert () at /lib64/libgtk-3.so.0
#28 0x00007ffff6ccfdce in gtk_drag_dest_drop () at /lib64/libgtk-3.so.0
#29 0x00007ffff6ccfa30 in _gtk_drag_dest_handle_event () at /lib64/libgtk-3.so.0
#30 0x00007ffff6b5f4fa in gtk_main_do_event () at /lib64/libgtk-3.so.0
#31 0x00007ffff669a0c5 in _gdk_event_emit () at /lib64/libgdk-3.so.0
#32 0x00007ffff66c70b2 in gdk_event_source_dispatch () at /lib64/libgdk-3.so.0
#33 0x00007ffff4dec6ba in g_main_context_dispatch () at /lib64/libglib-2.0.so.0
#34 0x00007ffff4deca70 in g_main_context_iterate.isra () at /lib64/libglib-2.0.so.0
#35 0x00007ffff4decd92 in g_main_loop_run () at /lib64/libglib-2.0.so.0
#36 0x00007ffff6b5e815 in gtk_main () at /lib64/libgtk-3.so.0
#37 0x0000555555567661 in main ()
(gdb)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9690758</commentid>
    <comment_count>1</comment_count>
    <who name="Wolfgang Ulbrich">fedora</who>
    <bug_when>2016-09-08 09:21:49 -0400</bug_when>
    <thetext>upstream report about
https://github.com/mate-desktop/mate-terminal/issues/131</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9864935</commentid>
    <comment_count>2</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-06 14:32:07 -0500</bug_when>
    <thetext>mate-terminal-1.16.1-2.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-0cf813ffdd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9869538</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-07 20:27:22 -0500</bug_when>
    <thetext>mate-terminal-1.16.1-2.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-0cf813ffdd</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9894620</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-15 18:22:22 -0500</bug_when>
    <thetext>mate-terminal-1.16.1-2.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>