<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1400932</bug_id>
          
          <creation_ts>2016-12-02 05:46:00 -0500</creation_ts>
          <short_desc>Gmond crashes when processing sflow data</short_desc>
          <delta_ts>2016-12-15 22:53:06 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>ganglia</component>
          <version>24</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>urgent</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Glenn L. Jenkins">glenn.l.jenkins</reporter>
          <assigned_to name="Terje Røsten">terjeros</assigned_to>
          <cc>ggillies</cc>
    
    
    <cc>jose.p.oliveira.oss</cc>
    
    
    <cc>k.georgiou</cc>
    
    
    <cc>nick</cc>
    
    
    <cc>terjeros</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>ganglia-3.7.2-12.fc25 ganglia-3.7.2-12.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-12-15 18:30:15</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9950780</commentid>
    <comment_count>0</comment_count>
      <attachid>1227269</attachid>
    <who name="Glenn L. Jenkins">glenn.l.jenkins</who>
    <bug_when>2016-12-02 05:46:30 -0500</bug_when>
    <thetext>Created attachment 1227269
Patch to be added to the SOURCES

Description of problem:

Where ganglia-gmond is used to collect data from sflow (e.g. Windows machines,) the gmond service crashes when an XML file is requested.  This can be re-created using either telnet to the listening port or gstat -a.  This results in a segmentation fault.  

This was reported as an issue in Feb on the ganglia git hub page: https://github.com/ganglia/monitor-core/issues/246

I&apos;ve since submitted details of the problem and how to fix it. 

I&apos;ve attached a patch file, added this to the spec file of my rpm and confirmed that the rpm built with this works as expected with sflow.  

Version-Release number of selected component (if applicable):

ganglia-gmond-3.7.2-11

How reproducible:

Steps to Reproduce:
1. Install ganglia-gmond with default settings
2. Uncomment lines in config file to allow gmond to receive sflow packets
3. Configure another machine to send sflow data
4. Request the gmonds data in xml format, either using telent, gstat or from a gmetad collector. 

Actual results:

Segmentation fault. 

Expected results:

XML file output and the gmond keeps running. 


Additional info:</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9956997</commentid>
    <comment_count>1</comment_count>
    <who name="Glenn L. Jenkins">glenn.l.jenkins</who>
    <bug_when>2016-12-05 12:01:12 -0500</bug_when>
    <thetext>This changes has been accepted on the ganglia git hub - https://github.com/ganglia/monitor-core/pull/275</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9957274</commentid>
    <comment_count>2</comment_count>
    <who name="Terje Røsten">terjeros</who>
    <bug_when>2016-12-05 13:52:26 -0500</bug_when>
    <thetext>hi, thanks for report and fix!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9957399</commentid>
    <comment_count>3</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-05 14:32:50 -0500</bug_when>
    <thetext>ganglia-3.7.2-12.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-be6fca92e9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9957400</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-05 14:33:00 -0500</bug_when>
    <thetext>ganglia-3.7.2-12.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-b5a19c84f6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9962636</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-06 21:26:27 -0500</bug_when>
    <thetext>ganglia-3.7.2-12.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-be6fca92e9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9962726</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-06 21:57:35 -0500</bug_when>
    <thetext>ganglia-3.7.2-12.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-b5a19c84f6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9991655</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-15 18:30:15 -0500</bug_when>
    <thetext>ganglia-3.7.2-12.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9991807</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-15 19:25:30 -0500</bug_when>
    <thetext>ganglia-3.7.2-12.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9992081</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-15 22:53:06 -0500</bug_when>
    <thetext>ganglia-3.7.2-12.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="1"
              isprivate="0"
          >
            <attachid>1227269</attachid>
            <date>2016-12-02 05:46:00 -0500</date>
            <delta_ts>2016-12-02 05:46:30 -0500</delta_ts>
            <desc>Patch to be added to the SOURCES</desc>
            <filename>ganglia-3.7.2-sflow.patch</filename>
            <type>text/plain</type>
            <size>636</size>
            <attacher name="Glenn L. Jenkins">glenn.l.jenkins</attacher>
            
              <data encoding="base64">LS0tIGdtb25kL3NmbG93LmMub3JpZwkyMDE2LTEyLTAyIDA5OjU2OjM4Ljc0NDM1MzYwMCArMDAw
MAorKysgZ21vbmQvc2Zsb3cuYwkyMDE2LTEyLTAyIDA5OjQ3OjQ1LjY2NjM1MzYwMCArMDAwMApA
QCAtMzAzLDcgKzMwMyw4IEBACiAgIGNoYXIgbXRpdGxlX2J1ZltTRkxPV19NQVhfTUVUUklDX05B
TUVfTEVOXTsKICAgaWYob2sgfHwgc2Zsb3dDRkcuc3VibWl0X251bGxfc3RyKSB7CiAgICAgc2V0
X21ldHJpY19uYW1lX2FuZF90aXRsZSgmbW5hbWUsICZtdGl0bGUsIG1uYW1lX2J1ZiwgbXRpdGxl
X2J1ZiwgbWV0cmljX3ByZWZpeCwgdGFnKTsKLSAgICBmbXNnLmlkID0gdm1zZy5pZCA9IGdtZXRy
aWNfdWludDsKKyAgICAvL2Ztc2cuaWQgPSB2bXNnLmlkID0gZ21ldHJpY191aW50OworICAgIGZt
c2cuaWQgPSB2bXNnLmlkID0gZ21ldHJpY19zdHJpbmc7CiAgICAgZm1zZy5HYW5nbGlhX21ldGFk
YXRhX21zZ191LmdmdWxsLm1ldHJpYy50eXBlID0gInN0cmluZyI7CiAgICAgdm1zZy5HYW5nbGlh
X3ZhbHVlX21zZ191LmdzdHIubWV0cmljX2lkLm5hbWUgPSBtbmFtZTsKICAgICB2bXNnLkdhbmds
aWFfdmFsdWVfbXNnX3UuZ3N0ci5zdHIgPSAob2sgPyAoY2hhciAqKXZhbCA6IHNmbG93Q0ZHLm51
bGxfc3RyKTsK
</data>

          </attachment>
      

    </bug>

</bugzilla>