<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1372480</bug_id>
          
          <creation_ts>2016-09-01 17:25:00 -0400</creation_ts>
          <short_desc>Crawl always start in Wizard mode</short_desc>
          <delta_ts>2016-09-21 20:25:26 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>crawl</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Guillaume Poirier-Morency">guillaumepoiriermorency</reporter>
          <assigned_to name="Antonio Trande">anto.trande</assigned_to>
          <cc>anto.trande</cc>
    
    
    <cc>tenk</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>crawl-0.18.1-9.fc25 crawl-0.18.1-9.fc23 crawl-0.18.1-9.fc24</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-09-21 16:22:24</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9673186</commentid>
    <comment_count>0</comment_count>
    <who name="Guillaume Poirier-Morency">guillaumepoiriermorency</who>
    <bug_when>2016-09-01 17:25:24 -0400</bug_when>
    <thetext>Description of problem:

Whether it&apos;s the console or tiles mode, crawl always start in Wizard mode. This is deeply annoying.

Version-Release number of selected component (if applicable):

crawl --version

Crawl version 0.18.1
Save file version 34.169
Compiled with GCC 6.1.1 20160621 (Red Hat 6.1.1-3) on Jul 15 2016 at 17:07:14
Build platform: x86_64-redhat-linux
Platform: x86_64-redhat-linux
CFLAGS: -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic -fPIC -ggdb -pipe -DUSE_SOUND -Wall -Wformat-security -Wundef -Wno-array-bounds -Wno-format-zero-length -Wmissing-declarations -Wredundant-decls -Wno-parentheses -Wwrite-strings -Wshadow -pedantic -Iutil -I. -isystem /usr/include/lua-5.1 -Irltiles -DFULLDEBUG -DDEBUG -DWIZARD -DASSERTS -DCLUA_BINDINGS -DSAVE_DIR_PATH=&quot;~/.crawl&quot; -DSHARED_DIR_PATH=&quot;/usr/share/crawl/dat&quot; -DDATA_DIR_PATH=&quot;/usr/share/crawl/&quot; -D_GNU_SOURCE
LDFLAGS: -rdynamic -O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic -fPIC -Wl,-z,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -fPIC</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9673189</commentid>
    <comment_count>1</comment_count>
    <who name="Guillaume Poirier-Morency">guillaumepoiriermorency</who>
    <bug_when>2016-09-01 17:26:54 -0400</bug_when>
    <thetext>Just noticed that &apos;-DWIZARD&apos; is set in the build flags. It might be a better idea to create a release build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9674658</commentid>
    <comment_count>2</comment_count>
    <who name="Antonio Trande">anto.trande</who>
    <bug_when>2016-09-02 05:51:44 -0400</bug_when>
    <thetext>Okay, i&apos;m working on.
Thank you for reporting.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9675509</commentid>
    <comment_count>3</comment_count>
    <who name="Guillaume Poirier-Morency">guillaumepoiriermorency</who>
    <bug_when>2016-09-02 10:43:00 -0400</bug_when>
    <thetext>(In reply to Antonio Trande from comment #2)
&gt; Okay, i&apos;m working on.
&gt; Thank you for reporting.

Thanks to you, I really enjoy that game and I can&apos;t find any satisfaction to play that mode.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9676158</commentid>
    <comment_count>4</comment_count>
    <who name="Antonio Trande">anto.trande</who>
    <bug_when>2016-09-02 16:07:20 -0400</bug_when>
    <thetext>I have split Crawl w/o wizard mode.
Please, try this new packaging release:
http://koji.fedoraproject.org/koji/taskinfo?taskID=15473215</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9676373</commentid>
    <comment_count>5</comment_count>
    <who name="Guillaume Poirier-Morency">guillaumepoiriermorency</who>
    <bug_when>2016-09-02 18:49:10 -0400</bug_when>
    <thetext>(In reply to Antonio Trande from comment #4)
&gt; I have split Crawl w/o wizard mode.
&gt; Please, try this new packaging release:
&gt; http://koji.fedoraproject.org/koji/taskinfo?taskID=15473215

There&apos;s a runtime flag for starting Crawl in Wizard mode, so I don&apos;t think it&apos;s relevant to provide a package. It&apos;s more like a handy flag for development and testing.

I&apos;ll test the package and give you feedback in a moment...</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9676415</commentid>
    <comment_count>6</comment_count>
    <who name="Guillaume Poirier-Morency">guillaumepoiriermorency</who>
    <bug_when>2016-09-02 19:25:12 -0400</bug_when>
    <thetext>It works.

However, I&apos;ve been digging in the source code and figured that -DWIZARD does not do anything. In fact, when -DFULLDEBUG is set, additional macros are defined to start the game in Wizard mode. See here: 

https://github.com/crawl/crawl/blob/d3c2e7f83eef8ed54e865de4a63ac7700a4a7d68/crawl-ref/source/AppHdr.h#L313

Also, the specfile has a debug macro to trigger a debug build.

If that&apos;s okay, I think it&apos;s fine to push the package in updates-testing.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9676877</commentid>
    <comment_count>7</comment_count>
    <who name="Antonio Trande">anto.trande</who>
    <bug_when>2016-09-03 06:04:48 -0400</bug_when>
    <thetext>&gt;There&apos;s a runtime flag for starting Crawl in Wizard mode, so I don&apos;t think it&apos;s &gt;relevant to provide a package. It&apos;s more like a handy flag for development and &gt;testing.

What is the runtime flag for starting Crawl in Wizard mode?
We can definitively build only with NOWIZARD=y option and use the runtime flag for starting the wizard.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9677175</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-03 15:24:09 -0400</bug_when>
    <thetext>crawl-0.18.1-8.fc23 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2016-9a3a730e3e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9677176</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-03 15:24:15 -0400</bug_when>
    <thetext>crawl-0.18.1-8.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-29751ab58d</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9677177</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-03 15:24:19 -0400</bug_when>
    <thetext>crawl-0.18.1-8.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-5971161bd8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9677231</commentid>
    <comment_count>11</comment_count>
    <who name="Guillaume Poirier-Morency">guillaumepoiriermorency</who>
    <bug_when>2016-09-03 19:09:38 -0400</bug_when>
    <thetext>(In reply to Antonio Trande from comment #7)
&gt; &gt;There&apos;s a runtime flag for starting Crawl in Wizard mode, so I don&apos;t think it&apos;s &gt;relevant to provide a package. It&apos;s more like a handy flag for development and &gt;testing.
&gt; 
&gt; What is the runtime flag for starting Crawl in Wizard mode?
&gt; We can definitively build only with NOWIZARD=y option and use the runtime
&gt; flag for starting the wizard.

I was mistaken with -wizard, but it only enables access to the Wizard mode if it&apos;s built with -DUSE_DGAMELAUNCH, which is basically a safety for the *multiplayer* mode.

Basically, I think that the issue is only with -DFULLDEBUG which is added if the %{with debug} macro is set while building the RPM.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9677533</commentid>
    <comment_count>12</comment_count>
    <who name="Antonio Trande">anto.trande</who>
    <bug_when>2016-09-04 06:15:48 -0400</bug_when>
    <thetext>In the end, can you run Crawl w/o wizard mode with latest release?

PS.
Sorry i can&apos;t try now.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9677935</commentid>
    <comment_count>13</comment_count>
    <who name="Guillaume Poirier-Morency">guillaumepoiriermorency</who>
    <bug_when>2016-09-04 16:56:46 -0400</bug_when>
    <thetext>(In reply to Antonio Trande from comment #12)
&gt; In the end, can you run Crawl w/o wizard mode with latest release?
&gt; 
&gt; PS.
&gt; Sorry i can&apos;t try now.

Yes, everything is fine now from a end-user perspective. Thanks for the fix, I really appreciate.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9678274</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-04 22:51:40 -0400</bug_when>
    <thetext>crawl-0.18.1-8.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-29751ab58d</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9678284</commentid>
    <comment_count>15</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-04 22:53:06 -0400</bug_when>
    <thetext>crawl-0.18.1-8.fc23 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-9a3a730e3e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9678293</commentid>
    <comment_count>16</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-04 22:56:48 -0400</bug_when>
    <thetext>crawl-0.18.1-8.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-5971161bd8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9682101</commentid>
    <comment_count>17</comment_count>
    <who name="">tenk</who>
    <bug_when>2016-09-06 07:49:22 -0400</bug_when>
    <thetext>With this fix, is it still possible to enter in wizard mode during the game?

I have read in crawl documentation that you can enter in wizard mode in the game by typing &apos;&amp;&apos; inside the game.
http://crawl.chaosforge.org/Wizard_mode

In stable fc24 without the patch, game start directly in wizard mode and you can use Wizard command to add gold for example.
In fc24 with the patch, game start without Wizard mode as expected, but i am unable to enter in Wizard mode in game (and use Wizard command).

I have done this test on F24/f25 testing with this patch.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9682360</commentid>
    <comment_count>18</comment_count>
    <who name="Antonio Trande">anto.trande</who>
    <bug_when>2016-09-06 08:48:40 -0400</bug_when>
    <thetext>(In reply to tenk42 from comment #17)
&gt; With this fix, is it still possible to enter in wizard mode during the game?
&gt; 
&gt; I have read in crawl documentation that you can enter in wizard mode in the
&gt; game by typing &apos;&amp;&apos; inside the game.
&gt; http://crawl.chaosforge.org/Wizard_mode
&gt; 
&gt; In stable fc24 without the patch, game start directly in wizard mode and you
&gt; can use Wizard command to add gold for example.
&gt; In fc24 with the patch, game start without Wizard mode as expected, but i am
&gt; unable to enter in Wizard mode in game (and use Wizard command).
&gt; 
&gt; I have done this test on F24/f25 testing with this patch.

I contacted upstream to clarify this issue.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9687372</commentid>
    <comment_count>19</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-07 11:55:18 -0400</bug_when>
    <thetext>crawl-0.18.1-9.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-398fb6c542</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9687374</commentid>
    <comment_count>20</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-07 11:55:25 -0400</bug_when>
    <thetext>crawl-0.18.1-9.fc23 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2016-59b3060e7e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9687375</commentid>
    <comment_count>21</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-07 11:55:30 -0400</bug_when>
    <thetext>crawl-0.18.1-9.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-3da03788a9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9692890</commentid>
    <comment_count>22</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-09 02:26:46 -0400</bug_when>
    <thetext>crawl-0.18.1-9.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-398fb6c542</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9695072</commentid>
    <comment_count>23</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-09 13:57:21 -0400</bug_when>
    <thetext>crawl-0.18.1-9.fc23 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-59b3060e7e</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9698972</commentid>
    <comment_count>24</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-12 09:19:26 -0400</bug_when>
    <thetext>crawl-0.18.1-9.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9699682</commentid>
    <comment_count>25</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-12 11:28:47 -0400</bug_when>
    <thetext>crawl-0.18.1-9.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-3da03788a9</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9731577</commentid>
    <comment_count>26</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-21 16:22:24 -0400</bug_when>
    <thetext>crawl-0.18.1-9.fc23 has been pushed to the Fedora 23 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9732103</commentid>
    <comment_count>27</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-09-21 20:25:26 -0400</bug_when>
    <thetext>crawl-0.18.1-9.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>