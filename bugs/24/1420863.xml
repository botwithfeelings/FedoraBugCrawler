<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1420863</bug_id>
          
          <creation_ts>2017-02-09 11:43:00 -0500</creation_ts>
          <short_desc>gnome-terminal abort with long variable assignment</short_desc>
          <delta_ts>2017-02-28 13:27:20 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>gtk3</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Zbigniew Jędrzejewski-Szmek">zbyszek</reporter>
          <assigned_to name="Matthias Clasen">mclasen</assigned_to>
          <cc>cosimo.cecchi</cc>
    
    
    <cc>debarshir</cc>
    
    
    <cc>egmont</cc>
    
    
    <cc>mclasen</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-02-28 13:27:20</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>10135233</commentid>
    <comment_count>0</comment_count>
    <who name="Zbigniew Jędrzejewski-Szmek">zbyszek</who>
    <bug_when>2017-02-09 11:43:55 -0500</bug_when>
    <thetext>Description of problem:
gnome-terminal aborts reliably when I execute the following command:

TESTS=&quot;test-daemon test-log test-loopback test-engine test-watchdog test-cgroup-mask test-job-type test-env-util test-strbuf test-strv test-path test-path-util test-strxcpyx test-siphash24 test-unit-name test-unit-file test-utf8 test-ellipsize test-util test-mount-util test-cpu-set-util test-hexdecoct test-escape test-alloc-util test-proc-cmdline test-io-util test-glob-util test-xattr-util test-fs-util test-web-util test-stat-util test-fd-util test-string-util test-extract-word test-parse-util test-user-util test-hostname-util test-process-util test-terminal-util test-path-lookup test-barrier test-tmpfiles test-namespace test-date test-sleep test-replace-var test-sched-prio test-calendarspec test-strip-tab-ansi test-cgroup-util test-fstab-util test-prioq test-fileio test-time test-clock test-hashmap test-set test-bitmap test-list test-unaligned test-tables test-device-nodes test-xml test-architecture test-socket-util test-fdset test-conf-files test-conf-parser test-capability test-async test-ratelimit test-condition test-uid-range test-locale-util test-execute test-copy test-cap-list test-sigbus test-verbs test-af-list test-arphrd-list test-dns-domain test-install-root test-rlimit-util test-signal-util test-selinux test-sizeof test-acl-util  test-boot-timestamps test-bus-marshal test-bus-signature test-bus-benchmark test-bus-chat test-bus-cleanup test-bus-server test-bus-match test-bus-kernel test-bus-kernel-bloom test-bus-zero-copy test-bus-introspect test-bus-objects test-bus-error test-bus-creds test-bus-gvariant test-bus-track test-event test-netlink test-local-addresses test-resolve test-dhcp-option test-dhcp-client test-dhcp-server test-ipv4ll test-ndisc-rs test-dhcp6-client test-lldp test-libudev test-id128 test-hash test-journal test-journal-enum test-journal-send test-journal-syslog test-journal-match test-journal-stream test-journal-init test-journal-verify test-journal-interleaving test-journal-flush test-mmap-cache test-catalog test-audit-type test-compress test-compress-benchmark test-keymap-util test-machine-tables test-dns-packet test-resolve-tables test-dnssec test-networkd-conf test-network test-network-tables test-login-tables test-login-shared test-libsystemd-sym test-libudev-sym&quot;
TESTS=test-daemon test-log test-loopback test-engine test-watchdog test-cgroup-mask test-job-type test-env-util test-strbuf test-strv test-path test-path-util test-strxcpyx test-siphash24 test-unit-name test-unit-file test-utf8 test-ellipsize test-util test-mount-util test-cpu-set-util test-hexdecoct test-escape test-alloc-util test-proc-cmdline test-io-util test-glob-util test-xattr-util test-fs-util test-web-util test-stat-util test-fd-util test-string-util test-extract-word test-parse-util test-user-util test-hostname-util test-process-util test-terminal-util test-path-lookup test-barrier test-tmpfiles test-namespace test-date test-sleep test-replace-var test-sched-prio test-calendarspec test-strip-tab-ansi test-cgroup-util test-fstab-util test-prioq test-fileio test-time test-clock test-hashmap test-set test-bitmap test-list test-unaligned test-tables test-device-nodes test-xml test-architecture test-socket-util test-fdset test-conf-files test-conf-parser test-capability test-async test-ratelimit test-condition test-uid-range test-locale-util test-execute test-copy test-cap-list test-sigbus test-verbs test-af-list test-arphrd-list test-dns-domain test-install-root test-rlimit-util test-signal-util test-selinux test-sizeof test-acl-util  test-boot-timestamps test-bus-marshal test-bus-signature test-bus-benchmark test-bus-chat test-bus-cleanup test-bus-server test-bus-match test-bus-kernel test-bus-kernel-bloom test-bus-zero-copy test-bus-introspect test-bus-objects test-bus-error test-bus-creds test-bus-gvariant test-bus-track test-event test-netlink test-local-addresses test-resolve test-dhcp-option test-dhcp-client test-dhcp-server test-ipv4ll test-ndisc-rs test-dhcp6-client test-lldp test-libudev test-id128 test-hash test-journal test-journal-enum test-journal-send test-journal-syslog test-journal-match test-journal-stream test-journal-init test-journal-verify test-journal-interleaving test-journal-flush test-mmap-cache test-catalog test-audit-type test-compress test-compress-benchmark test-keymap-util test-machine-tables test-dns-packet test-resolve-tables test-dnssec test-networkd-conf test-network test-network-tables test-login-tables test-login-shared test-libsystemd-sym test-libudev-sym

Version-Release number of selected component (if applicable):
gnome-terminal-3.20.3-1.fc24.x86_64
gnome-shell-3.20.4-3.fc24.x86_64, under wayland

How reproducible:
100%

Steps to Reproduce:
1. paste the line into any gnome-terminal window
2. immediate crash

Looks like some buffer overflow somewhere.

(gdb) bt
#0  0x00007ffff44b9765 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54
#1  0x00007ffff44bb36a in __GI_abort () at abort.c:89
#2  0x00007ffff0e4b9bf in wl_abort (fmt=&lt;optimized out&gt;) at src/wayland-util.c:398
#3  0x00007ffff0e47c35 in wl_proxy_marshal_array_constructor_versioned (proxy=proxy@entry=0x555555ccaf80, opcode=opcode@entry=2, args=args@entry=0x7fffffffcf70, interface=interface@entry=0x0, version=1) at src/wayland-client.c:646
#4  0x00007ffff0e47c89 in wl_proxy_marshal_array_constructor (proxy=proxy@entry=0x555555ccaf80, opcode=opcode@entry=2, args=args@entry=0x7fffffffcf70, interface=interface@entry=0x0) at src/wayland-client.c:586
#5  0x00007ffff0e47d7c in wl_proxy_marshal (proxy=0x555555ccaf80, opcode=2) at src/wayland-client.c:683
#6  0x00007ffff70da397 in gtk_window_set_title_internal (window=0x5555558944b0 [TerminalWindow], title=&lt;optimized out&gt;, update_titlebar=1) at gtkwindow.c:2325
#10 0x00007ffff54f743f in &lt;emit signal notify:title on instance 0x555555b195d0 [TerminalScreen]&gt; (instance=instance@entry=0x555555b195d0, signal_id=&lt;optimized out&gt;, detail=&lt;optimized out&gt;) at gsignal.c:3441
    #7  0x00007ffff54dc3e5 in g_closure_invoke (closure=0x555555bfa400, return_value=return_value@entry=0x0, n_param_values=2, param_values=param_values@entry=0x7fffffffd2d0, invocation_hint=invocation_hint@entry=0x7fffffffd250) at gclosure.c:804
    #8  0x00007ffff54ee432 in signal_emit_unlocked_R (node=node@entry=0x5555557e5790, detail=detail@entry=708, instance=instance@entry=0x555555b195d0, emission_return=emission_return@entry=0x0, instance_and_params=instance_and_params@entry=0x7fffffffd2d0) at gsignal.c:3629
    #9  0x00007ffff54f705f in g_signal_emit_valist (instance=&lt;optimized out&gt;, signal_id=&lt;optimized out&gt;, detail=&lt;optimized out&gt;, var_args=var_args@entry=0x7fffffffd4a0) at gsignal.c:3385
#11 0x00007ffff54e0814 in g_object_dispatch_properties_changed (object=0x555555b195d0 [TerminalScreen], n_pspecs=&lt;optimized out&gt;, pspecs=&lt;optimized out&gt;) at gobject.c:1062
#12 0x00007ffff54e00b6 in g_object_notify_queue_thaw (object=object@entry=0x555555b195d0 [TerminalScreen], nqueue=nqueue@entry=0x555555db25b0) at gobject.c:296
#13 0x00007ffff54e2eab in g_object_thaw_notify (object=0x555555b195d0 [TerminalScreen]) at gobject.c:1299
#14 0x00007ffff7ba8fd5 in VteTerminalPrivate::process_incoming() (this=this@entry=0x555555b175b0) at vte.cc:4033
#15 0x00007ffff7ba9d91 in VteTerminalPrivate::time_process_incoming() (this=this@entry=0x555555b175b0) at vte.cc:10670
#16 0x00007ffff7ba9e78 in VteTerminalPrivate::process(bool) (this=this@entry=0x555555b175b0, emit_adj_changed=emit_adj_changed@entry=false) at vte.cc:10694
#17 0x00007ffff7ba9ede in process_timeout(gpointer) (data=&lt;error reading variable: value has been optimized out&gt;) at vte.cc:10736
#18 0x00007ffff5209133 in g_timeout_dispatch (source=0x555555d89100, callback=&lt;optimized out&gt;, user_data=&lt;optimized out&gt;) at gmain.c:4577
#19 0x00007ffff52086ba in g_main_context_dispatch (context=0x5555557e7c90) at gmain.c:3154
#20 0x00007ffff52086ba in g_main_context_dispatch (context=context@entry=0x5555557e7c90) at gmain.c:3769
#21 0x00007ffff5208a70 in g_main_context_iterate (context=context@entry=0x5555557e7c90, block=block@entry=1, dispatch=dispatch@entry=1, self=&lt;optimized out&gt;) at gmain.c:3840
#22 0x00007ffff5208b1c in g_main_context_iteration (context=context@entry=0x5555557e7c90, may_block=may_block@entry=1) at gmain.c:3901
#23 0x00007ffff57cb48d in g_application_run (application=0x7fffdc00e620 [TerminalApp], argc=0, argv=0x0) at gapplication.c:2381
#24 0x0000555555568e4e in main (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;) at server.c:180

(gdb) bt full
#0  0x00007ffff44b9765 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54
        resultvar = 0
        pid = 9938
        selftid = 9938
#1  0x00007ffff44bb36a in __GI_abort () at abort.c:89
        save_stage = 2
        act = {__sigaction_handler = {sa_handler = 0x0, sa_sigaction = 0x0}, sa_mask = {__val = {140737332190190, 1, 0, 93824994801915, 140737488342320, 30064771074, 0, 0, 0, 21474836480, 140737293376868, 140737488342472, 12103457169668740864, 140737293396608, 93825000975856, 0}}, sa_flags = 0, sa_restorer = 0x1}
        sigs = {__val = {32, 0 &lt;repeats 15 times&gt;}}
#2  0x00007ffff0e4b9bf in wl_abort (fmt=&lt;optimized out&gt;) at src/wayland-util.c:398
Python Exception &lt;class &apos;gdb.error&apos;&gt; Attempt to dereference a generic pointer.: 
#3  0x00007ffff0e47c35 in wl_proxy_marshal_array_constructor_versioned (proxy=proxy@entry=0x555555ccaf80, opcode=opcode@entry=2, args=args@entry=0x7fffffffcf70, interface=interface@entry=0x0, version=1) at src/wayland-client.c:646
        closure = 0x555555daadf0
        new_proxy = 0x0
        message = 0x7ffff6d599f0 &lt;xdg_surface_requests+48&gt;
#4  0x00007ffff0e47c89 in wl_proxy_marshal_array_constructor (proxy=proxy@entry=0x555555ccaf80, opcode=opcode@entry=2, args=args@entry=0x7fffffffcf70, interface=interface@entry=0x0) at src/wayland-client.c:586
#5  0x00007ffff0e47d7c in wl_proxy_marshal (proxy=0x555555ccaf80, opcode=2) at src/wayland-client.c:683
        args = {{i = 1440867648, u = 1440867648, f = 1440867648, s = 0x555555e1e540 &quot;zbyszek@bupkis: TESTS=\&quot;test-daemon test-log test-loopback test-engine test-watchdog test-cgroup-mask test-job-type test-env-util test-strbuf test-strv test-path test-path-util test-strxcpyx test-sipha&quot;..., o = 0x555555e1e540, n = 1440867648, a = 0x555555e1e540, h = 1440867648}, {i = 4512, u = 4512, f = 4512, s = 0x11a0 &lt;error: Cannot access memory at address 0x11a0&gt;, o = 0x11a0, n = 4512, a = 0x11a0, h = 4512}, {i = 1, u = 1, f = 1, s = 0x1 &lt;error: Cannot access memory at address 0x1&gt;, o = 0x1, n = 1, a = 0x1, h = 1}, {i = -11568, u = 4294955728, f = -11568, s = 0x7fffffffd2d0 &quot;\320&gt;\235UUU&quot;, o = 0x7fffffffd2d0, n = 4294955728, a = 0x7fffffffd2d0, h = -11568}, {i = -11696, u = 4294955600, f = -11696, s = 0x7fffffffd250 &quot;\001&quot;, o = 0x7fffffffd250, n = 4294955600, a = 0x7fffffffd250, h = -11696}, {i = -196066603, u = 4098900693, f = -196066603, s = 0x7ffff45042d5 &lt;_int_malloc+341&gt; &quot;L\211\340L\211\347L\215mXH\301\350\006H\301\357\tL\211\341H\211D$@\203\300\060H\211|$P\211D$L\203\307[D\211\340\301\350\004\211|$`H\215\274$\200&quot;, o = 0x7ffff45042d5 &lt;_int_malloc+341&gt;, n = 4098900693, a = 0x7ffff45042d5 &lt;_int_malloc+341&gt;, h = -196066603}, {i = 99, u = 99, f = 99, s = 0x63 &lt;error: Cannot access memory at address 0x63&gt;, o = 0x63, n = 99, a = 0x63, h = 99}, {i = -12256, u = 4294955040, f = -12256, s = 0x7fffffffd020 &quot;c&quot;, o = 0x7fffffffd020, n = 4294955040, a = 0x7fffffffd020, h = -12256}, {i = 4494, u = 4494, f = 4494, s = 0x118e &lt;error: Cannot access memory at address 0x118e&gt;, o = 0x118e, n = 4494, a = 0x118e, h = 4494}, {i = -12257, u = 4294955039, f = -12257, s = 0x7fffffffd01f &quot;\247c&quot;, o = 0x7fffffffd01f, n = 4294955039, a = 0x7fffffffd01f, h = -12257}, {i = 99, u = 99, f = 99, s = 0x63 &lt;error: Cannot access memory at address 0x63&gt;, o = 0x63, n = 99, a = 0x63, h = 99}, {i = -12224, u = 4294955072, f = -12224, s = 0x7fffffffd040 &quot;\200\356\377\377\377\377\377\377p\356\377\377\377\377\377\377\216\021&quot;, o = 0x7fffffffd040, n = 4294955072, a = 0x7fffffffd040, h = -12224}, {i = 4494, u = 4494, f = 4494, s = 0x118e &lt;error: Cannot access memory at address 0x118e&gt;, o = 0x118e, n = 4494, a = 0x118e, h = 4494}, {i = 12257, u = 12257, f = 12257, s = 0xffff800000002fe1 &lt;error: Cannot access memory at address 0xffff800000002fe1&gt;, o = 0xffff800000002fe1, n = 12257, a = 0xffff800000002fe1, h = 12257}, {i = 70, u = 70, f = 70, s = 0x46 &lt;error: Cannot access memory at address 0x46&gt;, o = 0x46, n = 70, a = 0x46, h = 70}, {i = 282, u = 282, f = 282, s = 0x760000011a &lt;error: Cannot access memory at address 0x760000011a&gt;, o = 0x760000011a, n = 282, a = 0x760000011a, h = 282}, {i = 8, u = 8, f = 8, s = 0x8 &lt;error: Cannot access memory at address 0x8&gt;, o = 0x8, n = 8, a = 0x8, h = 8}, {i = 1, u = 1, f = 1, s = 0x1 &lt;error: Cannot access memory at address 0x1&gt;, o = 0x1, n = 1, a = 0x1, h = 1}, {i = 99, u = 99, f = 99, s = 0x6f00000063 &lt;error: Cannot access memory at address 0x6f00000063&gt;, o = 0x6f00000063, n = 99, a = 0x6f00000063, h = 99}, {i = 0, u = 0, f = 0, s = 0x0, o = 0x0, n = 0, a = 0x0, h = 0}}
Python Exception &lt;class &apos;gdb.error&apos;&gt; Attempt to dereference a generic pointer.: 
#6  0x00007ffff70da397 in gtk_window_set_title_internal (window=0x5555558944b0 [TerminalWindow], title=&lt;optimized out&gt;, update_titlebar=1) at gtkwindow.c:2325
        priv = 0x555555894270
        widget = 0x5555558944b0 [TerminalWindow]
        new_title = 0x555555e1d3a0 &quot;zbyszek@bupkis: TESTS=\&quot;test-daemon test-log test-loopback test-engine test-watchdog test-cgroup-mask test-job-type test-env-util test-strbuf test-strv test-path test-path-util test-strxcpyx test-sipha&quot;...
        __func__ = &quot;gtk_window_set_title_internal&quot;
#10 0x00007ffff54f743f in &lt;emit signal notify:title on instance 0x555555b195d0 [TerminalScreen]&gt; (instance=instance@entry=0x555555b195d0, signal_id=&lt;optimized out&gt;, detail=&lt;optimized out&gt;) at gsignal.c:3441
Python Exception &lt;class &apos;gdb.error&apos;&gt; Attempt to dereference a generic pointer.: 
#11 0x00007ffff54e0814 in g_object_dispatch_properties_changed (object=0x555555b195d0 [TerminalScreen], n_pspecs=&lt;optimized out&gt;, pspecs=&lt;optimized out&gt;) at gobject.c:1062
        i = &lt;optimized out&gt;
#12 0x00007ffff54e00b6 in g_object_notify_queue_thaw (object=object@entry=0x555555b195d0 [TerminalScreen], nqueue=nqueue@entry=0x555555db25b0) at gobject.c:296
        pspecs_mem = {0x555555aef090 [GParamString], 0x5555558461b0 [GParamBoolean], 0x555555aef360 [GParamString], 0x555555aef120 [GParamString], 0x555555aef3f0 [GParamString], 0x14, 0x18b5, 0x39, 0x555555b195e0, 0x0, 0x0, 0x7ffff51ecc48, 0x555555b195d0 [TerminalScreen], 0x555555b195d0 [TerminalScreen], 0x555555b195d0 [TerminalScreen], 0x555555b195e0}
        pspecs = 0x7fffffffd5b0
        free_me = 0x0
        slist = &lt;optimized out&gt;
        n_pspecs = 5
        __func__ = &quot;g_object_notify_queue_thaw&quot;
#13 0x00007ffff54e2eab in g_object_thaw_notify (object=0x555555b195d0 [TerminalScreen]) at gobject.c:1299
        nqueue = 0x555555db25b0
        __func__ = &quot;g_object_thaw_notify&quot;
#14 0x00007ffff7ba8fd5 in VteTerminalPrivate::process_incoming() (this=this@entry=0x555555b175b0) at vte.cc:4033
        saved_cursor = &lt;optimized out&gt;
        saved_cursor_visible = &lt;optimized out&gt;
        saved_cursor_style = &lt;optimized out&gt;
        bbox_topleft = &lt;optimized out&gt;
        bbox_bottomright = &lt;optimized out&gt;
        wbuf = 0x555555de5720
        c = &lt;optimized out&gt;
        wcount = 6325
        start = &lt;optimized out&gt;
        leftovers = &lt;optimized out&gt;
        modified = &lt;optimized out&gt;
        bottom = &lt;optimized out&gt;
        again = 0
        invalidated_text = &lt;optimized out&gt;
        in_scroll_region = &lt;optimized out&gt;
        chunk = &lt;optimized out&gt;
        next_chunk = &lt;optimized out&gt;
        achunk = &lt;optimized out&gt;
        previous_screen = &lt;optimized out&gt;
        top_row = &lt;optimized out&gt;
        bottom_row = 23
        __PRETTY_FUNCTION__ = &quot;void VteTerminalPrivate::process_incoming()&quot;
#15 0x00007ffff7ba9d91 in VteTerminalPrivate::time_process_incoming() (this=this@entry=0x555555b175b0) at vte.cc:10670
        elapsed = &lt;optimized out&gt;
        target = &lt;optimized out&gt;
#16 0x00007ffff7ba9e78 in VteTerminalPrivate::process(bool) (this=this@entry=0x555555b175b0, emit_adj_changed=emit_adj_changed@entry=false) at vte.cc:10694
        is_active = &lt;optimized out&gt;
#17 0x00007ffff7ba9ede in process_timeout(gpointer) (data=&lt;error reading variable: value has been optimized out&gt;) at vte.cc:10736
        that = 0x555555b175b0
        active = &lt;optimized out&gt;
        l = &lt;optimized out&gt;
        next = 0x0
        again = &lt;optimized out&gt;
#18 0x00007ffff5209133 in g_timeout_dispatch (source=0x555555d89100, callback=&lt;optimized out&gt;, user_data=&lt;optimized out&gt;) at gmain.c:4577
        timeout_source = 0x555555d89100
        again = &lt;optimized out&gt;
#19 0x00007ffff52086ba in g_main_context_dispatch (context=0x5555557e7c90) at gmain.c:3154
        dispatch = 0x7ffff5209120 &lt;g_timeout_dispatch&gt;
        prev_source = 0x0
        was_in_call = 0
        user_data = 0x0
        callback = 0x7ffff7ba9ea0 &lt;process_timeout(gpointer)&gt;
        cb_funcs = 0x7ffff54cc280 &lt;g_source_callback_funcs&gt;
        cb_data = 0x555555db2270
        need_destroy = &lt;optimized out&gt;
        source = 0x555555d89100
        current = 0x5555558214b0
        i = 0
#20 0x00007ffff52086ba in g_main_context_dispatch (context=context@entry=0x5555557e7c90) at gmain.c:3769
#21 0x00007ffff5208a70 in g_main_context_iterate (context=context@entry=0x5555557e7c90, block=block@entry=1, dispatch=dispatch@entry=1, self=&lt;optimized out&gt;) at gmain.c:3840
        max_priority = 2147483647
        timeout = 2
        some_ready = 1
        nfds = 4
        allocated_nfds = 4
        fds = &lt;optimized out&gt;
#22 0x00007ffff5208b1c in g_main_context_iteration (context=context@entry=0x5555557e7c90, may_block=may_block@entry=1) at gmain.c:3901
        retval = &lt;optimized out&gt;
#23 0x00007ffff57cb48d in g_application_run (application=0x7fffdc00e620 [TerminalApp], argc=0, argv=0x0) at gapplication.c:2381
        arguments = 0x55555584b440
        status = 0
        context = 0x5555557e7c90
        acquired_context = &lt;optimized out&gt;
        __func__ = &quot;g_application_run&quot;
#24 0x0000555555568e4e in main (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;) at server.c:180
        app = 0x7fffdc00e620 [TerminalApp]
        home_dir = &lt;optimized out&gt;
        charset = 0x5555557c82b0 &quot;UTF-8&quot;
        error = 0x0</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10135727</commentid>
    <comment_count>1</comment_count>
    <who name="Egmont Koblinger">egmont</who>
    <bug_when>2017-02-09 13:55:52 -0500</bug_when>
    <thetext>Which one of those two huge paragraphs to paste? They differ in a pair of quotes. The first is a variable assignment. The second tries to launch the command &quot;test-log&quot; with a short TESTS environment variable and tons of parameters.

I cannot reproduce the crash on Ubuntu, X11.

Maybe wayland doesn&apos;t like overlong window titles? Or does it have something to do with some Red Hat patch? Dunno.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10135760</commentid>
    <comment_count>2</comment_count>
    <who name="Zbigniew Jędrzejewski-Szmek">zbyszek</who>
    <bug_when>2017-02-09 14:20:04 -0500</bug_when>
    <thetext>It&apos;s one whole thing, with two lines. Those programs don&apos;t get executed, because this also crashes gnome-terminal when I run it in some other directory. I wasn&apos;t pasting it, but just going back in history. Might be some interaction with zsh which is trying to set the window title.

In the traceback I pasted, gtk_window_set_title_internal is called with a reaaally long name. I assume that this could be reproduced by calling the title setting escapes directly.

&gt; Maybe wayland doesn&apos;t like overlong window titles? Or does it have something to do with some Red Hat patch? Dunno.

Patches for gnome-terminal are at https://apps.fedoraproject.org/packages/gnome-terminal/sources/patches/.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10135888</commentid>
    <comment_count>3</comment_count>
    <who name="Egmont Koblinger">egmont</who>
    <bug_when>2017-02-09 15:21:11 -0500</bug_when>
    <thetext>&gt; It&apos;s one whole thing, with two lines.

Which one of the two crashes gnome-terminal? (I guess either one does.)

&gt; I assume that this could be reproduced by calling the title setting escapes directly.

That&apos;s what I tried, no crash for me.

&gt; Might be some interaction with zsh which is trying to set the window title.

Could you disable this zsh feature (e.g. start bash) and manually set a long title:

  echo -ne &apos;\e]0;reaaally long name\a&apos;; sleep 10

Does it make gnome-terminal crash? If so, what&apos;s approximately the number of characters where it starts crashing?

Could you please try it with vanilla gnome-terminal, or Red Hat package rebuilt without the transparency+notification patch?

Independently of the previous: could you, by any chance, test the behavior under X11 instead of Wayland?

Thanks!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10135892</commentid>
    <comment_count>4</comment_count>
    <who name="Egmont Koblinger">egmont</who>
    <bug_when>2017-02-09 15:22:17 -0500</bug_when>
    <thetext>(Obviously I meant the command by actually replacing that string with an extremely long title.)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10136206</commentid>
    <comment_count>5</comment_count>
    <who name="Zbigniew Jędrzejewski-Szmek">zbyszek</who>
    <bug_when>2017-02-09 17:15:44 -0500</bug_when>
    <thetext>(In reply to Egmont Koblinger from comment #3)
&gt; &gt; It&apos;s one whole thing, with two lines.
&gt; 
&gt; Which one of the two crashes gnome-terminal? (I guess either one does.)
zsh supported multi-line history entries. So when I go back in history using up arrow, and press enter, both lines are visible and would be executed after I press enter. It seems that both are required.

&gt; &gt; I assume that this could be reproduced by calling the title setting escapes directly.
&gt; 
&gt; That&apos;s what I tried, no crash for me.
Yes, I now tried that too, and no... oh, wait, now I got it ;)
I&apos;ll describe the steps below.

I don&apos;t know if this is relevant, but it might be: zsh uses the &quot;bracketed terminal paste mode&quot;, while bash does not.
 
&gt; &gt; Might be some interaction with zsh which is trying to set the window title.
&gt; 
&gt; Could you disable this zsh feature (e.g. start bash) and manually set a long
&gt; title:
&gt; 
&gt;   echo -ne &apos;\e]0;reaaally long name\a&apos;; sleep 10
&gt; 
&gt; Does it make gnome-terminal crash?
Nope, even for very long titles, titles with a newline, etc.

&gt; Could you please try it with vanilla gnome-terminal, or Red Hat package
&gt; rebuilt without the transparency+notification patch?
&gt;
&gt; Independently of the previous: could you, by any chance, test the behavior
&gt; under X11 instead of Wayland?
I&apos;ll try that next.

OK, new recipe:
1. start gnome-terminal
2. cat attached file, select whole text with mouse
3. paste the text into gnome-terminal running zsh
   (the text is selected because of bracketed paste mode, but not yet executed)
4. press enter</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10136209</commentid>
    <comment_count>6</comment_count>
      <attachid>1248912</attachid>
    <who name="Zbigniew Jędrzejewski-Szmek">zbyszek</who>
    <bug_when>2017-02-09 17:16:40 -0500</bug_when>
    <thetext>Created attachment 1248912
text to crash gnome-terminal</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10136260</commentid>
    <comment_count>7</comment_count>
    <who name="Zbigniew Jędrzejewski-Szmek">zbyszek</who>
    <bug_when>2017-02-09 17:22:28 -0500</bug_when>
    <thetext>Yeah, under Xorg there&apos;s no crash. Seems to be wayland related.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10136267</commentid>
    <comment_count>8</comment_count>
    <who name="Egmont Koblinger">egmont</who>
    <bug_when>2017-02-09 17:24:45 -0500</bug_when>
    <thetext>No crash for me (not a surprise given your most recent comment).

Probably Wayland (or rather, GTK+&apos;s Wayland backend?) doesn&apos;t like extremely long window titles??</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10136269</commentid>
    <comment_count>9</comment_count>
    <who name="Zbigniew Jędrzejewski-Szmek">zbyszek</who>
    <bug_when>2017-02-09 17:27:36 -0500</bug_when>
    <thetext>I&apos;ll retry later on F25 and rawhide.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10136275</commentid>
    <comment_count>10</comment_count>
    <who name="Egmont Koblinger">egmont</who>
    <bug_when>2017-02-09 17:29:08 -0500</bug_when>
    <thetext>Cool, thanks.

Given that I don&apos;t have Wayland, I&apos;m afraid I won&apos;t be able to help any further... we&apos;ll see.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10136452</commentid>
    <comment_count>11</comment_count>
    <who name="Zbigniew Jędrzejewski-Szmek">zbyszek</who>
    <bug_when>2017-02-09 19:16:42 -0500</bug_when>
    <thetext>No crash on F25. This appears to be F24 only.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10159664</commentid>
    <comment_count>12</comment_count>
    <who name="Matthias Clasen">mclasen</who>
    <bug_when>2017-02-17 10:13:27 -0500</bug_when>
    <thetext>tjere was a fix at some point for overlong window titles unde wayland.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10194853</commentid>
    <comment_count>13</comment_count>
    <who name="Debarshi Ray">debarshir</who>
    <bug_when>2017-02-28 13:27:20 -0500</bug_when>
    <thetext>Given that (a) Wayland isn&apos;t default in Fedora 24 and (b) it is fixed in F25, I am inclined to mark is as CLOSED CURRENTRELEASE.</thetext>
  </long_desc>
      
          <attachment
              isobsolete="0"
              ispatch="0"
              isprivate="0"
          >
            <attachid>1248912</attachid>
            <date>2017-02-09 17:16:00 -0500</date>
            <delta_ts>2017-02-09 17:16:40 -0500</delta_ts>
            <desc>text to crash gnome-terminal</desc>
            <filename>f</filename>
            <type>text/plain</type>
            <size>4477</size>
            <attacher name="Zbigniew Jędrzejewski-Szmek">zbyszek</attacher>
            
              <data encoding="base64">VEVTVFM9InRlc3QtZGFlbW9uIHRlc3QtbG9nIHRlc3QtbG9vcGJhY2sgdGVzdC1lbmdpbmUgdGVz
dC13YXRjaGRvZyB0ZXN0LWNncm91cC1tYXNrIHRlc3Qtam9iLXR5cGUgdGVzdC1lbnYtdXRpbCB0
ZXN0LXN0cmJ1ZiB0ZXN0LXN0cnYgdGVzdC1wYXRoIHRlc3QtcGF0aC11dGlsIHRlc3Qtc3RyeGNw
eXggdGVzdC1zaXBoYXNoMjQgdGVzdC11bml0LW5hbWUgdGVzdC11bml0LWZpbGUgdGVzdC11dGY4
IHRlc3QtZWxsaXBzaXplIHRlc3QtdXRpbCB0ZXN0LW1vdW50LXV0aWwgdGVzdC1jcHUtc2V0LXV0
aWwgdGVzdC1oZXhkZWNvY3QgdGVzdC1lc2NhcGUgdGVzdC1hbGxvYy11dGlsIHRlc3QtcHJvYy1j
bWRsaW5lIHRlc3QtaW8tdXRpbCB0ZXN0LWdsb2ItdXRpbCB0ZXN0LXhhdHRyLXV0aWwgdGVzdC1m
cy11dGlsIHRlc3Qtd2ViLXV0aWwgdGVzdC1zdGF0LXV0aWwgdGVzdC1mZC11dGlsIHRlc3Qtc3Ry
aW5nLXV0aWwgdGVzdC1leHRyYWN0LXdvcmQgdGVzdC1wYXJzZS11dGlsIHRlc3QtdXNlci11dGls
IHRlc3QtaG9zdG5hbWUtdXRpbCB0ZXN0LXByb2Nlc3MtdXRpbCB0ZXN0LXRlcm1pbmFsLXV0aWwg
dGVzdC1wYXRoLWxvb2t1cCB0ZXN0LWJhcnJpZXIgdGVzdC10bXBmaWxlcyB0ZXN0LW5hbWVzcGFj
ZSB0ZXN0LWRhdGUgdGVzdC1zbGVlcCB0ZXN0LXJlcGxhY2UtdmFyIHRlc3Qtc2NoZWQtcHJpbyB0
ZXN0LWNhbGVuZGFyc3BlYyB0ZXN0LXN0cmlwLXRhYi1hbnNpIHRlc3QtY2dyb3VwLXV0aWwgdGVz
dC1mc3RhYi11dGlsIHRlc3QtcHJpb3EgdGVzdC1maWxlaW8gdGVzdC10aW1lIHRlc3QtY2xvY2sg
dGVzdC1oYXNobWFwIHRlc3Qtc2V0IHRlc3QtYml0bWFwIHRlc3QtbGlzdCB0ZXN0LXVuYWxpZ25l
ZCB0ZXN0LXRhYmxlcyB0ZXN0LWRldmljZS1ub2RlcyB0ZXN0LXhtbCB0ZXN0LWFyY2hpdGVjdHVy
ZSB0ZXN0LXNvY2tldC11dGlsIHRlc3QtZmRzZXQgdGVzdC1jb25mLWZpbGVzIHRlc3QtY29uZi1w
YXJzZXIgdGVzdC1jYXBhYmlsaXR5IHRlc3QtYXN5bmMgdGVzdC1yYXRlbGltaXQgdGVzdC1jb25k
aXRpb24gdGVzdC11aWQtcmFuZ2UgdGVzdC1sb2NhbGUtdXRpbCB0ZXN0LWV4ZWN1dGUgdGVzdC1j
b3B5IHRlc3QtY2FwLWxpc3QgdGVzdC1zaWdidXMgdGVzdC12ZXJicyB0ZXN0LWFmLWxpc3QgdGVz
dC1hcnBocmQtbGlzdCB0ZXN0LWRucy1kb21haW4gdGVzdC1pbnN0YWxsLXJvb3QgdGVzdC1ybGlt
aXQtdXRpbCB0ZXN0LXNpZ25hbC11dGlsIHRlc3Qtc2VsaW51eCB0ZXN0LXNpemVvZiB0ZXN0LWFj
bC11dGlsICB0ZXN0LWJvb3QtdGltZXN0YW1wcyB0ZXN0LWJ1cy1tYXJzaGFsIHRlc3QtYnVzLXNp
Z25hdHVyZSB0ZXN0LWJ1cy1iZW5jaG1hcmsgdGVzdC1idXMtY2hhdCB0ZXN0LWJ1cy1jbGVhbnVw
IHRlc3QtYnVzLXNlcnZlciB0ZXN0LWJ1cy1tYXRjaCB0ZXN0LWJ1cy1rZXJuZWwgdGVzdC1idXMt
a2VybmVsLWJsb29tIHRlc3QtYnVzLXplcm8tY29weSB0ZXN0LWJ1cy1pbnRyb3NwZWN0IHRlc3Qt
YnVzLW9iamVjdHMgdGVzdC1idXMtZXJyb3IgdGVzdC1idXMtY3JlZHMgdGVzdC1idXMtZ3Zhcmlh
bnQgdGVzdC1idXMtdHJhY2sgdGVzdC1ldmVudCB0ZXN0LW5ldGxpbmsgdGVzdC1sb2NhbC1hZGRy
ZXNzZXMgdGVzdC1yZXNvbHZlIHRlc3QtZGhjcC1vcHRpb24gdGVzdC1kaGNwLWNsaWVudCB0ZXN0
LWRoY3Atc2VydmVyIHRlc3QtaXB2NGxsIHRlc3QtbmRpc2MtcnMgdGVzdC1kaGNwNi1jbGllbnQg
dGVzdC1sbGRwIHRlc3QtbGlidWRldiB0ZXN0LWlkMTI4IHRlc3QtaGFzaCB0ZXN0LWpvdXJuYWwg
dGVzdC1qb3VybmFsLWVudW0gdGVzdC1qb3VybmFsLXNlbmQgdGVzdC1qb3VybmFsLXN5c2xvZyB0
ZXN0LWpvdXJuYWwtbWF0Y2ggdGVzdC1qb3VybmFsLXN0cmVhbSB0ZXN0LWpvdXJuYWwtaW5pdCB0
ZXN0LWpvdXJuYWwtdmVyaWZ5IHRlc3Qtam91cm5hbC1pbnRlcmxlYXZpbmcgdGVzdC1qb3VybmFs
LWZsdXNoIHRlc3QtbW1hcC1jYWNoZSB0ZXN0LWNhdGFsb2cgdGVzdC1hdWRpdC10eXBlIHRlc3Qt
Y29tcHJlc3MgdGVzdC1jb21wcmVzcy1iZW5jaG1hcmsgdGVzdC1rZXltYXAtdXRpbCB0ZXN0LW1h
Y2hpbmUtdGFibGVzIHRlc3QtZG5zLXBhY2tldCB0ZXN0LXJlc29sdmUtdGFibGVzIHRlc3QtZG5z
c2VjIHRlc3QtbmV0d29ya2QtY29uZiB0ZXN0LW5ldHdvcmsgdGVzdC1uZXR3b3JrLXRhYmxlcyB0
ZXN0LWxvZ2luLXRhYmxlcyB0ZXN0LWxvZ2luLXNoYXJlZCB0ZXN0LWxpYnN5c3RlbWQtc3ltIHRl
c3QtbGlidWRldi1zeW0iXApURVNUUz10ZXN0LWRhZW1vbiB0ZXN0LWxvZyB0ZXN0LWxvb3BiYWNr
IHRlc3QtZW5naW5lIHRlc3Qtd2F0Y2hkb2cgdGVzdC1jZ3JvdXAtbWFzayB0ZXN0LWpvYi10eXBl
IHRlc3QtZW52LXV0aWwgdGVzdC1zdHJidWYgdGVzdC1zdHJ2IHRlc3QtcGF0aCB0ZXN0LXBhdGgt
dXRpbCB0ZXN0LXN0cnhjcHl4IHRlc3Qtc2lwaGFzaDI0IHRlc3QtdW5pdC1uYW1lIHRlc3QtdW5p
dC1maWxlIHRlc3QtdXRmOCB0ZXN0LWVsbGlwc2l6ZSB0ZXN0LXV0aWwgdGVzdC1tb3VudC11dGls
IHRlc3QtY3B1LXNldC11dGlsIHRlc3QtaGV4ZGVjb2N0IHRlc3QtZXNjYXBlIHRlc3QtYWxsb2Mt
dXRpbCB0ZXN0LXByb2MtY21kbGluZSB0ZXN0LWlvLXV0aWwgdGVzdC1nbG9iLXV0aWwgdGVzdC14
YXR0ci11dGlsIHRlc3QtZnMtdXRpbCB0ZXN0LXdlYi11dGlsIHRlc3Qtc3RhdC11dGlsIHRlc3Qt
ZmQtdXRpbCB0ZXN0LXN0cmluZy11dGlsIHRlc3QtZXh0cmFjdC13b3JkIHRlc3QtcGFyc2UtdXRp
bCB0ZXN0LXVzZXItdXRpbCB0ZXN0LWhvc3RuYW1lLXV0aWwgdGVzdC1wcm9jZXNzLXV0aWwgdGVz
dC10ZXJtaW5hbC11dGlsIHRlc3QtcGF0aC1sb29rdXAgdGVzdC1iYXJyaWVyIHRlc3QtdG1wZmls
ZXMgdGVzdC1uYW1lc3BhY2UgdGVzdC1kYXRlIHRlc3Qtc2xlZXAgdGVzdC1yZXBsYWNlLXZhciB0
ZXN0LXNjaGVkLXByaW8gdGVzdC1jYWxlbmRhcnNwZWMgdGVzdC1zdHJpcC10YWItYW5zaSB0ZXN0
LWNncm91cC11dGlsIHRlc3QtZnN0YWItdXRpbCB0ZXN0LXByaW9xIHRlc3QtZmlsZWlvIHRlc3Qt
dGltZSB0ZXN0LWNsb2NrIHRlc3QtaGFzaG1hcCB0ZXN0LXNldCB0ZXN0LWJpdG1hcCB0ZXN0LWxp
c3QgdGVzdC11bmFsaWduZWQgdGVzdC10YWJsZXMgdGVzdC1kZXZpY2Utbm9kZXMgdGVzdC14bWwg
dGVzdC1hcmNoaXRlY3R1cmUgdGVzdC1zb2NrZXQtdXRpbCB0ZXN0LWZkc2V0IHRlc3QtY29uZi1m
aWxlcyB0ZXN0LWNvbmYtcGFyc2VyIHRlc3QtY2FwYWJpbGl0eSB0ZXN0LWFzeW5jIHRlc3QtcmF0
ZWxpbWl0IHRlc3QtY29uZGl0aW9uIHRlc3QtdWlkLXJhbmdlIHRlc3QtbG9jYWxlLXV0aWwgdGVz
dC1leGVjdXRlIHRlc3QtY29weSB0ZXN0LWNhcC1saXN0IHRlc3Qtc2lnYnVzIHRlc3QtdmVyYnMg
dGVzdC1hZi1saXN0IHRlc3QtYXJwaHJkLWxpc3QgdGVzdC1kbnMtZG9tYWluIHRlc3QtaW5zdGFs
bC1yb290IHRlc3QtcmxpbWl0LXV0aWwgdGVzdC1zaWduYWwtdXRpbCB0ZXN0LXNlbGludXggdGVz
dC1zaXplb2YgdGVzdC1hY2wtdXRpbCAgdGVzdC1ib290LXRpbWVzdGFtcHMgdGVzdC1idXMtbWFy
c2hhbCB0ZXN0LWJ1cy1zaWduYXR1cmUgdGVzdC1idXMtYmVuY2htYXJrIHRlc3QtYnVzLWNoYXQg
dGVzdC1idXMtY2xlYW51cCB0ZXN0LWJ1cy1zZXJ2ZXIgdGVzdC1idXMtbWF0Y2ggdGVzdC1idXMt
a2VybmVsIHRlc3QtYnVzLWtlcm5lbC1ibG9vbSB0ZXN0LWJ1cy16ZXJvLWNvcHkgdGVzdC1idXMt
aW50cm9zcGVjdCB0ZXN0LWJ1cy1vYmplY3RzIHRlc3QtYnVzLWVycm9yIHRlc3QtYnVzLWNyZWRz
IHRlc3QtYnVzLWd2YXJpYW50IHRlc3QtYnVzLXRyYWNrIHRlc3QtZXZlbnQgdGVzdC1uZXRsaW5r
IHRlc3QtbG9jYWwtYWRkcmVzc2VzIHRlc3QtcmVzb2x2ZSB0ZXN0LWRoY3Atb3B0aW9uIHRlc3Qt
ZGhjcC1jbGllbnQgdGVzdC1kaGNwLXNlcnZlciB0ZXN0LWlwdjRsbCB0ZXN0LW5kaXNjLXJzIHRl
c3QtZGhjcDYtY2xpZW50IHRlc3QtbGxkcCB0ZXN0LWxpYnVkZXYgdGVzdC1pZDEyOCB0ZXN0LWhh
c2ggdGVzdC1qb3VybmFsIHRlc3Qtam91cm5hbC1lbnVtIHRlc3Qtam91cm5hbC1zZW5kIHRlc3Qt
am91cm5hbC1zeXNsb2cgdGVzdC1qb3VybmFsLW1hdGNoIHRlc3Qtam91cm5hbC1zdHJlYW0gdGVz
dC1qb3VybmFsLWluaXQgdGVzdC1qb3VybmFsLXZlcmlmeSB0ZXN0LWpvdXJuYWwtaW50ZXJsZWF2
aW5nIHRlc3Qtam91cm5hbC1mbHVzaCB0ZXN0LW1tYXAtY2FjaGUgdGVzdC1jYXRhbG9nIHRlc3Qt
YXVkaXQtdHlwZSB0ZXN0LWNvbXByZXNzIHRlc3QtY29tcHJlc3MtYmVuY2htYXJrIHRlc3Qta2V5
bWFwLXV0aWwgdGVzdC1tYWNoaW5lLXRhYmxlcyB0ZXN0LWRucy1wYWNrZXQgdGVzdC1yZXNvbHZl
LXRhYmxlcyB0ZXN0LWRuc3NlYyB0ZXN0LW5ldHdvcmtkLWNvbmYgdGVzdC1uZXR3b3JrIHRlc3Qt
bmV0d29yay10YWJsZXMgdGVzdC1sb2dpbi10YWJsZXMgdGVzdC1sb2dpbi1zaGFyZWQgdGVzdC1s
aWJzeXN0ZW1kLXN5bSB0ZXN0LWxpYnVkZXYtc3ltCg==
</data>

          </attachment>
      

    </bug>

</bugzilla>