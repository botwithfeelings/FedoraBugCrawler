<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1380097</bug_id>
          
          <creation_ts>2016-09-28 12:03:00 -0400</creation_ts>
          <short_desc>Apper: drop widget style hack</short_desc>
          <delta_ts>2016-12-11 14:27:23 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>apper</component>
          <version>24</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>high</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Kevin Kofler">kevin</reporter>
          <assigned_to name="Rex Dieter">rdieter</assigned_to>
          <cc>jwakely</cc>
    
    
    <cc>rdieter</cc>
    
    
    <cc>rhughes</cc>
    
    
    <cc>smparrish</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>apper-0.9.2-7.fc24 apper-0.9.3-0.4.20161109.fc25</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-12-11 14:27:23</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9750678</commentid>
    <comment_count>0</comment_count>
    <who name="Kevin Kofler">kevin</who>
    <bug_when>2016-09-28 12:03:06 -0400</bug_when>
    <thetext>Description of problem:
Apper currently ships with a downstream hack (apper-0.9.2-style.patch) that makes it refuse to use the systemwide Qt widget style. This was done to workaround a harmless, purely cosmetic glitch (bug #1209017). But it causes a much worse cosmetic glitch: the application looks just completely off. Just compare the big progress bar on a stock Fedora 24 installation (where Oxygen is not available, and thus Cleanlooks is used) with a Breeze progress bar. It just looks completely wrong. Native KDE applications must not be disguising themselves as GTK+ applications when running under Plasma.

Version-Release number of selected component (if applicable):
apper-0.9.2-6.fc24

How reproducible:
Always

Steps to Reproduce:
1. Use Apper.

Actual results:
Uses an ugly look&amp;feel.

Expected results:
Looks&amp;feels like a native KDE application.

Additional info:
If you care so strongly about the bug #1209017 glitch, please fix it properly, or get the Breeze developers to fix it properly. (It is probably a bug in their style.) It is absolutely not acceptable for every single application to work around style bugs by hardcoding some style. That will only lead to an inconsistent hodgepodge of differently-looking applications, and by hiding the real problem, it also makes it unlikely it will ever get fixed.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9750682</commentid>
    <comment_count>1</comment_count>
    <who name="Kevin Kofler">kevin</who>
    <bug_when>2016-09-28 12:04:42 -0400</bug_when>
    <thetext>I also disagree with the comment on your patch claiming it is &quot;upstreamable&quot;. Such gross hacks are absolutely NOT acceptable in upstream code (nor downstream, IMHO).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9750689</commentid>
    <comment_count>2</comment_count>
    <who name="Kevin Kofler">kevin</who>
    <bug_when>2016-09-28 12:07:29 -0400</bug_when>
    <thetext>Oh, and the bug #1209017 glitch has been there for years, probably for as long as Apper exists at all, with the Quarticurve theme. I have never seen an Apper without that glitch. It is perfectly usable anyway.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9750762</commentid>
    <comment_count>3</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-09-28 12:32:00 -0400</bug_when>
    <thetext>Sorry if I marked the patch upstreamable, I agree that it is not.

That said, I thought we were doing to discuss this first onlist and only move to change things if there&apos;s a consensus?


either way, my personal opinion is still the same: that forcing the use of a known good/working style is preferable to layout issues (that sometimes make text unreadable).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9750832</commentid>
    <comment_count>4</comment_count>
    <who name="Kevin Kofler">kevin</who>
    <bug_when>2016-09-28 13:13:20 -0400</bug_when>
    <thetext>At the very least, you should add something like Krita&apos;s KRITA_NO_STYLE_OVERRIDE (see line 162 here: https://quickgit.kde.org/?p=krita.git&amp;a=blob&amp;h=4d43185fc5d7a388ddde274bc04ffc48b2cdfccd&amp;hb=044694c89b3511e0b4f00ded11c2be12d42eaee8&amp;f=libs%2Fui%2FKisApplication.cpp ).

But I think Apper would really be better to use the correct style by default. People who want to override it can do it (just use the menu editor and add --style=whatever). This doesn&apos;t need to be hardcoded in the code at all.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9750911</commentid>
    <comment_count>5</comment_count>
    <who name="Jonathan Wakely">jwakely</who>
    <bug_when>2016-09-28 13:43:45 -0400</bug_when>
    <thetext>(In reply to Kevin Kofler from comment #4)
&gt; But I think Apper would really be better to use the correct style by
&gt; default. People who want to override it can do it (just use the menu editor
&gt; and add --style=whatever). This doesn&apos;t need to be hardcoded in the code at
&gt; all.

Most users will have no idea that they can override the style to make the text legible, or that the garbled text isn&apos;t actually very useful, they just see illegible text and don&apos;t know what it says. The default for regular users should be legible text. If the inconsistent style hurts your eyes then use the environment variable, don&apos;t force your preference for style over substance on everyone else.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9750912</commentid>
    <comment_count>6</comment_count>
    <who name="Kevin Kofler">kevin</who>
    <bug_when>2016-09-28 13:44:03 -0400</bug_when>
    <thetext>&gt; That said, I thought we were doing to discuss this first onlist and only move
&gt; to change things if there&apos;s a consensus?

I thought you wanted to do it on IRC, and since this was not discussed in an IRC meeting (this week&apos;s meeting was skipped instead), I figured I need to file this bug to get things moving. But here&apos;s it on the mailing list:
http://www.spinics.net/linux/fedora/fedora-kde/msg18097.html</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9750924</commentid>
    <comment_count>7</comment_count>
    <who name="Kevin Kofler">kevin</who>
    <bug_when>2016-09-28 13:49:08 -0400</bug_when>
    <thetext>&gt; Most users will have no idea that they can override the style

--style=â€¦ is a standard parameter for all Qt apps. It is a lot more discoverable than an undocumented application-specific environment variable, or worse, having to recompile the code (or patch the binary, ewww!) as it stands now.

&gt; they just see illegible text and don&apos;t know what it says.

Now instead they see an application that looks bad, which makes them think, consciously or subconsciously, that Fedora is a bad distribution because it cannot even make KDE applications look consistent with each other. Even if they do not immediately notice the wrong theme, it still subconsciously looks &quot;messy&quot;.

&gt; The default for regular users should be legible text.

99% of the text in the app is legible. It is only that progress status (that is not even correct with PackageKit-hif to begin with!) that is not.

&gt; If the inconsistent style hurts your eyes then use the environment variable,
&gt; don&apos;t force your preference for style over substance on everyone else.

It is not a preference for style over substance, it is a preference for a local cosmetic glitch (a detail looks broken) over a global one (the whole application looks broken).</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9750950</commentid>
    <comment_count>8</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-09-28 13:55:35 -0400</bug_when>
    <thetext>bz is not a good forum for discussion and debate, please followup onlist per comment #6</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9863562</commentid>
    <comment_count>9</comment_count>
    <who name="Kevin Kofler">kevin</who>
    <bug_when>2016-11-04 18:56:42 -0400</bug_when>
    <thetext>Grrr, still no update here, after a month!

I ran:
sudo sed -i -e s/KDE_FULL_SESSION/KDE_FOOL_SESSION/g /usr/bin/apper
to stop it from looking like crap here.

And ironically, the Cleanlooks style your hack uses instead actually has much worse graphical glitches. In the Cleanlooks style, if I click on a package, the description does not render until I click inside the text, or where the text should be (a glitch I also had with Quarticurve â€“ Quarticurve also had the same glitch with the overlapping progress text as Breeze though). With Breeze, showing the description just works. We really need to kill that style override.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9867667</commentid>
    <comment_count>10</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-11-07 11:27:31 -0500</bug_when>
    <thetext>For what it&apos;s worth, I cannot reproduce the problem you describe in comment #9 about updates text not rendering (until you click it).

(though honestly, PK lot longer to load the data than expected... )</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9867919</commentid>
    <comment_count>11</comment_count>
    <who name="Kevin Kofler">kevin</who>
    <bug_when>2016-11-07 12:32:39 -0500</bug_when>
    <thetext>You probably have the Oxygen Qt 4 style installed. I don&apos;t (this is a fresh F24 install on a new computer), so your hack uses Cleanlooks instead.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9868011</commentid>
    <comment_count>12</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-11-07 12:59:14 -0500</bug_when>
    <thetext>I know, I did purposely remove oxygen first (and indeed cleanlooks very different than oxygen)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9879858</commentid>
    <comment_count>13</comment_count>
    <who name="Rex Dieter">rdieter</who>
    <bug_when>2016-11-10 08:22:33 -0500</bug_when>
    <thetext>OK, I can reproduce this now, and I agree that&apos;s pretty horrible. :(

In the end, the only style that works well still seems to be oxygen.  So, I think I&apos;ll go with:

1. modify patch to only try using alternative style oxygen (if available)

2.  add Recommends: qt?-style-oxygen</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9880191</commentid>
    <comment_count>14</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-10 09:58:43 -0500</bug_when>
    <thetext>apper-0.9.2-7.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-f5295dc586</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9881081</commentid>
    <comment_count>15</comment_count>
    <who name="Kevin Kofler">kevin</who>
    <bug_when>2016-11-10 14:00:47 -0500</bug_when>
    <thetext>Your fix looks acceptable (with also the opt-out environment variable), I&apos;d still like the hack to just go away though. :-)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9882136</commentid>
    <comment_count>16</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-11 00:03:11 -0500</bug_when>
    <thetext>apper-0.9.2-7.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-f5295dc586</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9906906</commentid>
    <comment_count>17</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-11-20 21:22:33 -0500</bug_when>
    <thetext>apper-0.9.2-7.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9968115</commentid>
    <comment_count>18</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-08 08:13:34 -0500</bug_when>
    <thetext>apper-0.9.3-0.4.20161109.fc25 has been submitted as an update to Fedora 25. https://bodhi.fedoraproject.org/updates/FEDORA-2016-42e3aac51f</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9969351</commentid>
    <comment_count>19</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-08 14:26:56 -0500</bug_when>
    <thetext>apper-0.9.3-0.4.20161109.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-42e3aac51f</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9974962</commentid>
    <comment_count>20</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-12-11 14:27:23 -0500</bug_when>
    <thetext>apper-0.9.3-0.4.20161109.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>