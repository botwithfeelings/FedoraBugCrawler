<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1309658</bug_id>
          
          <creation_ts>2016-02-18 06:37:00 -0500</creation_ts>
          <short_desc>Audio devices not found with Linux 4.5.0</short_desc>
          <delta_ts>2016-03-04 08:18:51 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>kernel</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>RAWHIDE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords></keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Russel Winder">russel</reporter>
          <assigned_to name="Orphan Owner">extras-orphan</assigned_to>
          <cc>ajax</cc>
    
    
    <cc>alexl</cc>
    
    
    <cc>caillon+fedoraproject</cc>
    
    
    <cc>caolanm</cc>
    
    
    <cc>cmontgom</cc>
    
    
    <cc>extras-orphan</cc>
    
    
    <cc>gansalmon</cc>
    
    
    <cc>itamar</cc>
    
    
    <cc>john.j5live</cc>
    
    
    <cc>jonathan</cc>
    
    
    <cc>kernel-maint</cc>
    
    
    <cc>labbott</cc>
    
    
    <cc>madhu.chinakonda</cc>
    
    
    <cc>mbarnes</cc>
    
    
    <cc>mchehab</cc>
    
    
    <cc>mclasen</cc>
    
    
    <cc>rhughes</cc>
    
    
    <cc>robin.norwood</cc>
    
    
    <cc>rstrode</cc>
    
    
    <cc>sandmann</cc>
    
    
    <cc>zeuthen</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-03-04 08:18:51</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9074964</commentid>
    <comment_count>0</comment_count>
    <who name="Russel Winder">russel</who>
    <bug_when>2016-02-18 06:37:59 -0500</bug_when>
    <thetext>Using Rawhide fully up to date as at 2016-02-18T11:36.

If I boot 4.4.0 kernel everything works fine. If I boot the 4.5.0 kernel then the audio devices are not found by GNOME. They are there in the lspci listing, but nothing appears in the GNOME settings and sound will not play.

…
01:00.1 Audio device: NVIDIA Corporation GF119 HDMI Audio Controller (rev a1)
…
09:02.0 Multimedia audio controller: Creative Labs SB Live! EMU10k1 (rev 05)
09:02.1 Input device controller: Creative Labs SB Live! Game Port (rev 05)
…</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9080265</commentid>
    <comment_count>1</comment_count>
    <who name="Russel Winder">russel</who>
    <bug_when>2016-02-19 22:27:33 -0500</bug_when>
    <thetext>This problem appears for me only for my Dell Precision T5400 workstation. My Lenovo ThinkPad laptops seem to be happily picking up the built in speakers.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9094176</commentid>
    <comment_count>2</comment_count>
    <who name="Jan Kurik">jkurik</who>
    <bug_when>2016-02-24 10:25:53 -0500</bug_when>
    <thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 24 development cycle.
Changing version to &apos;24&apos;.

More information and reason for this action is here:
https://fedoraproject.org/wiki/Fedora_Program_Management/HouseKeeping/Fedora24#Rawhide_Rebase</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9096487</commentid>
    <comment_count>3</comment_count>
    <who name="Russel Winder">russel</who>
    <bug_when>2016-02-25 02:42:14 -0500</bug_when>
    <thetext>I note that there is a similar problem booting Debian Sid. There though everything works fine with kernel 4.2 and 4.3, but fails with kernel 4.4.

Maybe this is a kernel problem rather than a GNOME audio one. Should I reports a new bug or should this one be transferred to the people who are best positioned to fix the issue?

cf. https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=815787</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9098638</commentid>
    <comment_count>4</comment_count>
    <who name="Russel Winder">russel</who>
    <bug_when>2016-02-25 14:09:20 -0500</bug_when>
    <thetext>The problem seems to be that the emu10k drivers are not being distributed with the 4.5 kernel.

 |&gt; find /usr/lib -iname &quot;*emu10k*&quot;
/usr/lib/modules/4.4.0-1.fc24.x86_64/kernel/drivers/input/gameport/emu10k1-gp.ko.xz
/usr/lib/modules/4.4.0-1.fc24.x86_64/kernel/sound/pci/emu10k1
/usr/lib/modules/4.4.0-1.fc24.x86_64/kernel/sound/pci/emu10k1/snd-emu10k1-synth.ko.xz
/usr/lib/modules/4.4.0-1.fc24.x86_64/kernel/sound/pci/emu10k1/snd-emu10k1x.ko.xz
/usr/lib/modules/4.4.0-1.fc24.x86_64/kernel/sound/pci/emu10k1/snd-emu10k1.ko.xz
/usr/lib/modules/4.5.0-0.rc5.git0.1.fc24.x86_64/kernel/drivers/input/gameport/emu10k1-gp.ko.xz
/usr/lib/modules/4.5.0-0.rc4.git3.1.fc24.x86_64/kernel/drivers/input/gameport/emu10k1-gp.ko.xz</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9099222</commentid>
    <comment_count>5</comment_count>
    <who name="Laura Abbott">labbott</who>
    <bug_when>2016-02-25 20:42:58 -0500</bug_when>
    <thetext>So 4.5 brought in changes for ZONE_DEVICE which is needed for persistent memory devices. The version that was merged required ZONE_DMA be turned off. That particular module depends on ZONE_DMA so it was not being built at all.

There&apos;s a patch to fix this. I put it in rawhide. You should see the change in the next rawhide build.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9120484</commentid>
    <comment_count>6</comment_count>
    <who name="Russel Winder">russel</who>
    <bug_when>2016-03-04 03:22:22 -0500</bug_when>
    <thetext>The necessary files appear to be back in rc6, certainly sound works again :-)

Thanks for getting the patch in place.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>