<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1358245</bug_id>
          
          <creation_ts>2016-07-20 06:40:00 -0400</creation_ts>
          <short_desc>repoquery: valid use of stderr and stdout, use stdout only for requested data</short_desc>
          <delta_ts>2017-03-10 05:57:33 -0500</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>dnf</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>RAWHIDE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>EasyFix, Reopened, Triaged, UserExperience</keywords>
          <priority>low</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Pavel Raiskup">praiskup</reporter>
          <assigned_to>rpm-software-management</assigned_to>
          <cc>jmracek</cc>
    
    
    <cc>mluscon</cc>
    
    
    <cc>ngompa13</cc>
    
    
    <cc>packaging-team-maint</cc>
    
    
    <cc>pmatilai</cc>
    
    
    <cc>pnemade</cc>
    
    
    <cc>RadekHolyPublic</cc>
    
    
    <cc>rpm-software-management</cc>
    
    
    <cc>vmukhame</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>dnf-2.0.1-1</cf_fixed_in>
          <cf_doc_type>If docs needed, set a value</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2017-03-10 05:57:33</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9531622</commentid>
    <comment_count>0</comment_count>
    <who name="Pavel Raiskup">praiskup</who>
    <bug_when>2016-07-20 06:40:11 -0400</bug_when>
    <thetext>This should ease writing maintainer&apos;s scripts.

See the command output:
$ dnf repoquery --disablerepo=* --enablerepo hell \
--repofrompath=hell,http://ftp.fi.muni.cz/pub/linux/fedora/linux/development/rawhide/Everything/x86_64/os/ \
--whatrequires postgresql-jdbc 2&gt;/dev/null
Added hell repo from http://ftp.fi.muni.cz/pub/linux/fedora/linux/development/rawhide/Everything/x86_64/os/
Last metadata expiration check: 4:43:42 ago on Wed Jul 20 07:54:15 2016.
libreoffice-base-1:5.2.0.1-1.fc25.x86_64
weka-0:3.6.14-1.fc25.noarch

While I would expect:
$ dnf repoquery --disablerepo=* --enablerepo hell \
--repofrompath=hell,http://ftp.fi.muni.cz/pub/linux/fedora/linux/development/rawhide/Everything/x86_64/os/ \
--whatrequires postgresql-jdbc 2&gt;/dev/null
libreoffice-base-1:5.2.0.1-1.fc25.x86_64
weka-0:3.6.14-1.fc25.noarch</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9572997</commentid>
    <comment_count>1</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2016-08-01 08:54:46 -0400</bug_when>
    <thetext>I would like to inform you about possibility to use -q or --quiet option. In combination with a non-interactive command it shows just the relevant content. It suppresses messages notifying about current state or actions of DNF.

It should solve the problem, therefore I am closing the bug. Please if you will find any further problem, don&apos;t hesitate to report it.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9587612</commentid>
    <comment_count>2</comment_count>
    <who name="Igor Gnatenko">ignatenko</who>
    <bug_when>2016-08-05 02:20:07 -0400</bug_when>
    <thetext>I&apos;m thinking that reporter is correct.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9951772</commentid>
    <comment_count>3</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2016-12-02 10:57:40 -0500</bug_when>
    <thetext>Fixed in PR: https://github.com/rpm-software-management/dnf/pull/673
If anything else appear in stdout, please report it again.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9964604</commentid>
    <comment_count>4</comment_count>
    <who name="Neal Gompa">ngompa13</who>
    <bug_when>2016-12-07 08:32:13 -0500</bug_when>
    <thetext>This seems like a terrible idea. It might just be better to have a flag for suppressing info messages as well as warnings, etc. (I thought we do with --quiet?)

Warnings are for potential problems, not informational messages. The behavior done in PR 673 should be reverted.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9964841</commentid>
    <comment_count>5</comment_count>
    <who name="Pavel Raiskup">praiskup</who>
    <bug_when>2016-12-07 09:42:58 -0500</bug_when>
    <thetext>(In reply to Neal Gompa from comment #4)
&gt; This seems like a terrible idea. It might just be better to have a flag for
&gt; suppressing info messages as well as warnings, etc. (I thought we do with
&gt; --quiet?)

Well, that&apos;s different thing.  The idea was about moving some writes from
stdout to stderr, so stdout is (ideally) easily parseable.

&gt; Warnings are for potential problems, not informational messages. The
&gt; behavior done in PR 673 should be reverted.

Thanks for the point, I tend to agree - this is not the ideal fix.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9970701</commentid>
    <comment_count>6</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2016-12-09 02:46:07 -0500</bug_when>
    <thetext>Ok, but this is not the first change of that kind. The information about Last metadate ... is now also on stderr. Also -q option behave differently. Now it suppress all (info, debud, warning, error, critical), but originally it only suppress info. From my point of view if output of repoquery is used for any script, it should use -q option, therefore any adjustments are nonsense. 
We can really play with it, but one user will request that and another something different.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9970722</commentid>
    <comment_count>7</comment_count>
    <who name="Pavel Raiskup">praiskup</who>
    <bug_when>2016-12-09 03:04:00 -0500</bug_when>
    <thetext>I took this bug as an advice only.
That&apos;s how things work in our GNU/Linux ecosystem (at least) .. data goes
to stdout, and warnings/errors go to stderr -&gt; which makes it trivial to parse
what I ask for and to suppress warnings by &apos;2&gt;/dev/null&apos; (-q is not important
usually, unless you want to suppress some stdout output, too).

&gt; We can really play with it, but one user will request that and another
&gt; something different.

I believe that the behavior I explained is what random hacker would expect,
but that&apos;s really just a matter of quality of implementation, not a huge deal.
Neither a blocker of any kind for me - with a bit of carefulness I can
parse the output anyway or hack my own repoquery-like script in python
as a replacement for repoquery, it is just not that convenient.
So pick the resolution arbitrarily.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9970769</commentid>
    <comment_count>8</comment_count>
    <who name="Panu Matilainen">pmatilai</who>
    <bug_when>2016-12-09 03:29:13 -0500</bug_when>
    <thetext>My 5c:

The original yum-based repoquery was first and foremost designed for as a scripting tool in the traditional unix sense - zero extra output *by default*, errors to stderr and none of the interactive-text-ui-thing that yum itself is/was. Like yum, dnf provides list and search etc commands for interactive work, with progress reports and all that. So please preserve the hardcore scripting orientation in repoquery, it always was a specialized tool just for that.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9971425</commentid>
    <comment_count>9</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2016-12-09 07:47:02 -0500</bug_when>
    <thetext>Well here is the new solution: https://github.com/rpm-software-management/dnf/pull/681</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>10227844</commentid>
    <comment_count>10</comment_count>
    <who name="Jaroslav Mracek">jmracek</who>
    <bug_when>2017-03-10 05:57:33 -0500</bug_when>
    <thetext>Fixed in dnf-2.0.1-1 and released into rawhide</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>