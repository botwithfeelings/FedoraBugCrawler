<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1312018</bug_id>
          
          <creation_ts>2016-02-25 09:26:00 -0500</creation_ts>
          <short_desc>[systemd] Make changes to start opal-prd daemon automatically (fedora-release)</short_desc>
          <delta_ts>2016-06-16 13:41:28 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>fedora-release</component>
          <version>24</version>
          <rep_platform>ppc64le</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>CURRENTRELEASE</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>high</bug_severity>
          <target_milestone>---</target_milestone>
          <dependson>1284527</dependson>
          <blocked>1071880</blocked>
    
    
    <blocked>1051573</blocked>
    
    
    <blocked>1312446</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Vasant Hegde">hegdevasant</reporter>
          <assigned_to name="Stephen Gallagher">sgallagh</assigned_to>
          <cc>bugproxy</cc>
    
    
    <cc>dennis</cc>
    
    
    <cc>dhorak</cc>
    
    
    <cc>errata-xmlrpc</cc>
    
    
    <cc>hannsj_uhl</cc>
    
    
    <cc>hegdevasant</cc>
    
    
    <cc>jdisnard</cc>
    
    
    <cc>jmcdonal</cc>
    
    
    <cc>jsynacek</cc>
    
    
    <cc>kevin</cc>
    
    
    <cc>pbrobinson</cc>
    
    
    <cc>sgallagh</cc>
    
    
    <cc>zbyszek</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in></cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-06-16 13:41:28</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          <external_bugs name="IBM Linux Technology Center">137829</external_bugs>
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9097773</commentid>
    <comment_count>0</comment_count>
    <who name="Vasant Hegde">hegdevasant</who>
    <bug_when>2016-02-25 09:26:45 -0500</bug_when>
    <thetext>Description of problem:
  We have new package opal-prd which contains &quot;OPAL Processor Recovery Diagnostics daemon&quot; (#1284527). This is ppc64le specific package. We want to start daemon automatically.


Please include this daemon in 90-systemd.preset script.


Vasant</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9098193</commentid>
    <comment_count>1</comment_count>
    <who name="IBM Bug Proxy">bugproxy</who>
    <bug_when>2016-02-25 11:17:18 -0500</bug_when>
    <thetext>------- Comment From hannsj_uhl@de.ibm.com 2016-02-25 10:46 EDT-------
.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9099940</commentid>
    <comment_count>2</comment_count>
    <who name="Jason McDonald">jmcdonal</who>
    <bug_when>2016-02-26 03:58:36 -0500</bug_when>
    <thetext>This bug has been incorrectly added to the &quot;Edit Fedora Components&quot; group, which should not be used for bugs.  As it is not clear whether this bug is intended to be public or private, I&apos;m going to add the bug to the Fedora Contrib Private group so that the other group can be removed from this bug and disabled.

If it&apos;s ok for the bug to be public, the Fedora Contrib Private group can be cleared.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9100011</commentid>
    <comment_count>3</comment_count>
    <who name="Vasant Hegde">hegdevasant</who>
    <bug_when>2016-02-26 04:18:57 -0500</bug_when>
    <thetext>(In reply to Jason McDonald from comment #2)
&gt; This bug has been incorrectly added to the &quot;Edit Fedora Components&quot; group,
&gt; which should not be used for bugs. 

Sorry. That was my mistake.


&gt; As it is not clear whether this bug is
&gt; intended to be public or private, I&apos;m going to add the bug to the Fedora
&gt; Contrib Private group so that the other group can be removed from this bug
&gt; and disabled.

I&apos;m fine to keep it under Private group.

-Vasant</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9100298</commentid>
    <comment_count>4</comment_count>
    <who name="Jan Synacek">jsynacek</who>
    <bug_when>2016-02-26 06:53:58 -0500</bug_when>
    <thetext>If you want your service to be enabled by default, see https://fedoraproject.org/wiki/Packaging:DefaultServices, section &quot;Approved Exceptions&quot;.

Feel free to reopen this bugzilla when you have the necessary exception approved.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9117785</commentid>
    <comment_count>5</comment_count>
    <who name="Vasant Hegde">hegdevasant</who>
    <bug_when>2016-03-03 07:47:00 -0500</bug_when>
    <thetext>I&apos;ve raised https://fedorahosted.org/fesco/ticket/1558 to get exception approval from FESCO.

-Vasant</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9120237</commentid>
    <comment_count>6</comment_count>
    <who name="Vasant Hegde">hegdevasant</who>
    <bug_when>2016-03-04 01:34:01 -0500</bug_when>
    <thetext>As disu(In reply to Vasant Hegde from comment #5)
&gt; I&apos;ve raised https://fedorahosted.org/fesco/ticket/1558 to get exception
&gt; approval from FESCO.

As suggested by sgallagh in above ticket I&apos;m REOPENING this bug and changing component to fedora-release.

-Vasant</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9121360</commentid>
    <comment_count>7</comment_count>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-03-04 09:06:00 -0500</bug_when>
    <thetext>(In reply to Vasant Hegde from comment #6)
&gt; As disu(In reply to Vasant Hegde from comment #5)
&gt; &gt; I&apos;ve raised https://fedorahosted.org/fesco/ticket/1558 to get exception
&gt; &gt; approval from FESCO.
&gt; 
&gt; As suggested by sgallagh in above ticket I&apos;m REOPENING this bug and changing
&gt; component to fedora-release.
&gt; 
&gt; -Vasant

Thanks. Can you please specify the exact systemd units that you want enabled by default? e.g. foo.service, bar.socket or baz.timer</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9124310</commentid>
    <comment_count>8</comment_count>
    <who name="Vasant Hegde">hegdevasant</who>
    <bug_when>2016-03-06 23:40:46 -0500</bug_when>
    <thetext>(In reply to Stephen Gallagher from comment #7)
&gt; (In reply to Vasant Hegde from comment #6)
&gt; &gt; As disu(In reply to Vasant Hegde from comment #5)
&gt; &gt; &gt; I&apos;ve raised https://fedorahosted.org/fesco/ticket/1558 to get exception
&gt; &gt; &gt; approval from FESCO.
&gt; &gt; 
&gt; &gt; As suggested by sgallagh in above ticket I&apos;m REOPENING this bug and changing
&gt; &gt; component to fedora-release.
&gt; &gt; 
&gt; &gt; -Vasant

Stephen,

&gt; 
&gt; Thanks. Can you please specify the exact systemd units that you want enabled
&gt; by default? e.g. foo.service, bar.socket or baz.timer

Exact service name is :  opal-prd.service

-Vasant</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9125370</commentid>
    <comment_count>9</comment_count>
    <who name="Zbigniew Jędrzejewski-Szmek">zbyszek</who>
    <bug_when>2016-03-07 07:10:51 -0500</bug_when>
    <thetext>What about the socket unit?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9125514</commentid>
    <comment_count>10</comment_count>
    <who name="Vasant Hegde">hegdevasant</who>
    <bug_when>2016-03-07 07:58:51 -0500</bug_when>
    <thetext>(In reply to Zbigniew Jędrzejewski-Szmek from comment #9)
&gt; What about the socket unit?

opal-prd.socket

-Vasant</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9125956</commentid>
    <comment_count>11</comment_count>
    <who name="Zbigniew Jędrzejewski-Szmek">zbyszek</who>
    <bug_when>2016-03-07 09:42:33 -0500</bug_when>
    <thetext>Sure, I know what the socket is called. My question (implicit, but I thought it would be obvious) is whether you want it enabled by default, and if yes why, and if no, why not.

And if yes, why do you want the service started by default instead of being socket activated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9140389</commentid>
    <comment_count>12</comment_count>
    <who name="Vasant Hegde">hegdevasant</who>
    <bug_when>2016-03-11 00:41:27 -0500</bug_when>
    <thetext>(In reply to Zbigniew Jędrzejewski-Szmek from comment #11)
&gt; Sure, I know what the socket is called. My question (implicit, but I thought
&gt; it would be obvious) is whether you want it enabled by default, and if yes
&gt; why, and if no, why not.

Yes. We want to enable this by default.

opal-prd daemon handles hardware-specific recovery processes, and should be run as a background system process after boot. It interacts with OPAL firmware to capture hardware error causes, log events to the management processor, and handles recoverable errors where suitable. Without this daemon we will not be able to handle hardware errors (like processor checkstop). Hence we would like to enable this daemon by default on ppc64le architecture. 

&gt; 
&gt; And if yes, why do you want the service started by default instead of being
&gt; socket activated.

No particular reason. Either way works for me as long as daemon starts by default.


-Vasant</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9141304</commentid>
    <comment_count>13</comment_count>
    <who name="Zbigniew Jędrzejewski-Szmek">zbyszek</who>
    <bug_when>2016-03-11 07:51:42 -0500</bug_when>
    <thetext>OK, after looking at the two unit files, .service Requires the .socket unit, so it is enough to only put the .service in presets.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9144984</commentid>
    <comment_count>14</comment_count>
    <who name="Vasant Hegde">hegdevasant</who>
    <bug_when>2016-03-14 00:36:24 -0400</bug_when>
    <thetext>(In reply to Zbigniew Jędrzejewski-Szmek from comment #13)
&gt; OK, after looking at the two unit files, .service Requires the .socket unit,
&gt; so it is enough to only put the .service in presets.

Thanks!

-Vasant</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9146175</commentid>
    <comment_count>15</comment_count>
    <who name="Stephen Gallagher">sgallagh</who>
    <bug_when>2016-03-14 08:58:10 -0400</bug_when>
    <thetext>https://pagure.io/fedora-release/pull-request/38 (F24)
https://pagure.io/fedora-release/pull-request/37 (Rawhide/F25)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9181315</commentid>
    <comment_count>16</comment_count>
    <who name="Vasant Hegde">hegdevasant</who>
    <bug_when>2016-03-28 00:32:26 -0400</bug_when>
    <thetext>Looks like its fixed in rawhide branch.. But not yet included in Fedora24 branch.


changelog from rawhide branch.

fedora-release-25-0.7.noarch.rpm
* Fri Mar 18 2016 Dennis Gilmor &lt;dennis@ausil.us&gt; - 25-0.7
- drop Requires(post): sed
- Fork to execute systemctl calls

* Tue Mar 15 2016 Dennis Gilmore &lt;dennis@ausil.us&gt; - 25-0.6
- Properly handle systemd presets in Lua scripts
- enable opal-prd.service
- Remove call to grub2-mkconfig


-Vasant</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9182188</commentid>
    <comment_count>17</comment_count>
    <who name="Dennis Gilmore">dennis</who>
    <bug_when>2016-03-28 10:49:32 -0400</bug_when>
    <thetext>It was not pulled into f24 yet as we were in alpha freeze and it did not fix anything that was proposed as a blocker or freeze exception. As such it was inappropriate to pull in.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9185448</commentid>
    <comment_count>18</comment_count>
    <who name="Mike McCune">mmccune</who>
    <bug_when>2016-03-28 19:33:48 -0400</bug_when>
    <thetext>This bug was accidentally moved from POST to MODIFIED via an error in automation, please see mmccune@redhat.com with any questions</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9329183</commentid>
    <comment_count>19</comment_count>
    <who name="Peter Robinson">pbrobinson</who>
    <bug_when>2016-05-16 07:26:53 -0400</bug_when>
    <thetext>This will be in fedora-release-24-0.18 (or the next one)</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9425014</commentid>
    <comment_count>20</comment_count>
    <who name="Vasant Hegde">hegdevasant</who>
    <bug_when>2016-06-16 12:56:47 -0400</bug_when>
    <thetext>Verified on fedora-release-24-1.noarch.rpm and its fixed.
We can close this bug.

-Vasant</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>