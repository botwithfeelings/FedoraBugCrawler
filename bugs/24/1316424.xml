<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-error-list@redhat.com"
>

    <bug>
          <bug_id>1316424</bug_id>
          
          <creation_ts>2016-03-10 03:29:00 -0500</creation_ts>
          <short_desc>Regression local 127.0.0.1 node not registered by default</short_desc>
          <delta_ts>2016-04-06 10:08:54 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>kubernetes</component>
          <version>24</version>
          <rep_platform>Unspecified</rep_platform>
          <op_sys>Unspecified</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc></bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Reopened</keywords>
          <priority>unspecified</priority>
          <bug_severity>unspecified</bug_severity>
          <target_milestone>---</target_milestone>
          
          
          <everconfirmed>1</everconfirmed>
          <reporter name="Stef Walter">stefw</reporter>
          <assigned_to name="Jan Chaloupka">jchaloup</assigned_to>
          <cc>eparis</cc>
    
    
    <cc>golang-updates</cc>
    
    
    <cc>jcajka</cc>
    
    
    <cc>jchaloup</cc>
    
    
    <cc>mvollmer</cc>
    
    
    <cc>nhorman</cc>
    
    
    <cc>vbatts</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>kubernetes-1.2.0-0.15.alpha6.gitf0cd09a.fc24</cf_fixed_in>
          <cf_doc_type>Bug Fix</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-04-06 10:08:54</cf_last_closed>
          <cf_type>Bug</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9136726</commentid>
    <comment_count>0</comment_count>
    <who name="Stef Walter">stefw</who>
    <bug_when>2016-03-10 03:29:08 -0500</bug_when>
    <thetext>Description of problem:

The local 127.0.0.1 kubernetes node should register itself in the default install. In the fedora-24 build it no longer does:

Version-Release number of selected component (if applicable):

kubernetes-1.2.0-0.14.alpha6.gitf0cd09a.fc24.x86_64

How reproducible:

Every time


Steps to Reproduce:
1. systemctl start etcd kube-apiserver kube-controller-manager kube-scheduler docker kube-proxy kubelet
2. kubectl get nodes # wait or repeat as needed

Actual results:

No output.

Expected results:

NAME        LABELS                             STATUS
127.0.0.1   kubernetes.io/hostname=127.0.0.1   Ready

Additional info:

This works on fedora-23 with the following kubernetes RPM: kubernetes-1.1.0-0.17.git388061f.fc23.x86_64. In addition the following RPM from fedora-23 updates-testing 1.2.0-0.15.alpha6.gitf0cd09a.fc23</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9136820</commentid>
    <comment_count>1</comment_count>
    <who name="Jan Chaloupka">jchaloup</who>
    <bug_when>2016-03-10 04:08:17 -0500</bug_when>
    <thetext>Stef, can you checkout kubernetes-1.2.0-0.15.alpha6.gitf0cd09a.fc23? Running rpms from the build show the expected result.

[1] http://koji.fedoraproject.org/koji/buildinfo?buildID=743082</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9136865</commentid>
    <comment_count>2</comment_count>
    <who name="Stef Walter">stefw</who>
    <bug_when>2016-03-10 04:20:43 -0500</bug_when>
    <thetext>This problem is happening on Fedora 24. Do you have a Fedora 24 build of that RPM?</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9136896</commentid>
    <comment_count>3</comment_count>
    <who name="Jan Chaloupka">jchaloup</who>
    <bug_when>2016-03-10 04:30:54 -0500</bug_when>
    <thetext>http://koji.fedoraproject.org/koji/buildinfo?buildID=743084</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9136950</commentid>
    <comment_count>4</comment_count>
    <who name="Stef Walter">stefw</who>
    <bug_when>2016-03-10 04:45:53 -0500</bug_when>
    <thetext>The issue remains with that build:

# rpm -q kubernetes
kubernetes-1.2.0-0.14.alpha6.gitf0cd09a.fc24.x86_64
# kubectl get nodes

No output above. All services are running:

# kubectl version
Client Version: version.Info{Major:&quot;1&quot;, Minor:&quot;2&quot;, GitVersion:&quot;v1.2.0&quot;, GitCommit:&quot;cffae0523cfa80ddf917aba69f08508b91f603d5&quot;, GitTreeState:&quot;clean&quot;}
Server Version: version.Info{Major:&quot;1&quot;, Minor:&quot;2&quot;, GitVersion:&quot;v1.2.0&quot;, GitCommit:&quot;cffae0523cfa80ddf917aba69f08508b91f603d5&quot;, GitTreeState:&quot;clean&quot;}
# systemctl status kube-*
● kube-proxy.service - Kubernetes Kube-Proxy Server
   Loaded: loaded (/usr/lib/systemd/system/kube-proxy.service; disabled; vendor 
   Active: active (running) since Thu 2016-03-10 04:43:18 EST; 1min 28s ago
     Docs: https://github.com/GoogleCloudPlatform/kubernetes
 Main PID: 1239 (kube-proxy)
    Tasks: 7 (limit: 512)
   CGroup: /system.slice/kube-proxy.service
           └─1239 /usr/bin/kube-proxy --logtostderr=true --v=0 --master=http://1

Mar 10 04:43:20 localhost.localdomain kube-proxy[1239]: Try `iptables -h&apos; or &apos;ip
Mar 10 04:43:20 localhost.localdomain kube-proxy[1239]: E0310 04:43:20.006343   
Mar 10 04:43:20 localhost.localdomain kube-proxy[1239]: E0310 04:43:20.007063   
Mar 10 04:43:20 localhost.localdomain kube-proxy[1239]: E0310 04:43:20.008956   
Mar 10 04:43:20 localhost.localdomain kube-proxy[1239]: E0310 04:43:20.010194   
Mar 10 04:43:20 localhost.localdomain kube-proxy[1239]: I0310 04:43:20.040594   
Mar 10 04:43:20 localhost.localdomain kube-proxy[1239]: I0310 04:43:20.040685   
Mar 10 04:43:20 localhost.localdomain kube-proxy[1239]: I0310 04:43:20.040858   
Mar 10 04:43:20 localhost.localdomain kube-proxy[1239]: E0310 04:43:20.063331   
Mar 10 04:43:21 localhost.localdomain kube-proxy[1239]: E0310 04:43:21.276617   

● kube-scheduler.service - Kubernetes Scheduler Plugin
   Loaded: loaded (/usr/lib/systemd/system/kube-scheduler.service; disabled; ven
   Active: active (running) since Thu 2016-03-10 04:43:18 EST; 1min 28s ago
     Docs: https://github.com/GoogleCloudPlatform/kubernetes
 Main PID: 1244 (kube-scheduler)
    Tasks: 5 (limit: 512)
   CGroup: /system.slice/kube-scheduler.service
           └─1244 /usr/bin/kube-scheduler --logtostderr=true --v=0 --master=http

Mar 10 04:43:18 localhost.localdomain systemd[1]: Started Kubernetes Scheduler P
Mar 10 04:43:19 localhost.localdomain kube-scheduler[1244]: W0310 04:43:19.86344
Mar 10 04:43:19 localhost.localdomain kube-scheduler[1244]: W0310 04:43:19.86352

● kube-controller-manager.service - Kubernetes Controller Manager
   Loaded: loaded (/usr/lib/systemd/system/kube-controller-manager.service; disa
   Active: active (running) since Thu 2016-03-10 04:43:18 EST; 1min 28s ago
     Docs: https://github.com/GoogleCloudPlatform/kubernetes
 Main PID: 1249 (kube-controller)
    Tasks: 6 (limit: 512)
   CGroup: /system.slice/kube-controller-manager.service
           └─1249 /usr/bin/kube-controller-manager --logtostderr=true --v=0 --ma

Mar 10 04:43:20 localhost.localdomain kube-controller-manager[1249]: E0310 04:43
Mar 10 04:43:21 localhost.localdomain kube-controller-manager[1249]: W0310 04:43
Mar 10 04:43:21 localhost.localdomain kube-controller-manager[1249]: W0310 04:43
Mar 10 04:43:21 localhost.localdomain kube-controller-manager[1249]: W0310 04:43
Mar 10 04:43:21 localhost.localdomain kube-controller-manager[1249]: W0310 04:43
Mar 10 04:43:21 localhost.localdomain kube-controller-manager[1249]: W0310 04:43
Mar 10 04:43:21 localhost.localdomain kube-controller-manager[1249]: W0310 04:43
Mar 10 04:43:21 localhost.localdomain kube-controller-manager[1249]: W0310 04:43
Mar 10 04:43:21 localhost.localdomain kube-controller-manager[1249]: W0310 04:43
Mar 10 04:43:21 localhost.localdomain kube-controller-manager[1249]: W0310 04:43

● kube-apiserver.service - Kubernetes API Server
   Loaded: loaded (/usr/lib/systemd/system/kube-apiserver.service; disabled; ven
   Active: active (running) since Thu 2016-03-10 04:43:21 EST; 1min 25s ago
     Docs: https://github.com/GoogleCloudPlatform/kubernetes
 Main PID: 1313 (kube-apiserver)
    Tasks: 6 (limit: 512)
   CGroup: /system.slice/kube-apiserver.service
           └─1313 /usr/bin/kube-apiserver --logtostderr=true --v=0 --etcd-server

Mar 10 04:43:20 localhost.localdomain kube-apiserver[1313]: I0310 04:43:20.29312
Mar 10 04:43:20 localhost.localdomain kube-apiserver[1313]: I0310 04:43:20.29433
Mar 10 04:43:20 localhost.localdomain kube-apiserver[1313]: I0310 04:43:20.29920
Mar 10 04:43:20 localhost.localdomain kube-apiserver[1313]: [restful] 2016/03/10
Mar 10 04:43:20 localhost.localdomain kube-apiserver[1313]: [restful] 2016/03/10
Mar 10 04:43:20 localhost.localdomain kube-apiserver[1313]: W0310 04:43:20.63368
Mar 10 04:43:20 localhost.localdomain kube-apiserver[1313]: I0310 04:43:20.65604
Mar 10 04:43:21 localhost.localdomain kube-apiserver[1313]: I0310 04:43:21.41848
Mar 10 04:43:21 localhost.localdomain kube-apiserver[1313]: I0310 04:43:21.41872
Mar 10 04:43:21 localhost.localdomain systemd[1]: Started Kubernetes API Server.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9136999</commentid>
    <comment_count>5</comment_count>
    <who name="Stef Walter">stefw</who>
    <bug_when>2016-03-10 04:56:18 -0500</bug_when>
    <thetext>I spoke too soon, and didn&apos;t get the right build. This build seems to work:

# kubectl get nodes
NAME        LABELS                             STATUS    AGE
127.0.0.1   kubernetes.io/hostname=127.0.0.1   Ready     3s
# rpm -q kubernetes
kubernetes-1.2.0-0.15.alpha6.gitf0cd09a.fc23.x86_64</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9137003</commentid>
    <comment_count>6</comment_count>
    <who name="Jan Chaloupka">jchaloup</who>
    <bug_when>2016-03-10 04:58:06 -0500</bug_when>
    <thetext>Thanks for verifying.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9137541</commentid>
    <comment_count>7</comment_count>
    <who name="Stef Walter">stefw</who>
    <bug_when>2016-03-10 06:02:36 -0500</bug_when>
    <thetext>Worth noting that this isn&apos;t fixed yet in Fedora 24. Although the above build exists. Running &apos;yum update&apos; on fedora-24 doesn&apos;t fix the issue. I think a bodhi update is necessary.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9137574</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-03-10 06:09:53 -0500</bug_when>
    <thetext>kubernetes-1.2.0-0.15.alpha6.gitf0cd09a.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-49a2ed017f</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9137577</commentid>
    <comment_count>9</comment_count>
    <who name="Jan Chaloupka">jchaloup</who>
    <bug_when>2016-03-10 06:10:24 -0500</bug_when>
    <thetext>Interesting, though it will take more time to enable updates for f24. Updated.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9142586</commentid>
    <comment_count>10</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-03-11 14:27:45 -0500</bug_when>
    <thetext>kubernetes-1.2.0-0.15.alpha6.gitf0cd09a.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-49a2ed017f</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9212302</commentid>
    <comment_count>11</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-04-06 10:08:51 -0400</bug_when>
    <thetext>kubernetes-1.2.0-0.15.alpha6.gitf0cd09a.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>