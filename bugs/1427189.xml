<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1427189</bug_id>

    <creation_ts>2017-02-27 09:42:00 -0500</creation_ts>
    <short_desc>Unresolved OSGi requirement breaks Eclipse help system</short_desc>
    <delta_ts>2017-04-18 17:50:37 -0400</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>jetty</component>
    <version>26</version>
    <rep_platform>Unspecified</rep_platform>
    <op_sys>Unspecified</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>CURRENTRELEASE</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard></status_whiteboard>
    <keywords>Reopened</keywords>
    <priority>unspecified</priority>
    <bug_severity>unspecified</bug_severity>
    <target_milestone>---</target_milestone>

    <everconfirmed>1</everconfirmed>
    <reporter name="Mat Booth">mat.booth</reporter>
    <assigned_to name="Mikolaj Izdebski">mizdebsk</assigned_to>
    <cc>akurtako</cc>

    <cc>eclipse-sig</cc>

    <cc>java-sig-commits</cc>

    <cc>krzysztof.daniel</cc>

    <cc>mizdebsk</cc>

    <cc>msimacek</cc>

    <cc>puntogil</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in>9.4.3-3.v20170317</cf_fixed_in>
  <cf_doc_type>If docs needed, set a value</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2017-04-18 17:50:37</cf_last_closed>
<cf_type>Bug</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>
<external_bugs name="Eclipse Project">512807</external_bugs>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>10187001</commentid>
<comment_count>0</comment_count>
<who name="Mat Booth">mat.booth</who>
<bug_when>2017-02-27 09:42:49 -0500</bug_when>
<thetext>Description of problem: When using the integrated Eclipse help system, I see this error in the log: !ENTRY org.eclipse.ui 4 0 2017-02-27 14:19:57.069 !MESSAGE Unhandled event loop exception !STACK 0 java.lang.NoClassDefFoundError:
org/eclipse/equinox/http/jetty/JettyConfigurator at org.eclipse.help.internal.server.JettyHelpServer$StartServerThread.run(JettyHelpServer.java:79) Caused by: java.lang.ClassNotFoundException: org.eclipse.equinox.http.jetty.JettyConfigurator cannot
be found by org.eclipse.help.base_4.1.2.v20170227-1124 at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461) at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:372) at
org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:364) at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:161) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ... 1 more Looking at
the OSGi console, I see the following unresolved bundles: g! ss -s INSTALLED id State Bundle 97 INSTALLED org.eclipse.equinox.http.jetty_3.3.0.v20170227-1124 143 INSTALLED org.eclipse.jetty.http_9.4.2.v20170220 145 INSTALLED
org.eclipse.jetty.security_9.4.2.v20170220 146 INSTALLED org.eclipse.jetty.server_9.4.2.v20170220 147 INSTALLED org.eclipse.jetty.servlet_9.4.2.v20170220 And it seems to be caused by a missing capability: g! diag 143 org.eclipse.jetty.http [143]
Unresolved requirement: Require-Capability: osgi.extender; filter:=&quot;(osgi.extender=osgi.serviceloader.processor)&quot; This requirement seems to be new in: jetty-http-9.4.2-1.v20170220.fc26.noarch It doesn&apos;t look like there is a provider of
this capability in Fedora. Any idea if this requirement can be made optional?</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10193141</commentid>
<comment_count>1</comment_count>
<who name="Mat Booth">mat.booth</who>
<bug_when>2017-02-28 07:10:33 -0500</bug_when>
<thetext>Adding link upstream bug report.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10193448</commentid>
<comment_count>2</comment_count>
<who name="Fedora End Of Life">jkurik</who>
<bug_when>2017-02-28 07:27:34 -0500</bug_when>
<thetext>This bug appears to have been reported against &apos;rawhide&apos; during the Fedora 26 development cycle. Changing version to &apos;26&apos;.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10194324</commentid>
<comment_count>3</comment_count>
<who name="Michael Simacek">msimacek</who>
<bug_when>2017-02-28 10:41:05 -0500</bug_when>
<thetext>The reference implementation for the capability is Apache Aries SPI Fly [1], which is not packaged in Fedora. I can package it if needed. But from the discussion at [2] it seems that eclipse&apos;s dependencies are too coarse grained. Can
you check whether you can use the suggested solution? [1] http://aries.apache.org/modules/spi-fly.html [2] https://github.com/eclipse/jetty.project/issues/1290</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10197293</commentid>
<comment_count>4</comment_count>
<who name="Mat Booth">mat.booth</who>
<bug_when>2017-03-01 08:05:19 -0500</bug_when>
<thetext>(In reply to Michael Simacek from comment #3) &gt; The reference implementation for the capability is Apache Aries SPI Fly [1], &gt; which is not packaged in Fedora. I can package it if needed. But from the &gt; discussion at [2] it seems
that eclipse&apos;s dependencies are too coarse &gt; grained. Can you check whether you can use the suggested solution? &gt; &gt; [1] http://aries.apache.org/modules/spi-fly.html &gt; [2] https://github.com/eclipse/jetty.project/issues/1290 The
discussion at [2] is a bit misleading because Eclipse does not make use of jetty-http2, it only makes use of the regular jetty-http bundle as it always has done. From my tests (as suggested by Tom Watson in the eclipse bug), this dependency can be
made optional in the jetty-http bundle.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10217519</commentid>
<comment_count>5</comment_count>
<who name="Michael Simacek">msimacek</who>
<bug_when>2017-03-07 11:37:45 -0500</bug_when>
<thetext>Applying Matt&apos;s patch for now.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10217520</commentid>
<comment_count>6</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2017-03-07 11:38:13 -0500</bug_when>
<thetext>jetty-9.4.2-2.v20170220.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-94ac9ce627</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10229773</commentid>
<comment_count>7</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2017-03-10 18:19:58 -0500</bug_when>
<thetext>jetty-9.4.2-2.v20170220.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to install
test updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-94ac9ce627</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10296505</commentid>
<comment_count>8</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2017-04-01 12:50:47 -0400</bug_when>
<thetext>jetty-9.4.2-2.v20170220.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10306430</commentid>
<comment_count>9</comment_count>
<who name="Mat Booth">mat.booth</who>
<bug_when>2017-04-05 07:27:31 -0400</bug_when>
<thetext>It turns out this is not as fixed as I though it was as there is a second dependency on Apache Aries SPI Fly that should be optional :-( I submitted another patch upstream here:
https://github.com/eclipse/jetty.project/pull/1451/commits/1b9ec463a3b8b83d60359fe786c5be9b99b40591 I&apos;d like to see this applied to F26 and F27, if possible.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10306452</commentid>
<comment_count>10</comment_count>
<who name="Mikolaj Izdebski">mizdebsk</who>
<bug_when>2017-04-05 07:42:22 -0400</bug_when>
<thetext>Fixed in jetty-9.4.3-2.v20170317</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10306869</commentid>
<comment_count>11</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2017-04-05 09:31:41 -0400</bug_when>
<thetext>jetty-9.4.3-2.v20170317.fc26 has been submitted as an update to Fedora 26. https://bodhi.fedoraproject.org/updates/FEDORA-2017-4a95e07013</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10306895</commentid>
<comment_count>12</comment_count>
<who name="Mikolaj Izdebski">mizdebsk</who>
<bug_when>2017-04-05 09:35:21 -0400</bug_when>
<thetext>Buildroot override activated, https://bodhi.fedoraproject.org/overrides/jetty-9.4.3-2.v20170317.fc26</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10308439</commentid>
<comment_count>13</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2017-04-05 17:56:05 -0400</bug_when>
<thetext>jetty-9.4.3-2.v20170317.fc26 has been pushed to the Fedora 26 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to install
test updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2017-4a95e07013</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10311039</commentid>
<comment_count>14</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2017-04-06 09:44:17 -0400</bug_when>
<thetext>jetty-9.4.3-2.v20170317.fc26 has been pushed to the Fedora 26 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>10343345</commentid>
<comment_count>15</comment_count>
<who name="Mikolaj Izdebski">mizdebsk</who>
<bug_when>2017-04-18 17:50:37 -0400</bug_when>
<thetext>I believe that this bug is fixed in jetty-9.4.3-3.v20170317, which is available in Fedora 26, so I am closing this bug now. The build containing the fix can be found at Koji: http://koji.fedoraproject.org/koji/buildinfo?buildID=880501</thetext>
</long_desc>

</bug>

</bugzilla>
