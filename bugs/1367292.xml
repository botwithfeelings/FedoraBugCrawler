<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1367292</bug_id>

    <creation_ts>2016-08-16 02:55:00 -0400</creation_ts>
    <short_desc>SELinux is preventing (ostnamed) from &apos;mounton&apos; accesses on the directory /dev.</short_desc>
    <delta_ts>2017-01-10 07:31:32 -0500</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>selinux-policy</component>
    <version>25</version>
    <rep_platform>x86_64</rep_platform>
    <op_sys>Unspecified</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>ERRATA</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard>abrt_hash:1702da6e68227b57d6fe08a7722db74558669be3345cd5c4944cd36031d4f95f;VARIANT_ID=workstation; AcceptedBlocker</status_whiteboard>
    <keywords></keywords>
    <priority>high</priority>
    <bug_severity>high</bug_severity>
    <target_milestone>---</target_milestone>

    <blocked>1277289</blocked>
    <everconfirmed>1</everconfirmed>
    <reporter name="Kamil Páral">kparal</reporter>
    <assigned_to name="Lukas Vrabec">lvrabec</assigned_to>
    <cc>awilliam</cc>

    <cc>bugzilla</cc>

    <cc>dominick.grift</cc>

    <cc>dwalsh</cc>

    <cc>gmarr</cc>

    <cc>jfrieben</cc>

    <cc>kparal</cc>

    <cc>lvrabec</cc>

    <cc>mgrepl</cc>

    <cc>mikhail.v.gavrilov</cc>

    <cc>pgervase</cc>

    <cc>plautrba</cc>

    <cc>rhbz2</cc>

    <cc>robatino</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in>selinux-policy-3.13.1-215.fc25</cf_fixed_in>
  <cf_doc_type>If docs needed, set a value</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2016-10-08 22:52:31</cf_last_closed>
<cf_type>---</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>9617467</commentid>
<comment_count>0</comment_count>
<who name="Kamil Páral">kparal</who>
<bug_when>2016-08-16 02:55:57 -0400</bug_when>
<thetext>Description of problem: Booted Workstation Live 20160815.n.2 and started anaconda. SELinux is preventing (ostnamed) from &apos;mounton&apos; accesses on the directory /dev. ***** Plugin restorecon (94.8 confidence) suggests
************************ If you want to fix the label. /dev default label should be device_t. Then you can run restorecon. Do # /sbin/restorecon -v /dev ***** Plugin catchall_labels (5.21 confidence) suggests ******************* If you want to allow
(ostnamed) to have mounton access on the dev directory Then you need to change the label on /dev Do # semanage fcontext -a -t FILE_TYPE &apos;/dev&apos; where FILE_TYPE is one of the following: admin_home_t, anon_inodefs_t, audit_spool_t,
auditd_log_t, autofs_t, automount_tmp_t, bacula_store_t, binfmt_misc_fs_t, boot_t, capifs_t, cephfs_t, cgroup_t, cifs_t, container_image_t, debugfs_t, default_t, device_t, devpts_t, dnssec_t, dosfs_t, ecryptfs_t, efivarfs_t, etc_t, fusefs_t,
home_root_t, hugetlbfs_t, ifconfig_var_run_t, init_var_run_t, initrc_tmp_t, iso9660_t, kdbusfs_t, mail_spool_t, mnt_t, mqueue_spool_t, named_conf_t, news_spool_t, nfs_t, nfsd_fs_t, onload_fs_t, openshift_tmp_t, openshift_var_lib_t, oracleasmfs_t,
proc_t, proc_xen_t, pstore_t, public_content_rw_t, public_content_t, ramfs_t, random_seed_t, removable_t, root_t, rpc_pipefs_t, security_t, spufs_t, src_t, svirt_sandbox_file_t, sysctl_fs_t, sysctl_t, sysfs_t, sysv_t, tmp_t, tmpfs_t, usbfs_t,
user_home_dir_t, user_home_t, user_tmp_t, usr_t, var_lib_nfs_t, var_lib_t, var_lock_t, var_log_t, var_run_t, var_t, virt_image_t, virt_var_lib_t, vmblock_t, vxfs_t, xend_var_lib_t, xend_var_run_t, xenfs_t, xenstored_var_lib_t. Then execute:
restorecon -v &apos;/dev&apos; ***** Plugin catchall (1.44 confidence) suggests ************************** If you believe that (ostnamed) should be allowed mounton access on the dev directory by default. Then you should report this as a bug. You can
generate a local policy module to allow this access. Do allow this access for now by executing: # ausearch -c &apos;(ostnamed)&apos; --raw | audit2allow -M my-ostnamed # semodule -X 300 -i my-ostnamed.pp Additional Information: Source Context
system_u:system_r:init_t:s0 Target Context system_u:object_r:unlabeled_t:s0 Target Objects /dev [ dir ] Source (ostnamed) Source Path (ostnamed) Port &lt;Unknown&gt; Host (removed) Source RPM Packages Target RPM Packages filesystem-3.2-37.fc24.x86_64
Policy RPM selinux-policy-3.13.1-207.fc25.noarch Selinux Enabled True Policy Type targeted Enforcing Mode Enforcing Host Name (removed) Platform Linux (removed) 4.8.0-0.rc1.git0.1.fc25.x86_64 #1 SMP Mon Aug 8 16:20:07 UTC 2016 x86_64 x86_64 Alert
Count 2 First Seen 2016-08-16 02:52:42 EDT Last Seen 2016-08-16 06:52:28 EDT Local ID 04483d0f-d7be-4d23-a350-9680f29664e6 Raw Audit Messages type=AVC msg=audit(1471330362.288:193): avc: denied { mounton } for pid=1972 comm=&quot;(-localed)&quot;
path=&quot;/dev&quot; dev=&quot;dm-3&quot; ino=262657 scontext=system_u:system_r:init_t:s0 tcontext=system_u:object_r:unlabeled_t:s0 tclass=dir permissive=0 Hash: (ostnamed),init_t,unlabeled_t,dir,mounton Version-Release number of selected component:
selinux-policy-3.13.1-207.fc25.noarch Additional info: reporter: libreport-2.7.2 hashmarkername: setroubleshoot kernel: 4.8.0-0.rc1.git0.1.fc25.x86_64 type: libreport Potential duplicate: bug 1347942</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9617471</commentid>
<comment_count>1</comment_count>
<who name="Kamil Páral">kparal</who>
<bug_when>2016-08-16 02:56:44 -0400</bug_when>
<thetext>Proposing as a Final blocker: &quot;There must be no SELinux denial notifications or crash notifications on boot of or during installation from a release-blocking live image, or at first login after a default install of a release-blocking
desktop. &quot; https://fedoraproject.org/wiki/Fedora_25_Final_Release_Criteria#SELinux_and_crash_notifications</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9618958</commentid>
<comment_count>2</comment_count>
<who name="Lukas Vrabec">lvrabec</who>
<bug_when>2016-08-16 09:30:48 -0400</bug_when>
<thetext>I cannot reproduce this issue on fresh F25 system.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9621673</commentid>
<comment_count>3</comment_count>
<who name="Kamil Páral">kparal</who>
<bug_when>2016-08-17 05:06:40 -0400</bug_when>
<thetext>I reproduced again with Fedora-Workstation-Live-x86_64-25-20160816.n.0.iso. It happens before anaconda is started - just booting into the desktop triggers this.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9637767</commentid>
<comment_count>4</comment_count>
<who name="Geoffrey Marr">gmarr</who>
<bug_when>2016-08-22 18:20:55 -0400</bug_when>
<thetext>Discussed during the 2016-08-22 blocker review meeting: [1] The decision to classify this bug as an AcceptedBlocker was made as it is a clear violation of &quot;There must be no SELinux denial notifications or crash notifications on boot of
or during installation from a release-blocking live image, or at first login after a default install of a release-blocking desktop.&quot; [1] https://meetbot.fedoraproject.org/fedora-blocker-review/2016-08-22/f25-blocker-review.2016-08-22-16.00.txt</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9645211</commentid>
<comment_count>5</comment_count>
<who name="Joachim Frieben">jfrieben</who>
<bug_when>2016-08-24 06:38:25 -0400</bug_when>
<thetext>Description of problem: Alert appears after booting from Fedora-Workstation-Live-x86_64-25_Alpha-1.1 media. Version-Release number of selected component: selinux-policy-3.13.1-208.fc25.noarch Additional info: reporter: libreport-2.7.2
hashmarkername: setroubleshoot kernel: 4.8.0-0.rc2.git3.1.fc25.x86_64 type: libreport</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9657012</commentid>
<comment_count>6</comment_count>
<who name="Christian Stadelmann">rhbz2</who>
<bug_when>2016-08-28 12:38:19 -0400</bug_when>
<thetext>Description of problem: I booted a Fedora 25 Workstation iso compose (2016-08-27) and got this selinux alert after boot. Version-Release number of selected component: selinux-policy-3.13.1-208.fc25.noarch Additional info: reporter:
libreport-2.7.2 hashmarkername: setroubleshoot kernel: 4.8.0-0.rc2.git3.1.fc25.x86_64 type: libreport</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9664411</commentid>
<comment_count>7</comment_count>
<who name="Mikhail">mikhail.v.gavrilov</who>
<bug_when>2016-08-30 12:56:39 -0400</bug_when>
<thetext>Description of problem: Just start Fedora from live USB Version-Release number of selected component: selinux-policy-3.13.1-208.fc25.noarch Additional info: reporter: libreport-2.7.2 hashmarkername: setroubleshoot kernel:
4.8.0-0.rc2.git3.1.fc25.x86_64 type: libreport</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9665003</commentid>
<comment_count>8</comment_count>
<who name="Mikhail">mikhail.v.gavrilov</who>
<bug_when>2016-08-30 16:20:50 -0400</bug_when>
<thetext>Description of problem: install Fedora 25 Alpha Version-Release number of selected component: selinux-policy-3.13.1-208.fc25.noarch Additional info: reporter: libreport-2.7.2 hashmarkername: setroubleshoot kernel:
4.8.0-0.rc2.git3.1.fc25.x86_64 type: libreport</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9726469</commentid>
<comment_count>9</comment_count>
<who name="Lukas Vrabec">lvrabec</who>
<bug_when>2016-09-20 10:37:57 -0400</bug_when>
<thetext>Do this denial break anything or you just see AVC?</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9730161</commentid>
<comment_count>10</comment_count>
<who name="Kamil Páral">kparal</who>
<bug_when>2016-09-21 09:41:58 -0400</bug_when>
<thetext>I still see this with Fedora-Workstation-Live-x86_64-25-20160919.n.0.iso, directly after boot. I don&apos;t know whether it breaks anything, the installation proceeds fine (but then again, anaconda switches the system to permissive, so that
doesn&apos;t mean much).</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9730168</commentid>
<comment_count>11</comment_count>
<who name="Lukas Vrabec">lvrabec</who>
<bug_when>2016-09-21 09:44:05 -0400</bug_when>
<thetext>We should dontaudit this.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9740386</commentid>
<comment_count>12</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-09-24 13:52:36 -0400</bug_when>
<thetext>selinux-policy-3.13.1-215.fc25 has been pushed to the Fedora 25 testing repository. If problems still persist, please make note of it in this bug report. See https://fedoraproject.org/wiki/QA:Updates_Testing for instructions on how to
install test updates. You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-2b3bdc207c</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9751501</commentid>
<comment_count>13</comment_count>
<who name="Chris Murphy">bugzilla</who>
<bug_when>2016-09-28 17:26:44 -0400</bug_when>
<thetext>*** Bug 1361809 has been marked as a duplicate of this bug. ***</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9758720</commentid>
<comment_count>14</comment_count>
<who name="Adam Williamson">awilliam</who>
<bug_when>2016-09-30 22:35:20 -0400</bug_when>
<thetext>With -216, I no longer see this AVC, and automount works...</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9775780</commentid>
<comment_count>15</comment_count>
<who name="Fedora Update System">updates</who>
<bug_when>2016-10-08 22:52:31 -0400</bug_when>
<thetext>selinux-policy-3.13.1-215.fc25 has been pushed to the Fedora 25 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
</long_desc>

</bug>

</bugzilla>
