<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1"
          urlbase="https://bugzilla.redhat.com/"
          
          maintainer="bugzilla-requests@redhat.com"
>

    <bug>
          <bug_id>1353534</bug_id>
          
          <creation_ts>2016-07-07 07:57:00 -0400</creation_ts>
          <short_desc>CVE-2016-6136 kernel: Race condition vulnerability in auditsc.c [fedora-all]</short_desc>
          <delta_ts>2016-08-08 19:52:47 -0400</delta_ts>
          <reporter_accessible>1</reporter_accessible>
          <cclist_accessible>1</cclist_accessible>
          <classification_id>2</classification_id>
          <classification>Fedora</classification>
          <product>Fedora</product>
          <component>kernel</component>
          <version>24</version>
          <rep_platform>All</rep_platform>
          <op_sys>Linux</op_sys>
          <bug_status>CLOSED</bug_status>
          <resolution>ERRATA</resolution>
          
          
          <bug_file_loc>https://github.com/linux-audit/audit-kernel/issues/18</bug_file_loc>
          <status_whiteboard></status_whiteboard>
          <keywords>Security, SecurityTracking</keywords>
          <priority>medium</priority>
          <bug_severity>medium</bug_severity>
          <target_milestone>---</target_milestone>
          
          <blocked>1353533</blocked>
          <everconfirmed>1</everconfirmed>
          <reporter name="Andrej Nemec">anemec</reporter>
          <assigned_to name="Kernel Maintainer List">kernel-maint</assigned_to>
          <cc>gansalmon</cc>
    
    
    <cc>itamar</cc>
    
    
    <cc>jforbes</cc>
    
    
    <cc>jonathan</cc>
    
    
    <cc>jwboyer</cc>
    
    
    <cc>kernel-maint</cc>
    
    
    <cc>madhu.chinakonda</cc>
    
    
    <cc>mchehab</cc>
    
    
    <cc>pmoore</cc>
          <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>
          
          <cf_fixed_in>kernel-4.6.5-300.fc24 kernel-4.6.5-200.fc23</cf_fixed_in>
          <cf_doc_type>Release Note</cf_doc_type>
          <cf_release_notes></cf_release_notes>
          <cf_story_points>---</cf_story_points>
          
          <cf_environment></cf_environment>
          <cf_last_closed>2016-08-08 16:25:36</cf_last_closed>
          <cf_type>---</cf_type>
          <cf_regression_status>---</cf_regression_status>
          <cf_mount_type>---</cf_mount_type>
          <cf_documentation_action>---</cf_documentation_action>
          <cf_crm></cf_crm>
          <cf_verified_branch></cf_verified_branch>
          <cf_category>---</cf_category>
          <cf_ovirt_team>---</cf_ovirt_team>
          
          <cf_cloudforms_team>---</cf_cloudforms_team>
          
          
          
          
          <target_release>---</target_release>
          
          <votes>0</votes>

      

      

      

          <comment_sort_order>oldest_to_newest</comment_sort_order>  
          <long_desc isprivate="0" >
    <commentid>9487118</commentid>
    <comment_count>0</comment_count>
    <who name="Andrej Nemec">anemec</who>
    <bug_when>2016-07-07 07:57:18 -0400</bug_when>
    <thetext>
This is an automatically created tracking bug!  It was created to ensure
that one or more security vulnerabilities are fixed in affected versions
of Fedora.

For comments that are specific to the vulnerability please use bugs filed
against the &quot;Security Response&quot; product referenced in the &quot;Blocks&quot; field.

For more information see:
http://fedoraproject.org/wiki/Security/TrackingBugs

When submitting as an update, use the fedpkg template provided in the next
comment(s).  This will include the bug IDs of this tracking bug as well as
the relevant top-level CVE bugs.

Please also mention the CVE IDs being fixed in the RPM changelog and the
fedpkg commit message.

NOTE: this issue affects multiple supported versions of Fedora. While only
one tracking bug has been filed, please correct all affected versions at
the same time.  If you need to fix the versions independent of each other,
you may clone this bug as appropriate.

Reproducers, if any, will remain confidential and never be made public, unless done so by the security team.

[bug automatically created by: add-tracking-bugs]</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9487119</commentid>
    <comment_count>1</comment_count>
    <who name="Andrej Nemec">anemec</who>
    <bug_when>2016-07-07 07:57:29 -0400</bug_when>
    <thetext>
Use the following template to for the &apos;fedpkg update&apos; request to submit an
update for this issue as it contains the top-level parent bug(s) as well as
this tracking bug.  This will ensure that all associated bugs get updated
when new packages are pushed to stable.

=====

# bugfix, security, enhancement, newpackage (required)
type=security

# testing, stable
request=testing

# Bug numbers: 1234,9876
bugs=1353533,1353534

# Description of your update
notes=Security fix for CVE-2016-6136

# Enable request automation based on the stable/unstable karma thresholds
autokarma=True
stable_karma=3
unstable_karma=-3

# Automatically close bugs when this marked as stable
close_bugs=True

# Suggest that users restart after update
suggest_reboot=False

======

Additionally, you may opt to use the bodhi web interface to submit updates:

https://bodhi.fedoraproject.org/updates/new</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9543139</commentid>
    <comment_count>2</comment_count>
    <who name="Paul Moore">pmoore</who>
    <bug_when>2016-07-23 12:09:24 -0400</bug_when>
    <thetext>As described in the GitHub issue, the problem has been fixed upstream and can be found in the audit#next branch:

 * git://git.infradead.org/users/pcmoore/audit next

  commit 43761473c254b45883a64441dd0bc85a42f3645c
  Author: Paul Moore &lt;paul@paul-moore.com&gt;
  Date:   Tue Jul 19 17:42:57 2016 -0400

    audit: fix a double fetch in audit_log_single_execve_arg()
    
    There is a double fetch problem in audit_log_single_execve_arg()
    where we first check the execve(2) argumnets for any &quot;bad&quot; characters
    which would require hex encoding and then re-fetch the arguments for
    logging in the audit record[1].  Of course this leaves a window of
    opportunity for an unsavory application to munge with the data.
    
    This patch reworks things by only fetching the argument data once[2]
    into a buffer where it is scanned and logged into the audit
    records(s).  In addition to fixing the double fetch, this patch
    improves on the original code in a few other ways: better handling
    of large arguments which require encoding, stricter record length
    checking, and some performance improvements (completely unverified,
    but we got rid of some strlen() calls, that&apos;s got to be a good
    thing).
    
    As part of the development of this patch, I&apos;ve also created a basic
    regression test for the audit-testsuite, the test can be tracked on
    GitHub at the following link:
    
     * https://github.com/linux-audit/audit-testsuite/issues/25
    
    [1] If you pay careful attention, there is actually a triple fetch
    problem due to a strnlen_user() call at the top of the function.
    
    [2] This is a tiny white lie, we do make a call to strnlen_user()
    prior to fetching the argument data.  I don&apos;t like it, but due to the
    way the audit record is structured we really have no choice unless we
    copy the entire argument at once (which would require a rather
    wasteful allocation).  The good news is that with this patch the
    kernel no longer relies on this strnlen_user() value for anything
    beyond recording it in the log, we also update it with a trustworthy
    value whenever possible.
    
    Reported-by: Pengfei Wang &lt;wpengfeinudt@gmail.com&gt;
    Cc: &lt;stable@vger.kernel.org&gt;
    Signed-off-by: Paul Moore &lt;paul@paul-moore.com&gt;</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9547836</commentid>
    <comment_count>3</comment_count>
    <who name="Josh Boyer">jwboyer</who>
    <bug_when>2016-07-25 14:43:56 -0400</bug_when>
    <thetext>Fixed in Fedora git on all branches.  Thanks Paul!</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9566879</commentid>
    <comment_count>4</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-07-29 08:20:05 -0400</bug_when>
    <thetext>kernel-4.6.5-200.fc23 has been submitted as an update to Fedora 23. https://bodhi.fedoraproject.org/updates/FEDORA-2016-754e4768d8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9566890</commentid>
    <comment_count>5</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-07-29 08:20:58 -0400</bug_when>
    <thetext>kernel-4.6.5-300.fc24 has been submitted as an update to Fedora 24. https://bodhi.fedoraproject.org/updates/FEDORA-2016-30e3636e79</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9569103</commentid>
    <comment_count>6</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-07-30 15:26:42 -0400</bug_when>
    <thetext>kernel-4.6.5-200.fc23 has been pushed to the Fedora 23 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-754e4768d8</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9569119</commentid>
    <comment_count>7</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-07-30 15:27:08 -0400</bug_when>
    <thetext>kernel-4.6.5-300.fc24 has been pushed to the Fedora 24 testing repository. If problems still persist, please make note of it in this bug report.
See https://fedoraproject.org/wiki/QA:Updates_Testing for
instructions on how to install test updates.
You can provide feedback for this update here: https://bodhi.fedoraproject.org/updates/FEDORA-2016-30e3636e79</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9595368</commentid>
    <comment_count>8</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-08-08 16:24:32 -0400</bug_when>
    <thetext>kernel-4.6.5-300.fc24 has been pushed to the Fedora 24 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc><long_desc isprivate="0" >
    <commentid>9595776</commentid>
    <comment_count>9</comment_count>
    <who name="Fedora Update System">updates</who>
    <bug_when>2016-08-08 19:51:45 -0400</bug_when>
    <thetext>kernel-4.6.5-200.fc23 has been pushed to the Fedora 23 stable repository. If problems still persist, please make note of it in this bug report.</thetext>
  </long_desc>
      
      

    </bug>

</bugzilla>