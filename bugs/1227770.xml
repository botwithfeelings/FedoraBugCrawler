<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE bugzilla SYSTEM "https://bugzilla.redhat.com/page.cgi?id=bugzilla.dtd">

<bugzilla version="4.4.12068.1" urlbase="https://bugzilla.redhat.com/" maintainer="bugzilla-error-list@redhat.com">

  <bug>
    <bug_id>1227770</bug_id>

    <creation_ts>2015-06-03 09:04:00 -0400</creation_ts>
    <short_desc>Gdm doesn&apos;t show up in qemu environment with cirrus graphics card (KVM or Xen)</short_desc>
    <delta_ts>2016-12-19 15:31:14 -0500</delta_ts>
    <reporter_accessible>1</reporter_accessible>
    <cclist_accessible>1</cclist_accessible>
    <classification_id>2</classification_id>
    <classification>Fedora</classification>
    <product>Fedora</product>
    <component>wayland</component>
    <version>24</version>
    <rep_platform>Unspecified</rep_platform>
    <op_sys>Unspecified</op_sys>
    <bug_status>CLOSED</bug_status>
    <resolution>WONTFIX</resolution>

    <bug_file_loc></bug_file_loc>
    <status_whiteboard></status_whiteboard>
    <keywords>Reopened</keywords>
    <priority>unspecified</priority>
    <bug_severity>unspecified</bug_severity>
    <target_milestone>---</target_milestone>

    <everconfirmed>1</everconfirmed>
    <reporter name="Göran Uddeborg">goeran</reporter>
    <assigned_to name="Adam Jackson">ajax</assigned_to>
    <cc>ajax</cc>

    <cc>jminter</cc>

    <cc>ketuzsezr</cc>

    <cc>kraxel</cc>

    <cc>pasik</cc>

    <cc>raistlin</cc>

    <cc>sjenning</cc>
    <qa_contact name="Fedora Extras Quality Assurance">extras-qa</qa_contact>

    <cf_fixed_in></cf_fixed_in>
  <cf_doc_type>Bug Fix</cf_doc_type>
<cf_release_notes></cf_release_notes>
<cf_story_points>---</cf_story_points>

<cf_environment></cf_environment>
<cf_last_closed>2016-12-19 15:31:14</cf_last_closed>
<cf_type>Bug</cf_type>
<cf_regression_status>---</cf_regression_status>
<cf_mount_type>---</cf_mount_type>
<cf_documentation_action>---</cf_documentation_action>
<cf_crm></cf_crm>
<cf_verified_branch></cf_verified_branch>
<cf_category>---</cf_category>
<cf_ovirt_team>---</cf_ovirt_team>

<cf_cloudforms_team>---</cf_cloudforms_team>

<target_release>---</target_release>

<votes>0</votes>

<comment_sort_order>oldest_to_newest</comment_sort_order>
<long_desc isprivate="0">
<commentid>8300960</commentid>
<comment_count>0</comment_count>
<who name="Göran Uddeborg">goeran</who>
<bug_when>2015-06-03 09:04:19 -0400</bug_when>
<thetext>Description of problem: After upgrading a virtual machine from Fedora 21 to 22 the login console didn&apos;t show up. The fedora &quot;F&quot; logo remained in place. The machine was configured to use the &quot;cirrus&quot; graphics card. I
activated the &quot;WaylandEnable=false&quot; line in /etc/gdm/custom.conf. Then the login screen did show up again. I switched back by commenting out the line again, but switched to a &quot;qxl&quot; graphics card in virt-manager. The gdm login
screen did show up again. So the problematic combination appears to be wayland on cirrus. Version-Release number of selected component (if applicable): I&apos;m not sure what component is to blame, I haven&apos;t really understood wayland yet. But
here are a couple of version numbers that might be relevant. gdm-3.16.1.1-1.fc22.x86_64 xorg-x11-server-Xwayland-1.17.1-12.fc22.x86_64 libwayland-client-1.7.0-1.fc22.x86_64 gnome-session-wayland-session-3.16.0-1.fc22.x86_64 How reproducible: Every
time Steps to Reproduce: 1. Configure a virtual machine with an cirrus graphics card. 2. Try to run Fedora 22 with gdm on it. Actual results: The &quot;F&quot; from the boot stays on the console screen. Expected results: A gdm login screen should
show up. Additional info: The host system is RHEL6, in case that matters.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>8657917</commentid>
<comment_count>1</comment_count>
<who name="Seth Jennings">sethdjennings</who>
<bug_when>2015-09-22 11:25:21 -0400</bug_when>
<thetext>Still a problem in F23 as well.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9524680</commentid>
<comment_count>2</comment_count>
<who name="Fedora End Of Life">jkurik</who>
<bug_when>2016-07-19 10:36:18 -0400</bug_when>
<thetext>Fedora 22 changed to end-of-life (EOL) status on 2016-07-19. Fedora 22 is no longer maintained, which means that it will not receive any further security or bug fix updates. As a result we are closing this bug. If you can reproduce this bug
against a currently maintained version of Fedora please feel free to reopen this bug against that version. If you are unable to reopen this bug, please file a new report against the current release. If you experience problems, please add a comment to
this bug. Thank you for reporting this bug and we are sorry it could not be fixed.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9528556</commentid>
<comment_count>3</comment_count>
<who name="Göran Uddeborg">goeran</who>
<bug_when>2016-07-19 15:42:18 -0400</bug_when>
<thetext>I haven&apos;t tried recently myself, but Seth reported in comment 1 the problem remains in F23.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9538459</commentid>
<comment_count>4</comment_count>
<who name="Seth Jennings">sjenning</who>
<bug_when>2016-07-21 15:58:45 -0400</bug_when>
<thetext>Still the case in F24 as well</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9904061</commentid>
<comment_count>5</comment_count>
<who name="Dario Faggioli">raistlin</who>
<bug_when>2016-11-18 11:47:06 -0500</bug_when>
<thetext>Hi, I&apos;ve just tried installing Fedora 25 Beta both as a KVM and Xen (HVM) guest, and I see exactly the same. That&apos;s probably totally expected, as both uses qemu as graphic backend. Install (via the netinstall iso) goes just fine.
Then, with Wayland enabled and Cirrus as emulated graphic card, I don&apos;t see the login screen appearing, neither under Xen nor under KVM. If I keep Cirrus and disable Wayland (via /etc/gdm/custom.conf), both Xen and KVM guests works ok. If I keep
wayland and use a different graphic card (vga or qxl, for instance), both Xen and KVM guests works ok. Regards, Dario</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9904062</commentid>
<comment_count>6</comment_count>
<who name="Konrad Rzeszutek Wilk">ketuzsezr</who>
<bug_when>2016-11-18 11:47:06 -0500</bug_when>
<thetext>Ditton Fedora 25.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9907606</commentid>
<comment_count>7</comment_count>
<who name="Gerd Hoffmann">kraxel</who>
<bug_when>2016-11-21 04:23:37 -0500</bug_when>
<thetext>Most likely this is wayland not supporting 24bpp. No easy way out with cirrus as we mimic existing hardware. cirrus offers zero advantages over vga, except for old guests. With &quot;old&quot; as in same-age-as-physical-cirrus-hardware, i.e.
stuff designed in the 90ies, which might find the cirrus 2d bitops useful. So, just use vga and be happy. verbose version: https://www.kraxel.org/blog/2014/10/qemu-using-cirrus-considered-harmful/</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9908840</commentid>
<comment_count>8</comment_count>
<who name="Konrad Rzeszutek Wilk">ketuzsezr</who>
<bug_when>2016-11-21 10:25:37 -0500</bug_when>
<thetext>Gerd, Please don&apos;t just close the bug b/c &apos;likely&apos; there is an issue. T Lets figure out the technical parts of the issue. Perhaps Adam can share some clues on how to figure out what is going wrong, and what we can report and
look for? Independently of that if cirrus is not the way forward then work should be done to make sure that libvirt will pick the default stdvga instead of cirrus (both for Xen and KVM).</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9909116</commentid>
<comment_count>9</comment_count>
<who name="Gerd Hoffmann">kraxel</who>
<bug_when>2016-11-21 11:27:43 -0500</bug_when>
<thetext>&gt; Please don&apos;t just close the bug b/c &apos;likely&apos; there is an issue. Well, I would be *seriously* surprised if it is something else. cirrus being pretty much the only hardware still using 24bpp (at the 1024x768 default
resolution) leads to problems since years. There are (have been?) xorg rendering bugs showing up on cirrus only because of this. &gt; Lets figure out the technical parts of the issue. Perhaps Adam can share &gt; some clues on how to figure out what
is going wrong, and what we can report &gt; and look for? You can try whenever wayland runs @ 800x600. That is the largest resolution cirrus supports 32bpp at. &gt; Independently of that if cirrus is not the way forward then work should be &gt; done
to make sure that libvirt will pick the default stdvga instead of &gt; cirrus (both for Xen and KVM). qemu switched the default a while back (2.2 IIRC). A bunch of other management tools followed upstream qemu behavior, I don&apos;t have an overview
on the current state of all the tools though. Feel free to file bugs if you find tools still using cirrus by default for new installs. You can throw the link to the blog post at them ;)</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9909441</commentid>
<comment_count>10</comment_count>
<who name="Gerd Hoffmann">kraxel</who>
<bug_when>2016-11-21 13:10:01 -0500</bug_when>
<thetext>(In reply to Gerd Hoffmann from comment #9) &gt; &gt; Please don&apos;t just close the bug b/c &apos;likely&apos; there is an issue. &gt; &gt; Well, I would be *seriously* surprised if it is something else. To correct myself: Could also be
that wayland can&apos;t pageflip, due to cirrus not having enough video memory for two framebuffers. Or the kernel driver lacks pageflipping support. Or both. Which at the end of they day boils down to the same thing though: cirrus (virtual) hardware
is simply to old to run wayland.</thetext>
</long_desc>
<long_desc isprivate="0">
<commentid>9999854</commentid>
<comment_count>11</comment_count>
<who name="Göran Uddeborg">goeran</who>
<bug_when>2016-12-19 15:31:14 -0500</bug_when>
<thetext>I read Gerd&apos;s comments as still saying this won&apos;t be fixed. He/you didn&apos;t close the bug again, but I guess that was an oversight. I&apos;m putting it to rest.</thetext>
</long_desc>

</bug>

</bugzilla>
